(function(n){n.jgrid=n.jgrid||{};n.extend(n.jgrid,{htmlDecode:function(n){return n=="&nbsp;"||n=="&#160;"||n.length==1&&n.charCodeAt(0)==160?"":n?String(n).replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"'):n},htmlEncode:function(n){return n?String(n).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/\"/g,"&quot;"):n},format:function(t){var i=n.makeArray(arguments).slice(1);return t===undefined&&(t=""),t.replace(/\{(\d+)\}/g,function(n,t){return i[t]})},getCellIndex:function(t){var i=n(t);return i.is("tr")?-1:(i=(!i.is("td")&&!i.is("th")?i.closest("td,th"):i)[0],n.browser.msie)?n.inArray(i,i.parentNode.cells):i.cellIndex},stripHtml:function(n){n=n+"";return n?(n=n.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,""),n&&n!=="&nbsp;"&&n!=="&#160;"?n.replace(/\"/g,"'"):""):n},stringToDoc:function(n){var t,i;if(typeof n!="string")return n;try{i=new DOMParser;t=i.parseFromString(n,"text/xml")}catch(r){t=new ActiveXObject("Microsoft.XMLDOM");t.async=!1;t.loadXML(n)}return t&&t.documentElement&&t.documentElement.tagName!="parsererror"?t:null},parse:function(t){var i=t;return i.substr(0,9)=="while(1);"&&(i=i.substr(9)),i.substr(0,2)=="/*"&&(i=i.substr(2,i.length-4)),i||(i="{}"),n.jgrid.useJSON===!0&&typeof JSON=="object"&&typeof JSON.parse=="function"?JSON.parse(i):eval("("+i+")")},parseDate:function(t,i){var u={m:1,d:1,y:1970,h:0,i:0,s:0},r,s,f,e;if(i&&i!==null&&i!==undefined){i=n.trim(i);i=i.split(/[\\\/:_;.\t\T\s-]/);t=t.split(/[\\\/:_;.\t\T\s-]/);var h=n.jgrid.formatter.date.monthNames,o=n.jgrid.formatter.date.AmPm,c=function(n,t){return n===0?t==12&&(t=0):t!=12&&(t+=12),t};for(r=0,s=t.length;r<s;r++)t[r]=="M"&&(f=n.inArray(i[r],h),f!==-1&&f<12&&(i[r]=f+1)),t[r]=="F"&&(f=n.inArray(i[r],h),f!==-1&&f>11&&(i[r]=f+1-12)),t[r]=="a"&&(f=n.inArray(i[r],o),f!==-1&&f<2&&i[r]==o[f]&&(i[r]=f,u.h=c(i[r],u.h))),t[r]=="A"&&(f=n.inArray(i[r],o),f!==-1&&f>1&&i[r]==o[f]&&(i[r]=f-2,u.h=c(i[r],u.h))),i[r]!==undefined&&(u[t[r].toLowerCase()]=parseInt(i[r],10));u.m=parseInt(u.m,10)-1;e=u.y;e>=70&&e<=99?u.y=1900+u.y:e>=0&&e<=69&&(u.y=2e3+u.y)}return new Date(u.y,u.m,u.d,u.h,u.i,u.s,0)},jqID:function(n){return n=n+"",n.replace(/([\.\:\[\]])/g,"\\$1")},getAccessor:function(n,t){var i,f,r,u;if(typeof t=="function")return t(n);if(i=n[t],i===undefined)try{if(typeof t=="string"&&(r=t.split(".")),u=r.length,u)for(i=n;i&&u--;)f=r.shift(),i=i[f]}catch(e){}return i},ajaxOptions:{},from:function(t){var i=function(t,i){typeof t=="string"&&(t=n.data(t));var r=this,u=t,h=!0,f=!1,o=i,v=/[\$,%]/g,c=null,y=null,e=!1,a="",s=[],l=!0;if(typeof t=="object"&&t.push)t.length>0&&(l=typeof t[0]!="object"?!1:!0);else throw"data provides is not an array";return this._hasData=function(){return u===null?!1:u.length===0?!1:!0},this._getStr=function(n){var t=[];return f&&t.push("jQuery.trim("),t.push("String("+n+")"),f&&t.push(")"),h||t.push(".toLowerCase()"),t.join("")},this._strComp=function(n){return typeof n=="string"?".toString()":""},this._group=function(n,t){return{field:n.toString(),unique:t,items:[]}},this._toStr=function(t){return f&&(t=n.trim(t)),h||(t=t.toLowerCase()),t.toString().replace(new RegExp('\\"',"g"),'\\"')},this._funcLoop=function(t){var i=[];return n.each(u,function(n,r){i.push(t(r))}),i},this._append=function(n){o===null?o="":o+=a==""?" && ":a;e&&(o+="!");o+="("+n+")";e=!1;a=""},this._setCommand=function(n,t){c=n;y=t},this._resetNegate=function(){e=!1},this._repeatCommand=function(n,t){return c===null?r:n!=null&&t!=null?c(n,t):y===null?c(n):l?c(y,n):c(n)},this._equals=function(n,t){return r._compare(n,t,1)===0},this._compare=function(n,t,i){return(i===undefined&&(i=1),n===undefined&&(n=null),t===undefined&&(t=null),n===null&&t===null)?0:n===null&&t!==null?1:n!==null&&t===null?-1:(h||(n=n.toLowerCase(),t=t.toLowerCase()),n<t)?-i:n>t?i:0},this._performSort=function(){s.length!==0&&(u=r._doSort(u,0))},this._doSort=function(n,t){var h=s[t].by,c=s[t].dir,l=s[t].type,a=s[t].datefmt,f,e,i,o,u;if(t==s.length-1)return r._getOrder(n,h,c,l,a);for(t++,f=r._getGroup(n,h,c,l,a),e=[],i=0;i<f.length;i++)for(o=r._doSort(f[i].items,t),u=0;u<o.length;u++)e.push(o[u]);return e},this._getOrder=function(t,i,u,f,e){var c=[],h=[],p=u=="a"?1:-1,l,o,s,a,y;for(f===undefined&&(f="text"),a=f=="float"||f=="number"||f=="currency"||f=="numeric"?function(n){var t=parseFloat(String(n).replace(v,""));return isNaN(t)?0:t}:f=="int"||f=="integer"?function(n){return n?parseFloat(String(n).replace(v,"")):0}:f=="date"||f=="datetime"?function(t){return n.jgrid.parseDate(e,t).getTime()}:n.isFunction(f)?f:function(t){return t||(t=""),n.trim(String(t).toUpperCase())},n.each(t,function(t,r){o=n.jgrid.getAccessor(r,i);o===undefined&&(o="");o=a(o,r);h.push({vSort:o,index:t})}),h.sort(function(n,t){return n=n.vSort,t=t.vSort,r._compare(n,t,p)}),s=0,y=t.length;s<y;)l=h[s].index,c.push(t[l]),s++;return c},this._getGroup=function(t,i,u,f,e){var h=[],o=null,c=null,s;return n.each(r._getOrder(t,i,u,f,e),function(t,u){s=n.jgrid.getAccessor(u,i);s===undefined&&(s="");r._equals(c,s)||(c=s,o!=null&&h.push(o),o=r._group(i,s));o.items.push(u)}),o!=null&&h.push(o),h},this.ignoreCase=function(){return h=!1,r},this.useCase=function(){return h=!0,r},this.trim=function(){return f=!0,r},this.noTrim=function(){return f=!1,r},this.combine=function(t){var i=n.from(u);return h||i.ignoreCase(),f&&i.trim(),result=t(i).showQuery(),r._append(result),r},this.execute=function(){var t=o,i=[];return t===null?r:(n.each(u,function(){eval(t)&&i.push(this)}),u=i,r)},this.data=function(){return u},this.select=function(t){if(r._performSort(),!r._hasData())return[];if(r.execute(),n.isFunction(t)){var i=[];return n.each(u,function(n,r){i.push(t(r))}),i}return u},this.hasMatch=function(){return r._hasData()?(r.execute(),u.length>0):!1},this.showQuery=function(t){var i=o;return(i===null&&(i="no query found"),n.isFunction(t))?(t(i),r):i},this.andNot=function(n,t,i){return e=!e,r.and(n,t,i)},this.orNot=function(n,t,i){return e=!e,r.or(n,t,i)},this.not=function(n,t,i){return r.andNot(n,t,i)},this.and=function(n,t,i){return(a=" && ",n===undefined)?r:r._repeatCommand(n,t,i)},this.or=function(n,t,i){return(a=" || ",n===undefined)?r:r._repeatCommand(n,t,i)},this.isNot=function(n){return e=!e,r.is(n)},this.is=function(n){return r._append("this."+n),r._resetNegate(),r},this._compareValues=function(t,i,u,f,e){var s,o,h;s=l?"this."+i:"this";u===undefined&&(u=null);o=u===null?i:u;h=e.stype===undefined?"text":e.stype;switch(h){case"int":case"integer":o=isNaN(Number(o))?"0":o;s="parseInt("+s+",10)";o="parseInt("+o+",10)";break;case"float":case"number":case"numeric":o=String(o).replace(v,"");o=isNaN(Number(o))?"0":o;s="parseFloat("+s+")";o="parseFloat("+o+")";break;case"date":case"datetime":o=String(n.jgrid.parseDate(e.newfmt||"Y-m-d",o).getTime());s='jQuery.jgrid.parseDate("'+e.srcfmt+'",'+s+").getTime()";break;default:s=r._getStr(s);o=r._getStr('"'+r._toStr(o)+'"')}return r._append(s+" "+f+" "+o),r._setCommand(t,i),r._resetNegate(),r},this.equals=function(n,t,i){return r._compareValues(r.equals,n,t,"==",i)},this.greater=function(n,t,i){return r._compareValues(r.greater,n,t,">",i)},this.less=function(n,t,i){return r._compareValues(r.less,n,t,"<",i)},this.greaterOrEquals=function(n,t,i){return r._compareValues(r.greaterOrEquals,n,t,">=",i)},this.lessOrEquals=function(n,t,i){return r._compareValues(r.lessOrEquals,n,t,"<=",i)},this.startsWith=function(t,i){var e=i===undefined||i===null?t:i,u=f?n.trim(e.toString()).length:e.toString().length;return l?r._append(r._getStr("this."+t)+".substr(0,"+u+") == "+r._getStr('"'+r._toStr(i)+'"')):(u=f?n.trim(i.toString()).length:i.toString().length,r._append(r._getStr("this")+".substr(0,"+u+") == "+r._getStr('"'+r._toStr(t)+'"'))),r._setCommand(r.startsWith,t),r._resetNegate(),r},this.endsWith=function(t,i){var u=i===undefined||i===null?t:i,e=f?n.trim(u.toString()).length:u.toString().length;return l?r._append(r._getStr("this."+t)+".substr("+r._getStr("this."+t)+".length-"+e+","+e+') == "'+r._toStr(i)+'"'):r._append(r._getStr("this")+".substr("+r._getStr("this")+'.length-"'+r._toStr(t)+'".length,"'+r._toStr(t)+'".length) == "'+r._toStr(t)+'"'),r._setCommand(r.endsWith,t),r._resetNegate(),r},this.contains=function(n,t){return l?r._append(r._getStr("this."+n)+'.indexOf("'+r._toStr(t)+'",0) > -1'):r._append(r._getStr("this")+'.indexOf("'+r._toStr(n)+'",0) > -1'),r._setCommand(r.contains,n),r._resetNegate(),r},this.groupBy=function(n,t,i,f){return r._hasData()?r._getGroup(u,n,t,i,f):null},this.orderBy=function(t,i,u,f){return i=i===undefined||i===null?"a":n.trim(i.toString().toLowerCase()),(u===null||u===undefined)&&(u="text"),(f===null||f===undefined)&&(f="Y-m-d"),(i=="desc"||i=="descending")&&(i="d"),(i=="asc"||i=="ascending")&&(i="a"),s.push({by:t,dir:i,type:u,datefmt:f}),r},r};return new i(t,null)},extend:function(t){n.extend(n.fn.jqGrid,t);this.no_legacy_api||n.fn.extend(t)}});n.fn.jqGrid=function(t){var i,r;if(typeof t=="string"){if(i=n.jgrid.getAccessor(n.fn.jqGrid,t),!i)throw"jqGrid - No such method: "+t;return r=n.makeArray(arguments).slice(1),i.apply(this,r)}return this.each(function(){var u,r,f,o,i,p,ai,lt,at,kt,it,dt,rt,a,v,vt,yi;if(!this.grid){if(u=n.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:!1,rownumWidth:25,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],groupDataSorted:!1,summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus"}},n.jgrid.defaults,t||{}),r={headers:[],cols:[],footers:[],dragStart:function(t,i,r){this.resizing={idx:t,startX:i.clientX,sOL:r[0]};this.hDiv.style.cursor="col-resize";this.curGbox=n("#rs_m"+u.id,"#gbox_"+u.id);this.curGbox.css({display:"block",left:r[0],top:r[1],height:r[2]});n.isFunction(u.resizeStart)&&u.resizeStart.call(this,i,t);document.onselectstart=function(){return!1}},dragMove:function(n){if(this.resizing){var t=n.clientX-this.resizing.startX,i=this.headers[this.resizing.idx],f=u.direction==="ltr"?i.width+t:i.width-t,r,e;f>33&&(this.curGbox.css({left:this.resizing.sOL+t}),u.forceFit===!0?(r=this.headers[this.resizing.idx+u.nv],e=u.direction==="ltr"?r.width-t:r.width+t,e>33&&(i.newWidth=f,r.newWidth=e)):(this.newWidth=u.direction==="ltr"?u.tblwidth+t:u.tblwidth-t,i.newWidth=f))}},dragEnd:function(){if(this.hDiv.style.cursor="default",this.resizing){var t=this.resizing.idx,i=this.headers[t].newWidth||this.headers[t].width;i=parseInt(i,10);this.resizing=!1;n("#rs_m"+u.id).css("display","none");u.colModel[t].width=i;this.headers[t].width=i;this.headers[t].el.style.width=i+"px";this.cols[t].style.width=i+"px";this.footers.length>0&&(this.footers[t].style.width=i+"px");u.forceFit===!0?(i=this.headers[t+u.nv].newWidth||this.headers[t+u.nv].width,this.headers[t+u.nv].width=i,this.headers[t+u.nv].el.style.width=i+"px",this.cols[t+u.nv].style.width=i+"px",this.footers.length>0&&(this.footers[t+u.nv].style.width=i+"px"),u.colModel[t+u.nv].width=i):(u.tblwidth=this.newWidth||u.tblwidth,n("table:first",this.bDiv).css("width",u.tblwidth+"px"),n("table:first",this.hDiv).css("width",u.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,u.footerrow&&(n("table:first",this.sDiv).css("width",u.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft));n.isFunction(u.resizeStop)&&u.resizeStop.call(this,i,t)}this.curGbox=null;document.onselectstart=function(){return!0}},populateVisible:function(){var i;if(r.timer&&clearTimeout(r.timer),r.timer=null,i=n(r.bDiv).height(),i){var c=n("table:first",r.bDiv),v=n("> tbody > tr:gt(0):visible:first",c),l=v.outerHeight()||r.prevRowHeight;if(l){r.prevRowHeight=l;var y=u.rowNum,f=r.scrollTop=r.bDiv.scrollTop,e=Math.round(c.position().top)-f,o=e+c.height(),t=l*y,s,h,a;if(o<i&&e<=0&&(u.lastpage===undefined||parseInt((o+f+t-1)/t,10)<=u.lastpage)&&(h=parseInt((i-o+t-1)/t,10),o>=0||h<2||u.scroll===!0?(s=Math.round((o+f)/t)+1,e=-1):e=1),e>0&&(s=parseInt(f/t,10)+1,h=parseInt((f+i)/t,10)+2-s,a=!0),h){if(u.lastpage&&s>u.lastpage||u.lastpage==1)return;r.hDiv.loading?r.timer=setTimeout(r.populateVisible,u.scrollTimeout):(u.page=s,a&&(r.selectionPreserver(c[0]),r.emptyRows(r.bDiv,!1)),r.populate(h))}}}},scrollGrid:function(){if(u.scroll){var n=r.bDiv.scrollTop;r.scrollTop===undefined&&(r.scrollTop=0);n!=r.scrollTop&&(r.scrollTop=n,r.timer&&clearTimeout(r.timer),r.timer=setTimeout(r.populateVisible,u.scrollTimeout))}r.hDiv.scrollLeft=r.bDiv.scrollLeft;u.footerrow&&(r.sDiv.scrollLeft=r.bDiv.scrollLeft)},selectionPreserver:function(t){var i=t.p,u=i.selrow,r=i.selarrrow?n.makeArray(i.selarrrow):null,e=t.grid.bDiv.scrollLeft,f=i.gridComplete;i.gridComplete=function(){if(i.selrow=null,i.selarrrow=[],i.multiselect&&r&&r.length>0)for(var o=0;o<r.length;o++)r[o]!=u&&n(t).jqGrid("setSelection",r[o],!1);u&&n(t).jqGrid("setSelection",u,!1);t.grid.bDiv.scrollLeft=e;i.gridComplete=f;i.gridComplete&&f()}}},this.tagName!="TABLE"){alert("Element is not a table");return}if(this.p=u,this.p.colNames.length===0)for(f=0;f<this.p.colModel.length;f++)this.p.colNames[f]=this.p.colModel[f].label||this.p.colModel[f].name;if(this.p.colNames.length!==this.p.colModel.length){alert(n.jgrid.errors.model);return}var y=n("<div class='ui-jqgrid-view'><\/div>"),gt,ut=n.browser.msie?!0:!1,yt=n.browser.safari?!0:!1;i=this;i.p.direction=n.trim(i.p.direction.toLowerCase());n.inArray(i.p.direction,["ltr","rtl"])==-1&&(i.p.direction="ltr");o=i.p.direction;n(y).insertBefore(this);n(this).appendTo(y).removeClass("scroll");p=n("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'><\/div>");n(p).insertBefore(y).attr({id:"gbox_"+this.id,dir:o});n(y).appendTo(p).attr("id","gview_"+this.id);gt=ut&&n.browser.version<=6?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"><\/iframe>':"";n("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'><\/div>").append(gt).insertBefore(y);n("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"<\/div>").insertBefore(y);n(this).attr({cellSpacing:"0",cellPadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var b=function(n,t){return n=parseInt(n,10),isNaN(n)?t?t:0:n},k=function(t,u,f){var e=i.p.colModel[t],s=e.align,o='style="',h=e.classes,c=e.name;return s&&(o+="text-align:"+s+";"),e.hidden===!0&&(o+="display:none;"),u===0&&(o+="width: "+r.headers[t].width+"px;"),o+='"'+(h!==undefined?' class="'+h+'"':"")+(e.title&&f?' title="'+n.jgrid.stripHtml(f)+'"':""),o+(' aria-describedby="'+i.p.id+"_"+c+'"')},ni=function(t){return t===undefined||t===null||t===""?"&#160;":i.p.autoencode?n.jgrid.htmlEncode(t):t+""},ti=function(t,r,u,f,e){var o=i.p.colModel[u],s,h;return typeof o.formatter!="undefined"?(h={rowId:t,colModel:o,gid:i.p.id},s=n.isFunction(o.formatter)?o.formatter.call(i,r,h,f,e):n.fmatter?n.fn.fmatter(o.formatter,r,h,f,e):ni(r)):s=ni(r),s},pt=function(n,t,i,r,u){var f,e;return f=ti(n,t,i,u,"add"),e=k(i,r,f),'<td role="gridcell" '+e+">"+f+"<\/td>"},ii=function(n,t,r){var u='<input role="checkbox" type="checkbox" id="jqg_'+i.p.id+"_"+n+'" class="cbox" name="jqg_'+i.p.id+"_"+n+'"/>',f=k(t,r,"");return'<td role="gridcell" aria-describedby="'+i.p.id+'_cb" '+f+">"+u+"<\/td>"},ri=function(n,t,r,u){var f=(parseInt(r,10)-1)*parseInt(u,10)+1+t,e=k(n,t,"");return'<td role="gridcell" aria-describedby="'+i.p.id+'_rn" class="ui-state-default jqgrid-rownum" '+e+">"+f+"<\/td>"},ui=function(n){for(var t,u=[],f=0,r=0;r<i.p.colModel.length;r++)t=i.p.colModel[r],t.name!=="cb"&&t.name!=="subgrid"&&t.name!=="rn"&&(u[f]=n=="local"?t.name:n=="xml"?t.xmlmap||t.name:t.jsonmap||t.name,f++);return u},ft=function(t){var r=i.p.remapColumns;return r&&r.length||(r=n.map(i.p.colModel,function(n,t){return t})),t&&(r=n.map(r,function(n){return n<t?null:n-t})),r},d=function(t,r){if(i.p.deepempty)n("#"+i.p.id+" tbody:first tr:gt(0)").remove();else{var u=n("#"+i.p.id+" tbody:first tr:first")[0];n("#"+i.p.id+" tbody:first").empty().append(u)}r&&i.p.scroll&&(n(">div:first",t).css({height:"auto"}).children("div:first").css({height:0,display:"none"}),t.scrollTop=0)},wt=function(t,r,u,f,e){var ni=new Date,ut=i.p.datatype!="local"&&i.p.loadonce||i.p.datatype=="xmlstring",ht,ti=i.p.datatype=="local"?"local":"xml",rt,wt,kt,gt,at,st;if(ut&&(i.p.data=[],i.p._index={},i.p.localReader.id=ht="_id_"),i.p.reccount=0,n.isXMLDoc(t))i.p.treeANode!==-1||i.p.scroll?u=u>1?u:1:(d(r,!1),u=1);else return;var l,vt,k=0,y,ct,c=0,p=0,h=0,w,lt,nt=[],tt,o={},a,b,s=[],fi=i.p.altRows===!0?" "+i.p.altclass:"",yt;i.p.xmlReader.repeatitems||(nt=ui(ti));w=i.p.keyIndex===!1?i.p.xmlReader.id:i.p.keyIndex;nt.length>0&&!isNaN(w)&&(i.p.remapColumns&&i.p.remapColumns.length&&(w=n.inArray(w,i.p.remapColumns)),w=nt[w]);lt=(w+"").indexOf("[")===-1?nt.length?function(t,i){return n(w,t).text()||i}:function(t,r){return n(i.p.xmlReader.cell,t).eq(w).text()||r}:function(n,t){return n.getAttribute(w.replace(/[\[\]]/g,""))||t};i.p.userData={};n(i.p.xmlReader.page,t).each(function(){i.p.page=this.textContent||this.text||0});n(i.p.xmlReader.total,t).each(function(){i.p.lastpage=this.textContent||this.text;i.p.lastpage===undefined&&(i.p.lastpage=1)});n(i.p.xmlReader.records,t).each(function(){i.p.records=this.textContent||this.text||0});n(i.p.xmlReader.userdata,t).each(function(){i.p.userData[this.getAttribute("name")]=this.textContent||this.text});var et=n(i.p.xmlReader.root+" "+i.p.xmlReader.row,t),it=et.length,v=0;if(et&&it){rt=parseInt(i.p.rowNum,10);wt=i.p.scroll?(parseInt(i.p.page,10)-1)*rt+1:1;e&&(rt*=e+1);var ei=n.isFunction(i.p.afterInsertRow),ot={},dt="";for(i.p.grouping&&i.p.groupingView.groupCollapse===!0&&(dt=' style="display:none;"');v<it;){if(a=et[v],b=lt(a,wt+v),kt=u===0?0:u+1,yt=(kt+v)%2==1?fi:"",s.push("<tr"+dt+' id="'+b+'" role="row" class ="ui-widget-content jqgrow ui-row-'+i.p.direction+""+yt+'">'),i.p.rownumbers===!0&&(s.push(ri(0,v,i.p.page,i.p.rowNum)),h=1),i.p.multiselect===!0&&(s.push(ii(b,h,v)),c=1),i.p.subGrid===!0&&(s.push(n(i).jqGrid("addSubGridCell",c+h,v+u)),p=1),i.p.xmlReader.repeatitems)tt||(tt=ft(c+p+h)),st=n(i.p.xmlReader.cell,a),n.each(tt,function(n){var t=st[this];if(!t)return!1;y=t.textContent||t.text;o[i.p.colModel[n+c+p+h].name]=y;s.push(pt(b,y,n+c+p+h,v+u,a))});else for(l=0;l<nt.length;l++)y=n(nt[l],a).text(),o[i.p.colModel[l+c+p+h].name]=y,s.push(pt(b,y,l+c+p+h,v+u,a));if(s.push("<\/tr>"),i.p.grouping){for(gt=i.p.groupingView.groupField.length,at=[],z=0;z<gt;z++)at.push(o[i.p.groupingView.groupField[z]]);ot=n(i).jqGrid("groupingPrepare",s,at,ot,o);s=[]}if(ut&&(o[ht]=b,i.p.data.push(o)),i.p.gridview===!1){if(i.p.treeGrid===!0){vt=i.p.treeANode>=-1?i.p.treeANode:0;ct=n(s.join(""))[0];n(i.rows[v+vt+u]).after(ct);try{n(i).jqGrid("setTreeNode",o,ct)}catch(oi){}}else n("tbody:first",r).append(s.join(""));if(i.p.subGrid===!0)try{n(i).jqGrid("addSubGrid",i.rows[i.rows.length-1],c+h)}catch(si){}ei&&i.p.afterInsertRow.call(i,b,o,a);s=[]}if(o={},k++,v++,k==rt)break}}if(i.p.gridview===!0&&(i.p.grouping&&tt?(n(i).jqGrid("groupingRender",ot,tt.length+c+p+h),ot=null):n("tbody:first",r).append(s.join(""))),i.p.totaltime=new Date-ni,k>0&&i.p.records===0&&(i.p.records=it),s=null,i.p.treeGrid||i.p.scroll||(i.grid.bDiv.scrollTop=0),i.p.reccount=k,i.p.treeANode=-1,i.p.userDataOnFooter&&n(i).jqGrid("footerData","set",i.p.userData,!0),ut&&(i.p.records=it,i.p.lastpage=Math.ceil(it/rt)),f||bt(!1,!0),ut){while(k<it){if(a=et[k],b=lt(a,k),i.p.xmlReader.repeatitems)tt||(tt=ft(c+p+h)),st=n(i.p.xmlReader.cell,a),n.each(tt,function(n){var t=st[this];if(!t)return!1;y=t.textContent||t.text;o[i.p.colModel[n+c+p+h].name]=y});else for(l=0;l<nt.length;l++)y=n(nt[l],a).text(),o[i.p.colModel[l+c+p+h].name]=y;o[ht]=b;i.p.data.push(o);o={};k++}g()}},et=function(t,r,u,f,e){var fi=new Date,o,ct,lt,rt,st,yt,gt,ti,wt,it;if(t)i.p.treeANode!==-1||i.p.scroll?u=u>1?u:1:(d(r,!1),u=1);else return;rt=i.p.datatype!="local"&&i.p.loadonce||i.p.datatype=="jsonstring";rt&&(i.p.data=[],i.p._index={},ct=i.p.localReader.id="_id_");i.p.reccount=0;i.p.datatype=="local"?(o=i.p.localReader,lt="local"):(o=i.p.jsonReader,lt="json");var k=0,ut,a,v,at,et=[],y,h,b=0,nt=0,p=0,tt,ot,w,l={},kt,s,c=[],ei=i.p.altRows===!0?" "+i.p.altclass:"",dt,vt;if(i.p.page=n.jgrid.getAccessor(t,o.page)||0,vt=n.jgrid.getAccessor(t,o.total),i.p.lastpage=vt===undefined?1:vt,i.p.records=n.jgrid.getAccessor(t,o.records)||0,i.p.userData=n.jgrid.getAccessor(t,o.userdata)||{},o.repeatitems||(y=et=ui(lt)),w=i.p.keyIndex===!1?o.id:i.p.keyIndex,et.length>0&&!isNaN(w)&&(i.p.remapColumns&&i.p.remapColumns.length&&(w=n.inArray(w,i.p.remapColumns)),w=et[w]),ot=n.jgrid.getAccessor(t,o.root),ot){tt=ot.length;a=0;st=parseInt(i.p.rowNum,10);yt=i.p.scroll?(parseInt(i.p.page,10)-1)*st+1:1;e&&(st*=e+1);var oi=n.isFunction(i.p.afterInsertRow),ht={},ni="";for(i.p.grouping&&i.p.groupingView.groupCollapse===!0&&(ni=' style="display:none;"');a<tt;){for(h=ot[a],s=n.jgrid.getAccessor(h,w),s===undefined&&(s=yt+a,et.length===0&&o.cell&&(it=h[o.cell],s=it[w]||s,it=null)),gt=u===1?0:u,dt=(gt+a)%2==1?ei:"",c.push("<tr"+ni+' id="'+s+'" role="row" class= "ui-widget-content jqgrow ui-row-'+i.p.direction+""+dt+'">'),i.p.rownumbers===!0&&(c.push(ri(0,a,i.p.page,i.p.rowNum)),p=1),i.p.multiselect&&(c.push(ii(s,p,a)),b=1),i.p.subGrid&&(c.push(n(i).jqGrid("addSubGridCell",b+p,a+u)),nt=1),o.repeatitems&&(o.cell&&(h=n.jgrid.getAccessor(h,o.cell)),y||(y=ft(b+nt+p))),v=0;v<y.length;v++)ut=n.jgrid.getAccessor(h,y[v]),c.push(pt(s,ut,v+b+nt+p,a+u,h)),l[i.p.colModel[v+b+nt+p].name]=ut;if(c.push("<\/tr>"),i.p.grouping){for(ti=i.p.groupingView.groupField.length,wt=[],z=0;z<ti;z++)wt.push(l[i.p.groupingView.groupField[z]]);ht=n(i).jqGrid("groupingPrepare",c,wt,ht,l);c=[]}if(rt&&(l[ct]=s,i.p.data.push(l)),i.p.gridview===!1){if(i.p.treeGrid===!0){kt=i.p.treeANode>=-1?i.p.treeANode:0;at=n(c.join(""))[0];n(i.rows[a+kt+u]).after(at);try{n(i).jqGrid("setTreeNode",l,at)}catch(si){}}else n("#"+i.p.id+" tbody:first").append(c.join(""));if(i.p.subGrid===!0)try{n(i).jqGrid("addSubGrid",i.rows[i.rows.length-1],b+p)}catch(hi){}oi&&i.p.afterInsertRow.call(i,s,l,h);c=[]}if(l={},k++,a++,k==st)break}if(i.p.gridview===!0&&(i.p.grouping&&y?(n(i).jqGrid("groupingRender",ht,y.length+b+nt+p),ht=null):n("#"+i.p.id+" tbody:first").append(c.join(""))),i.p.totaltime=new Date-fi,k>0&&i.p.records===0&&(i.p.records=tt),c=null,i.p.treeGrid||i.p.scroll||(i.grid.bDiv.scrollTop=0),i.p.reccount=k,i.p.treeANode=-1,i.p.userDataOnFooter&&n(i).jqGrid("footerData","set",i.p.userData,!0),rt&&(i.p.records=tt,i.p.lastpage=Math.ceil(tt/st)),f||bt(!1,!0),rt){while(k<tt){if(h=ot[k],s=n.jgrid.getAccessor(h,w),s===undefined&&(s=yt+k,et.length===0&&o.cell&&(it=h[o.cell],s=it[w]||s,it=null)),h){for(o.repeatitems&&(o.cell&&(h=n.jgrid.getAccessor(h,o.cell)),y||(y=ft(b+nt+p))),v=0;v<y.length;v++)ut=n.jgrid.getAccessor(h,y[v]),l[i.p.colModel[v+b+nt+p].name]=ut;l[ct]=s;i.p.data.push(l);l={}}k++}g()}}},pi=function(){var f,y=!1,t=grtypes=[],l,a,o,s,u,e,v,k,r,p;if(i.p.data){if(o=i.p.grouping?i.p.groupingView:!1,n.each(i.p.colModel,function(){sorttype=this.sorttype||"text";sorttype=="date"||sorttype=="datetime"?(this.formatter&&typeof this.formatter=="string"&&this.formatter=="date"?(l=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:n.jgrid.formatter.date.srcformat,a=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:n.jgrid.formatter.date.newformat):l=a=this.datefmt||"Y-m-d",t[this.name]={stype:sorttype,srcfmt:l,newfmt:a}):t[this.name]={stype:sorttype,srcfmt:"",newfmt:""};i.p.grouping&&this.name==o.groupField[0]&&(grtypes[0]=t[this.name]);y||this.index!=i.p.sortname&&this.name!=i.p.sortname||(f=this.name,y=!0)}),i.p.treeGrid){n(i).jqGrid("SortTree",f,i.p.sortorder,t[f].stype,t[f].srcfmt);return}if(s={eq:function(n){return n.equals},ne:function(n){return n.not().equals},lt:function(n){return n.less},le:function(n){return n.lessOrEquals},gt:function(n){return n.greater},ge:function(n){return n.greaterOrEquals},cn:function(n){return n.contains},nc:function(n){return n.not().contains},bw:function(n){return n.startsWith},bn:function(n){return n.not().startsWith},en:function(n){return n.not().endsWith},ew:function(n){return n.endsWith},ni:function(n){return n.not().equals},"in":function(n){return n.equals}},u=n.jgrid.from(i.p.data),i.p.search===!0)if(e=i.p.postData.filters,e)for(typeof e=="string"&&(e=n.jgrid.parse(e)),v=0,k=e.rules.length;v<k;v++)r=e.rules[v],p=e.groupOp,s[r.op]&&r.field&&r.data&&p&&(u=p.toUpperCase()=="OR"?s[r.op](u)(r.field,r.data,t[r.field]).or():s[r.op](u)(r.field,r.data,t[r.field]));else try{u=s[i.p.postData.searchOper](u)(i.p.postData.searchField,i.p.postData.searchString,t[i.p.postData.searchField])}catch(nt){}i.p.grouping&&(u.orderBy(o.groupField[0],o.groupOrder[0],grtypes[0].stype,grtypes[0].srcfmt),o.groupDataSorted=!0);f&&i.p.sortorder&&y&&(i.p.sortorder.toUpperCase()=="DESC"?u.orderBy(i.p.sortname,"d",t[f].stype,t[f].srcfmt):u.orderBy(i.p.sortname,"a",t[f].stype,t[f].srcfmt));var h=u.select(),w=parseInt(i.p.rowNum,10),d=h.length,b=parseInt(i.p.page,10),g=Math.ceil(d/w),c={};return h=h.slice((b-1)*w,b*w),u=null,t=null,c[i.p.localReader.total]=g,c[i.p.localReader.page]=b,c[i.p.localReader.records]=d,c[i.p.localReader.root]=h,h=null,c}},bt=function(t,r){var e,v,u,h,o,c,s,f="",l,a,y,p;u=parseInt(i.p.page,10)-1;u<0&&(u=0);u=u*parseInt(i.p.rowNum,10);o=u+i.p.reccount;i.p.scroll&&(l=n("tbody:first > tr:gt(0)",i.grid.bDiv),u=o-l.length,i.p.reccount=l.length,a=l.outerHeight()||i.grid.prevRowHeight,a&&(y=u*a,p=parseInt(i.p.records,10)*a,n(">div:first",i.grid.bDiv).css({height:p}).children("div:first").css({height:y,display:y?"":"none"})),i.grid.bDiv.scrollLeft=i.grid.hDiv.scrollLeft);f=i.p.pager?i.p.pager:"";f+=i.p.toppager?f?","+i.p.toppager:i.p.toppager:"";f&&(s=n.jgrid.formatter.integer||{},e=b(i.p.page),v=b(i.p.lastpage),n(".selbox",f).attr("disabled",!1),i.p.pginput===!0&&(n(".ui-pg-input",f).val(i.p.page),n("#sp_1",f).html(n.fmatter?n.fmatter.util.NumberFormat(i.p.lastpage,s):i.p.lastpage)),i.p.viewrecords&&(i.p.reccount===0?n(".ui-paging-info",f).html(i.p.emptyrecords):(h=u+1,c=i.p.records,n.fmatter&&(h=n.fmatter.util.NumberFormat(h,s),o=n.fmatter.util.NumberFormat(o,s),c=n.fmatter.util.NumberFormat(c,s)),n(".ui-paging-info",f).html(n.jgrid.format(i.p.recordtext,h,o,c)))),i.p.pgbuttons===!0&&(e<=0&&(e=v=0),e==1||e===0?(n("#first, #prev",i.p.pager).addClass("ui-state-disabled").removeClass("ui-state-hover"),i.p.toppager&&n("#first_t, #prev_t",i.p.toppager).addClass("ui-state-disabled").removeClass("ui-state-hover")):(n("#first, #prev",i.p.pager).removeClass("ui-state-disabled"),i.p.toppager&&n("#first_t, #prev_t",i.p.toppager).removeClass("ui-state-disabled")),e==v||e===0?(n("#next, #last",i.p.pager).addClass("ui-state-disabled").removeClass("ui-state-hover"),i.p.toppager&&n("#next_t, #last_t",i.p.toppager).addClass("ui-state-disabled").removeClass("ui-state-hover")):(n("#next, #last",i.p.pager).removeClass("ui-state-disabled"),i.p.toppager&&n("#next_t, #last_t",i.p.toppager).removeClass("ui-state-disabled"))));t===!0&&i.p.rownumbers===!0&&n("td.jqgrid-rownum",i.rows).each(function(t){n(this).html(u+1+t)});r&&i.p.jqgdnd&&n(i).jqGrid("gridDnD","updateDnD");n.isFunction(i.p.gridComplete)&&i.p.gridComplete.call(i)},l=function(t){var f,o,s,c,a;if(!i.grid.hDiv.loading){var v=i.p.scroll&&t===!1,u={},h,e,r=i.p.prmNames;if(i.p.page<=0&&(i.p.page=1),r.search!==null&&(u[r.search]=i.p.search),r.nd!==null&&(u[r.nd]=(new Date).getTime()),r.rows!==null&&(u[r.rows]=i.p.rowNum),r.page!==null&&(u[r.page]=i.p.page),r.sort!==null&&(u[r.sort]=i.p.sortname),r.order!==null&&(u[r.order]=i.p.sortorder),i.p.rowTotal!==null&&r.totalrows!==null&&(u[r.totalrows]=i.p.rowTotal),f=i.p.loadComplete,o=n.isFunction(f),o||(f=null),s=0,t=t||1,t>1?r.npage!==null?(u[r.npage]=t,s=t-1,t=1):f=function(n){i.p.page++;i.grid.hDiv.loading=!1;o&&i.p.loadComplete.call(i,n);l(t-1)}:r.npage!==null&&delete i.p.postData[r.npage],i.p.grouping&&(n(i).jqGrid("groupingSetup"),i.p.groupingView.groupDataSorted==!0&&(u[r.sort]=i.p.groupingView.groupField[0]+" "+i.p.groupingView.groupOrder[0]+", "+u[r.sort])),n.extend(i.p.postData,u),c=i.p.scroll?i.rows.length-1:1,n.isFunction(i.p.datatype)){i.p.datatype.call(i,i.p.postData,"load_"+i.p.id);return}n.isFunction(i.p.beforeRequest)&&i.p.beforeRequest.call(i);h=i.p.datatype.toLowerCase();switch(h){case"json":case"jsonp":case"xml":case"script":n.ajax(n.extend({url:i.p.url,type:i.p.mtype,dataType:h,data:n.isFunction(i.p.serializeGridData)?i.p.serializeGridData.call(i,i.p.postData):i.p.postData,success:function(n){h==="xml"?wt(n,i.grid.bDiv,c,t>1,s):et(n,i.grid.bDiv,c,t>1,s);f&&f.call(i,n);v&&i.grid.populateVisible();(i.p.loadonce||i.p.treeGrid)&&(i.p.datatype="local");n=null;nt()},error:function(t,r,u){n.isFunction(i.p.loadError)&&i.p.loadError.call(i,t,r,u);nt();t=null},beforeSend:function(t){ot();n.isFunction(i.p.loadBeforeSend)&&i.p.loadBeforeSend.call(i,t)}},n.jgrid.ajaxOptions,i.p.ajaxGridOptions));break;case"xmlstring":ot();e=n.jgrid.stringToDoc(i.p.datastr);o&&i.p.loadComplete.call(i,e);wt(e,i.grid.bDiv);i.p.datatype="local";i.p.datastr=null;nt();break;case"jsonstring":ot();e=typeof i.p.datastr=="string"?n.jgrid.parse(i.p.datastr):i.p.datastr;o&&i.p.loadComplete.call(i,e);et(e,i.grid.bDiv);i.p.datatype="local";i.p.datastr=null;nt();break;case"local":case"clientside":ot();i.p.datatype="local";a=pi();et(a,i.grid.bDiv,c,t>1,s);f&&f.call(i,a);v&&i.grid.populateVisible();nt()}}},g=function(){for(var f=i.p.data.length,u,e=i.p.rownumbers===!0?1:0,o=i.p.multiselect===!0?1:0,s=i.p.subGrid===!0?1:0,r=i.p.keyIndex===!1||i.p.loadonce===!0?i.p.localReader.id:i.p.colModel[i.p.keyIndex+o+s+e].name,t=0;t<f;t++)u=n.jgrid.getAccessor(i.p.data[t],r),i.p._index[u]=t},ot=function(){if(i.grid.hDiv.loading=!0,!i.p.hiddengrid)switch(i.p.loadui){case"enable":n("#load_"+i.p.id).show();break;case"block":n("#lui_"+i.p.id).show();n("#load_"+i.p.id).show()}},nt=function(){i.grid.hDiv.loading=!1;switch(i.p.loadui){case"enable":n("#load_"+i.p.id).hide();break;case"block":n("#lui_"+i.p.id).hide();n("#load_"+i.p.id).hide()}},fi=function(t,r){var y="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'><\/span><\/td>",e="",u="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",s="",f,p,w,k,h,d,c,v=function(t){var r;return(n.isFunction(i.p.onPaging)&&(r=i.p.onPaging.call(i,t)),i.p.selrow=null,i.p.multiselect&&(i.p.selarrrow=[],n("#cb_"+n.jgrid.jqID(i.p.id),i.grid.hDiv).attr("checked",!1)),i.p.savedRow=[],r=="stop")?!1:!0},a;if(t=t.substr(1),f="pg_"+t,p=t+"_left",w=t+"_center",k=t+"_right",n("#"+t).append("<div id='"+f+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;' role='row'><tbody><tr><td id='"+p+"' align='left'><\/td><td id='"+w+"' align='center' style='white-space:pre;'><\/td><td id='"+k+"' align='right'><\/td><\/tr><\/tbody><\/table><\/div>").attr("dir","ltr"),i.p.rowList.length>0){for(s="<td dir='"+o+"'>",s+="<select class='ui-pg-selbox' role='listbox'>",c=0;c<i.p.rowList.length;c++)s+='<option role="option" value="'+i.p.rowList[c]+'"'+(i.p.rowNum==i.p.rowList[c]?' selected="selected"':"")+">"+i.p.rowList[c]+"<\/option>";s+="<\/select><\/td>"}o=="rtl"&&(u+=s);i.p.pginput===!0&&(e="<td dir='"+o+"'>"+n.jgrid.format(i.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1'><\/span>")+"<\/td>");i.p.pgbuttons===!0?(a=["first"+r,"prev"+r,"next"+r,"last"+r],o=="rtl"&&a.reverse(),u+="<td id='"+a[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'><\/span><\/td>",u+="<td id='"+a[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'><\/span><\/td>",u+=e!=""?y+e+y:"",u+="<td id='"+a[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'><\/span><\/td>",u+="<td id='"+a[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'><\/span><\/td>"):e!=""&&(u+=e);o=="ltr"&&(u+=s);u+="<\/tr><\/tbody><\/table>";i.p.viewrecords===!0&&n("td#"+t+"_"+i.p.recordpos,"#"+f).append("<div dir='"+o+"' style='text-align:"+i.p.recordpos+"' class='ui-paging-info'><\/div>");n("td#"+t+"_"+i.p.pagerpos,"#"+f).append(u);d=n(".ui-jqgrid").css("font-size")||"11px";n(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+d+";visibility:hidden;' ><\/div>");h=n(u).clone().appendTo("#testpg").width();n("#testpg").remove();h>0&&(e!=""&&(h+=50),n("td#"+t+"_"+i.p.pagerpos,"#"+f).width(h));i.p._nvtd=[];i.p._nvtd[0]=h?Math.floor((i.p.width-h)/2):Math.floor(i.p.width/3);i.p._nvtd[1]=0;u=null;n(".ui-pg-selbox","#"+f).bind("change",function(){return(i.p.page=Math.round(i.p.rowNum*(i.p.page-1)/this.value-.5)+1,i.p.rowNum=this.value,r?n(".ui-pg-selbox",i.p.pager).val(this.value):i.p.toppager&&n(".ui-pg-selbox",i.p.toppager).val(this.value),!v("records"))?!1:(l(),!1)});i.p.pgbuttons===!0&&(n(".ui-pg-button","#"+f).hover(function(){n(this).hasClass("ui-state-disabled")?this.style.cursor="default":(n(this).addClass("ui-state-hover"),this.style.cursor="pointer")},function(){n(this).hasClass("ui-state-disabled")||(n(this).removeClass("ui-state-hover"),this.style.cursor="default")}),n("#first"+r+", #prev"+r+", #next"+r+", #last"+r,"#"+t).click(function(){var n=b(i.p.page,1),t=b(i.p.lastpage,1),u=!1,o=!0,s=!0,f=!0,e=!0;if(t===0||t===1?(o=!1,s=!1,f=!1,e=!1):t>1&&n>=1?n===1?(o=!1,s=!1):n>1&&n<t||n===t&&(f=!1,e=!1):t>1&&n===0&&(f=!1,e=!1,n=t-1),this.id==="first"+r&&o&&(i.p.page=1,u=!0),this.id==="prev"+r&&s&&(i.p.page=n-1,u=!0),this.id==="next"+r&&f&&(i.p.page=n+1,u=!0),this.id==="last"+r&&e&&(i.p.page=t,u=!0),u){if(!v(this.id))return!1;l()}return!1}));i.p.pginput===!0&&n("input.ui-pg-input","#"+f).keypress(function(t){var r=t.charCode?t.charCode:t.keyCode?t.keyCode:0;return r==13?(i.p.page=n(this).val()>0?n(this).val():i.p.page,!v("user"))?!1:(l(),!1):this})},ei=function(t,r,u,f){var o,e,s;if(i.p.colModel[r].sortable&&!(i.p.savedRow.length>0)){if(u||(i.p.lastsort==r?i.p.sortorder=="asc"?i.p.sortorder="desc":i.p.sortorder=="desc"&&(i.p.sortorder="asc"):i.p.sortorder=i.p.colModel[r].firstsortorder||"asc",i.p.page=1),f)if(i.p.lastsort!=r||i.p.sortorder!=f||u)i.p.sortorder=f;else return;if(e=n("thead:first",i.grid.hDiv).get(0),n("tr th:eq("+i.p.lastsort+") span.ui-grid-ico-sort",e).addClass("ui-state-disabled"),n("tr th:eq("+i.p.lastsort+")",e).attr("aria-selected","false"),n("tr th:eq("+r+") span.ui-icon-"+i.p.sortorder,e).removeClass("ui-state-disabled"),n("tr th:eq("+r+")",e).attr("aria-selected","true"),i.p.viewsortcols[0]||i.p.lastsort!=r&&(n("tr th:eq("+i.p.lastsort+") span.s-ico",e).hide(),n("tr th:eq("+r+") span.s-ico",e).show()),t=t.substring(5),i.p.sortname=i.p.colModel[r].index||t,o=i.p.sortorder,n.isFunction(i.p.onSortCol)&&i.p.onSortCol.call(i,t,r,o)=="stop"){i.p.lastsort=r;return}i.p.datatype=="local"?i.p.deselectAfterSort&&n(i).jqGrid("resetSelection"):(i.p.selrow=null,i.p.multiselect&&n("#cb_"+n.jgrid.jqID(i.p.id),i.grid.hDiv).attr("checked",!1),i.p.selarrrow=[],i.p.savedRow=[]);i.p.scroll&&(s=i.grid.bDiv.scrollLeft,d(i.grid.bDiv,!0),i.grid.hDiv.scrollLeft=s);i.p.subGrid&&i.p.datatype=="local"&&n("td.sgexpanded","#"+i.p.id).each(function(){n(this).trigger("click")});l();i.p.lastsort=r;i.p.sortname!=t&&r&&(i.p.lastsort=r)}},wi=function(){var t=0,u=i.p.cellLayout,f=0,s,h=i.p.scrollOffset,c,l=!1,a,v=0,e=0,y=0,o;yt&&(u=0);n.each(i.p.colModel,function(){typeof this.hidden=="undefined"&&(this.hidden=!1);this.hidden===!1&&(t+=b(this.width,0),this.fixed?(v+=this.width,e+=this.width+u):f++,y++)});isNaN(i.p.width)?i.p.width=r.width=t:r.width=i.p.width;i.p.tblwidth=t;i.p.shrinkToFit===!1&&i.p.forceFit===!0&&(i.p.forceFit=!1);i.p.shrinkToFit===!0&&f>0&&(a=r.width-u*f-e,isNaN(i.p.height)||(a-=h,l=!0),t=0,n.each(i.p.colModel,function(n){this.hidden!==!1||this.fixed||(c=Math.round(a*this.width/(i.p.tblwidth-v)),this.width=c,t+=c,s=n)}),o=0,l?r.width-e-(t+u*f)!==h&&(o=r.width-e-(t+u*f)-h):l||Math.abs(r.width-e-(t+u*f))===1||(o=r.width-e-(t+u*f)),i.p.colModel[s].width+=o,i.p.tblwidth=t+o+v+y*u,i.p.tblwidth>i.p.width&&(i.p.colModel[s].width-=i.p.tblwidth-parseInt(i.p.width,10),i.p.tblwidth=i.p.width))},bi=function(n){for(var u=n,r=n,t=n+1;t<i.p.colModel.length;t++)if(i.p.colModel[t].hidden!==!0){r=t;break}return r-u},ki=function(t){var u,r={},f=yt?0:i.p.cellLayout;for(r[0]=r[1]=r[2]=0,u=0;u<=t;u++)i.p.colModel[u].hidden===!1&&(r[0]+=i.p.colModel[u].width+f);return i.p.direction=="rtl"&&(r[0]=i.p.width-r[0]),r[0]=r[0]-i.grid.bDiv.scrollLeft,n(i.grid.cDiv).is(":visible")&&(r[1]+=n(i.grid.cDiv).height()+parseInt(n(i.grid.cDiv).css("padding-top"),10)+parseInt(n(i.grid.cDiv).css("padding-bottom"),10)),i.p.toolbar[0]===!0&&(i.p.toolbar[1]=="top"||i.p.toolbar[1]=="both")&&(r[1]+=n(i.grid.uDiv).height()+parseInt(n(i.grid.uDiv).css("border-top-width"),10)+parseInt(n(i.grid.uDiv).css("border-bottom-width"),10)),i.p.toppager&&(r[1]+=n(i.grid.topDiv).height()+parseInt(n(i.grid.topDiv).css("border-bottom-width"),10)),r[2]+=n(i.grid.bDiv).height()+n(i.grid.hDiv).height(),r};for(this.p.id=this.id,n.inArray(i.p.multikey,["shiftKey","altKey","ctrlKey"])==-1&&(i.p.multikey=!1),i.p.keyIndex=!1,f=0;f<i.p.colModel.length;f++)if(i.p.colModel[f].key===!0){i.p.keyIndex=f;break}if(i.p.sortorder=i.p.sortorder.toLowerCase(),i.p.grouping===!0&&(i.p.scroll=!1,i.p.rownumbers=!1,i.p.subGrid=!1,i.p.treeGrid=!1,i.p.gridview=!0),this.p.treeGrid===!0){try{n(this).jqGrid("setTreeGrid")}catch(di){}i.p.datatype!="local"&&(i.p.localReader={id:"_id_"})}if(this.p.subGrid)try{n(i).jqGrid("setSubGrid")}catch(di){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:yt?i.p.multiselectWidth+i.p.cellLayout:i.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:i.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));i.p.xmlReader=n.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},i.p.xmlReader);i.p.jsonReader=n.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},i.p.jsonReader);i.p.localReader=n.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},i.p.localReader);i.p.scroll&&(i.p.pgbuttons=!1,i.p.pginput=!1,i.p.rowList=[]);i.p.data.length&&g();var c="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",oi,si,st,tt,ht,s,e,hi,ct,ci="",li="";if(i.p.shrinkToFit===!0&&i.p.forceFit===!0)for(f=i.p.colModel.length-1;f>=0;f--)if(!i.p.colModel[f].hidden){i.p.colModel[f].resizable=!1;break}for(i.p.viewsortcols[1]=="horizontal"&&(ci=" ui-i-asc",li=" ui-i-desc"),oi=ut?"class='ui-th-div-ie'":"",ct="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+ci+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+o+"'><\/span>",ct+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+li+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+o+"'><\/span><\/span>",f=0;f<this.p.colNames.length;f++)ai=i.p.headertitles?' title="'+n.jgrid.stripHtml(i.p.colNames[f])+'"':"",c+="<th id='"+i.p.id+"_"+i.p.colModel[f].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+o+"'"+ai+">",si=i.p.colModel[f].index||i.p.colModel[f].name,c+="<div id='jqgh_"+i.p.colModel[f].name+"' "+oi+">"+i.p.colNames[f],i.p.colModel[f].width=i.p.colModel[f].width?parseInt(i.p.colModel[f].width,10):150,typeof i.p.colModel[f].title!="boolean"&&(i.p.colModel[f].title=!0),si==i.p.sortname&&(i.p.lastsort=f),c+=ct+"<\/div><\/th>";if(c+="<\/tr><\/thead>",ct=null,n(this).append(c),n("thead tr:first th",this).hover(function(){n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")}),this.p.multiselect&&(lt=[],n("#cb_"+n.jgrid.jqID(i.p.id),this).bind("click",function(){this.checked?(n("[id^=jqg_"+i.p.id+"_]").attr("checked",!0),n(i.rows).each(function(t){t>0&&(n(this).hasClass("subgrid")||n(this).hasClass("jqgroup")||(n(this).addClass("ui-state-highlight").attr("aria-selected","true"),i.p.selarrrow[t]=i.p.selrow=this.id))}),at=!0,lt=[]):(n("[id^=jqg_"+i.p.id+"_]").attr("checked",!1),n(i.rows).each(function(t){n(this).hasClass("subgrid")||(n(this).removeClass("ui-state-highlight").attr("aria-selected","false"),lt[t]=this.id)}),i.p.selarrrow=[],i.p.selrow=null,at=!1);n.isFunction(i.p.onSelectAll)&&i.p.onSelectAll.call(i,at?i.p.selarrrow:lt,at)})),i.p.autowidth===!0&&(kt=n(p).innerWidth(),i.p.width=kt>0?kt:"nw"),wi(),n(p).css("width",r.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+i.p.id+"'>&#160;<\/div>"),n(y).css("width",r.width+"px"),c=n("thead:first",i).get(0),it="",i.p.footerrow&&(it+="<table role='grid' style='width:"+i.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+o+"'>"),dt=n("tr:first",c),rt="<tr class='jqgfirstrow' role='row' style='height:auto'>",i.p.disableClick=!1,n("th",dt).each(function(t){var f,u;st=i.p.colModel[t].width;typeof i.p.colModel[t].resizable=="undefined"&&(i.p.colModel[t].resizable=!0);i.p.colModel[t].resizable?(tt=document.createElement("span"),n(tt).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+o),n.browser.opera||n(tt).css("cursor","col-resize"),n(this).addClass(i.p.resizeclass)):tt="";n(this).css("width",st+"px").prepend(tt);f="";i.p.colModel[t].hidden&&(n(this).css("display","none"),f="display:none;");rt+="<td role='gridcell' style='height:0px;width:"+st+"px;"+f+"'>";r.headers[t]={width:st,el:this};ht=i.p.colModel[t].sortable;typeof ht!="boolean"&&(i.p.colModel[t].sortable=!0,ht=!0);u=i.p.colModel[t].name;u=="cb"||u=="subgrid"||u=="rn"||i.p.viewsortcols[2]&&n("div",this).addClass("ui-jqgrid-sortable");ht&&(i.p.viewsortcols[0]?(n("div span.s-ico",this).show(),t==i.p.lastsort&&n("div span.ui-icon-"+i.p.sortorder,this).removeClass("ui-state-disabled")):t==i.p.lastsort&&(n("div span.s-ico",this).show(),n("div span.ui-icon-"+i.p.sortorder,this).removeClass("ui-state-disabled")));i.p.footerrow&&(it+="<td role='gridcell' "+k(t,0,"")+">&#160;<\/td>")}).mousedown(function(t){if(n(t.target).closest("th>span.ui-jqgrid-resize").length==1){var u=n.jgrid.getCellIndex(this);return i.p.forceFit===!0&&(i.p.nv=bi(u)),r.dragStart(u,t,ki(u)),!1}}).click(function(t){var r,f,e,u,o;return i.p.disableClick?(i.p.disableClick=!1,!1):(r="th>div.ui-jqgrid-sortable",i.p.viewsortcols[2]||(r="th>div>span>span.ui-grid-ico-sort"),u=n(t.target).closest(r),u.length!=1)?void 0:(o=n.jgrid.getCellIndex(this),i.p.viewsortcols[2]||(f=!0,e=u.attr("sort")),ei(n("div",this)[0].id,o,f,e),!1)}),i.p.sortable&&n.fn.sortable)try{n(i).jqGrid("sortableColumns",dt)}catch(gi){}i.p.footerrow&&(it+="<\/tr><\/tbody><\/table>");rt+="<\/tr>";hi=document.createElement("tbody");this.appendChild(hi);n(this).addClass("ui-jqgrid-btable").append(rt);rt=null;var vi=n("<table class='ui-jqgrid-htable' style='width:"+i.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'><\/table>").append(c),h=i.p.caption&&i.p.hiddengrid===!0?!0:!1,w=n("<div class='ui-jqgrid-hbox"+(o=="rtl"?"-rtl":"")+"'><\/div>");c=null;r.hDiv=document.createElement("div");n(r.hDiv).css({width:r.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(w);n(w).append(vi);vi=null;h&&n(r.hDiv).hide();i.p.pager&&(typeof i.p.pager=="string"?i.p.pager.substr(0,1)!="#"&&(i.p.pager="#"+i.p.pager):i.p.pager="#"+n(i.p.pager).attr("id"),n(i.p.pager).css({width:r.width+"px"}).appendTo(p).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom"),h&&n(i.p.pager).hide(),fi(i.p.pager,""));i.p.cellEdit===!1&&i.p.hoverrows===!0&&n(i).bind("mouseover",function(t){return e=n(t.target).closest("tr.jqgrow"),n(e).attr("class")!=="subgrid"&&n(e).addClass("ui-state-hover"),!1}).bind("mouseout",function(t){return e=n(t.target).closest("tr.jqgrow"),n(e).removeClass("ui-state-hover"),!1});n(i).before(r.hDiv).click(function(t){var r,u;if((s=t.target,r=n(s).hasClass("cbox"),e=n(s,i.rows).closest("tr.jqgrow"),n(e).length===0)||(u=!0,n.isFunction(i.p.beforeSelectRow)&&(u=i.p.beforeSelectRow.call(i,e[0].id,t)),s.tagName=="A"||(s.tagName=="INPUT"||s.tagName=="TEXTAREA"||s.tagName=="OPTION"||s.tagName=="SELECT")&&!r))return this;if(u===!0){if(i.p.cellEdit===!0)if(i.p.multiselect&&r)n(i).jqGrid("setSelection",e[0].id,!0);else{a=e[0].rowIndex;v=n.jgrid.getCellIndex(s);try{n(i).jqGrid("editCell",a,v,!0)}catch(f){}}else i.p.multikey?t[i.p.multikey]?n(i).jqGrid("setSelection",e[0].id,!0):i.p.multiselect&&r&&(r=n("[id^=jqg_"+i.p.id+"_]").attr("checked"),n("[id^=jqg_"+i.p.id+"_]").attr("checked",!r)):i.p.multiselect&&i.p.multiboxonly?r?n(i).jqGrid("setSelection",e[0].id,!0):(n(i.p.selarrrow).each(function(t,r){var u=i.rows.namedItem(r);n(u).removeClass("ui-state-highlight");n("#jqg_"+i.p.id+"_"+n.jgrid.jqID(r)).attr("checked",!1)}),i.p.selarrrow=[],n("#cb_"+n.jgrid.jqID(i.p.id),i.grid.hDiv).attr("checked",!1),n(i).jqGrid("setSelection",e[0].id,!0)):n(i).jqGrid("setSelection",e[0].id,!0);n.isFunction(i.p.onCellSelect)&&(a=e[0].id,v=n.jgrid.getCellIndex(s),i.p.onCellSelect.call(i,a,v,n(s).html(),t));t.stopPropagation()}else return this}).bind("reloadGrid",function(t,r){if(i.p.treeGrid===!0&&(i.p.datatype=i.p.treedatatype),r&&r.current&&i.grid.selectionPreserver(i),i.p.datatype=="local"?(n(i).jqGrid("resetSelection"),i.p.data.length&&g()):i.p.treeGrid||(i.p.selrow=null,i.p.multiselect&&(i.p.selarrrow=[],n("#cb_"+n.jgrid.jqID(i.p.id),i.grid.hDiv).attr("checked",!1)),i.p.savedRow=[]),i.p.scroll&&d(i.grid.bDiv,!0),r&&r.page){var u=r.page;u>i.p.lastpage&&(u=i.p.lastpage);u<1&&(u=1);i.p.page=u;i.grid.bDiv.scrollTop=i.grid.prevRowHeight?(u-1)*i.grid.prevRowHeight*i.p.rowNum:0}return i.grid.prevRowHeight&&i.p.scroll?(delete i.p.lastpage,i.grid.populateVisible()):i.grid.populate(),!1});n.isFunction(this.p.ondblClickRow)&&n(this).dblclick(function(t){return(s=t.target,e=n(s,i.rows).closest("tr.jqgrow"),n(e).length===0)?!1:(a=e[0].rowIndex,v=n.jgrid.getCellIndex(s),i.p.ondblClickRow.call(i,n(e).attr("id"),a,v,t),!1)});n.isFunction(this.p.onRightClickRow)&&n(this).bind("contextmenu",function(t){return(s=t.target,e=n(s,i.rows).closest("tr.jqgrow"),n(e).length===0)?!1:(i.p.multiselect||n(i).jqGrid("setSelection",e[0].id,!0),a=e[0].rowIndex,v=n.jgrid.getCellIndex(s),i.p.onRightClickRow.call(i,n(e).attr("id"),a,v,t),!1)});r.bDiv=document.createElement("div");n(r.bDiv).append(n('<div style="position:relative;'+(ut&&n.browser.version<8?"height:0.01%;":"")+'"><\/div>').append("<div><\/div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:i.p.height+(isNaN(i.p.height)?"":"px"),width:r.width+"px"}).scroll(r.scrollGrid);n("table:first",r.bDiv).css({width:i.p.tblwidth+"px"});ut?(n("tbody",this).size()==2&&n("tbody:gt(0)",this).remove(),i.p.multikey&&n(r.bDiv).bind("selectstart",function(){return!1})):i.p.multikey&&n(r.bDiv).bind("mousedown",function(){return!1});h&&n(r.bDiv).hide();r.cDiv=document.createElement("div");vt=i.p.hidegrid===!0?n("<a role='link' href='javascript:void(0)'/>").addClass("ui-jqgrid-titlebar-close HeaderButton").hover(function(){vt.addClass("ui-state-hover")},function(){vt.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'><\/span>").css(o=="rtl"?"left":"right","0px"):"";n(r.cDiv).append(vt).append("<span class='ui-jqgrid-title"+(o=="rtl"?"-rtl":"")+"'>"+i.p.caption+"<\/span>").addClass("ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix");n(r.cDiv).insertBefore(r.hDiv);i.p.toolbar[0]&&(r.uDiv=document.createElement("div"),i.p.toolbar[1]=="top"?n(r.uDiv).insertBefore(r.hDiv):i.p.toolbar[1]=="bottom"&&n(r.uDiv).insertAfter(r.hDiv),i.p.toolbar[1]=="both"?(r.ubDiv=document.createElement("div"),n(r.uDiv).insertBefore(r.hDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),n(r.ubDiv).insertAfter(r.hDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id),h&&n(r.ubDiv).hide()):n(r.uDiv).width(r.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),h&&n(r.uDiv).hide());i.p.toppager&&(i.p.toppager=i.p.id+"_toppager",r.topDiv=n("<div id='"+i.p.toppager+"'><\/div>")[0],i.p.toppager="#"+i.p.toppager,n(r.topDiv).insertBefore(r.hDiv).addClass("ui-state-default ui-jqgrid-toppager").width(r.width),fi(i.p.toppager,"_t"));i.p.footerrow&&(r.sDiv=n("<div class='ui-jqgrid-sdiv'><\/div>")[0],w=n("<div class='ui-jqgrid-hbox"+(o=="rtl"?"-rtl":"")+"'><\/div>"),n(r.sDiv).append(w).insertAfter(r.hDiv).width(r.width),n(w).append(it),r.footers=n(".ui-jqgrid-ftable",r.sDiv)[0].rows[0].cells,i.p.rownumbers&&(r.footers[0].className="ui-state-default jqgrid-rownum"),h&&n(r.sDiv).hide());w=null;i.p.caption?(yi=i.p.datatype,i.p.hidegrid===!0&&(n(".ui-jqgrid-titlebar-close",r.cDiv).click(function(t){var u=n.isFunction(i.p.onHeaderClick);return i.p.gridstate=="visible"?(n(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+i.p.id).slideUp("fast"),i.p.pager&&n(i.p.pager).slideUp("fast"),i.p.toppager&&n(i.p.toppager).slideUp("fast"),i.p.toolbar[0]===!0&&(i.p.toolbar[1]=="both"&&n(r.ubDiv).slideUp("fast"),n(r.uDiv).slideUp("fast")),i.p.footerrow&&n(".ui-jqgrid-sdiv","#gbox_"+i.p.id).slideUp("fast"),n("span",this).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),i.p.gridstate="hidden",n("#gbox_"+i.p.id).hasClass("ui-resizable")&&n(".ui-resizable-handle","#gbox_"+i.p.id).hide(),u&&(h||i.p.onHeaderClick.call(i,i.p.gridstate,t))):i.p.gridstate=="hidden"&&(n(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+i.p.id).slideDown("fast"),i.p.pager&&n(i.p.pager).slideDown("fast"),i.p.toppager&&n(i.p.toppager).slideDown("fast"),i.p.toolbar[0]===!0&&(i.p.toolbar[1]=="both"&&n(r.ubDiv).slideDown("fast"),n(r.uDiv).slideDown("fast")),i.p.footerrow&&n(".ui-jqgrid-sdiv","#gbox_"+i.p.id).slideDown("fast"),n("span",this).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),h&&(i.p.datatype=yi,l(),h=!1),i.p.gridstate="visible",n("#gbox_"+i.p.id).hasClass("ui-resizable")&&n(".ui-resizable-handle","#gbox_"+i.p.id).show(),u&&i.p.onHeaderClick.call(i,i.p.gridstate,t)),!1}),h&&(i.p.datatype="local",n(".ui-jqgrid-titlebar-close",r.cDiv).trigger("click")))):n(r.cDiv).hide();n(r.hDiv).after(r.bDiv).mousemove(function(n){if(r.resizing)return r.dragMove(n),!1});n(".ui-jqgrid-labels",r.hDiv).bind("selectstart",function(){return!1});n(document).mouseup(function(){return r.resizing?(r.dragEnd(),!1):!0});i.formatCol=k;i.sortData=ei;i.updatepager=bt;i.refreshIndex=g;i.formatter=function(n,t,i,r,u){return ti(n,t,i,r,u)};n.extend(r,{populate:l,emptyRows:d});this.grid=r;i.addXmlData=function(n){wt(n,i.grid.bDiv)};i.addJSONData=function(n){et(n,i.grid.bDiv)};this.grid.cols=this.rows[0].cells;l();i.p.hiddengrid=!1;n(window).unload(function(){i=null})}})};n.jgrid.extend({getGridParam:function(n){var t=this[0];if(t&&t.grid)return n?typeof t.p[n]!="undefined"?t.p[n]:null:t.p},setGridParam:function(t){return this.each(function(){this.grid&&typeof t=="object"&&n.extend(!0,this.p,t)})},getDataIDs:function(){var r=[],t=0,i,u=0;return this.each(function(){if(i=this.rows.length,i&&i>0)while(t<i)n(this.rows[t]).hasClass("jqgrow")&&(r[u]=this.rows[t].id,u++),t++}),r},setSelection:function(t,i){return this.each(function(){function h(t){var f=n(r.grid.bDiv)[0].clientHeight,i=n(r.grid.bDiv)[0].scrollTop,u=r.rows[t].offsetTop,e=r.rows[t].clientHeight;u+e>=f+i?n(r.grid.bDiv)[0].scrollTop=u-(f+i)+e+i:u<f+i&&u<i&&(n(r.grid.bDiv)[0].scrollTop=u)}var r=this,f,u,e,o,s;t!==undefined&&(i=i===!1?!1:!0,u=r.rows.namedItem(t+""),u)&&(r.p.scrollrows===!0&&(e=r.rows.namedItem(t).rowIndex,e>=0&&h(e)),r.p.multiselect?(r.p.selrow=u.id,o=n.inArray(r.p.selrow,r.p.selarrrow),o===-1?(u.className!=="ui-subgrid"&&n(u).addClass("ui-state-highlight").attr("aria-selected","true"),f=!0,n("#jqg_"+r.p.id+"_"+n.jgrid.jqID(r.p.selrow)).attr("checked",f),r.p.selarrrow.push(r.p.selrow),r.p.onSelectRow&&i&&r.p.onSelectRow.call(r,r.p.selrow,f)):(u.className!=="ui-subgrid"&&n(u).removeClass("ui-state-highlight").attr("aria-selected","false"),f=!1,n("#jqg_"+r.p.id+"_"+n.jgrid.jqID(r.p.selrow)).attr("checked",f),r.p.selarrrow.splice(o,1),r.p.onSelectRow&&i&&r.p.onSelectRow.call(r,r.p.selrow,f),s=r.p.selarrrow[0],r.p.selrow=s===undefined?null:s)):u.className!=="ui-subgrid"&&(r.p.selrow&&n(r.rows.namedItem(r.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),r.p.selrow=u.id,n(u).addClass("ui-state-highlight").attr("aria-selected","true"),r.p.onSelectRow&&i&&r.p.onSelectRow.call(r,r.p.selrow,!0)))})},resetSelection:function(){return this.each(function(){var t=this,i;t.p.multiselect?(n(t.p.selarrrow).each(function(r,u){i=t.rows.namedItem(u);n(i).removeClass("ui-state-highlight").attr("aria-selected","false");n("#jqg_"+t.p.id+"_"+n.jgrid.jqID(u)).attr("checked",!1)}),n("#cb_"+n.jgrid.jqID(t.p.id)).attr("checked",!1),t.p.selarrrow=[]):t.p.selrow&&(n("#"+t.p.id+" tbody:first tr#"+n.jgrid.jqID(t.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),t.p.selrow=null);t.p.savedRow=[]})},getRowData:function(t){var i={},r,u=!1,f,e=0;return this.each(function(){var s=this,o,h;if(typeof t=="undefined")u=!0,r=[],f=s.rows.length;else{if(h=s.rows.namedItem(t),!h)return i;f=2}while(e<f)u&&(h=s.rows[e]),n(h).hasClass("jqgrow")&&(n("td",h).each(function(t){if(o=s.p.colModel[t].name,o!=="cb"&&o!=="subgrid"&&o!=="rn")if(s.p.treeGrid===!0&&o==s.p.ExpandColumn)i[o]=n.jgrid.htmlDecode(n("span:first",this).html());else try{i[o]=n.unformat(this,{rowId:h.id,colModel:s.p.colModel[t]},t)}catch(r){i[o]=n.jgrid.htmlDecode(n(this).html())}}),u&&(r.push(i),i={})),e++}),r?r:i},delRowData:function(t){var r=!1,i,u,f;return this.each(function(){var e=this,o,s;if(i=e.rows.namedItem(t),i)f=i.rowIndex,n(i).remove(),e.p.records--,e.p.reccount--,e.updatepager(!0,!1),r=!0,e.p.multiselect&&(u=n.inArray(t,e.p.selarrrow),u!=-1&&e.p.selarrrow.splice(u,1)),t==e.p.selrow&&(e.p.selrow=null);else return!1;e.p.datatype=="local"&&(o=e.p._index[t],typeof o!="undefined"&&(e.p.data.splice(o,1),e.refreshIndex()));e.p.altRows===!0&&r&&(s=e.p.altclass,n(e.rows).each(function(t){t%2==1?n(this).addClass(s):n(this).removeClass(s)}))}),r},setRowData:function(t,i,r){var u,f=!0,e;return this.each(function(){var c;if(!this.grid)return!1;var o=this,h,s,a=typeof r,l={};if(s=o.rows.namedItem(t),!s)return!1;if(i)try{n(this.p.colModel).each(function(r){u=this.name;i[u]!==undefined&&(l[u]=this.formatter&&typeof this.formatter=="string"&&this.formatter=="date"?n.unformat.date(i[u],this):i[u],h=o.formatter(t,i[u],r,i,"edit"),e=this.title?{title:n.jgrid.stripHtml(h)}:{},o.p.treeGrid===!0&&u==o.p.ExpandColumn?n("td:eq("+r+") > span:first",s).html(h).attr(e):n("td:eq("+r+")",s).html(h).attr(e))});o.p.datatype=="local"&&(c=o.p._index[t],typeof c!="undefined"&&(o.p.data[c]=n.extend(!0,o.p.data[c],l)),l=null)}catch(v){f=!1}f&&(a==="string"?n(s).addClass(r):a==="object"&&n(s).css(r))}),f},addRowData:function(t,i,r,u){r||(r="last");var d=!1,h,f,c,k,s,e,l,y,a="",p,w,b,o,v;return i&&(n.isArray(i)?(p=!0,r="last",w=t):(i=[i],p=!1),this.each(function(){var g=this,rt=i.length;s=g.p.rownumbers===!0?1:0;c=g.p.multiselect===!0?1:0;k=g.p.subGrid===!0?1:0;p||(typeof t!="undefined"?t=t+"":(t=g.p.records+1+"",g.p.keyIndex!==!1&&(w=g.p.colModel[g.p.keyIndex+c+k+s].name,typeof i[0][w]!="undefined"&&(t=i[0][w]))));b=g.p.altclass;for(var nt=0,it="",tt={},ut=n.isFunction(g.p.afterInsertRow)?!0:!1;nt<rt;){if(o=i[nt],f="",p){try{t=o[w]}catch(ft){t=g.p.records+1+""}it=g.p.altRows===!0?(g.rows.length-1)%2==0?b:"":""}for(s&&(a=g.formatCol(0,1,""),f+='<td role="gridcell" aria-describedby="'+g.p.id+'_rn" class="ui-state-default jqgrid-rownum" '+a+">0<\/td>"),c&&(y='<input role="checkbox" type="checkbox" id="jqg_'+g.p.id+"_"+t+'" class="cbox"/>',a=g.formatCol(s,1,""),f+='<td role="gridcell" aria-describedby="'+g.p.id+'_cb" '+a+">"+y+"<\/td>"),k&&(f+=n(g).jqGrid("addSubGridCell",c+s,1)),l=c+k+s;l<g.p.colModel.length;l++)v=g.p.colModel[l],h=v.name,tt[h]=v.formatter&&typeof v.formatter=="string"&&v.formatter=="date"?n.unformat.date(o[h],v):o[h],y=g.formatter(t,n.jgrid.getAccessor(o,h),l,o,"edit"),a=g.formatCol(l,1,y),f+='<td role="gridcell" aria-describedby="'+g.p.id+"_"+h+'" '+a+">"+y+"<\/td>";if(f='<tr id="'+t+'" role="row" class="ui-widget-content jqgrow ui-row-'+g.p.direction+" "+it+'">'+f+"<\/tr>",g.p.subGrid===!0&&(f=n(f)[0],n(g).jqGrid("addSubGrid",f,c+s)),g.rows.length===0)n("table:first",g.grid.bDiv).append(f);else switch(r){case"last":n(g.rows[g.rows.length-1]).after(f);break;case"first":n(g.rows[0]).after(f);break;case"after":e=g.rows.namedItem(u);e&&(n(g.rows[e.rowIndex+1]).hasClass("ui-subgrid")?n(g.rows[e.rowIndex+1]).after(f):n(e).after(f));break;case"before":e=g.rows.namedItem(u);e&&(n(e).before(f),e=e.rowIndex)}g.p.records++;g.p.reccount++;ut&&g.p.afterInsertRow.call(g,t,o,o);nt++;g.p.datatype=="local"&&(g.p._index[t]=g.p.data.length,g.p.data.push(tt),tt={})}g.p.altRows!==!0||p||(r=="last"?(g.rows.length-1)%2==1&&n(g.rows[g.rows.length-1]).addClass(b):n(g.rows).each(function(t){t%2==1?n(this).addClass(b):n(this).removeClass(b)}));g.updatepager(!0,!0);d=!0})),d},footerData:function(t,i,r){function s(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0}var u,f=!1,e={},o;return typeof t=="undefined"&&(t="get"),typeof r!="boolean"&&(r=!0),t=t.toLowerCase(),this.each(function(){var h=this,c;if(!h.grid||!h.p.footerrow||t=="set"&&s(i))return!1;f=!0;n(this.p.colModel).each(function(s){u=this.name;t=="set"?i[u]!==undefined&&(c=r?h.formatter("",i[u],s,i,"edit"):i[u],o=this.title?{title:n.jgrid.stripHtml(c)}:{},n("tr.footrow td:eq("+s+")",h.grid.sDiv).html(c).attr(o),f=!0):t=="get"&&(e[u]=n("tr.footrow td:eq("+s+")",h.grid.sDiv).html())})}),t=="get"?e:f},ShowHideCol:function(t,i){return this.each(function(){var r=this,f=!1,u;r.grid&&(typeof t=="string"&&(t=[t]),i=i!="none"?"":"none",u=i==""?!0:!1,n(this.p.colModel).each(function(e){n.inArray(this.name,t)!==-1&&this.hidden===u&&(n("tr",r.grid.hDiv).each(function(){n("th:eq("+e+")",this).css("display",i)}),n(r.rows).each(function(t){n("td:eq("+e+")",r.rows[t]).css("display",i)}),r.p.footerrow&&n("td:eq("+e+")",r.grid.sDiv).css("display",i),i=="none"?r.p.tblwidth-=this.width+r.p.cellLayout:r.p.tblwidth+=this.width,this.hidden=!u,f=!0)}),f===!0&&(n("table:first",r.grid.hDiv).width(r.p.tblwidth),n("table:first",r.grid.bDiv).width(r.p.tblwidth),r.grid.hDiv.scrollLeft=r.grid.bDiv.scrollLeft,r.p.footerrow&&(n("table:first",r.grid.sDiv).width(r.p.tblwidth),r.grid.sDiv.scrollLeft=r.grid.bDiv.scrollLeft),r.p.shrinkToFit===!0&&n(r).jqGrid("setGridWidth",r.grid.width-.001,!0)))})},hideCol:function(t){return this.each(function(){n(this).jqGrid("ShowHideCol",t,"none")})},showCol:function(t){return this.each(function(){n(this).jqGrid("ShowHideCol",t,"")})},remapColumns:function(t,i,r){function f(i){var r;r=i.length?n.makeArray(i):n.extend({},i);n.each(t,function(n){i[n]=r[this]})}function e(i,r){n(">tr"+(r||""),i).each(function(){var i=this,r=n.makeArray(i.cells);n.each(t,function(){var n=r[this];n&&i.appendChild(n)})})}var u=this.get(0);f(u.p.colModel);f(u.p.colNames);f(u.grid.headers);e(n("thead:first",u.grid.hDiv),r&&":not(.ui-jqgrid-labels)");i&&e(n("#"+u.p.id+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot");u.p.footerrow&&e(n("tbody:first",u.grid.sDiv));u.p.remapColumns&&(u.p.remapColumns.length?f(u.p.remapColumns):u.p.remapColumns=n.makeArray(t));u.p.lastsort=n.inArray(u.p.lastsort,t);u.p.treeGrid&&(u.p.expColInd=n.inArray(u.p.expColInd,t))},setGridWidth:function(t,i){return this.each(function(){var y,b;if(this.grid){var r=this,u,f=0,o=r.p.cellLayout,e,s=0,p=!1,l=r.p.scrollOffset,a,h=0,v=0,w=0,c;if((typeof i!="boolean"&&(i=r.p.shrinkToFit),!isNaN(t))&&(t=parseInt(t,10),r.grid.width=r.p.width=t,n("#gbox_"+r.p.id).css("width",t+"px"),n("#gview_"+r.p.id).css("width",t+"px"),n(r.grid.bDiv).css("width",t+"px"),n(r.grid.hDiv).css("width",t+"px"),r.p.pager&&n(r.p.pager).css("width",t+"px"),r.p.toppager&&n(r.p.toppager).css("width",t+"px"),r.p.toolbar[0]===!0&&(n(r.grid.uDiv).css("width",t+"px"),r.p.toolbar[1]=="both"&&n(r.grid.ubDiv).css("width",t+"px")),r.p.footerrow&&n(r.grid.sDiv).css("width",t+"px"),i===!1&&r.p.forceFit===!0&&(r.p.forceFit=!1),i===!0)){if(n.browser.safari&&(o=0),n.each(r.p.colModel,function(){this.hidden===!1&&(f+=parseInt(this.width,10),this.fixed?(v+=this.width,h+=this.width+o):s++,w++)}),s===0)return;r.p.tblwidth=f;a=t-o*s-h;isNaN(r.p.height)||(n(r.grid.bDiv)[0].clientHeight<n(r.grid.bDiv)[0].scrollHeight||r.rows.length===1)&&(p=!0,a-=l);f=0;y=r.grid.cols.length>0;n.each(r.p.colModel,function(n){if(this.hidden===!1&&!this.fixed){if(u=Math.round(a*this.width/(r.p.tblwidth-v)),u<0)return;this.width=u;f+=u;r.grid.headers[n].width=u;r.grid.headers[n].el.style.width=u+"px";r.p.footerrow&&(r.grid.footers[n].style.width=u+"px");y&&(r.grid.cols[n].style.width=u+"px");e=n}});c=0;p?t-h-(f+o*s)!==l&&(c=t-h-(f+o*s)-l):Math.abs(t-h-(f+o*s))!==1&&(c=t-h-(f+o*s));r.p.colModel[e].width+=c;r.p.tblwidth=f+c+v+o*w;r.p.tblwidth>t?(b=r.p.tblwidth-parseInt(t,10),r.p.tblwidth=t,u=r.p.colModel[e].width=r.p.colModel[e].width-b):u=r.p.colModel[e].width;r.grid.headers[e].width=u;r.grid.headers[e].el.style.width=u+"px";y&&(r.grid.cols[e].style.width=u+"px");n("table:first",r.grid.bDiv).css("width",r.p.tblwidth+"px");n("table:first",r.grid.hDiv).css("width",r.p.tblwidth+"px");r.grid.hDiv.scrollLeft=r.grid.bDiv.scrollLeft;r.p.footerrow&&(r.grid.footers[e].style.width=u+"px",n("table:first",r.grid.sDiv).css("width",r.p.tblwidth+"px"))}}})},setGridHeight:function(t){return this.each(function(){var i=this;i.grid&&(n(i.grid.bDiv).css({height:t+(isNaN(t)?"":"px")}),i.p.height=t,i.p.scroll&&i.grid.populateVisible())})},setCaption:function(t){return this.each(function(){this.p.caption=t;n("span.ui-jqgrid-title",this.grid.cDiv).html(t);n(this.grid.cDiv).show()})},setLabel:function(t,i,r,u){return this.each(function(){var o=this,e=-1,f,s;o.grid&&(isNaN(t)?n(o.p.colModel).each(function(n){if(this.name==t)return e=n,!1}):e=parseInt(t,10),e>=0&&(f=n("tr.ui-jqgrid-labels th:eq("+e+")",o.grid.hDiv),i&&(s=n(".s-ico",f),n("[id^=jqgh_]",f).empty().html(i).append(s),o.p.colNames[e]=i),r&&(typeof r=="string"?n(f).addClass(r):n(f).css(r)),typeof u=="object"&&n(f).attr(u)))})},setCell:function(t,i,r,u,f,e){return this.each(function(){var o=this,s=-1,l,v,a,h,c,y;o.grid&&(isNaN(i)?n(o.p.colModel).each(function(n){if(this.name==i)return s=n,!1}):s=parseInt(i,10),s>=0&&(a=o.rows.namedItem(t),a&&(h=n("td:eq("+s+")",a),(r!==""||e===!0)&&(l=o.formatter(t,r,s,a,"edit"),v=o.p.colModel[s].title?{title:n.jgrid.stripHtml(l)}:{},o.p.treeGrid&&n(".tree-wrap",n(h)).length>0?n("span",n(h)).html(l).attr(v):n(h).html(l).attr(v),o.p.datatype=="local"&&(c=o.p.colModel[s],r=c.formatter&&typeof c.formatter=="string"&&c.formatter=="date"?n.unformat.date(r,c):r,y=o.p._index[t],y&&(o.p.data[y][c.name]=r))),typeof u=="string"?n(h).addClass(u):u&&n(h).css(u),typeof f=="object"&&n(h).attr(f))))})},getCell:function(t,i){var r=!1;return this.each(function(){var e=this,u=-1,f;if(e.grid&&(isNaN(i)?n(e.p.colModel).each(function(n){if(this.name===i)return u=n,!1}):u=parseInt(i,10),u>=0&&(f=e.rows.namedItem(t),f)))try{r=n.unformat(n("td:eq("+u+")",f),{rowId:f.id,colModel:e.p.colModel[u]},u)}catch(o){r=n.jgrid.htmlDecode(n("td:eq("+u+")",f).html())}}),r},getCol:function(t,i,r){var u=[],f,e=0;return i=typeof i!="boolean"?!1:i,typeof r=="undefined"&&(r=!1),this.each(function(){var o=this,h=-1,c,s;if(o.grid&&(isNaN(t)?n(o.p.colModel).each(function(n){if(this.name===t)return h=n,!1}):h=parseInt(t,10),h>=0&&(c=o.rows.length,s=0,c&&c>0))){while(s<c){if(n(o.rows[s]).hasClass("jqgrow")){try{f=n.unformat(n(o.rows[s].cells[h]),{rowId:o.rows[s].id,colModel:o.p.colModel[h]},h)}catch(l){f=n.jgrid.htmlDecode(o.rows[s].cells[h].innerHTML)}r?e+=parseFloat(f):i?u.push({id:o.rows[s].id,value:f}):u[s]=f}s++}if(r)switch(r.toLowerCase()){case"sum":u=e;break;case"avg":u=e/c;break;case"count":u=c}}}),u},clearGridData:function(t){return this.each(function(){var i=this,r;i.grid&&(typeof t!="boolean"&&(t=!1),i.p.deepempty?n("#"+i.p.id+" tbody:first tr:gt(0)").remove():(r=n("#"+i.p.id+" tbody:first tr:first")[0],n("#"+i.p.id+" tbody:first").empty().append(r)),i.p.footerrow&&t&&n(".ui-jqgrid-ftable td",i.grid.sDiv).html("&#160;"),i.p.selrow=null,i.p.selarrrow=[],i.p.savedRow=[],i.p.records=0,i.p.page="0",i.p.lastpage="0",i.p.reccount=0,i.p.data=[],i.p_index={},i.updatepager(!0,!1))})},getInd:function(n,t){var r=!1,i;return this.each(function(){i=this.rows.namedItem(n);i&&(r=t===!0?i:i.rowIndex)}),r}})})(jQuery)