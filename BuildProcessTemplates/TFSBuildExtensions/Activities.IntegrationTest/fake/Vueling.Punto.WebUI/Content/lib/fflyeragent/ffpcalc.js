function reset(){$("group").selectedIndex=0;$("origin").selectedIndex=0;$("destination").selectedIndex=0;$("buyDate").value="";$("flightDate").value="";$("amount").value="";$("action").selectedIndex=0;$("points").innerHTML=""}function submit(){if(validate()){var n={group:$("group")[$("group").selectedIndex].text,origin:$("origin").value,destination:$("destination").value,buyDate:$("buyDate").value,flightDate:$("flightDate").value,amount:$("amount").value,action:$("action").value};$("points").innerHTML="<em>Calculando ...<\/em>";Ext.Ajax.request({url:ajaxUrl,params:n,success:function(n){respObj=Ext.decode(n.responseText);$("points").innerHTML=respObj.points==0?"Ninguna promoción coincide con los parámetros introducidos":respObj.points},failure:function(){$("points").innerHTML="Error calculando los puntos !"}})}}function checkField(n,t){return emptyBool=!1,emptyBool=n.selectedIndex!=null&&n.selectedIndex!=undefined?n.selectedIndex==0:n.value.length==0,emptyBool&&showError(t,n),!emptyBool}function validate(){return returnValue=!0,checkField($("origin"),"Debe seleccionar un origen válido")&&checkField($("destination"),"Debe seleccionar un destino válido")&&checkField($("buyDate"),"Debe seleccionar una fecha de compra válida")&&checkField($("flightDate"),"Debe seleccionar una fecha de vuelo válida")&&checkCurrency($("amount"),"Debe seleccionar un importe válido")||(returnValue=!1),$("origin").value==$("destination").value&&$("destination").selectedIndex>0&&(showError("Los aeropuertos de origen y destino deben ser diferentes",$("origin"),$("destination")),returnValue=!1),$("buyDate").value.length>0&&$("flightDate").value.length>0&&compareDates($("buyDate").value,$("flightDate").value)==-1&&(showError("La fecha de compra no puede ser mayor que la fecha del vuelo",$("buyDate"),$("flightDate")),returnValue=!1),returnValue}Ext.onReady(function(){var n=new Ext.Button({text:"Calcular",renderTo:"btnCalculate",minWidth:120,handler:submit}),t=new Ext.Button({text:"Reset",renderTo:"btnReset",minWidth:120,handler:reset})})