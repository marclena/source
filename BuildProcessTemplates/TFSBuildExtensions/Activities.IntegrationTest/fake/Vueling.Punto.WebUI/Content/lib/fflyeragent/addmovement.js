function validate(){returnValue=!0;checkField($("ProductCode"),"Debe especificar un código de producto")&&checkNatural($("Points"),"Debe especificar un valor numérico positivo")&&checkCurrency($("Tariff"),"Debe especificar una tarifa válda")&&checkField($("Expire"),"Debe seleccionar una fecha válida")||(returnValue=!1);var n=new Date,t=n.getMonth()+1,i=n.getDate(),r=n.getFullYear();return currentDate=i+"/"+t+"/"+r,compareDates($("Expire").value,currentDate)!=-1&&(showError("La fecha de expiración debe ser mayor que la fecha actual",$("Expire")),returnValue=!1),returnValue}function showhide(n){var t=document.getElementById(n).style;t.visibility=params.IsBlockedUser==!1&&params.UserType?"visible":"hidden"}Ext.onReady(function(){showhide("UserTypeHeader1");showhide("UserTypeValue1");var n=new Ext.Button({text:"Añadir",renderTo:"btnSubmit",tabIndex:1,minWidth:120,handler:function(){if(!validate())return!1;var n={ProductType:$("ProductType").value,ProductCode:$("ProductCode").value,Points:$("Points").value,Concept:$("Concept").value,Tariff:$("Tariff").value,Expire:$("Expire").value,Status:$("Status").value};Ext.Ajax.request({url:params.UrlStore,params:n,success:function(n){respObj=Ext.decode(n.responseText);respObj.success?(alert("El movimiento se ha guardado correctamente"),document.location.href=params.UrlMovements):alert(respObj.errorMsg)},failure:function(n){n!=null&&n!=undefined&&n.length>0?(respObj=Ext.decode(n.responseText),alert(respObj.errorMsg)):alert("Ocurrió un error desconocido intentando guardar el movimiento")}})}}),t=new Ext.Button({text:"Regresar a movimientos",renderTo:"btnReturn",tabIndex:2,minWidth:120,handler:function(){document.location.href=params.UrlMovements}}),i=new Ext.Button({text:"Regresar al perfil",renderTo:"btnProfile",tabIndex:3,minWidth:120,handler:function(){document.location.href=params.UrlProfile}})})