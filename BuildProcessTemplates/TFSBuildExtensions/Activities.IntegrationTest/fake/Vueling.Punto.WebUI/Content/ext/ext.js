Ext={version:"2.0.1"};window.undefined=window.undefined;Ext.apply=function(n,t,i){if(i&&Ext.apply(n,i),n&&t&&typeof t=="object")for(var r in t)n[r]=t[r];return n},function(){var s=0,n=navigator.userAgent.toLowerCase(),u=document.compatMode=="CSS1Compat",r=n.indexOf("opera")>-1,f=/webkit|khtml/.test(n),t=!r&&n.indexOf("msie")>-1,i=!r&&n.indexOf("msie 7")>-1,e=!f&&n.indexOf("gecko")>-1,h=t&&!u,c=n.indexOf("windows")!=-1||n.indexOf("win32")!=-1,o=n.indexOf("macintosh")!=-1||n.indexOf("mac os x")!=-1,l=n.indexOf("linux")!=-1,a=window.location.href.toLowerCase().indexOf("https")===0;if(t&&!i)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(v){}Ext.apply(Ext,{isStrict:u,isSecure:a,isReady:!1,enableGarbageCollector:!0,enableListenerCollection:!1,SSL_SECURE_URL:"javascript:false",BLANK_IMAGE_URL:"http://extjs.com/s.gif",emptyFn:function(){},applyIf:function(n,t){if(n&&t)for(var i in t)typeof n[i]=="undefined"&&(n[i]=t[i]);return n},addBehaviors:function(n){var t,u,r,i;if(!Ext.isReady){Ext.onReady(function(){Ext.addBehaviors(n)});return}t={};for(u in n)if(r=u.split("@"),r[1]){i=r[0];t[i]||(t[i]=Ext.select(i));t[i].on(r[1],n[u])}t=null},id:function(n,t){t=t||"ext-gen";n=Ext.getDom(n);var i=t+ ++s;return n?n.id?n.id:n.id=i:i},extend:function(){var n=function(n){for(var t in n)this[t]=n[t]};return function(t,i,r){typeof i=="object"&&(r=i,i=t,t=function(){i.apply(this,arguments)});var e=function(){},f,u=i.prototype;return e.prototype=u,f=t.prototype=new e,f.constructor=t,t.superclass=u,u.constructor==Object.prototype.constructor&&(u.constructor=i),t.override=function(n){Ext.override(t,n)},f.override=n,Ext.override(t,r),t}}(),override:function(n,t){var r,i;if(t){r=n.prototype;for(i in t)r[i]=t[i]}},namespace:function(){for(var f=arguments,i=null,n,t,u,r=0;r<f.length;++r)for(t=f[r].split("."),u=t[0],eval("if (typeof "+u+' == "undefined"){'+u+" = {};} o = "+u+";"),n=1;n<t.length;++n)i[t[n]]=i[t[n]]||{},i=i[t[n]]},urlEncode:function(n){var t,f,r,o;if(!n)return"";t=[];for(f in n){var i=n[f],u=encodeURIComponent(f),e=typeof i;if(e=="undefined")t.push(u,"=&");else if(e!="function"&&e!="object")t.push(u,"=",encodeURIComponent(i),"&");else if(i instanceof Array)if(i.length)for(r=0,o=i.length;r<o;r++)t.push(u,"=",encodeURIComponent(i[r]===undefined?"":i[r]),"&");else t.push(u,"=&")}return t.pop(),t.join("")},urlDecode:function(n,t){var i,e,o,r,u,f,s;if(!n||!n.length)return{};for(i={},e=n.split("&"),f=0,s=e.length;f<s;f++)o=e[f].split("="),r=decodeURIComponent(o[0]),u=decodeURIComponent(o[1]),t!==!0?typeof i[r]=="undefined"?i[r]=u:typeof i[r]=="string"?(i[r]=[i[r]],i[r].push(u)):i[r].push(u):i[r]=u;return i},each:function(n,t,i){(typeof n.length=="undefined"||typeof n=="string")&&(n=[n]);for(var r=0,u=n.length;r<u;r++)if(t.call(i||n[r],n[r],r,n)===!1)return r},combine:function(){for(var n,r=arguments,u=r.length,t=[],i=0;i<u;i++)n=r[i],n instanceof Array?t=t.concat(n):n.length===undefined||n.substr?t.push(n):t=t.concat(Array.prototype.slice.call(n,0));return t},escapeRe:function(n){return n.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},callback:function(n,t,i,r){typeof n=="function"&&(r?n.defer(r,t,i||[]):n.apply(t,i||[]))},getDom:function(n){return!n||!document?null:n.dom?n.dom:typeof n=="string"?document.getElementById(n):n},getDoc:function(){return Ext.get(document)},getBody:function(){return Ext.get(document.body||document.documentElement)},getCmp:function(n){return Ext.ComponentMgr.get(n)},num:function(n,t){return typeof n!="number"?t:n},destroy:function(){for(var n,t=0,i=arguments,r=i.length;t<r;t++)if(n=i[t],n){if(n.dom){n.removeAllListeners();n.remove();continue}typeof n.destroy=="function"&&n.destroy()}},removeNode:t?function(){var n;return function(t){t&&(n=n||document.createElement("div"),n.appendChild(t),n.innerHTML="")}}():function(n){n&&n.parentNode&&n.parentNode.removeChild(n)},type:function(n){if(n===undefined||n===null)return!1;if(n.htmlElement)return"element";var t=typeof n;if(t=="object"&&n.nodeName)switch(n.nodeType){case 1:return"element";case 3:return/\S/.test(n.nodeValue)?"textnode":"whitespace"}if(t=="object"||t=="function"){switch(n.constructor){case Array:return"array";case RegExp:return"regexp"}if(typeof n.length=="number"&&typeof n.item=="function")return"nodelist"}return t},isEmpty:function(n,t){return n===null||n===undefined||(t?!1:n==="")},value:function(n,t,i){return Ext.isEmpty(n,i)?t:n},isOpera:r,isSafari:f,isIE:t,isIE6:t&&!i,isIE7:i,isGecko:e,isBorderBox:h,isLinux:l,isWindows:c,isMac:o,isAir:!!window.air,useShims:t&&!i||e&&o});Ext.ns=Ext.namespace}();Ext.ns("Ext","Ext.util","Ext.grid","Ext.dd","Ext.tree","Ext.data","Ext.form","Ext.menu","Ext.state","Ext.lib","Ext.layout","Ext.app","Ext.ux");Ext.apply(Function.prototype,{createCallback:function(){var n=arguments,t=this;return function(){return t.apply(window,n)}},createDelegate:function(n,t,i){var r=this;return function(){var u=t||arguments,f;return i===!0?(u=Array.prototype.slice.call(arguments,0),u=u.concat(t)):typeof i=="number"&&(u=Array.prototype.slice.call(arguments,0),f=[i,0].concat(t),Array.prototype.splice.apply(u,f)),r.apply(n||window,u)}},defer:function(n,t,i,r){var u=this.createDelegate(t,i,r);return n?setTimeout(u,n):(u(),0)},createSequence:function(n,t){if(typeof n!="function")return this;var i=this;return function(){var r=i.apply(this||window,arguments);return n.apply(t||this||window,arguments),r}},createInterceptor:function(n,t){if(typeof n!="function")return this;var i=this;return function(){if(n.target=this,n.method=i,n.apply(t||this||window,arguments)!==!1)return i.apply(this||window,arguments)}}});Ext.applyIf(String,{escape:function(n){return n.replace(/('|\\)/g,"\\$1")},leftPad:function(n,t,i){var r=new String(n);for(i||(i=" ");r.length<t;)r=i+r;return r.toString()},format:function(n){var t=Array.prototype.slice.call(arguments,1);return n.replace(/\{(\d+)\}/g,function(n,i){return t[i]})}});String.prototype.toggle=function(n,t){return this==n?t:n};String.prototype.trim=function(){var n=/^\s+|\s+$/g;return function(){return this.replace(n,"")}}();Ext.applyIf(Number.prototype,{constrain:function(n,t){return Math.min(Math.max(this,n),t)}});Ext.applyIf(Array.prototype,{indexOf:function(n){for(var t=0,i=this.length;t<i;t++)if(this[t]==n)return t;return-1},remove:function(n){var t=this.indexOf(n);return t!=-1&&this.splice(t,1),this}});Date.prototype.getElapsed=function(n){return Math.abs((n||new Date).getTime()-this.getTime())},function(){function n(n){return t||(t=new Ext.Element.Flyweight),t.dom=n,t}var t;if(Ext.lib.Dom={getViewWidth:function(n){return n?this.getDocumentWidth():this.getViewportWidth()},getViewHeight:function(n){return n?this.getDocumentHeight():this.getViewportHeight()},getDocumentHeight:function(){var n=document.compatMode!="CSS1Compat"?document.body.scrollHeight:document.documentElement.scrollHeight;return Math.max(n,this.getViewportHeight())},getDocumentWidth:function(){var n=document.compatMode!="CSS1Compat"?document.body.scrollWidth:document.documentElement.scrollWidth;return Math.max(n,this.getViewportWidth())},getViewportHeight:function(){var n=self.innerHeight,t=document.compatMode;return(t||Ext.isIE)&&!Ext.isOpera&&(n=t=="CSS1Compat"?document.documentElement.clientHeight:document.body.clientHeight),n},getViewportWidth:function(){var n=self.innerWidth,t=document.compatMode;return(t||Ext.isIE)&&(n=t=="CSS1Compat"?document.documentElement.clientWidth:document.body.clientWidth),n},isAncestor:function(n,t){if(n=Ext.getDom(n),t=Ext.getDom(t),!n||!t)return!1;if(n.contains&&!Ext.isSafari)return n.contains(t);if(n.compareDocumentPosition)return!!(n.compareDocumentPosition(t)&16);for(var i=t.parentNode;i;){if(i==n)return!0;if(!i.tagName||i.tagName.toUpperCase()=="HTML")return!1;i=i.parentNode}return!1},getRegion:function(n){return Ext.lib.Region.getRegion(n)},getY:function(n){return this.getXY(n)[1]},getX:function(n){return this.getXY(n)[0]},getXY:function(t){var i,o,s,h,f=document.body||document.documentElement,r,u,e,c,l,a;if(t=Ext.getDom(t),t==f)return[0,0];if(t.getBoundingClientRect)return s=t.getBoundingClientRect(),h=n(document).getScroll(),[s.left+h.left,s.top+h.top];for(r=0,u=0,i=t,e=n(t).getStyle("position")=="absolute";i;)r+=i.offsetLeft,u+=i.offsetTop,e||n(i).getStyle("position")!="absolute"||(e=!0),Ext.isGecko&&(o=n(i),c=parseInt(o.getStyle("borderTopWidth"),10)||0,l=parseInt(o.getStyle("borderLeftWidth"),10)||0,r+=l,u+=c,i!=t&&o.getStyle("overflow")!="visible"&&(r+=l,u+=c)),i=i.offsetParent;for(Ext.isSafari&&e&&(r-=f.offsetLeft,u-=f.offsetTop),Ext.isGecko&&!e&&(a=n(f),r+=parseInt(a.getStyle("borderLeftWidth"),10)||0,u+=parseInt(a.getStyle("borderTopWidth"),10)||0),i=t.parentNode;i&&i!=f;)Ext.isOpera&&(i.tagName=="TR"||n(i).getStyle("display")=="inline")||(r-=i.scrollLeft,u-=i.scrollTop),i=i.parentNode;return[r,u]},setXY:function(n,t){n=Ext.fly(n,"_setXY");n.position();var i=n.translatePoints(t);t[0]!==!1&&(n.dom.style.left=i.left+"px");t[1]!==!1&&(n.dom.style.top=i.top+"px")},setX:function(n,t){this.setXY(n,[t,!1])},setY:function(n,t){this.setXY(n,[!1,t])}},Ext.lib.Event={getPageX:function(n){return Event.pointerX(n.browserEvent||n)},getPageY:function(n){return Event.pointerY(n.browserEvent||n)},getXY:function(n){return n=n.browserEvent||n,[Event.pointerX(n),Event.pointerY(n)]},getTarget:function(n){return Event.element(n.browserEvent||n)},resolveTextNode:function(n){return n&&3==n.nodeType?n.parentNode:n},getRelatedTarget:function(n){n=n.browserEvent||n;var t=n.relatedTarget;return t||(n.type=="mouseout"?t=n.toElement:n.type=="mouseover"&&(t=n.fromElement)),this.resolveTextNode(t)},on:function(n,t,i){Event.observe(n,t,i,!1)},un:function(n,t,i){Event.stopObserving(n,t,i,!1)},purgeElement:function(){},preventDefault:function(n){n=n.browserEvent||n;n.preventDefault?n.preventDefault():n.returnValue=!1},stopPropagation:function(n){n=n.browserEvent||n;n.stopPropagation?n.stopPropagation():n.cancelBubble=!0},stopEvent:function(n){Event.stop(n.browserEvent||n)},onAvailable:function(n,t,i){var u=new Date,r,f=function(){u.getElapsed()>1e4&&clearInterval(r);var f=document.getElementById(n);f&&(clearInterval(r),t.call(i||window,f))};r=setInterval(f,50)}},Ext.lib.Ajax=function(){var n=function(n){return n.success?function(t){n.success.call(n.scope||window,{responseText:t.responseText,responseXML:t.responseXML,argument:n.argument})}:Ext.emptyFn},t=function(n){return n.failure?function(t){n.failure.call(n.scope||window,{responseText:t.responseText,responseXML:t.responseXML,argument:n.argument})}:Ext.emptyFn};return{request:function(i,r,u,f,e){var o={method:i,parameters:f||"",timeout:u.timeout,onSuccess:n(u),onFailure:t(u)};e&&(e.headers&&(o.requestHeaders=e.headers),e.xmlData&&(i="POST",o.contentType="text/xml",o.postBody=e.xmlData,delete o.parameters),e.jsonData&&(i="POST",o.contentType="text/javascript",o.postBody=typeof e.jsonData=="object"?Ext.encode(e.jsonData):e.jsonData,delete o.parameters));new Ajax.Request(r,o)},formRequest:function(i,r,u,f){new Ajax.Request(r,{method:Ext.getDom(i).method||"POST",parameters:Form.serialize(i)+(f?"&"+f:""),timeout:u.timeout,onSuccess:n(u),onFailure:t(u)})},isCallInProgress:function(){return!1},abort:function(){return!1},serializeForm:function(n){return Form.serialize(n.dom||n)}}}(),Ext.lib.Anim=function(){var t={easeOut:function(n){return 1-Math.pow(1-n,2)},easeIn:function(n){return 1-Math.pow(1-n,2)}},n=function(n,t){return{stop:function(){this.effect.cancel()},isAnimated:function(){return this.effect.state=="running"},proxyCallback:function(){Ext.callback(n,t)}}};return{scroll:function(t,i,r,u,f,e){var o=n(f,e);return t=Ext.getDom(t),typeof i.scroll.to[0]=="number"&&(t.scrollLeft=i.scroll.to[0]),typeof i.scroll.to[1]=="number"&&(t.scrollTop=i.scroll.to[1]),o.proxyCallback(),o},motion:function(n,t,i,r,u,f){return this.run(n,t,i,r,u,f)},color:function(n,t,i,r,u,f){return this.run(n,t,i,r,u,f)},run:function(i,r,u,f,e,o){var s={},c,v,l,h,y,a;for(c in r)switch(c){case"points":h=Ext.fly(i,"_animrun");h.position();(v=r.points.by)?(y=h.getXY(),l=h.translatePoints([y[0]+v[0],y[1]+v[1]])):l=h.translatePoints(r.points.to);s.left=l.left+"px";s.top=l.top+"px";break;case"width":s.width=r.width.to+"px";break;case"height":s.height=r.height.to+"px";break;case"opacity":s.opacity=String(r.opacity.to);break;default:s[c]=String(r[c].to)}return a=n(e,o),a.effect=new Effect.Morph(Ext.id(i),{duration:u,afterFinish:a.proxyCallback,transition:t[f]||Effect.Transitions.linear,style:s}),a}}}(),Ext.lib.Region=function(n,t,i,r){this.top=n;this[1]=n;this.right=t;this.bottom=i;this.left=r;this[0]=r},Ext.lib.Region.prototype={contains:function(n){return n.left>=this.left&&n.right<=this.right&&n.top>=this.top&&n.bottom<=this.bottom},getArea:function(){return(this.bottom-this.top)*(this.right-this.left)},intersect:function(n){var t=Math.max(this.top,n.top),i=Math.min(this.right,n.right),r=Math.min(this.bottom,n.bottom),u=Math.max(this.left,n.left);return r>=t&&i>=u?new Ext.lib.Region(t,i,r,u):null},union:function(n){var t=Math.min(this.top,n.top),i=Math.max(this.right,n.right),r=Math.max(this.bottom,n.bottom),u=Math.min(this.left,n.left);return new Ext.lib.Region(t,i,r,u)},constrainTo:function(n){return this.top=this.top.constrain(n.top,n.bottom),this.bottom=this.bottom.constrain(n.top,n.bottom),this.left=this.left.constrain(n.left,n.right),this.right=this.right.constrain(n.left,n.right),this},adjust:function(n,t,i,r){return this.top+=n,this.left+=t,this.right+=r,this.bottom+=i,this}},Ext.lib.Region.getRegion=function(n){var t=Ext.lib.Dom.getXY(n),i=t[1],r=t[0]+n.offsetWidth,u=t[1]+n.offsetHeight,f=t[0];return new Ext.lib.Region(i,r,u,f)},Ext.lib.Point=function(n,t){n instanceof Array&&(t=n[1],n=n[0]);this.x=this.right=this.left=this[0]=n;this.y=this.top=this.bottom=this[1]=t},Ext.lib.Point.prototype=new Ext.lib.Region,Ext.isIE){function i(){var n=Function.prototype;delete n.createSequence;delete n.defer;delete n.createDelegate;delete n.createCallback;delete n.createInterceptor;window.detachEvent("onunload",i)}window.attachEvent("onunload",i)}}();Ext.DomHelper=function(){var i=null,c=/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,l=/^table|tbody|tr|td$/i,t=function(n){var i,r,u,e,f,o,s;if(typeof n=="string")return n;i="";n.tag||(n.tag="div");i+="<"+n.tag;for(r in n)if(r!="tag"&&r!="children"&&r!="cn"&&r!="html"&&typeof n[r]!="function")if(r=="style"){if(u=n.style,typeof u=="function"&&(u=u.call()),typeof u=="string")i+=' style="'+u+'"';else if(typeof u=="object"){i+=' style="';for(e in u)typeof u[e]!="function"&&(i+=e+":"+u[e]+";");i+='"'}}else i+=r=="cls"?' class="'+n.cls+'"':r=="htmlFor"?' for="'+n.htmlFor+'"':" "+r+'="'+n[r]+'"';if(c.test(n.tag))i+="/>";else{if(i+=">",f=n.children||n.cn,f)if(f instanceof Array)for(o=0,s=f.length;o<s;o++)i+=t(f[o],i);else i+=t(f,i);n.html&&(i+=n.html);i+="<\/"+n.tag+">"}return i},r=function(n,t){var u=document.createElement(n.tag||"div"),s=u.setAttribute?!0:!1,i,f,e,o;for(i in n)i!="tag"&&i!="children"&&i!="cn"&&i!="html"&&i!="style"&&typeof n[i]!="function"&&(i=="cls"?u.className=n.cls:s?u.setAttribute(i,n[i]):u[i]=n[i]);if(Ext.DomHelper.applyStyles(u,n.style),f=n.children||n.cn,f)if(f instanceof Array)for(e=0,o=f.length;e<o;e++)r(f[e],u);else r(f,u);return n.html&&(u.innerHTML=n.html),t&&t.appendChild(u),u},n=function(n,t,r,u){i.innerHTML=[t,r,u].join("");for(var e=-1,f=i;++e<n;)f=f.firstChild;return f},u="<table>",f="<\/table>",e=u+"<tbody>",o="<\/tbody>"+f,s=e+"<tr>",h="<\/tr>"+o,a=function(t,r,c,l){i||(i=document.createElement("div"));var a,v=null;if(t=="td"){if(r=="afterbegin"||r=="beforeend")return;r=="beforebegin"?(v=c,c=c.parentNode):(v=c.nextSibling,c=c.parentNode);a=n(4,s,l,h)}else if(t=="tr")r=="beforebegin"?(v=c,c=c.parentNode,a=n(3,e,l,o)):r=="afterend"?(v=c.nextSibling,c=c.parentNode,a=n(3,e,l,o)):(r=="afterbegin"&&(v=c.firstChild),a=n(4,s,l,h));else if(t=="tbody")r=="beforebegin"?(v=c,c=c.parentNode,a=n(2,u,l,f)):r=="afterend"?(v=c.nextSibling,c=c.parentNode,a=n(2,u,l,f)):(r=="afterbegin"&&(v=c.firstChild),a=n(3,e,l,o));else{if(r=="beforebegin"||r=="afterend")return;r=="afterbegin"&&(v=c.firstChild);a=n(2,u,l,f)}return c.insertBefore(a,v),a};return{useDom:!1,markup:function(n){return t(n)},applyStyles:function(n,t){var u,i,r;if(t)if(n=Ext.fly(n),typeof t=="string")for(u=/\s?([a-z\-]*)\:\s?([^;]*);?/gi;(i=u.exec(t))!=null;)n.setStyle(i[1],i[2]);else if(typeof t=="object")for(r in t)n.setStyle(r,t[r]);else typeof t=="function"&&Ext.DomHelper.applyStyles(n,t.call())},insertHtml:function(n,t,i){var f,r,u;if(n=n.toLowerCase(),t.insertAdjacentHTML){if(l.test(t.tagName)&&(f=a(t.tagName.toLowerCase(),n,t,i)))return f;switch(n){case"beforebegin":return t.insertAdjacentHTML("BeforeBegin",i),t.previousSibling;case"afterbegin":return t.insertAdjacentHTML("AfterBegin",i),t.firstChild;case"beforeend":return t.insertAdjacentHTML("BeforeEnd",i),t.lastChild;case"afterend":return t.insertAdjacentHTML("AfterEnd",i),t.nextSibling}throw'Illegal insertion point -> "'+n+'"';}r=t.ownerDocument.createRange();switch(n){case"beforebegin":return r.setStartBefore(t),u=r.createContextualFragment(i),t.parentNode.insertBefore(u,t),t.previousSibling;case"afterbegin":return t.firstChild?(r.setStartBefore(t.firstChild),u=r.createContextualFragment(i),t.insertBefore(u,t.firstChild),t.firstChild):(t.innerHTML=i,t.firstChild);case"beforeend":return t.lastChild?(r.setStartAfter(t.lastChild),u=r.createContextualFragment(i),t.appendChild(u),t.lastChild):(t.innerHTML=i,t.lastChild);case"afterend":return r.setStartAfter(t),u=r.createContextualFragment(i),t.parentNode.insertBefore(u,t.nextSibling),t.nextSibling}throw'Illegal insertion point -> "'+n+'"';},insertBefore:function(n,t,i){return this.doInsert(n,t,i,"beforeBegin")},insertAfter:function(n,t,i){return this.doInsert(n,t,i,"afterEnd","nextSibling")},insertFirst:function(n,t,i){return this.doInsert(n,t,i,"afterBegin","firstChild")},doInsert:function(n,i,u,f,e){var o,s;return n=Ext.getDom(n),this.useDom?(o=r(i,null),(e==="firstChild"?n:n.parentNode).insertBefore(o,e?n[e]:n)):(s=t(i),o=this.insertHtml(f,n,s)),u?Ext.get(o,!0):o},append:function(n,i,u){var f,e;return n=Ext.getDom(n),this.useDom?(f=r(i,null),n.appendChild(f)):(e=t(i),f=this.insertHtml("beforeEnd",n,e)),u?Ext.get(f,!0):f},overwrite:function(n,i,r){return n=Ext.getDom(n),n.innerHTML=t(i),r?Ext.get(n.firstChild,!0):n.firstChild},createTemplate:function(n){var i=t(n);return new Ext.Template(i)}}}();Ext.Template=function(n){var i=arguments,r,t,u;if(n instanceof Array)n=n.join("");else if(i.length>1){for(r=[],t=0,u=i.length;t<u;t++)typeof i[t]=="object"?Ext.apply(this,i[t]):r[r.length]=i[t];n=r.join("")}this.html=n;this.compiled&&this.compile()};Ext.Template.prototype={applyTemplate:function(n){if(this.compiled)return this.compiled(n);var i=this.disableFormats!==!0,t=Ext.util.Format,r=this,u=function(u,f,e,o){var h,s,c;if(e&&i){if(e.substr(0,5)=="this.")return r.call(e.substr(5),n[f],n);if(o){for(h=/^\s*['"](.*)["']\s*$/,o=o.split(","),s=0,c=o.length;s<c;s++)o[s]=o[s].replace(h,"$1");o=[n[f]].concat(o)}else o=[n[f]];return t[e].apply(t,o)}return n[f]!==undefined?n[f]:""};return this.html.replace(this.re,u)},set:function(n,t){return this.html=n,this.compiled=null,t&&this.compile(),this},disableFormats:!1,re:/\{([\w-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,compile:function(){var u=Ext.util.Format,r=this.disableFormats!==!0,t=Ext.isGecko?"+":",",i=function(n,i,u,f){return u&&r?(f=f?","+f:"",u.substr(0,5)!="this."?u="fm."+u+"(":(u='this.call("'+u.substr(5)+'", ',f=", values")):(f="",u="(values['"+i+"'] == undefined ? '' : "),"'"+t+u+"values['"+i+"']"+f+")"+t+"'"},n;return Ext.isGecko?n="this.compiled = function(values){ return '"+this.html.replace(/\\/g,"\\\\").replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,i)+"';};":(n=["this.compiled = function(values){ return ['"],n.push(this.html.replace(/\\/g,"\\\\").replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,i)),n.push("'].join('');};"),n=n.join("")),eval(n),this},call:function(n,t,i){return this[n](t,i)},insertFirst:function(n,t,i){return this.doInsert("afterBegin",n,t,i)},insertBefore:function(n,t,i){return this.doInsert("beforeBegin",n,t,i)},insertAfter:function(n,t,i){return this.doInsert("afterEnd",n,t,i)},append:function(n,t,i){return this.doInsert("beforeEnd",n,t,i)},doInsert:function(n,t,i,r){t=Ext.getDom(t);var u=Ext.DomHelper.insertHtml(n,t,this.applyTemplate(i));return r?Ext.get(u,!0):u},overwrite:function(n,t,i){return n=Ext.getDom(n),n.innerHTML=this.applyTemplate(t),i?Ext.get(n.firstChild,!0):n.firstChild}};Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate;Ext.DomHelper.Template=Ext.Template;Ext.Template.from=function(n,t){return n=Ext.getDom(n),new Ext.Template(n.value||n.innerHTML,t||"")};Ext.DomQuery=function(){function o(n){while((n=n.nextSibling)&&n.nodeType!=1);return n}function s(n){while((n=n.previousSibling)&&n.nodeType!=1);return n}function b(n){var e=++t,r,f,i,u;for(n[0].setAttribute("_nodup",e),r=[n[0]],i=1,u=n.length;i<u;i++)f=n[i],!f.getAttribute("_nodup")!=e&&(f.setAttribute("_nodup",e),r[r.length]=f);for(i=0,u=n.length;i<u;i++)n[i].removeAttribute("_nodup");return r}function k(n){var r,i;if(!n)return[];var s=n.length,o,u,f=n,e,c=-1;if(!s||typeof n.nodeType!="undefined"||s==1)return n;if(h&&typeof n[0].selectSingleNode!="undefined")return b(n);for(r=++t,n[0]._nodup=r,u=1;o=n[u];u++)if(o._nodup!=r)o._nodup=r;else{for(f=[],i=0;i<u;i++)f[++c]=n[i];for(i=u+1;e=n[i];i++)e._nodup!=r&&(e._nodup=r,f[++c]=e);return f}return f}function d(n,i){for(var f,e=++t,r=0,u=n.length;r<u;r++)n[r].setAttribute("_qdiff",e);for(f=[],r=0,u=i.length;r<u;r++)i[r].getAttribute("_qdiff")!=e&&(f[f.length]=i[r]);for(r=0,u=n.length;r<u;r++)n[r].removeAttribute("_qdiff");return f}function g(n,i){var e=n.length,f,u,r,o;if(!e)return i;if(h&&n[0].selectSingleNode)return d(n,i);for(f=++t,r=0;r<e;r++)n[r]._qdiff=f;for(u=[],r=0,o=i.length;r<o;r++)i[r]._qdiff!=f&&(u[u.length]=i[r]);return u}var i={},r={},u={},c=/\S/,n=/^\s+|\s+$/g,l=/\{(\d+)\}/g,e=/^(\s?[\/>+~]\s?|\s|$)/,a=/^(#)?([\w-\*]+)/,v=/(\d*)n\+?(\d*)/,y=/\D/,h=window.ActiveXObject?!0:!1,t;return eval("var batch = 30803;"),t=30803,{getStyle:function(n,t){return Ext.fly(n).getStyle(t)},compile:function(t,i){var o,y,c,p,v;i=i||"select";var u=["var f = function(root){\n var mode; ++batch; var n = root || document;\n"],r=t,w,b=Ext.DomQuery.matchers,k=b.length,s,h=r.match(e);for(h&&h[1]&&(u[u.length]='mode="'+h[1].replace(n,"")+'";',r=r.replace(h[1],""));t.substr(0,1)=="/";)t=t.substr(1);while(r&&w!=r){for(w=r,o=r.match(a),i=="select"?o?(u[u.length]=o[1]=="#"?'n = quickId(n, mode, root, "'+o[2]+'");':'n = getNodes(n, mode, "'+o[2]+'");',r=r.replace(o[0],"")):r.substr(0,1)!="@"&&(u[u.length]='n = getNodes(n, mode, "*");'):o&&(u[u.length]=o[1]=="#"?'n = byId(n, null, "'+o[2]+'");':'n = byTag(n, "'+o[2]+'");',r=r.replace(o[0],""));!(s=r.match(e));){for(y=!1,c=0;c<k;c++)if(p=b[c],v=r.match(p.re),v){u[u.length]=p.select.replace(l,function(n,t){return v[t]});r=r.replace(v[0],"");y=!0;break}if(!y)throw'Error parsing selector, parsing failed at "'+r+'"';}s[1]&&(u[u.length]='mode="'+s[1].replace(n,"")+'";',r=r.replace(s[1],""))}return u[u.length]="return nodup(n);\n}",eval(u.join("")),f},select:function(t,r){var e,f,o,h,u,s;for(r&&r!=document||(r=document),typeof r=="string"&&(r=document.getElementById(r)),e=t.split(","),f=[],o=0,h=e.length;o<h;o++){if(u=e[o].replace(n,""),!i[u]&&(i[u]=Ext.DomQuery.compile(u),!i[u]))throw u+" is not a valid selector";s=i[u](r);s&&s!=document&&(f=f.concat(s))}return e.length>1?k(f):f},selectNode:function(n,t){return Ext.DomQuery.select(n,t)[0]},selectValue:function(t,i,r){var f,e;return t=t.replace(n,""),u[t]||(u[t]=Ext.DomQuery.compile(t,"select")),f=u[t](i),f=f[0]?f[0]:f,e=f&&f.firstChild?f.firstChild.nodeValue:null,e===null||e===undefined||e===""?r:e},selectNumber:function(n,t,i){var r=Ext.DomQuery.selectValue(n,t,i||0);return parseFloat(r)},is:function(n,t){typeof n=="string"&&(n=document.getElementById(n));var i=n instanceof Array,r=Ext.DomQuery.filter(i?n:[n],t);return i?r.length==n.length:r.length>0},filter:function(t,i,u){i=i.replace(n,"");r[i]||(r[i]=Ext.DomQuery.compile(i,"simple"));var f=r[i](t);return u?g(f,t):f},matchers:[{re:/^\.([\w-]+)/,select:'n = byClassName(n, null, " {1} ");'},{re:/^\:([\w-]+)(?:\(((?:[^\s>\/]*|.*?))\))?/,select:'n = byPseudo(n, "{1}", "{2}");'},{re:/^(?:([\[\{])(?:@)?([\w-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]\}])/,select:'n = byAttribute(n, "{2}", "{4}", "{3}", "{1}");'},{re:/^#([\w-]+)/,select:'n = byId(n, null, "{1}");'},{re:/^@([\w-]+)/,select:'return {firstChild:{nodeValue:attrValue(n, "{1}")}};'}],operators:{"=":function(n,t){return n==t},"!=":function(n,t){return n!=t},"^=":function(n,t){return n&&n.substr(0,t.length)==t},"$=":function(n,t){return n&&n.substr(n.length-t.length)==t},"*=":function(n,t){return n&&n.indexOf(t)!==-1},"%=":function(n,t){return n%t==0},"|=":function(n,t){return n&&(n==t||n.substr(0,t.length+1)==t+"-")},"~=":function(n,t){return n&&(" "+n+" ").indexOf(" "+t+" ")!=-1}},pseudos:{"first-child":function(n){for(var i=[],f=-1,t,r=0,u;u=t=n[r];r++){while((t=t.previousSibling)&&t.nodeType!=1);t||(i[++f]=u)}return i},"last-child":function(n){for(var i=[],f=-1,t,r=0,u;u=t=n[r];r++){while((t=t.nextSibling)&&t.nodeType!=1);t||(i[++f]=u)}return i},"nth-child":function(n,t){for(var u,l,r,f=[],o=-1,s=v.exec(t=="even"&&"2n"||t=="odd"&&"2n+1"||!y.test(t)&&"n+"+t||t),h=(s[1]||1)-0,e=s[2]-0,c=0,i;i=n[c];c++){if(u=i.parentNode,batch!=u._batch){for(l=0,r=u.firstChild;r;r=r.nextSibling)r.nodeType==1&&(r.nodeIndex=++l);u._batch=batch}h==1?(e==0||i.nodeIndex==e)&&(f[++o]=i):(i.nodeIndex+e)%h==0&&(f[++o]=i)}return f},"only-child":function(n){for(var i=[],u=-1,r=0,t;t=n[r];r++)s(t)||o(t)||(i[++u]=t);return i},empty:function(n){for(var r=[],o=-1,u=0,t;t=n[u];u++){for(var s=t.childNodes,f=0,i,e=!0;i=s[f];)if(++f,i.nodeType==1||i.nodeType==3){e=!1;break}e&&(r[++o]=t)}return r},contains:function(n,t){for(var r=[],f=-1,u=0,i;i=n[u];u++)(i.textContent||i.innerText||"").indexOf(t)!=-1&&(r[++f]=i);return r},nodeValue:function(n,t){for(var r=[],f=-1,u=0,i;i=n[u];u++)i.firstChild&&i.firstChild.nodeValue==t&&(r[++f]=i);return r},checked:function(n){for(var i=[],u=-1,r=0,t;t=n[r];r++)t.checked==!0&&(i[++u]=t);return i},not:function(n,t){return Ext.DomQuery.filter(n,t,!0)},any:function(n,t){for(var r,o=t.split("|"),u=[],s=-1,f,e=0,i;i=n[e];e++)for(r=0;f=o[r];r++)if(Ext.DomQuery.is(i,f)){u[++s]=i;break}return u},odd:function(n){return this["nth-child"](n,"odd")},even:function(n){return this["nth-child"](n,"even")},nth:function(n,t){return n[t-1]||[]},first:function(n){return n[0]||[]},last:function(n){return n[n.length-1]||[]},has:function(n,t){for(var f=Ext.DomQuery.select,r=[],e=-1,u=0,i;i=n[u];u++)f(t,i).length>0&&(r[++e]=i);return r},next:function(n,t){for(var r,e=Ext.DomQuery.is,u=[],s=-1,f=0,i;i=n[f];f++)r=o(i),r&&e(r,t)&&(u[++s]=i);return u},prev:function(n,t){for(var r,e=Ext.DomQuery.is,u=[],o=-1,f=0,i;i=n[f];f++)r=s(i),r&&e(r,t)&&(u[++o]=i);return u}}}}();Ext.query=Ext.DomQuery.select;Ext.util.Observable=function(){if(this.listeners){this.on(this.listeners);delete this.listeners}};Ext.util.Observable.prototype={fireEvent:function(){if(this.eventsSuspended!==!0){var n=this.events[arguments[0].toLowerCase()];if(typeof n=="object")return n.fire.apply(n,Array.prototype.slice.call(arguments,1))}return!0},filterOptRe:/^(?:scope|delay|buffer|single)$/,addListener:function(n,t,i,r){var u,f;if(typeof n=="object"){r=n;for(u in r)this.filterOptRe.test(u)||(typeof r[u]=="function"?this.addListener(u,r[u],r.scope,r):this.addListener(u,r[u].fn,r[u].scope,r[u]));return}r=!r||typeof r=="boolean"?{}:r;n=n.toLowerCase();f=this.events[n]||!0;typeof f=="boolean"&&(f=new Ext.util.Event(this,n),this.events[n]=f);f.addListener(t,i,r)},removeListener:function(n,t,i){var r=this.events[n.toLowerCase()];typeof r=="object"&&r.removeListener(t,i)},purgeListeners:function(){for(var n in this.events)typeof this.events[n]=="object"&&this.events[n].clearListeners()},relayEvents:function(n,t){for(var i,u=function(n){return function(){return this.fireEvent.apply(this,Ext.combine(n,Array.prototype.slice.call(arguments,0)))}},r=0,f=t.length;r<f;r++){i=t[r];this.events[i]||(this.events[i]=!0);n.on(i,u(i),this)}},addEvents:function(n){if(this.events||(this.events={}),typeof n=="string")for(var t=0,i=arguments,r;r=i[t];t++)this.events[i[t]]||(n[i[t]]=!0);else Ext.applyIf(this.events,n)},hasListener:function(n){var t=this.events[n];return typeof t=="object"&&t.listeners.length>0},suspendEvents:function(){this.eventsSuspended=!0},resumeEvents:function(){this.eventsSuspended=!1},getMethodEvent:function(n){var t,r,i,u,f,e;return this.methodEvents||(this.methodEvents={}),t=this.methodEvents[n],t||(t={},this.methodEvents[n]=t,t.originalFn=this[n],t.methodName=n,t.before=[],t.after=[],f=this,e=function(n,t,e){(i=n.apply(t||f,e))!==undefined&&(typeof i=="object"?(r=i.returnValue!==undefined?i.returnValue:i,i.cancel===!0&&(u=!0)):i===!1?u=!0:r=i)},this[n]=function(){var o,n,s;for(r=i=undefined,u=!1,o=Array.prototype.slice.call(arguments,0),n=0,s=t.before.length;n<s;n++)if(e(t.before[n].fn,t.before[n].scope,o),u)return r;for((i=t.originalFn.apply(f,o))!==undefined&&(r=i),n=0,s=t.after.length;n<s;n++)if(e(t.after[n].fn,t.after[n].scope,o),u)return r;return r}),t},beforeMethod:function(n,t,i){var r=this.getMethodEvent(n);r.before.push({fn:t,scope:i})},afterMethod:function(n,t,i){var r=this.getMethodEvent(n);r.after.push({fn:t,scope:i})},removeMethodListener:function(n,t,i){for(var u=this.getMethodEvent(n),r=0,f=u.before.length;r<f;r++)if(u.before[r].fn==t&&u.before[r].scope==i){u.before.splice(r,1);return}for(r=0,f=u.after.length;r<f;r++)if(u.after[r].fn==t&&u.after[r].scope==i){u.after.splice(r,1);return}}};Ext.util.Observable.prototype.on=Ext.util.Observable.prototype.addListener;Ext.util.Observable.prototype.un=Ext.util.Observable.prototype.removeListener;Ext.util.Observable.capture=function(n,t,i){n.fireEvent=n.fireEvent.createInterceptor(t,i)};Ext.util.Observable.releaseCapture=function(n){n.fireEvent=Ext.util.Observable.prototype.fireEvent},function(){var n=function(n,t,i){var r=new Ext.util.DelayedTask;return function(){r.delay(t.buffer,n,i,Array.prototype.slice.call(arguments,0))}},t=function(n,t,i,r){return function(){return t.removeListener(i,r),n.apply(r,arguments)}},i=function(n,t,i){return function(){var r=Array.prototype.slice.call(arguments,0);setTimeout(function(){n.apply(i,r)},t.delay||10)}};Ext.util.Event=function(n,t){this.name=t;this.obj=n;this.listeners=[]};Ext.util.Event.prototype={addListener:function(n,t,i){if(t=t||this.obj,!this.isListening(n,t)){var r=this.createListener(n,t,i);this.firing?(this.listeners=this.listeners.slice(0),this.listeners.push(r)):this.listeners.push(r)}},createListener:function(r,u,f){f=f||{};u=u||this.obj;var o={fn:r,scope:u,options:f},e=r;return f.delay&&(e=i(e,f,u)),f.single&&(e=t(e,this,r,u)),f.buffer&&(e=n(e,f,u)),o.fireFn=e,o},findListener:function(n,t){var r,i,f,u;for(t=t||this.obj,r=this.listeners,i=0,f=r.length;i<f;i++)if(u=r[i],u.fn==n&&u.scope==t)return i;return-1},isListening:function(n,t){return this.findListener(n,t)!=-1},removeListener:function(n,t){var i;return(i=this.findListener(n,t))!=-1?(this.firing?(this.listeners=this.listeners.slice(0),this.listeners.splice(i,1)):this.listeners.splice(i,1),!0):!1},clearListeners:function(){this.listeners=[]},fire:function(){var i=this.listeners,r=i.length,u,n,t;if(r>0){for(this.firing=!0,u=Array.prototype.slice.call(arguments,0),n=0;n<r;n++)if(t=i[n],t.fireFn.apply(t.scope||this.obj||window,arguments)===!1)return this.firing=!1,!1;this.firing=!1}return!0}}}();Ext.EventManager=function(){var t,s,h=!1,n,c,e,o,u=Ext.lib.Event,i=Ext.lib.Dom,f=function(){if(!h){if(h=!0,Ext.isReady=!0,s&&clearInterval(s),(Ext.isGecko||Ext.isOpera)&&document.removeEventListener("DOMContentLoaded",f,!1),Ext.isIE){var n=document.getElementById("ie-deferred-loader");n&&(n.onreadystatechange=null,n.parentNode.removeChild(n))}t&&(t.fire(),t.clearListeners())}},a=function(){if(t=new Ext.util.Event,Ext.isGecko||Ext.isOpera)document.addEventListener("DOMContentLoaded",f,!1);else if(Ext.isIE){document.write('<script id="ie-deferred-loader" defer="defer" src="//:"><\/script>');var n=document.getElementById("ie-deferred-loader");n.onreadystatechange=function(){this.readyState=="complete"&&f()}}else Ext.isSafari&&(s=setInterval(function(){var n=document.readyState;n=="complete"&&f()},10));u.on(window,"load",f)},v=function(n,t){var i=new Ext.util.DelayedTask(n);return function(r){r=new Ext.EventObjectImpl(r);i.delay(t.buffer,n,null,[r])}},y=function(n,t,i,r){return function(u){Ext.EventManager.removeListener(t,i,r);n(u)}},p=function(n,t){return function(i){i=new Ext.EventObjectImpl(i);setTimeout(function(){n(i)},t.delay||10)}},l=function(n,t,i,r,f){var e=!i||typeof i=="boolean"?{}:i,s,o;if(r=r||e.fn,f=f||e.scope,s=Ext.getDom(n),!s)throw'Error listening for "'+t+'". Element "'+n+"\" doesn't exist.";o=function(n){n=Ext.EventObject.setEvent(n);var t;if(e.delegate){if(t=n.getTarget(e.delegate,s),!t)return}else t=n.target;e.stopEvent===!0&&n.stopEvent();e.preventDefault===!0&&n.preventDefault();e.stopPropagation===!0&&n.stopPropagation();e.normalized===!1&&(n=n.browserEvent);r.call(f||s,n,t,e)};e.delay&&(o=p(o,e));e.single&&(o=y(o,s,t,r));e.buffer&&(o=v(o,e));r._handlers=r._handlers||[];r._handlers.push([Ext.id(s),t,o]);u.on(s,t,o);if(t=="mousewheel"&&s.addEventListener){s.addEventListener("DOMMouseScroll",o,!1);u.on(window,"unload",function(){s.removeEventListener("DOMMouseScroll",o,!1)})}return t=="mousedown"&&s==document&&Ext.EventManager.stoppedMouseDownEvent.addListener(o),o},w=function(n,t,i){var h=Ext.id(n),f=i._handlers,e=i,r,s,o;if(f)for(r=0,s=f.length;r<s;r++)if(o=f[r],o[0]==h&&o[1]==t){e=o[2];f.splice(r,1);break}u.un(n,t,e);n=Ext.getDom(n);t=="mousewheel"&&n.addEventListener&&n.removeEventListener("DOMMouseScroll",e,!1);t=="mousedown"&&n==document&&Ext.EventManager.stoppedMouseDownEvent.removeListener(e)},b=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,r={addListener:function(n,t,i,r,u){var f,e;if(typeof t=="object"){f=t;for(e in f)b.test(e)||(typeof f[e]=="function"?l(n,e,f,f[e],f.scope):l(n,e,f[e]));return}return l(n,t,u,i,r)},removeListener:function(n,t,i){return w(n,t,i)},onDocumentReady:function(n,i,r){if(h){t.addListener(n,i,r);t.fire();t.clearListeners();return}t||a();t.addListener(n,i,r)},onWindowResize:function(t,r,f){if(!n){n=new Ext.util.Event;c=new Ext.util.DelayedTask(function(){n.fire(i.getViewWidth(),i.getViewHeight())});u.on(window,"resize",this.fireWindowResize,this)}n.addListener(t,r,f)},fireWindowResize:function(){n&&((Ext.isIE||Ext.isAir)&&c?c.delay(50):n.fire(i.getViewWidth(),i.getViewHeight()))},onTextResize:function(n,t,i){if(!e){e=new Ext.util.Event;var r=new Ext.Element(document.createElement("div"));r.dom.className="x-text-resize";r.dom.innerHTML="X";r.appendTo(document.body);o=r.dom.offsetHeight;setInterval(function(){r.dom.offsetHeight!=o&&e.fire(o,o=r.dom.offsetHeight)},this.textResizeInterval)}e.addListener(n,t,i)},removeResizeListener:function(t,i){n&&n.removeListener(t,i)},fireResize:function(){n&&n.fire(i.getViewWidth(),i.getViewHeight())},ieDeferSrc:!1,textResizeInterval:50};return r.on=r.addListener,r.un=r.removeListener,r.stoppedMouseDownEvent=new Ext.util.Event,r}();Ext.onReady=Ext.EventManager.onDocumentReady;Ext.onReady(function(){var t=Ext.getBody(),n,i;t&&(n=[Ext.isIE?"ext-ie "+(Ext.isIE6?"ext-ie6":"ext-ie7"):Ext.isGecko?"ext-gecko":Ext.isOpera?"ext-opera":Ext.isSafari?"ext-safari":""],Ext.isMac&&n.push("ext-mac"),Ext.isLinux&&n.push("ext-linux"),Ext.isBorderBox&&n.push("ext-border-box"),Ext.isStrict&&(i=t.dom.parentNode,i&&(i.className+=" ext-strict")),t.addClass(n.join(" ")))});Ext.EventObject=function(){var n=Ext.lib.Event,t={63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35},i=Ext.isIE?{1:0,4:1,2:2}:Ext.isSafari?{1:0,2:1,3:2}:{0:0,1:1,2:2};return Ext.EventObjectImpl=function(n){n&&this.setEvent(n.browserEvent||n)},Ext.EventObjectImpl.prototype={browserEvent:null,button:-1,shiftKey:!1,ctrlKey:!1,altKey:!1,BACKSPACE:8,TAB:9,RETURN:13,ENTER:13,SHIFT:16,CONTROL:17,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,F5:116,setEvent:function(t){return t==this||t&&t.browserEvent?t:(this.browserEvent=t,t?(this.button=t.button?i[t.button]:t.which?t.which-1:-1,t.type=="click"&&this.button==-1&&(this.button=0),this.type=t.type,this.shiftKey=t.shiftKey,this.ctrlKey=t.ctrlKey||t.metaKey,this.altKey=t.altKey,this.keyCode=t.keyCode,this.charCode=t.charCode,this.target=n.getTarget(t),this.xy=n.getXY(t)):(this.button=-1,this.shiftKey=!1,this.ctrlKey=!1,this.altKey=!1,this.keyCode=0,this.charCode=0,this.target=null,this.xy=[0,0]),this)},stopEvent:function(){this.browserEvent&&(this.browserEvent.type=="mousedown"&&Ext.EventManager.stoppedMouseDownEvent.fire(this),n.stopEvent(this.browserEvent))},preventDefault:function(){this.browserEvent&&n.preventDefault(this.browserEvent)},isNavKeyPress:function(){var n=this.keyCode;return n=Ext.isSafari?t[n]||n:n,n>=33&&n<=40||n==this.RETURN||n==this.TAB||n==this.ESC},isSpecialKey:function(){var n=this.keyCode;return this.type=="keypress"&&this.ctrlKey||n==9||n==13||n==40||n==27||n==16||n==17||n>=18&&n<=20||n>=33&&n<=35||n>=36&&n<=39||n>=44&&n<=45},stopPropagation:function(){this.browserEvent&&(this.browserEvent.type=="mousedown"&&Ext.EventManager.stoppedMouseDownEvent.fire(this),n.stopPropagation(this.browserEvent))},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){var n=this.keyCode||this.charCode;return Ext.isSafari?t[n]||n:n},getPageX:function(){return this.xy[0]},getPageY:function(){return this.xy[1]},getTime:function(){return this.browserEvent?n.getTime(this.browserEvent):null},getXY:function(){return this.xy},getTarget:function(n,t,i){var r=Ext.get(this.target);return n?r.findParent(n,t,i):i?r:this.target},getRelatedTarget:function(){return this.browserEvent?n.getRelatedTarget(this.browserEvent):null},getWheelDelta:function(){var n=this.browserEvent,t=0;return n.wheelDelta?t=n.wheelDelta/120:n.detail&&(t=-n.detail/3),t},hasModifier:function(){return this.ctrlKey||this.altKey||this.shiftKey?!0:!1},within:function(n,t){var i=this[t?"getRelatedTarget":"getTarget"]();return i&&Ext.fly(n).contains(i)},getPoint:function(){return new Ext.lib.Point(this.xy[0],this.xy[1])}},new Ext.EventObjectImpl}(),function(){var t=Ext.lib.Dom,e=Ext.lib.Event,i=Ext.lib.Anim,u={},o=/(-[a-z])/gi,s=function(n,t){return t.charAt(1).toUpperCase()},h=document.defaultView,n,r,f,c,a,l;Ext.Element=function(n,t){var r=typeof n=="string"?document.getElementById(n):n,i;if(!r)return null;if(i=r.id,t!==!0&&i&&Ext.Element.cache[i])return Ext.Element.cache[i];this.dom=r;this.id=i||Ext.id(r)};n=Ext.Element;n.prototype={originalDisplay:"",visibilityMode:1,defaultUnit:"px",setVisibilityMode:function(n){return this.visibilityMode=n,this},enableDisplayMode:function(t){return this.setVisibilityMode(n.DISPLAY),typeof t!="undefined"&&(this.originalDisplay=t),this},findParent:function(n,t,i){var r=this.dom,e=document.body,u=0,o=Ext.DomQuery,f;for(t=t||50,typeof t!="number"&&(f=Ext.getDom(t),t=10);r&&r.nodeType==1&&u<t&&r!=e&&r!=f;){if(o.is(r,n))return i?Ext.get(r):r;u++;r=r.parentNode}return null},findParentNode:function(n,t,i){var r=Ext.fly(this.dom.parentNode,"_internal");return r?r.findParent(n,t,i):null},up:function(n,t){return this.findParentNode(n,t,!0)},is:function(n){return Ext.DomQuery.is(this.dom,n)},animate:function(n,t,i,r,u){return this.anim(n,{duration:t,callback:i,easing:r},u),this},anim:function(n,t,i,r,u,f){i=i||"run";t=t||{};var e=Ext.lib.Anim[i](this.dom,n,t.duration||r||.35,t.easing||u||"easeOut",function(){Ext.callback(f,this);Ext.callback(t.callback,t.scope||this,[this,t])},this);return t.anim=e,e},preanim:function(n,t){return n[t]?typeof n[t]=="object"?n[t]:{duration:n[t+1],callback:n[t+2],easing:n[t+3]}:!1},clean:function(n){var r;if(this.isCleaned&&n!==!0)return this;for(var i=this.dom,t=i.firstChild,u=-1;t;)r=t.nextSibling,t.nodeType!=3||/\S/.test(t.nodeValue)?t.nodeIndex=++u:i.removeChild(t),t=r;return this.isCleaned=!0,this},scrollIntoView:function(n,t){var i=Ext.getDom(n)||Ext.getBody().dom,r=this.dom,o=this.getOffsetsTo(i),u=o[0]+i.scrollLeft,f=o[1]+i.scrollTop,s=f+r.offsetHeight,h=u+r.offsetWidth,e=i.clientHeight,c=parseInt(i.scrollTop,10),l=parseInt(i.scrollLeft,10),a=c+e,v=l+i.clientWidth;return r.offsetHeight>e||f<c?i.scrollTop=f:s>a&&(i.scrollTop=s-e),i.scrollTop=i.scrollTop,t!==!1&&(r.offsetWidth>i.clientWidth||u<l?i.scrollLeft=u:h>v&&(i.scrollLeft=h-i.clientWidth),i.scrollLeft=i.scrollLeft),this},scrollChildIntoView:function(n,t){Ext.fly(n,"_scrollChildIntoView").scrollIntoView(this,t)},autoHeight:function(n,t,i,r){var u=this.getHeight();return this.clip(),this.setHeight(1),setTimeout(function(){var f=parseInt(this.dom.scrollHeight,10);n?(this.setHeight(u),this.setHeight(f,n,t,function(){this.unclip();typeof i=="function"&&i()}.createDelegate(this),r)):(this.setHeight(f),this.unclip(),typeof i=="function"&&i())}.createDelegate(this),0),this},contains:function(n){return n?t.isAncestor(this.dom,n.dom?n.dom:n):!1},isVisible:function(n){var i=!(this.getStyle("visibility")=="hidden"||this.getStyle("display")=="none"),t;if(n!==!0||!i)return i;for(t=this.dom.parentNode;t&&t.tagName.toLowerCase()!="body";){if(!Ext.fly(t,"_isVisible").isVisible())return!1;t=t.parentNode}return!0},select:function(t,i){return n.select(t,i,this.dom)},query:function(n){return Ext.DomQuery.select(n,this.dom)},child:function(n,t){var i=Ext.DomQuery.selectNode(n,this.dom);return t?i:Ext.get(i)},down:function(n,t){var i=Ext.DomQuery.selectNode(" > "+n,this.dom);return t?i:Ext.get(i)},initDD:function(n,t,i){var r=new Ext.dd.DD(Ext.id(this.dom),n,t);return Ext.apply(r,i)},initDDProxy:function(n,t,i){var r=new Ext.dd.DDProxy(Ext.id(this.dom),n,t);return Ext.apply(r,i)},initDDTarget:function(n,t,i){var r=new Ext.dd.DDTarget(Ext.id(this.dom),n,t);return Ext.apply(r,i)},setVisible:function(t,r){if(r&&i){var u=this.dom,f=this.visibilityMode;t&&(this.setOpacity(.01),this.setVisible(!0));this.anim({opacity:{to:t?1:0}},this.preanim(arguments,1),null,.35,"easeIn",function(){t||(f==n.DISPLAY?u.style.display="none":u.style.visibility="hidden",Ext.get(u).setOpacity(1))})}else this.visibilityMode==n.DISPLAY?this.setDisplayed(t):(this.fixDisplay(),this.dom.style.visibility=t?"visible":"hidden");return this},isDisplayed:function(){return this.getStyle("display")!="none"},toggle:function(){return this.setVisible(!this.isVisible(),this.preanim(arguments,0)),this},setDisplayed:function(n){return typeof n=="boolean"&&(n=n?this.originalDisplay:"none"),this.setStyle("display",n),this},focus:function(){try{this.dom.focus()}catch(n){}return this},blur:function(){try{this.dom.blur()}catch(n){}return this},addClass:function(n){if(n instanceof Array)for(var t=0,i=n.length;t<i;t++)this.addClass(n[t]);else n&&!this.hasClass(n)&&(this.dom.className=this.dom.className+" "+n);return this},radioClass:function(n){for(var i,r=this.dom.parentNode.childNodes,t=0;t<r.length;t++)i=r[t],i.nodeType==1&&Ext.get(i).removeClass(n);return this.addClass(n),this},removeClass:function(n){var i,r,t;if(!n||!this.dom.className)return this;if(n instanceof Array)for(i=0,r=n.length;i<r;i++)this.removeClass(n[i]);else this.hasClass(n)&&(t=this.classReCache[n],t||(t=new RegExp("(?:^|\\s+)"+n+"(?:\\s+|$)","g"),this.classReCache[n]=t),this.dom.className=this.dom.className.replace(t," "));return this},classReCache:{},toggleClass:function(n){return this.hasClass(n)?this.removeClass(n):this.addClass(n),this},hasClass:function(n){return n&&(" "+this.dom.className+" ").indexOf(" "+n+" ")!=-1},replaceClass:function(n,t){return this.removeClass(n),this.addClass(t),this},getStyles:function(){for(var t=arguments,r=t.length,i={},n=0;n<r;n++)i[t[n]]=this.getStyle(t[n]);return i},getStyle:function(){return h&&h.getComputedStyle?function(n){var i=this.dom,r,f,t;return(n=="float"&&(n="cssFloat"),r=i.style[n])?r:(f=h.getComputedStyle(i,""))?((t=u[n])||(t=u[n]=n.replace(o,s)),f[t]):null}:function(n){var t=this.dom,e,h,i,f,r;return n=="opacity"?typeof t.style.filter=="string"&&(f=t.style.filter.match(/alpha\(opacity=(.*)\)/i),f&&(r=parseFloat(f[1]),!isNaN(r)))?r?r/100:0:1:(n=="float"&&(n="styleFloat"),(i=u[n])||(i=u[n]=n.replace(o,s)),e=t.style[i])?e:(h=t.currentStyle)?h[i]:null}}(),setStyle:function(n,t){var i,r;if(typeof n=="string")(i=u[n])||(i=u[n]=n.replace(o,s)),i=="opacity"?this.setOpacity(t):this.dom.style[i]=t;else for(r in n)typeof n[r]!="function"&&this.setStyle(r,n[r]);return this},applyStyles:function(n){return Ext.DomHelper.applyStyles(this.dom,n),this},getX:function(){return t.getX(this.dom)},getY:function(){return t.getY(this.dom)},getXY:function(){return t.getXY(this.dom)},getOffsetsTo:function(n){var t=this.getXY(),i=Ext.fly(n,"_internal").getXY();return[t[0]-i[0],t[1]-i[1]]},setX:function(n,r){return r&&i?this.setXY([n,this.getY()],this.preanim(arguments,1)):t.setX(this.dom,n),this},setY:function(n,r){return r&&i?this.setXY([this.getX(),n],this.preanim(arguments,1)):t.setY(this.dom,n),this},setLeft:function(n){return this.setStyle("left",this.addUnits(n)),this},setTop:function(n){return this.setStyle("top",this.addUnits(n)),this},setRight:function(n){return this.setStyle("right",this.addUnits(n)),this},setBottom:function(n){return this.setStyle("bottom",this.addUnits(n)),this},setXY:function(n,r){return r&&i?this.anim({points:{to:n}},this.preanim(arguments,1),"motion"):t.setXY(this.dom,n),this},setLocation:function(n,t){return this.setXY([n,t],this.preanim(arguments,2)),this},moveTo:function(n,t){return this.setXY([n,t],this.preanim(arguments,2)),this},getRegion:function(){return t.getRegion(this.dom)},getHeight:function(n){var t=this.dom.offsetHeight||0;return t=n!==!0?t:t-this.getBorderWidth("tb")-this.getPadding("tb"),t<0?0:t},getWidth:function(n){var t=this.dom.offsetWidth||0;return t=n!==!0?t:t-this.getBorderWidth("lr")-this.getPadding("lr"),t<0?0:t},getComputedHeight:function(){var n=Math.max(this.dom.offsetHeight,this.dom.clientHeight);return n||(n=parseInt(this.getStyle("height"),10)||0,this.isBorderBox()||(n+=this.getFrameWidth("tb"))),n},getComputedWidth:function(){var n=Math.max(this.dom.offsetWidth,this.dom.clientWidth);return n||(n=parseInt(this.getStyle("width"),10)||0,this.isBorderBox()||(n+=this.getFrameWidth("lr"))),n},getSize:function(n){return{width:this.getWidth(n),height:this.getHeight(n)}},getStyleSize:function(){var t,i,r=this.dom,n=r.style;return n.width&&n.width!="auto"&&(t=parseInt(n.width,10),Ext.isBorderBox&&(t-=this.getFrameWidth("lr"))),n.height&&n.height!="auto"&&(i=parseInt(n.height,10),Ext.isBorderBox&&(i-=this.getFrameWidth("tb"))),{width:t||this.getWidth(!0),height:i||this.getHeight(!0)}},getViewSize:function(){var n=this.dom,i=document;return n==i||n==i.body?{width:t.getViewWidth(),height:t.getViewHeight()}:{width:n.clientWidth,height:n.clientHeight}},getValue:function(n){return n?parseInt(this.dom.value,10):this.dom.value},adjustWidth:function(n){return typeof n=="number"&&(this.autoBoxAdjust&&!this.isBorderBox()&&(n-=this.getBorderWidth("lr")+this.getPadding("lr")),n<0&&(n=0)),n},adjustHeight:function(n){return typeof n=="number"&&(this.autoBoxAdjust&&!this.isBorderBox()&&(n-=this.getBorderWidth("tb")+this.getPadding("tb")),n<0&&(n=0)),n},setWidth:function(n,t){return n=this.adjustWidth(n),t&&i?this.anim({width:{to:n}},this.preanim(arguments,1)):this.dom.style.width=this.addUnits(n),this},setHeight:function(n,t){return n=this.adjustHeight(n),t&&i?this.anim({height:{to:n}},this.preanim(arguments,1)):this.dom.style.height=this.addUnits(n),this},setSize:function(n,t,r){return typeof n=="object"&&(t=n.height,n=n.width),n=this.adjustWidth(n),t=this.adjustHeight(t),r&&i?this.anim({width:{to:n},height:{to:t}},this.preanim(arguments,2)):(this.dom.style.width=this.addUnits(n),this.dom.style.height=this.addUnits(t)),this},setBounds:function(n,t,r,u,f){return f&&i?(r=this.adjustWidth(r),u=this.adjustHeight(u),this.anim({points:{to:[n,t]},width:{to:r},height:{to:u}},this.preanim(arguments,4),"motion")):(this.setSize(r,u),this.setLocation(n,t)),this},setRegion:function(n){return this.setBounds(n.left,n.top,n.right-n.left,n.bottom-n.top,this.preanim(arguments,1)),this},addListener:function(n,t,i,r){Ext.EventManager.on(this.dom,n,t,i||this,r)},removeListener:function(n,t){return Ext.EventManager.removeListener(this.dom,n,t),this},removeAllListeners:function(){return e.purgeElement(this.dom),this},relayEvent:function(n,t){this.on(n,function(i){t.fireEvent(n,i)})},setOpacity:function(n,t){if(t&&i)this.anim({opacity:{to:n}},this.preanim(arguments,1),null,.35,"easeIn");else{var r=this.dom.style;Ext.isIE?(r.zoom=1,r.filter=(r.filter||"").replace(/alpha\([^\)]*\)/gi,"")+(n==1?"":" alpha(opacity="+n*100+")")):r.opacity=n}return this},getLeft:function(n){return n?parseInt(this.getStyle("left"),10)||0:this.getX()},getRight:function(n){return n?this.getLeft(!0)+this.getWidth()||0:this.getX()+this.getWidth()},getTop:function(n){return n?parseInt(this.getStyle("top"),10)||0:this.getY()},getBottom:function(n){return n?this.getTop(!0)+this.getHeight()||0:this.getY()+this.getHeight()},position:function(n,t,i,r){n?this.setStyle("position",n):this.getStyle("position")=="static"&&this.setStyle("position","relative");t&&this.setStyle("z-index",t);i!==undefined&&r!==undefined?this.setXY([i,r]):i!==undefined?this.setX(i):r!==undefined&&this.setY(r)},clearPositioning:function(n){return n=n||"",this.setStyle({left:n,right:n,top:n,bottom:n,"z-index":"",position:"static"}),this},getPositioning:function(){var n=this.getStyle("left"),t=this.getStyle("top");return{position:this.getStyle("position"),left:n,right:n?"":this.getStyle("right"),top:t,bottom:t?"":this.getStyle("bottom"),"z-index":this.getStyle("z-index")}},getBorderWidth:function(t){return this.addStyles(t,n.borders)},getPadding:function(t){return this.addStyles(t,n.paddings)},setPositioning:function(n){return this.applyStyles(n),n.right=="auto"&&(this.dom.style.right=""),n.bottom=="auto"&&(this.dom.style.bottom=""),this},fixDisplay:function(){this.getStyle("display")=="none"&&(this.setStyle("visibility","hidden"),this.setStyle("display",this.originalDisplay),this.getStyle("display")=="none"&&this.setStyle("display","block"))},setOverflow:function(n){n=="auto"&&Ext.isMac&&Ext.isGecko?(this.dom.style.overflow="hidden",function(){this.dom.style.overflow="auto"}.defer(1,this)):this.dom.style.overflow=n},setLeftTop:function(n,t){return this.dom.style.left=this.addUnits(n),this.dom.style.top=this.addUnits(t),this},move:function(n,t){var i=this.getXY();n=n.toLowerCase();switch(n){case"l":case"left":this.moveTo(i[0]-t,i[1],this.preanim(arguments,2));break;case"r":case"right":this.moveTo(i[0]+t,i[1],this.preanim(arguments,2));break;case"t":case"top":case"up":this.moveTo(i[0],i[1]-t,this.preanim(arguments,2));break;case"b":case"bottom":case"down":this.moveTo(i[0],i[1]+t,this.preanim(arguments,2))}return this},clip:function(){return this.isClipped||(this.isClipped=!0,this.originalClip={o:this.getStyle("overflow"),x:this.getStyle("overflow-x"),y:this.getStyle("overflow-y")},this.setStyle("overflow","hidden"),this.setStyle("overflow-x","hidden"),this.setStyle("overflow-y","hidden")),this},unclip:function(){if(this.isClipped){this.isClipped=!1;var n=this.originalClip;n.o&&this.setStyle("overflow",n.o);n.x&&this.setStyle("overflow-x",n.x);n.y&&this.setStyle("overflow-y",n.y)}return this},getAnchorXY:function(n,i,r){var e,o,a=!1,h,c,l;r?(e=r.width,o=r.height):(h=this.dom,h==document.body||h==document?(a=!0,e=t.getViewWidth(),o=t.getViewHeight()):(e=this.getWidth(),o=this.getHeight()));var u=0,f=0,s=Math.round;switch((n||"tl").toLowerCase()){case"c":u=s(e*.5);f=s(o*.5);break;case"t":u=s(e*.5);f=0;break;case"l":u=0;f=s(o*.5);break;case"r":u=e;f=s(o*.5);break;case"b":u=s(e*.5);f=o;break;case"tl":u=0;f=0;break;case"bl":u=0;f=o;break;case"br":u=e;f=o;break;case"tr":u=e;f=0}return i===!0?[u,f]:a?(c=this.getScroll(),[u+c.left,f+c.top]):(l=this.getXY(),[u+l[0],f+l[1]])},getAlignToXY:function(n,i,r){var e;if(n=Ext.get(n),!n||!n.dom)throw"Element.alignToXY with an element that doesn't exist";var ft=this.dom,p=!1,u="",f="";if(r=r||[0,0],i?i=="?"?i="tl-bl?":i.indexOf("-")==-1&&(i="tl-"+i):i="tl-bl",i=i.toLowerCase(),e=i.match(/^([a-z]+)-([a-z]+)(\?)?$/),!e)throw"Element.alignTo with an invalid alignment "+i;u=e[1];f=e[2];p=!!e[3];var w=this.getAnchorXY(u,!0),b=n.getAnchorXY(f,!1),o=b[0]-w[0]+r[0],s=b[1]-w[1]+r[1];if(p){var v=this.getWidth(),y=this.getHeight(),h=n.getRegion(),k=t.getViewWidth()-5,d=t.getViewHeight()-5,g=u.charAt(0),nt=u.charAt(u.length-1),tt=f.charAt(0),it=f.charAt(f.length-1),rt=g=="t"&&tt=="b"||g=="b"&&tt=="t",ut=nt=="r"&&it=="l"||nt=="l"&&it=="r",c=document,l=(c.documentElement.scrollLeft||c.body.scrollLeft||0)+5,a=(c.documentElement.scrollTop||c.body.scrollTop||0)+5;o+v>k+l&&(o=ut?h.left-v:k+l-v);o<l&&(o=ut?h.right:l);s+y>d+a&&(s=rt?h.top-y:d+a-y);s<a&&(s=rt?h.bottom:a)}return[o,s]},getConstrainToXY:function(){var n={top:0,left:0,bottom:0,right:0};return function(t,i,r,u){var c,l,f,e,a,v;t=Ext.get(t);r=r?Ext.applyIf(r,n):n;f=0;e=0;t.dom==document.body||t.dom==document?(c=Ext.lib.Dom.getViewWidth(),l=Ext.lib.Dom.getViewHeight()):(c=t.dom.clientWidth,l=t.dom.clientHeight,i||(a=t.getXY(),f=a[0],e=a[1]));v=t.getScroll();f+=r.left+v.left;e+=r.top+v.top;c-=r.right;l-=r.bottom;var y=f+c,p=e+l,w=u||(i?[this.getLeft(!0),this.getTop(!0)]:this.getXY()),o=w[0],s=w[1],b=this.dom.offsetWidth,k=this.dom.offsetHeight,h=!1;return o+b>y&&(o=y-b,h=!0),s+k>p&&(s=p-k,h=!0),o<f&&(o=f,h=!0),s<e&&(s=e,h=!0),h?[o,s]:!1}}(),adjustForConstraints:function(n,t,i){return this.getConstrainToXY(t||document,!1,i,n)||n},alignTo:function(n,t,i){var r=this.getAlignToXY(n,t,i);return this.setXY(r,this.preanim(arguments,3)),this},anchorTo:function(n,t,i,r,u,f){var e=function(){this.alignTo(n,t,i,r);Ext.callback(f,this)},o;Ext.EventManager.onWindowResize(e,this);if(o=typeof u,o!="undefined")Ext.EventManager.on(window,"scroll",e,this,{buffer:o=="number"?u:50});return e.call(this),this},clearOpacity:function(){return window.ActiveXObject?typeof this.dom.style.filter=="string"&&/alpha/i.test(this.dom.style.filter)&&(this.dom.style.filter=""):(this.dom.style.opacity="",this.dom.style["-moz-opacity"]="",this.dom.style["-khtml-opacity"]=""),this},hide:function(){return this.setVisible(!1,this.preanim(arguments,0)),this},show:function(){return this.setVisible(!0,this.preanim(arguments,0)),this},addUnits:function(n){return Ext.Element.addUnits(n,this.defaultUnit)},update:function(n,t,i){if(typeof n=="undefined"&&(n=""),t!==!0)return this.dom.innerHTML=n,typeof i=="function"&&i(),this;var r=Ext.id(),u=this.dom;n+='<span id="'+r+'"><\/span>';e.onAvailable(r,function(){for(var h=document.getElementsByTagName("head")[0],c=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,t,u,f,e,o,s;t=c.exec(n);)u=t[1],f=u?u.match(/\ssrc=([\'\"])(.*?)\1/i):!1,f&&f[2]?(e=document.createElement("script"),e.src=f[2],o=u.match(/\stype=([\'\"])(.*?)\1/i),o&&o[2]&&(e.type=o[2]),h.appendChild(e)):t[2]&&t[2].length>0&&(window.execScript?window.execScript(t[2]):window.eval(t[2]));s=document.getElementById(r);s&&Ext.removeNode(s);typeof i=="function"&&i()});return u.innerHTML=n.replace(/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,""),this},load:function(){var n=this.getUpdater();return n.update.apply(n,arguments),this},getUpdater:function(){return this.updateManager||(this.updateManager=new Ext.Updater(this)),this.updateManager},unselectable:function(){return this.dom.unselectable="on",this.swallowEvent("selectstart",!0),this.applyStyles("-moz-user-select:none;-khtml-user-select:none;"),this.addClass("x-unselectable"),this},getCenterXY:function(){return this.getAlignToXY(document,"c-c")},center:function(n){return this.alignTo(n||document,"c-c"),this},isBorderBox:function(){return l[this.dom.tagName.toLowerCase()]||Ext.isBorderBox},getBox:function(n,t){var i,e,o;t?(e=parseInt(this.getStyle("left"),10)||0,o=parseInt(this.getStyle("top"),10)||0,i=[e,o]):i=this.getXY();var s=this.dom,h=s.offsetWidth,c=s.offsetHeight,r;if(n){var u=this.getBorderWidth("l")+this.getPadding("l"),l=this.getBorderWidth("r")+this.getPadding("r"),f=this.getBorderWidth("t")+this.getPadding("t"),a=this.getBorderWidth("b")+this.getPadding("b");r={x:i[0]+u,y:i[1]+f,0:i[0]+u,1:i[1]+f,width:h-(u+l),height:c-(f+a)}}else r={x:i[0],y:i[1],0:i[0],1:i[1],width:h,height:c};return r.right=r.x+r.width,r.bottom=r.y+r.height,r},getFrameWidth:function(n,t){return t&&Ext.isBorderBox?0:this.getPadding(n)+this.getBorderWidth(n)},setBox:function(n,t){var i=n.width,r=n.height;return!t||this.autoBoxAdjust||this.isBorderBox()||(i-=this.getBorderWidth("lr")+this.getPadding("lr"),r-=this.getBorderWidth("tb")+this.getPadding("tb")),this.setBounds(n.x,n.y,i,r,this.preanim(arguments,2)),this},repaint:function(){var n=this.dom;return this.addClass("x-repaint"),setTimeout(function(){Ext.get(n).removeClass("x-repaint")},1),this},getMargins:function(t){return t?this.addStyles(t,n.margins):{top:parseInt(this.getStyle("margin-top"),10)||0,left:parseInt(this.getStyle("margin-left"),10)||0,bottom:parseInt(this.getStyle("margin-bottom"),10)||0,right:parseInt(this.getStyle("margin-right"),10)||0}},addStyles:function(n,t){for(var f=0,r,i,u=0,e=n.length;u<e;u++)r=this.getStyle(t[n.charAt(u)]),r&&(i=parseInt(r,10),i&&(f+=i>=0?i:-1*i));return f},createProxy:function(n,t,i){n=typeof n=="object"?n:{tag:"div",cls:n};var r;return r=t?Ext.DomHelper.append(t,n,!0):Ext.DomHelper.insertBefore(this.dom,n,!0),i&&r.setBox(this.getBox()),r},mask:function(n,t){if(this.getStyle("position")=="static"&&this.setStyle("position","relative"),this._maskMsg&&this._maskMsg.remove(),this._mask&&this._mask.remove(),this._mask=Ext.DomHelper.append(this.dom,{cls:"ext-el-mask"},!0),this.addClass("x-masked"),this._mask.setDisplayed(!0),typeof n=="string"){this._maskMsg=Ext.DomHelper.append(this.dom,{cls:"ext-el-mask-msg",cn:{tag:"div"}},!0);var i=this._maskMsg;i.dom.className=t?"ext-el-mask-msg "+t:"ext-el-mask-msg";i.dom.firstChild.innerHTML=n;i.setDisplayed(!0);i.center(this)}return!Ext.isIE||Ext.isIE7&&Ext.isStrict||this.getStyle("height")!="auto"||this._mask.setSize(this.dom.clientWidth,this.getHeight()),this._mask},unmask:function(){this._mask&&(this._maskMsg&&(this._maskMsg.remove(),delete this._maskMsg),this._mask.remove(),delete this._mask);this.removeClass("x-masked")},isMasked:function(){return this._mask&&this._mask.isVisible()},createShim:function(){var n=document.createElement("iframe"),t;return n.frameBorder="no",n.className="ext-shim",Ext.isIE&&Ext.isSecure&&(n.src=Ext.SSL_SECURE_URL),t=Ext.get(this.dom.parentNode.insertBefore(n,this.dom)),t.autoBoxAdjust=!1,t},remove:function(){Ext.removeNode(this.dom);delete n.cache[this.dom.id]},hover:function(n,t,i){var r=function(t){t.within(this,!0)||n.apply(i||this,arguments)},u=function(n){n.within(this,!0)||t.apply(i||this,arguments)};this.on("mouseover",r,this.dom);this.on("mouseout",u,this.dom);return this},addClassOnOver:function(n){return this.hover(function(){Ext.fly(this,"_internal").addClass(n)},function(){Ext.fly(this,"_internal").removeClass(n)}),this},addClassOnFocus:function(n){this.on("focus",function(){Ext.fly(this,"_internal").addClass(n)},this.dom);this.on("blur",function(){Ext.fly(this,"_internal").removeClass(n)},this.dom);return this},addClassOnClick:function(n){var t=this.dom;this.on("mousedown",function(){Ext.fly(t,"_internal").addClass(n);var i=Ext.getDoc(),r=function(){Ext.fly(t,"_internal").removeClass(n);i.removeListener("mouseup",r)};i.on("mouseup",r)});return this},swallowEvent:function(n,t){var r=function(n){n.stopPropagation();t&&n.preventDefault()},i,u;if(n instanceof Array){for(i=0,u=n.length;i<u;i++)this.on(n[i],r);return this}this.on(n,r);return this},parent:function(n,t){return this.matchNode("parentNode","parentNode",n,t)},next:function(n,t){return this.matchNode("nextSibling","nextSibling",n,t)},prev:function(n,t){return this.matchNode("previousSibling","previousSibling",n,t)},first:function(n,t){return this.matchNode("nextSibling","firstChild",n,t)},last:function(n,t){return this.matchNode("previousSibling","lastChild",n,t)},matchNode:function(n,t,i,r){for(var u=this.dom[t];u;){if(u.nodeType==1&&(!i||Ext.DomQuery.is(u,i)))return r?u:Ext.get(u);u=u[n]}return null},appendChild:function(n){return n=Ext.get(n),n.appendTo(this),this},createChild:function(n,t,i){return(n=n||{tag:"div"},t)?Ext.DomHelper.insertBefore(t,n,i!==!0):Ext.DomHelper[this.dom.firstChild?"append":"overwrite"](this.dom,n,i!==!0)},appendTo:function(n){return n=Ext.getDom(n),n.appendChild(this.dom),this},insertBefore:function(n){return n=Ext.getDom(n),n.parentNode.insertBefore(this.dom,n),this},insertAfter:function(n){return n=Ext.getDom(n),n.parentNode.insertBefore(this.dom,n.nextSibling),this},insertFirst:function(n,t){return n=n||{},typeof n!="object"||n.nodeType||n.dom?(n=Ext.getDom(n),this.dom.insertBefore(n,this.dom.firstChild),t?n:Ext.get(n)):this.createChild(n,this.dom.firstChild,t)},insertSibling:function(n,t,i){var r,u,f,e;if(n instanceof Array){for(u=0,f=n.length;u<f;u++)r=this.insertSibling(n[u],t,i);return r}return t=t?t.toLowerCase():"before",n=n||{},e=t=="before"?this.dom:this.dom.nextSibling,typeof n!="object"||n.nodeType||n.dom?(r=this.dom.parentNode.insertBefore(Ext.getDom(n),e),i||(r=Ext.get(r))):r=t!="after"||this.dom.nextSibling?Ext.DomHelper[t=="after"?"insertAfter":"insertBefore"](this.dom,n,!i):Ext.DomHelper.append(this.dom.parentNode,n,!i),r},wrap:function(n,t){n||(n={tag:"div"});var i=Ext.DomHelper.insertBefore(this.dom,n,!t);return i.dom?i.dom.appendChild(this.dom):i.appendChild(this.dom),i},replace:function(n){return n=Ext.get(n),this.insertBefore(n),n.remove(),this},replaceWith:function(t){return typeof t!="object"||t.nodeType||t.dom?(t=Ext.getDom(t),this.dom.parentNode.insertBefore(t,this.dom)):t=this.insertSibling(t,"before"),n.uncache(this.id),this.dom.parentNode.removeChild(this.dom),this.dom=t,this.id=Ext.id(t),n.cache[this.id]=this,this},insertHtml:function(n,t,i){var r=Ext.DomHelper.insertHtml(n,this.dom,t);return i?Ext.get(r):r},set:function(n,t){var r=this.dom,i;t=typeof t=="undefined"?r.setAttribute?!0:!1:t;for(i in n)i!="style"&&typeof n[i]!="function"&&(i=="cls"?r.className=n.cls:n.hasOwnProperty(i)&&(t?r.setAttribute(i,n[i]):r[i]=n[i]));return n.style&&Ext.DomHelper.applyStyles(r,n.style),this},addKeyListener:function(n,t,i){var r;return r=typeof n!="object"||n instanceof Array?{key:n,fn:t,scope:i}:{key:n.key,shift:n.shift,ctrl:n.ctrl,alt:n.alt,fn:t,scope:i},new Ext.KeyMap(this,r)},addKeyMap:function(n){return new Ext.KeyMap(this,n)},isScrollable:function(){var n=this.dom;return n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth},scrollTo:function(n,t,r){var u=n.toLowerCase()=="left"?"scrollLeft":"scrollTop",f;return r&&i?(f=u=="scrollLeft"?[t,this.dom.scrollTop]:[this.dom.scrollLeft,t],this.anim({scroll:{to:f}},this.preanim(arguments,2),"scroll")):this.dom[u]=t,this},scroll:function(n,t){var u,f,i;if(this.isScrollable()){var r=this.dom,e=r.scrollLeft,o=r.scrollTop,s=r.scrollWidth,h=r.scrollHeight,c=r.clientWidth,l=r.clientHeight;n=n.toLowerCase();u=!1;f=this.preanim(arguments,2);switch(n){case"l":case"left":s-e>c&&(i=Math.min(e+t,s-c),this.scrollTo("left",i,f),u=!0);break;case"r":case"right":e>0&&(i=Math.max(e-t,0),this.scrollTo("left",i,f),u=!0);break;case"t":case"top":case"up":o>0&&(i=Math.max(o-t,0),this.scrollTo("top",i,f),u=!0);break;case"b":case"bottom":case"down":h-o>l&&(i=Math.min(o+t,h-l),this.scrollTo("top",i,f),u=!0)}return u}},translatePoints:function(n,t){(typeof n=="object"||n instanceof Array)&&(t=n[1],n=n[0]);var u=this.getStyle("position"),f=this.getXY(),i=parseInt(this.getStyle("left"),10),r=parseInt(this.getStyle("top"),10);return isNaN(i)&&(i=u=="relative"?0:this.dom.offsetLeft),isNaN(r)&&(r=u=="relative"?0:this.dom.offsetTop),{left:n-f[0]+i,top:t-f[1]+r}},getScroll:function(){var t=this.dom,n=document,i,r;return t==n||t==n.body?(Ext.isIE&&Ext.isStrict?(i=n.documentElement.scrollLeft||n.body.scrollLeft||0,r=n.documentElement.scrollTop||n.body.scrollTop||0):(i=window.pageXOffset||n.body.scrollLeft||0,r=window.pageYOffset||n.body.scrollTop||0),{left:i,top:r}):{left:t.scrollLeft,top:t.scrollTop}},getColor:function(n,t,i){var r=this.getStyle(n),f,h,o,e,u,s;if(!r||r=="transparent"||r=="inherit")return t;if(f=typeof i=="undefined"?"#":i,r.substr(0,4)=="rgb(")for(h=r.slice(4,r.length-1).split(","),u=0;u<3;u++)o=parseInt(h[u]),e=o.toString(16),o<16&&(e="0"+e),f+=e;else if(r.substr(0,1)=="#")if(r.length==4)for(u=1;u<4;u++)s=r.charAt(u),f+=s+s;else r.length==7&&(f+=r.substr(1));return f.length>5?f.toLowerCase():t},boxWrap:function(t){t=t||"x-box";var i=Ext.get(this.insertHtml("beforeBegin",String.format('<div class="{0}">'+n.boxMarkup+"<\/div>",t)));return i.child("."+t+"-mc").dom.appendChild(this.dom),i},getAttributeNS:Ext.isIE?function(n,t){var i=this.dom,r=typeof i[n+":"+t];return r!="undefined"&&r!="unknown"?i[n+":"+t]:i[t]}:function(n,t){var i=this.dom;return i.getAttributeNS(n,t)||i.getAttribute(n+":"+t)||i.getAttribute(t)||i[t]},getTextWidth:function(n,t,i){return Ext.util.TextMetrics.measure(this.dom,Ext.value(n,this.dom.innerHTML,!0)).width.constrain(t||0,i||1e6)}};r=n.prototype;r.on=r.addListener;r.mon=r.addListener;r.getUpdateManager=r.getUpdater;r.un=r.removeListener;r.autoBoxAdjust=!0;n.unitPattern=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i;n.addUnits=function(t,i){return t===""||t=="auto"?t:t===undefined?"":typeof t=="number"||!n.unitPattern.test(t)?t+(i||"px"):t};n.boxMarkup='<div class="{0}-tl"><div class="{0}-tr"><div class="{0}-tc"><\/div><\/div><\/div><div class="{0}-ml"><div class="{0}-mr"><div class="{0}-mc"><\/div><\/div><\/div><div class="{0}-bl"><div class="{0}-br"><div class="{0}-bc"><\/div><\/div><\/div>';n.VISIBILITY=1;n.DISPLAY=2;n.borders={l:"border-left-width",r:"border-right-width",t:"border-top-width",b:"border-bottom-width"};n.paddings={l:"padding-left",r:"padding-right",t:"padding-top",b:"padding-bottom"};n.margins={l:"margin-left",r:"margin-right",t:"margin-top",b:"margin-bottom"};n.cache={};n.get=function(t){var i,u,r,e;return t?typeof t=="string"?(u=document.getElementById(t))?((i=n.cache[t])?i.dom=u:i=n.cache[t]=new n(u),i):null:t.tagName?((r=t.id)||(r=Ext.id(t)),(i=n.cache[r])?i.dom=t:i=n.cache[r]=new n(t),i):t instanceof n?(t!=f&&(t.dom=document.getElementById(t.id)||t.dom,n.cache[t.id]=t),t):t.isComposite?t:t instanceof Array?n.select(t):t==document?(f||(e=function(){},e.prototype=n.prototype,f=new e,f.dom=document),f):null:null};n.uncache=function(){for(var t=0,i=arguments,r=i.length;t<r;t++)i[t]&&delete n.cache[i[t].id||i[t]]};n.garbageCollect=function(){var i,r,t;if(!Ext.enableGarbageCollector){clearInterval(n.collectorThread);return}for(i in n.cache)r=n.cache[i],t=r.dom,t&&t.parentNode&&(t.offsetParent||document.getElementById(i))||(delete n.cache[i],t&&Ext.enableListenerCollection&&e.purgeElement(t))};n.collectorThreadId=setInterval(n.garbageCollect,3e4);c=function(){};c.prototype=n.prototype;a=new c;n.Flyweight=function(n){this.dom=n};n.Flyweight.prototype=a;n.Flyweight.prototype.isFlyweight=!0;n._flyweights={};n.fly=function(t,i){return(i=i||"_global",t=Ext.getDom(t),!t)?null:(n._flyweights[i]||(n._flyweights[i]=new n.Flyweight),n._flyweights[i].dom=t,n._flyweights[i])};Ext.get=n.get;Ext.fly=n.fly;l=Ext.isStrict?{select:1}:{input:1,select:1,textarea:1};(Ext.isIE||Ext.isGecko)&&(l.button=1);Ext.EventManager.on(window,"unload",function(){delete n.cache;delete n._flyweights})}();Ext.enableFx=!0;Ext.Fx={slideIn:function(n,t){var i=this.getFxEl();return t=t||{},i.queueFx(t,function(){var h,u,f,r;n=n||"t";this.fixDisplay();h=this.getFxRestore();u=this.getBox();this.setSize(u);f=this.fxWrap(h.pos,t,"hidden");r=this.dom.style;r.visibility="visible";r.position="absolute";var l=function(){i.fxUnwrap(f,h.pos,t);r.width=h.width;r.height=h.height;i.afterFx(t)},e,c={to:[u.x,u.y]},o={to:u.width},s={to:u.height};switch(n.toLowerCase()){case"t":f.setSize(u.width,0);r.left=r.bottom="0";e={height:s};break;case"l":f.setSize(0,u.height);r.right=r.top="0";e={width:o};break;case"r":f.setSize(0,u.height);f.setX(u.right);r.left=r.top="0";e={width:o,points:c};break;case"b":f.setSize(u.width,0);f.setY(u.bottom);r.left=r.top="0";e={height:s,points:c};break;case"tl":f.setSize(0,0);r.right=r.bottom="0";e={width:o,height:s};break;case"bl":f.setSize(0,0);f.setY(u.y+u.height);r.right=r.top="0";e={width:o,height:s,points:c};break;case"br":f.setSize(0,0);f.setXY([u.right,u.bottom]);r.left=r.top="0";e={width:o,height:s,points:c};break;case"tr":f.setSize(0,0);f.setX(u.x+u.width);r.left=r.bottom="0";e={width:o,height:s,points:c}}this.dom.style.visibility="visible";f.show();arguments.callee.anim=f.fxanim(e,t,"motion",.5,"easeOut",l)}),this},slideOut:function(n,t){var i=this.getFxEl();return t=t||{},i.queueFx(t,function(){var o,u,s,r,h,e,f;n=n||"t";o=this.getFxRestore();u=this.getBox();this.setSize(u);s=this.fxWrap(o.pos,t,"visible");r=this.dom.style;r.visibility="visible";r.position="absolute";s.setSize(u);h=function(){t.useDisplay?i.setDisplayed(!1):i.hide();i.fxUnwrap(s,o.pos,t);r.width=o.width;r.height=o.height;i.afterFx(t)};f={to:0};switch(n.toLowerCase()){case"t":r.left=r.bottom="0";e={height:f};break;case"l":r.right=r.top="0";e={width:f};break;case"r":r.left=r.top="0";e={width:f,points:{to:[u.right,u.y]}};break;case"b":r.left=r.top="0";e={height:f,points:{to:[u.x,u.bottom]}};break;case"tl":r.right=r.bottom="0";e={width:f,height:f};break;case"bl":r.right=r.top="0";e={width:f,height:f,points:{to:[u.x,u.bottom]}};break;case"br":r.left=r.top="0";e={width:f,height:f,points:{to:[u.x+u.width,u.bottom]}};break;case"tr":r.left=r.bottom="0";e={width:f,height:f,points:{to:[u.right,u.y]}}}arguments.callee.anim=s.fxanim(e,t,"motion",.5,"easeOut",h)}),this},puff:function(n){var t=this.getFxEl();return n=n||{},t.queueFx(n,function(){this.clearOpacity();this.show();var i=this.getFxRestore(),r=this.dom.style,e=function(){n.useDisplay?t.setDisplayed(!1):t.hide();t.clearOpacity();t.setPositioning(i.pos);r.width=i.width;r.height=i.height;r.fontSize="";t.afterFx(n)},u=this.getWidth(),f=this.getHeight();arguments.callee.anim=this.fxanim({width:{to:this.adjustWidth(u*2)},height:{to:this.adjustHeight(f*2)},points:{by:[-(u*.5),-(f*.5)]},opacity:{to:0},fontSize:{to:200,unit:"%"}},n,"motion",.5,"easeOut",e)}),this},switchOff:function(n){var t=this.getFxEl();return n=n||{},t.queueFx(n,function(){this.clearOpacity();this.clip();var i=this.getFxRestore(),r=this.dom.style,u=function(){n.useDisplay?t.setDisplayed(!1):t.hide();t.clearOpacity();t.setPositioning(i.pos);r.width=i.width;r.height=i.height;t.afterFx(n)};this.fxanim({opacity:{to:.3}},null,null,.1,null,function(){this.clearOpacity(),function(){this.fxanim({height:{to:1},points:{by:[0,this.getHeight()*.5]}},n,"motion",.3,"easeIn",u)}.defer(100,this)})}),this},highlight:function(n,t){var i=this.getFxEl();return t=t||{},i.queueFx(t,function(){var r;n=n||"ffff9c";r=t.attr||"backgroundColor";this.clearOpacity();this.show();var f=this.getColor(r),e=this.dom.style[r],o=t.endColor||f||"ffffff",s=function(){i.dom.style[r]=e;i.afterFx(t)},u={};u[r]={from:n,to:o};arguments.callee.anim=this.fxanim(u,t,"color",1,"easeIn",s)}),this},frame:function(n,t,i){var r=this.getFxEl();return i=i||{},r.queueFx(i,function(){var e,u,f;n=n||"#C3DAF9";n.length==6&&(n="#"+n);t=t||1;e=i.duration||1;this.show();u=this.getBox();f=function(){var o=Ext.getBody().createChild({style:{visbility:"hidden",position:"absolute","z-index":"35000",border:"0px solid "+n}}),s=Ext.isBorderBox?2:1;o.animate({top:{from:u.y,to:u.y-20},left:{from:u.x,to:u.x-20},borderWidth:{from:0,to:10},opacity:{from:1,to:0},height:{from:u.height,to:u.height+20*s},width:{from:u.width,to:u.width+20*s}},e,function(){o.remove();--t>0?f():r.afterFx(i)})};f.call(this)}),this},pause:function(n){var t=this.getFxEl(),i={};return t.queueFx(i,function(){setTimeout(function(){t.afterFx(i)},n*1e3)}),this},fadeIn:function(n){var t=this.getFxEl();return n=n||{},t.queueFx(n,function(){this.setOpacity(0);this.fixDisplay();this.dom.style.visibility="visible";var i=n.endOpacity||1;arguments.callee.anim=this.fxanim({opacity:{to:i}},n,null,.5,"easeOut",function(){i==1&&this.clearOpacity();t.afterFx(n)})}),this},fadeOut:function(n){var t=this.getFxEl();return n=n||{},t.queueFx(n,function(){arguments.callee.anim=this.fxanim({opacity:{to:n.endOpacity||0}},n,null,.5,"easeOut",function(){this.visibilityMode==Ext.Element.DISPLAY||n.useDisplay?this.dom.style.display="none":this.dom.style.visibility="hidden";this.clearOpacity();t.afterFx(n)})}),this},scale:function(n,t,i){return this.shift(Ext.apply({},i,{width:n,height:t})),this},shift:function(n){var t=this.getFxEl();return n=n||{},t.queueFx(n,function(){var i={},f=n.width,e=n.height,r=n.x,u=n.y,o=n.opacity;f!==undefined&&(i.width={to:this.adjustWidth(f)});e!==undefined&&(i.height={to:this.adjustHeight(e)});(r!==undefined||u!==undefined)&&(i.points={to:[r!==undefined?r:this.getX(),u!==undefined?u:this.getY()]});o!==undefined&&(i.opacity={to:o});n.xy!==undefined&&(i.points={to:n.xy});arguments.callee.anim=this.fxanim(i,n,"motion",.35,"easeOut",function(){t.afterFx(n)})}),this},ghost:function(n,t){var i=this.getFxEl();return t=t||{},i.queueFx(t,function(){n=n||"b";var e=this.getFxRestore(),u=this.getWidth(),f=this.getHeight(),o=this.dom.style,h=function(){t.useDisplay?i.setDisplayed(!1):i.hide();i.clearOpacity();i.setPositioning(e.pos);o.width=e.width;o.height=e.height;i.afterFx(t)},s={opacity:{to:0},points:{}},r=s.points;switch(n.toLowerCase()){case"t":r.by=[0,-f];break;case"l":r.by=[-u,0];break;case"r":r.by=[u,0];break;case"b":r.by=[0,f];break;case"tl":r.by=[-u,-f];break;case"bl":r.by=[-u,f];break;case"br":r.by=[u,f];break;case"tr":r.by=[u,-f]}arguments.callee.anim=this.fxanim(s,t,"motion",.5,"easeOut",h)}),this},syncFx:function(){return this.fxDefaults=Ext.apply(this.fxDefaults||{},{block:!1,concurrent:!0,stopFx:!1}),this},sequenceFx:function(){return this.fxDefaults=Ext.apply(this.fxDefaults||{},{block:!1,concurrent:!1,stopFx:!1}),this},nextFx:function(){var n=this.fxQueue[0];n&&n.call(this)},hasActiveFx:function(){return this.fxQueue&&this.fxQueue[0]},stopFx:function(){if(this.hasActiveFx()){var n=this.fxQueue[0];n&&n.anim&&n.anim.isAnimated()&&(this.fxQueue=[n],n.anim.stop(!0))}return this},beforeFx:function(n){return this.hasActiveFx()&&!n.concurrent?n.stopFx?(this.stopFx(),!0):!1:!0},hasFxBlock:function(){var n=this.fxQueue;return n&&n[0]&&n[0].block},queueFx:function(n,t){if(this.fxQueue||(this.fxQueue=[]),!this.hasFxBlock())if(Ext.applyIf(n,this.fxDefaults),n.concurrent)t.call(this);else{var i=this.beforeFx(n);t.block=n.block;this.fxQueue.push(t);i&&this.nextFx()}return this},fxWrap:function(n,t,i){var r,u,f;return t.wrap&&(r=Ext.get(t.wrap))||(t.fixPosition&&(u=this.getXY()),f=document.createElement("div"),f.style.visibility=i,r=Ext.get(this.dom.parentNode.insertBefore(f,this.dom)),r.setPositioning(n),r.getStyle("position")=="static"&&r.position("relative"),this.clearPositioning("auto"),r.clip(),r.dom.appendChild(this.dom),u&&r.setXY(u)),r},fxUnwrap:function(n,t,i){this.clearPositioning();this.setPositioning(t);i.wrap||(n.dom.parentNode.insertBefore(this.dom,n.dom),n.remove())},getFxRestore:function(){var n=this.dom.style;return{pos:this.getPositioning(),width:n.width,height:n.height}},afterFx:function(n){n.afterStyle&&this.applyStyles(n.afterStyle);n.afterCls&&this.addClass(n.afterCls);n.remove===!0&&this.remove();Ext.callback(n.callback,n.scope,[this]);n.concurrent||(this.fxQueue.shift(),this.nextFx())},getFxEl:function(){return Ext.get(this.dom)},fxanim:function(n,t,i,r,u,f){i=i||"run";t=t||{};var e=Ext.lib.Anim[i](this.dom,n,t.duration||r||.35,t.easing||u||"easeOut",function(){Ext.callback(f,this)},this);return t.anim=e,e}};Ext.Fx.resize=Ext.Fx.scale;Ext.apply(Ext.Element.prototype,Ext.Fx);Ext.CompositeElement=function(n){this.elements=[];this.addElements(n)};Ext.CompositeElement.prototype={isComposite:!0,addElements:function(n){var i,r,t,u;if(!n)return this;for(typeof n=="string"&&(n=Ext.Element.selectorFunction(n)),i=this.elements,r=i.length-1,t=0,u=n.length;t<u;t++)i[++r]=Ext.get(n[t]);return this},fill:function(n){return this.elements=[],this.add(n),this},filter:function(n){var t=[];return this.each(function(i){i.is(n)&&(t[t.length]=i.dom)}),this.fill(t),this},invoke:function(n,t){for(var r=this.elements,i=0,u=r.length;i<u;i++)Ext.Element.prototype[n].apply(r[i],t);return this},add:function(n){return typeof n=="string"?this.addElements(Ext.Element.selectorFunction(n)):n.length!==undefined?this.addElements(n):this.addElements([n]),this},each:function(n,t){for(var r=this.elements,i=0,u=r.length;i<u;i++)if(n.call(t||r[i],r[i],this,i)===!1)break;return this},item:function(n){return this.elements[n]||null},first:function(){return this.item(0)},last:function(){return this.item(this.elements.length-1)},getCount:function(){return this.elements.length},contains:function(n){return this.indexOf(n)!==-1},indexOf:function(n){return this.elements.indexOf(Ext.get(n))},removeElement:function(n,t){var r,f,i,u;if(n instanceof Array){for(r=0,f=n.length;r<f;r++)this.removeElement(n[r]);return this}return i=typeof n=="number"?n:this.indexOf(n),i!==-1&&this.elements[i]&&(t&&(u=this.elements[i],u.dom?u.remove():Ext.removeNode(u)),this.elements.splice(i,1)),this},replaceElement:function(n,t,i){var r=typeof n=="number"?n:this.indexOf(n);return r!==-1&&(i?this.elements[r].replaceWith(t):this.elements.splice(r,1,Ext.get(t))),this},clear:function(){this.elements=[]}},function(){Ext.CompositeElement.createCall=function(n,t){n[t]||(n[t]=function(){return this.invoke(t,arguments)})};for(var n in Ext.Element.prototype)typeof Ext.Element.prototype[n]=="function"&&Ext.CompositeElement.createCall(Ext.CompositeElement.prototype,n)}();Ext.CompositeElementLite=function(n){Ext.CompositeElementLite.superclass.constructor.call(this,n);this.el=new Ext.Element.Flyweight};Ext.extend(Ext.CompositeElementLite,Ext.CompositeElement,{addElements:function(n){var i,r,t,u;if(n)if(n instanceof Array)this.elements=this.elements.concat(n);else for(i=this.elements,r=i.length-1,t=0,u=n.length;t<u;t++)i[++r]=n[t];return this},invoke:function(n,t){for(var r=this.elements,u=this.el,i=0,f=r.length;i<f;i++)u.dom=r[i],Ext.Element.prototype[n].apply(u,t);return this},item:function(n){return this.elements[n]?(this.el.dom=this.elements[n],this.el):null},addListener:function(n,t,i,r){for(var f=this.elements,u=0,e=f.length;u<e;u++)Ext.EventManager.on(f[u],n,t,i||f[u],r);return this},each:function(n,t){for(var u=this.elements,r=this.el,i=0,f=u.length;i<f;i++)if(r.dom=u[i],n.call(t||r,r,this,i)===!1)break;return this},indexOf:function(n){return this.elements.indexOf(Ext.getDom(n))},replaceElement:function(n,t,i){var u=typeof n=="number"?n:this.indexOf(n),r;return u!==-1&&(t=Ext.getDom(t),i&&(r=this.elements[u],r.parentNode.insertBefore(t,r),Ext.removeNode(r)),this.elements.splice(u,1,t)),this}});Ext.CompositeElementLite.prototype.on=Ext.CompositeElementLite.prototype.addListener;Ext.DomQuery&&(Ext.Element.selectorFunction=Ext.DomQuery.select);Ext.Element.select=function(n,t,i){var r;if(typeof n=="string")r=Ext.Element.selectorFunction(n,i);else if(n.length!==undefined)r=n;else throw"Invalid selector";return t===!0?new Ext.CompositeElement(r):new Ext.CompositeElementLite(r)};Ext.select=Ext.Element.select;Ext.Updater=function(n,t){if(n=Ext.get(n),!t&&n.updateManager)return n.updateManager;this.el=n;this.defaultUrl=null;this.addEvents("beforeupdate","update","failure");var i=Ext.Updater.defaults;this.sslBlankUrl=i.sslBlankUrl;this.disableCaching=i.disableCaching;this.indicatorText=i.indicatorText;this.showLoadIndicator=i.showLoadIndicator;this.timeout=i.timeout;this.loadScripts=i.loadScripts;this.transaction=null;this.autoRefreshProcId=null;this.refreshDelegate=this.refresh.createDelegate(this);this.updateDelegate=this.update.createDelegate(this);this.formUpdateDelegate=this.formUpdate.createDelegate(this);this.renderer||(this.renderer=new Ext.Updater.BasicRenderer);Ext.Updater.superclass.constructor.call(this)};Ext.extend(Ext.Updater,Ext.util.Observable,{getEl:function(){return this.el},update:function(n,t,i,r){var f,u,e,o;this.fireEvent("beforeupdate",this.el,n,t)!==!1&&(f=this.method,typeof n=="object"&&(u=n,n=u.url,t=t||u.params,i=i||u.callback,r=r||u.discardUrl,e=u.scope,typeof u.method!="undefined"&&(f=u.method),typeof u.nocache!="undefined"&&(this.disableCaching=u.nocache),typeof u.text!="undefined"&&(this.indicatorText='<div class="loading-indicator">'+u.text+"<\/div>"),typeof u.scripts!="undefined"&&(this.loadScripts=u.scripts),typeof u.timeout!="undefined"&&(this.timeout=u.timeout)),this.showLoading(),r||(this.defaultUrl=n),typeof n=="function"&&(n=n.call(this)),f=f||(t?"POST":"GET"),f=="GET"&&(n=this.prepareUrl(n)),o=Ext.apply(u||{},{url:n,params:typeof t=="function"&&e?t.createDelegate(e):t,success:this.processSuccess,failure:this.processFailure,scope:this,callback:undefined,timeout:this.timeout*1e3,argument:{options:u,url:n,form:null,callback:i,scope:e||window,params:t}}),this.transaction=Ext.Ajax.request(o))},formUpdate:function(n,t,i,r){this.fireEvent("beforeupdate",this.el,n,t)!==!1&&(typeof t=="function"&&(t=t.call(this)),n=Ext.getDom(n),this.transaction=Ext.Ajax.request({form:n,url:t,success:this.processSuccess,failure:this.processFailure,scope:this,timeout:this.timeout*1e3,argument:{url:t,form:n,callback:r,reset:i}}),this.showLoading.defer(1,this))},refresh:function(n){this.defaultUrl!=null&&this.update(this.defaultUrl,null,n,!0)},startAutoRefresh:function(n,t,i,r,u){u&&this.update(t||this.defaultUrl,i,r,!0);this.autoRefreshProcId&&clearInterval(this.autoRefreshProcId);this.autoRefreshProcId=setInterval(this.update.createDelegate(this,[t||this.defaultUrl,i,r,!0]),n*1e3)},stopAutoRefresh:function(){this.autoRefreshProcId&&(clearInterval(this.autoRefreshProcId),delete this.autoRefreshProcId)},isAutoRefreshing:function(){return this.autoRefreshProcId?!0:!1},showLoading:function(){this.showLoadIndicator&&this.el.update(this.indicatorText)},prepareUrl:function(n){if(this.disableCaching){var t="_dc="+(new Date).getTime();n+=n.indexOf("?")!==-1?"&"+t:"?"+t}return n},processSuccess:function(n){if(this.transaction=null,n.argument.form&&n.argument.reset)try{n.argument.form.reset()}catch(t){}this.loadScripts?this.renderer.render(this.el,n,this,this.updateComplete.createDelegate(this,[n])):(this.renderer.render(this.el,n,this),this.updateComplete(n))},updateComplete:function(n){this.fireEvent("update",this.el,n);typeof n.argument.callback=="function"&&n.argument.callback.call(n.argument.scope,this.el,!0,n,n.argument.options)},processFailure:function(n){this.transaction=null;this.fireEvent("failure",this.el,n);typeof n.argument.callback=="function"&&n.argument.callback.call(n.argument.scope,this.el,!1,n,n.argument.options)},setRenderer:function(n){this.renderer=n},getRenderer:function(){return this.renderer},setDefaultUrl:function(n){this.defaultUrl=n},abort:function(){this.transaction&&Ext.Ajax.abort(this.transaction)},isUpdating:function(){return this.transaction?Ext.Ajax.isLoading(this.transaction):!1}});Ext.Updater.defaults={timeout:30,loadScripts:!1,sslBlankUrl:Ext.SSL_SECURE_URL||"javascript:false",disableCaching:!1,showLoadIndicator:!0,indicatorText:'<div class="loading-indicator">Loading...<\/div>'};Ext.Updater.updateElement=function(n,t,i,r){var u=Ext.get(n).getUpdater();Ext.apply(u,r);u.update(t,i,r?r.callback:null)};Ext.Updater.update=Ext.Updater.updateElement;Ext.Updater.BasicRenderer=function(){};Ext.Updater.BasicRenderer.prototype={render:function(n,t,i,r){n.update(t.responseText,i.loadScripts,r)}};Ext.UpdateManager=Ext.Updater;Ext.util.DelayedTask=function(n,t,i){var r=null,u,f,e=function(){var e=(new Date).getTime();e-f>=u&&(clearInterval(r),r=null,n.apply(t,i||[]))};this.delay=function(o,s,h,c){r&&o!=u&&this.cancel();u=o;f=(new Date).getTime();n=s||n;t=h||t;i=c||i;r||(r=setInterval(e,u))};this.cancel=function(){r&&(clearInterval(r),r=null)}};Ext.util.MixedCollection=function(n,t){this.items=[];this.map={};this.keys=[];this.length=0;this.addEvents("clear","add","replace","remove","sort");this.allowFunctions=n===!0;t&&(this.getKey=t);Ext.util.MixedCollection.superclass.constructor.call(this)};Ext.extend(Ext.util.MixedCollection,Ext.util.Observable,{allowFunctions:!1,add:function(n,t){if(arguments.length==1&&(t=arguments[0],n=this.getKey(t)),typeof n=="undefined"||n===null)this.length++,this.items.push(t),this.keys.push(null);else{var i=this.map[n];if(i)return this.replace(n,t);this.length++;this.items.push(t);this.map[n]=t;this.keys.push(n)}return this.fireEvent("add",this.length-1,t,n),t},getKey:function(n){return n.id},replace:function(n,t){var i,r;return(arguments.length==1&&(t=arguments[0],n=this.getKey(t)),i=this.item(n),typeof n=="undefined"||n===null||typeof i=="undefined")?this.add(n,t):(r=this.indexOfKey(n),this.items[r]=t,this.map[n]=t,this.fireEvent("replace",n,i,t),t)},addAll:function(n){var r,t,u,i;if(arguments.length>1||n instanceof Array)for(r=arguments.length>1?arguments:n,t=0,u=r.length;t<u;t++)this.add(r[t]);else for(i in n)(this.allowFunctions||typeof n[i]!="function")&&this.add(i,n[i])},each:function(n,t){for(var r=[].concat(this.items),i=0,u=r.length;i<u;i++)if(n.call(t||r[i],r[i],i,u)===!1)break},eachKey:function(n,t){for(var i=0,r=this.keys.length;i<r;i++)n.call(t||window,this.keys[i],this.items[i],i,r)},find:function(n,t){for(var i=0,r=this.items.length;i<r;i++)if(n.call(t||window,this.items[i],this.keys[i]))return this.items[i];return null},insert:function(n,t,i){return(arguments.length==2&&(i=arguments[1],t=this.getKey(i)),n>=this.length)?this.add(t,i):(this.length++,this.items.splice(n,0,i),typeof t!="undefined"&&t!=null&&(this.map[t]=i),this.keys.splice(n,0,t),this.fireEvent("add",n,i,t),i)},remove:function(n){return this.removeAt(this.indexOf(n))},removeAt:function(n){var i,t;return n<this.length&&n>=0?(this.length--,i=this.items[n],this.items.splice(n,1),t=this.keys[n],typeof t!="undefined"&&delete this.map[t],this.keys.splice(n,1),this.fireEvent("remove",i,t),i):!1},removeKey:function(n){return this.removeAt(this.indexOfKey(n))},getCount:function(){return this.length},indexOf:function(n){return this.items.indexOf(n)},indexOfKey:function(n){return this.keys.indexOf(n)},item:function(n){var t=typeof this.map[n]!="undefined"?this.map[n]:this.items[n];return typeof t!="function"||this.allowFunctions?t:null},itemAt:function(n){return this.items[n]},key:function(n){return this.map[n]},contains:function(n){return this.indexOf(n)!=-1},containsKey:function(n){return typeof this.map[n]!="undefined"},clear:function(){this.length=0;this.items=[];this.keys=[];this.map={};this.fireEvent("clear")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},_sort:function(n,t,i){var s=String(t).toUpperCase()=="DESC"?-1:1,r,f;i=i||function(n,t){return n-t};var u=[],o=this.keys,e=this.items;for(r=0,f=e.length;r<f;r++)u[u.length]={key:o[r],value:e[r],index:r};for(u.sort(function(t,r){var u=i(t[n],r[n])*s;return u==0&&(u=t.index<r.index?-1:1),u}),r=0,f=u.length;r<f;r++)e[r]=u[r].value,o[r]=u[r].key;this.fireEvent("sort",this)},sort:function(n,t){this._sort("value",n,t)},keySort:function(n,t){this._sort("key",n,t||function(n,t){return String(n).toUpperCase()-String(t).toUpperCase()})},getRange:function(n,t){var u=this.items,r,i;if(u.length<1)return[];if(n=n||0,t=Math.min(typeof t=="undefined"?this.length-1:t,this.length-1),r=[],n<=t)for(i=n;i<=t;i++)r[r.length]=u[i];else for(i=n;i>=t;i--)r[r.length]=u[i];return r},filter:function(n,t,i,r){return Ext.isEmpty(t,!1)?this.clone():(t=this.createValueMatcher(t,i,r),this.filterBy(function(i){return i&&t.test(i[n])}))},filterBy:function(n,t){var u=new Ext.util.MixedCollection,f,r,i,e;for(u.getKey=this.getKey,f=this.keys,r=this.items,i=0,e=r.length;i<e;i++)n.call(t||this,r[i],f[i])&&u.add(f[i],r[i]);return u},findIndex:function(n,t,i,r,u){return Ext.isEmpty(t,!1)?-1:(t=this.createValueMatcher(t,r,u),this.findIndexBy(function(i){return i&&t.test(i[n])},null,i))},findIndexBy:function(n,t,i){for(var f=this.keys,u=this.items,r=i||0,e=u.length;r<e;r++)if(n.call(t||this,u[r],f[r]))return r;if(typeof i=="number"&&i>0)for(r=0;r<i;r++)if(n.call(t||this,u[r],f[r]))return r;return-1},createValueMatcher:function(n,t,i){return n.exec||(n=String(n),n=new RegExp((t===!0?"":"^")+Ext.escapeRe(n),i?"":"i")),n},clone:function(){for(var t=new Ext.util.MixedCollection,r=this.keys,i=this.items,n=0,u=i.length;n<u;n++)t.add(r[n],i[n]);return t.getKey=this.getKey,t}});Ext.util.MixedCollection.prototype.get=Ext.util.MixedCollection.prototype.item;Ext.util.CSS=function(){var t=null,n=document,i=/(-[a-z])/gi,r=function(n,t){return t.charAt(1).toUpperCase()};return{createStyleSheet:function(t,i){var u,f=n.getElementsByTagName("head")[0],r=n.createElement("style");if(r.setAttribute("type","text/css"),i&&r.setAttribute("id",i),Ext.isIE)f.appendChild(r),u=r.styleSheet,u.cssText=t;else{try{r.appendChild(n.createTextNode(t))}catch(e){r.cssText=t}f.appendChild(r);u=r.styleSheet?r.styleSheet:r.sheet||n.styleSheets[n.styleSheets.length-1]}return this.cacheStyleSheet(u),u},removeStyleSheet:function(t){var i=n.getElementById(t);i&&i.parentNode.removeChild(i)},swapStyleSheet:function(t,i){this.removeStyleSheet(t);var r=n.createElement("link");r.setAttribute("rel","stylesheet");r.setAttribute("type","text/css");r.setAttribute("id",t);r.setAttribute("href",i);n.getElementsByTagName("head")[0].appendChild(r)},refreshCache:function(){return this.getRules(!0)},cacheStyleSheet:function(n){var r,i;t||(t={});try{for(r=n.cssRules||n.rules,i=r.length-1;i>=0;--i)t[r[i].selectorText]=r[i]}catch(u){}},getRules:function(i){var u,r,f;if(t==null||i)for(t={},u=n.styleSheets,r=0,f=u.length;r<f;r++)try{this.cacheStyleSheet(u[r])}catch(e){}return t},getRule:function(n,t){var r=this.getRules(t),i;if(!(n instanceof Array))return r[n];for(i=0;i<n.length;i++)if(r[n[i]])return r[n[i]];return null},updateRule:function(n,t,u){var e,f;if(n instanceof Array){for(f=0;f<n.length;f++)if(this.updateRule(n[f],t,u))return!0}else if(e=this.getRule(n),e)return e.style[t.replace(i,r)]=u,!0;return!1}}}();Ext.util.TextMetrics=function(){var n;return{measure:function(t,i,r){return n||(n=Ext.util.TextMetrics.Instance(t,r)),n.bind(t),n.setFixedWidth(r||"auto"),n.getSize(i)},createInstance:function(n,t){return Ext.util.TextMetrics.Instance(n,t)}}}();Ext.util.TextMetrics.Instance=function(n,t){var i=new Ext.Element(document.createElement("div")),r;return document.body.appendChild(i.dom),i.position("absolute"),i.setLeftTop(-1e3,-1e3),i.hide(),t&&i.setWidth(t),r={getSize:function(n){i.update(n);var t=i.getSize();return i.update(""),t},bind:function(n){i.setStyle(Ext.fly(n).getStyles("font-size","font-style","font-weight","font-family","line-height"))},setFixedWidth:function(n){i.setWidth(n)},getWidth:function(n){return i.dom.style.width="auto",this.getSize(n).width},getHeight:function(n){return this.getSize(n).height}},r.bind(n),r};Ext.Element.measureText=Ext.util.TextMetrics.measure;Ext.data.Tree=function(n){this.nodeHash={};this.root=null;n&&this.setRootNode(n);this.addEvents("append","remove","move","insert","beforeappend","beforeremove","beforemove","beforeinsert");Ext.data.Tree.superclass.constructor.call(this)};Ext.extend(Ext.data.Tree,Ext.util.Observable,{pathSeparator:"/",proxyNodeEvent:function(){return this.fireEvent.apply(this,arguments)},getRootNode:function(){return this.root},setRootNode:function(n){return this.root=n,n.ownerTree=this,n.isRoot=!0,this.registerNode(n),n},getNodeById:function(n){return this.nodeHash[n]},registerNode:function(n){this.nodeHash[n.id]=n},unregisterNode:function(n){delete this.nodeHash[n.id]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"}});Ext.data.Node=function(n){this.attributes=n||{};this.leaf=this.attributes.leaf;this.id=this.attributes.id;this.id||(this.id=Ext.id(null,"ynode-"),this.attributes.id=this.id);this.childNodes=[];this.childNodes.indexOf||(this.childNodes.indexOf=function(n){for(var t=0,i=this.length;t<i;t++)if(this[t]==n)return t;return-1});this.parentNode=null;this.firstChild=null;this.lastChild=null;this.previousSibling=null;this.nextSibling=null;this.addEvents({append:!0,remove:!0,move:!0,insert:!0,beforeappend:!0,beforeremove:!0,beforemove:!0,beforeinsert:!0});this.listeners=this.attributes.listeners;Ext.data.Node.superclass.constructor.call(this)};Ext.extend(Ext.data.Node,Ext.util.Observable,{fireEvent:function(){if(Ext.data.Node.superclass.fireEvent.apply(this,arguments)===!1)return!1;var n=this.getOwnerTree();return n&&n.proxyNodeEvent.apply(n,arguments)===!1?!1:!0},isLeaf:function(){return this.leaf===!0},setFirstChild:function(n){this.firstChild=n},setLastChild:function(n){this.lastChild=n},isLast:function(){return this.parentNode?this.parentNode.lastChild==this:!0},isFirst:function(){return this.parentNode?this.parentNode.firstChild==this:!0},hasChildNodes:function(){return!this.isLeaf()&&this.childNodes.length>0},appendChild:function(n){var r=!1,u,e,t,i,f;if(n instanceof Array?r=n:arguments.length>1&&(r=arguments),r)for(u=0,e=r.length;u<e;u++)this.appendChild(r[u]);else{if(this.fireEvent("beforeappend",this.ownerTree,this,n)===!1)return!1;if(t=this.childNodes.length,i=n.parentNode,i){if(n.fireEvent("beforemove",n.getOwnerTree(),n,i,this,t)===!1)return!1;i.removeChild(n)}return t=this.childNodes.length,t==0&&this.setFirstChild(n),this.childNodes.push(n),n.parentNode=this,f=this.childNodes[t-1],f?(n.previousSibling=f,f.nextSibling=n):n.previousSibling=null,n.nextSibling=null,this.setLastChild(n),n.setOwnerTree(this.getOwnerTree()),this.fireEvent("append",this.ownerTree,this,n,t),i&&n.fireEvent("move",this.ownerTree,n,i,this,t),n}},removeChild:function(n){var t=this.childNodes.indexOf(n);return t==-1?!1:this.fireEvent("beforeremove",this.ownerTree,this,n)===!1?!1:(this.childNodes.splice(t,1),n.previousSibling&&(n.previousSibling.nextSibling=n.nextSibling),n.nextSibling&&(n.nextSibling.previousSibling=n.previousSibling),this.firstChild==n&&this.setFirstChild(n.nextSibling),this.lastChild==n&&this.setLastChild(n.previousSibling),n.setOwnerTree(null),n.parentNode=null,n.previousSibling=null,n.nextSibling=null,this.fireEvent("remove",this.ownerTree,this,n),n)},insertBefore:function(n,t){var u;if(!t)return this.appendChild(n);if(n==t||this.fireEvent("beforeinsert",this.ownerTree,this,n,t)===!1)return!1;var f=this.childNodes.indexOf(t),i=n.parentNode,r=f;if(i==this&&this.childNodes.indexOf(n)<f&&r--,i){if(n.fireEvent("beforemove",n.getOwnerTree(),n,i,this,f,t)===!1)return!1;i.removeChild(n)}return r==0&&this.setFirstChild(n),this.childNodes.splice(r,0,n),n.parentNode=this,u=this.childNodes[r-1],u?(n.previousSibling=u,u.nextSibling=n):n.previousSibling=null,n.nextSibling=t,t.previousSibling=n,n.setOwnerTree(this.getOwnerTree()),this.fireEvent("insert",this.ownerTree,this,n,t),i&&n.fireEvent("move",this.ownerTree,n,i,this,r,t),n},remove:function(){return this.parentNode.removeChild(this),this},item:function(n){return this.childNodes[n]},replaceChild:function(n,t){return this.insertBefore(n,t),this.removeChild(t),t},indexOf:function(n){return this.childNodes.indexOf(n)},getOwnerTree:function(){if(!this.ownerTree)for(var n=this;n;){if(n.ownerTree){this.ownerTree=n.ownerTree;break}n=n.parentNode}return this.ownerTree},getDepth:function(){for(var t=0,n=this;n.parentNode;)++t,n=n.parentNode;return t},setOwnerTree:function(n){var i,t,r;if(n!=this.ownerTree){for(this.ownerTree&&this.ownerTree.unregisterNode(this),this.ownerTree=n,i=this.childNodes,t=0,r=i.length;t<r;t++)i[t].setOwnerTree(n);n&&n.registerNode(this)}},getPath:function(n){var t,i,r;for(n=n||"id",t=this.parentNode,i=[this.attributes[n]];t;)i.unshift(t.attributes[n]),t=t.parentNode;return r=this.getOwnerTree().pathSeparator,r+i.join(r)},bubble:function(n,t,i){for(var r=this;r;){if(n.apply(t||r,i||[r])===!1)break;r=r.parentNode}},cascade:function(n,t,i){var u,r,f;if(n.apply(t||this,i||[this])!==!1)for(u=this.childNodes,r=0,f=u.length;r<f;r++)u[r].cascade(n,t,i)},eachChild:function(n,t,i){for(var u=this.childNodes,r=0,f=u.length;r<f;r++)if(n.apply(t||this,i||[u[r]])===!1)break},findChild:function(n,t){for(var r=this.childNodes,i=0,u=r.length;i<u;i++)if(r[i].attributes[n]==t)return r[i];return null},findChildBy:function(n,t){for(var r=this.childNodes,i=0,u=r.length;i<u;i++)if(n.call(t||r[i],r[i])===!0)return r[i];return null},sort:function(n,t){var r=this.childNodes,f=r.length,e,i,u;if(f>0)for(e=t?function(){n.apply(t,arguments)}:n,r.sort(e),i=0;i<f;i++)u=r[i],u.previousSibling=r[i-1],u.nextSibling=r[i+1],i==0&&this.setFirstChild(u),i==f-1&&this.setLastChild(u)},contains:function(n){return n.isAncestor(this)},isAncestor:function(n){for(var t=this.parentNode;t;){if(t==n)return!0;t=t.parentNode}return!1},toString:function(){return"[Node"+(this.id?" "+this.id:"")+"]"}});Ext.ComponentMgr=function(){var n=new Ext.util.MixedCollection,t={};return{register:function(t){n.add(t)},unregister:function(t){n.remove(t)},get:function(t){return n.get(t)},onAvailable:function(t,i,r){n.on("add",function(u,f){f.id==t&&(i.call(r||f,f),n.un("add",i,r))})},all:n,registerType:function(n,i){t[n]=i;i.xtype=n},create:function(n,i){return new t[n.xtype||i](n)}}}();Ext.reg=Ext.ComponentMgr.registerType;Ext.Component=function(n){if(n=n||{},n.initialConfig?(n.isAction&&(this.baseAction=n),n=n.initialConfig):(n.tagName||n.dom||typeof n=="string")&&(n={applyTo:n,id:n.id||n}),this.initialConfig=n,Ext.apply(this,n),this.addEvents("disable","enable","beforeshow","show","beforehide","hide","beforerender","render","beforedestroy","destroy","beforestaterestore","staterestore","beforestatesave","statesave"),this.getId(),Ext.ComponentMgr.register(this),Ext.Component.superclass.constructor.call(this),this.baseAction&&this.baseAction.addComponent(this),this.initComponent(),this.plugins)if(this.plugins instanceof Array)for(var t=0,i=this.plugins.length;t<i;t++)this.plugins[t].init(this);else this.plugins.init(this);this.stateful!==!1&&this.initState(n);this.applyTo?(this.applyToMarkup(this.applyTo),delete this.applyTo):this.renderTo&&(this.render(this.renderTo),delete this.renderTo)};Ext.Component.AUTO_ID=1e3;Ext.extend(Ext.Component,Ext.util.Observable,{disabledClass:"x-item-disabled",allowDomMove:!0,autoShow:!1,hideMode:"display",hideParent:!1,hidden:!1,disabled:!1,rendered:!1,ctype:"Ext.Component",actionMode:"el",getActionEl:function(){return this[this.actionMode]},initComponent:Ext.emptyFn,render:function(n,t){if(!this.rendered&&this.fireEvent("beforerender",this)!==!1){!n&&this.el&&(this.el=Ext.get(this.el),n=this.el.dom.parentNode,this.allowDomMove=!1);this.container=Ext.get(n);this.ctCls&&this.container.addClass(this.ctCls);this.rendered=!0;t!==undefined&&(t=typeof t=="number"?this.container.dom.childNodes[t]:Ext.getDom(t));this.onRender(this.container,t||null);this.autoShow&&this.el.removeClass(["x-hidden","x-hide-"+this.hideMode]);this.cls&&(this.el.addClass(this.cls),delete this.cls);this.style&&(this.el.applyStyles(this.style),delete this.style);this.fireEvent("render",this);this.afterRender(this.container);this.hidden&&this.hide();this.disabled&&this.disable();this.initStateEvents()}return this},initState:function(){if(Ext.state.Manager){var n=Ext.state.Manager.get(this.stateId||this.id);n&&this.fireEvent("beforestaterestore",this,n)!==!1&&(this.applyState(n),this.fireEvent("staterestore",this,n))}},initStateEvents:function(){if(this.stateEvents)for(var n=0,t;t=this.stateEvents[n];n++)this.on(t,this.saveState,this,{delay:100})},applyState:function(n){n&&Ext.apply(this,n)},getState:function(){return null},saveState:function(){if(Ext.state.Manager){var n=this.getState();this.fireEvent("beforestatesave",this,n)!==!1&&(Ext.state.Manager.set(this.stateId||this.id,n),this.fireEvent("statesave",this,n))}},applyToMarkup:function(n){this.allowDomMove=!1;this.el=Ext.get(n);this.render(this.el.dom.parentNode)},addClass:function(n){this.el?this.el.addClass(n):this.cls=this.cls?this.cls+" "+n:n},removeClass:function(n){this.el?this.el.removeClass(n):this.cls&&(this.cls=this.cls.split(" ").remove(n).join(" "))},onRender:function(n,t){if(this.autoEl)if(typeof this.autoEl=="string")this.el=document.createElement(this.autoEl);else{var i=document.createElement("div");Ext.DomHelper.overwrite(i,this.autoEl);this.el=i.firstChild}this.el&&(this.el=Ext.get(this.el),this.allowDomMove!==!1&&n.dom.insertBefore(this.el.dom,t))},getAutoCreate:function(){var n=typeof this.autoCreate=="object"?this.autoCreate:Ext.apply({},this.defaultAutoCreate);return this.id&&!n.id&&(n.id=this.id),n},afterRender:Ext.emptyFn,destroy:function(){this.fireEvent("beforedestroy",this)!==!1&&(this.beforeDestroy(),this.rendered&&(this.el.removeAllListeners(),this.el.remove(),this.actionMode=="container"&&this.container.remove()),this.onDestroy(),Ext.ComponentMgr.unregister(this),this.fireEvent("destroy",this),this.purgeListeners())},beforeDestroy:Ext.emptyFn,onDestroy:Ext.emptyFn,getEl:function(){return this.el},getId:function(){return this.id||(this.id="ext-comp-"+ ++Ext.Component.AUTO_ID)},getItemId:function(){return this.itemId||this.getId()},focus:function(n,t){if(t){this.focus.defer(typeof t=="number"?t:10,this,[n,!1]);return}return this.rendered&&(this.el.focus(),n===!0&&this.el.dom.select()),this},blur:function(){return this.rendered&&this.el.blur(),this},disable:function(){return this.rendered&&this.onDisable(),this.disabled=!0,this.fireEvent("disable",this),this},onDisable:function(){this.getActionEl().addClass(this.disabledClass);this.el.dom.disabled=!0},enable:function(){return this.rendered&&this.onEnable(),this.disabled=!1,this.fireEvent("enable",this),this},onEnable:function(){this.getActionEl().removeClass(this.disabledClass);this.el.dom.disabled=!1},setDisabled:function(n){this[n?"disable":"enable"]()},show:function(){return this.fireEvent("beforeshow",this)!==!1&&(this.hidden=!1,this.autoRender&&this.render(typeof this.autoRender=="boolean"?Ext.getBody():this.autoRender),this.rendered&&this.onShow(),this.fireEvent("show",this)),this},onShow:function(){this.hideParent?this.container.removeClass("x-hide-"+this.hideMode):this.getActionEl().removeClass("x-hide-"+this.hideMode)},hide:function(){return this.fireEvent("beforehide",this)!==!1&&(this.hidden=!0,this.rendered&&this.onHide(),this.fireEvent("hide",this)),this},onHide:function(){this.hideParent?this.container.addClass("x-hide-"+this.hideMode):this.getActionEl().addClass("x-hide-"+this.hideMode)},setVisible:function(n){return n?this.show():this.hide(),this},isVisible:function(){return this.rendered&&this.getActionEl().isVisible()},cloneConfig:function(n){n=n||{};var i=n.id||Ext.id(),t=Ext.applyIf(n,this.initialConfig);return t.id=i,new this.constructor(t)},getXType:function(){return this.constructor.xtype},isXType:function(n,t){return t?this.constructor.xtype==n:("/"+this.getXTypes()+"/").indexOf("/"+n+"/")!=-1},getXTypes:function(){var t=this.constructor,i,n;if(!t.xtypes){for(i=[],n=this;n&&n.constructor.xtype;)i.unshift(n.constructor.xtype),n=n.constructor.superclass;t.xtypeChain=i;t.xtypes=i.join("/")}return t.xtypes}});Ext.reg("component",Ext.Component),function(){Ext.Layer=function(n,t){var r;n=n||{};var u=Ext.DomHelper,i=n.parentEl,f=i?Ext.getDom(i):document.body;t&&(this.dom=Ext.getDom(t));this.dom||(r=n.dh||{tag:"div",cls:"x-layer"},this.dom=u.append(f,r));n.cls&&this.addClass(n.cls);this.constrain=n.constrain!==!1;this.visibilityMode=Ext.Element.VISIBILITY;this.id=n.id?this.dom.id=n.id:Ext.id(this.dom);this.zindex=n.zindex||this.getZIndex();this.position("absolute",this.zindex);n.shadow?(this.shadowOffset=n.shadowOffset||4,this.shadow=new Ext.Shadow({offset:this.shadowOffset,mode:n.shadow})):this.shadowOffset=0;this.useShim=n.shim!==!1&&Ext.useShims;this.useDisplay=n.useDisplay;this.hide()};var n=Ext.Element.prototype,t=[];Ext.extend(Ext.Layer,Ext.Element,{getZIndex:function(){return this.zindex||parseInt(this.getStyle("z-index"),10)||11e3},getShim:function(){var n,i;return this.useShim?this.shim?this.shim:(n=t.shift(),n||(n=this.createShim(),n.enableDisplayMode("block"),n.dom.style.display="none",n.dom.style.visibility="visible"),i=this.dom.parentNode,n.dom.parentNode!=i&&i.insertBefore(n.dom,this.dom),n.setStyle("z-index",this.getZIndex()-2),this.shim=n,n):null},hideShim:function(){this.shim&&(this.shim.setDisplayed(!1),t.push(this.shim),delete this.shim)},disableShadow:function(){this.shadow&&(this.shadowDisabled=!0,this.shadow.hide(),this.lastShadowOffset=this.shadowOffset,this.shadowOffset=0)},enableShadow:function(n){this.shadow&&(this.shadowDisabled=!1,this.shadowOffset=this.lastShadowOffset,delete this.lastShadowOffset,n&&this.sync(!0))},sync:function(n){var i=this.shadow,r,u;if(!this.updating&&this.isVisible()&&(i||this.useShim)){var t=this.getShim(),o=this.getWidth(),s=this.getHeight(),f=this.getLeft(!0),e=this.getTop(!0);i&&!this.shadowDisabled?(n&&!i.isVisible()?i.show(this):i.realign(f,e,o,s),t&&(n&&t.show(),r=i.adjusts,u=t.dom.style,u.left=Math.min(f,f+r.l)+"px",u.top=Math.min(e,e+r.t)+"px",u.width=o+r.w+"px",u.height=s+r.h+"px")):t&&(n&&t.show(),t.setSize(o,s),t.setLeftTop(f,e))}},destroy:function(){this.hideShim();this.shadow&&this.shadow.hide();this.removeAllListeners();Ext.removeNode(this.dom);Ext.Element.uncache(this.id)},remove:function(){this.destroy()},beginUpdate:function(){this.updating=!0},endUpdate:function(){this.updating=!1;this.sync(!0)},hideUnders:function(){this.shadow&&this.shadow.hide();this.hideShim()},constrainXY:function(){var o;if(this.constrain){var s=Ext.lib.Dom.getViewWidth(),h=Ext.lib.Dom.getViewHeight(),i=Ext.getDoc().getScroll(),r=this.getXY(),u=r[0],t=r[1],c=this.dom.offsetWidth+this.shadowOffset,e=this.dom.offsetHeight+this.shadowOffset,f=!1;u+c>s+i.left&&(u=s-c-this.shadowOffset,f=!0);t+e>h+i.top&&(t=h-e-this.shadowOffset,f=!0);u<i.left&&(u=i.left,f=!0);t<i.top&&(t=i.top,f=!0);f&&(this.avoidY&&(o=this.avoidY,t<=o&&t+e>=o&&(t=o-e-5)),r=[u,t],this.storeXY(r),n.setXY.call(this,r),this.sync())}},isVisible:function(){return this.visible},showAction:function(){this.visible=!0;this.useDisplay===!0?this.setDisplayed(""):this.lastXY?n.setXY.call(this,this.lastXY):this.lastLT&&n.setLeftTop.call(this,this.lastLT[0],this.lastLT[1])},hideAction:function(){this.visible=!1;this.useDisplay===!0?this.setDisplayed(!1):this.setLeftTop(-1e4,-1e4)},setVisible:function(t,i,r,u,f){var e;t&&this.showAction();i&&t?(e=function(){this.sync(!0);u&&u()}.createDelegate(this),n.setVisible.call(this,!0,!0,r,e,f)):(t||this.hideUnders(!0),e=u,i&&(e=function(){this.hideAction();u&&u()}.createDelegate(this)),n.setVisible.call(this,t,i,r,e,f),t?this.sync(!0):i||this.hideAction())},storeXY:function(n){delete this.lastLT;this.lastXY=n},storeLeftTop:function(n,t){delete this.lastXY;this.lastLT=[n,t]},beforeFx:function(){return this.beforeAction(),Ext.Layer.superclass.beforeFx.apply(this,arguments)},afterFx:function(){Ext.Layer.superclass.afterFx.apply(this,arguments);this.sync(this.isVisible())},beforeAction:function(){!this.updating&&this.shadow&&this.shadow.hide()},setLeft:function(t){this.storeLeftTop(t,this.getTop(!0));n.setLeft.apply(this,arguments);this.sync()},setTop:function(t){this.storeLeftTop(this.getLeft(!0),t);n.setTop.apply(this,arguments);this.sync()},setLeftTop:function(t,i){this.storeLeftTop(t,i);n.setLeftTop.apply(this,arguments);this.sync()},setXY:function(t,i,r,u,f){this.fixDisplay();this.beforeAction();this.storeXY(t);var e=this.createCB(u);n.setXY.call(this,t,i,r,e,f);i||e()},createCB:function(n){var t=this;return function(){t.constrainXY();t.sync(!0);n&&n()}},setX:function(n,t,i,r,u){this.setXY([n,this.getY()],t,i,r,u)},setY:function(n,t,i,r,u){this.setXY([this.getX(),n],t,i,r,u)},setSize:function(t,i,r,u,f,e){this.beforeAction();var o=this.createCB(f);n.setSize.call(this,t,i,r,u,o,e);r||o()},setWidth:function(t,i,r,u,f){this.beforeAction();var e=this.createCB(u);n.setWidth.call(this,t,i,r,e,f);i||e()},setHeight:function(t,i,r,u,f){this.beforeAction();var e=this.createCB(u);n.setHeight.call(this,t,i,r,e,f);i||e()},setBounds:function(t,i,r,u,f,e,o,s){this.beforeAction();var h=this.createCB(o);return f?n.setBounds.call(this,t,i,r,u,f,e,h,s):(this.storeXY([t,i]),n.setXY.call(this,[t,i]),n.setSize.call(this,r,u,f,e,h,s),h()),this},setZIndex:function(n){this.zindex=n;this.setStyle("z-index",n+2);this.shadow&&this.shadow.setZIndex(n+1);this.shim&&this.shim.setStyle("z-index",n)}})}();Ext.Shadow=function(n){Ext.apply(this,n);typeof this.mode!="string"&&(this.mode=this.defaultMode);var r=this.offset,t={h:0},i=Math.floor(this.offset/2);switch(this.mode.toLowerCase()){case"drop":t.w=0;t.l=t.t=r;t.t-=1;Ext.isIE&&(t.l-=this.offset+i,t.t-=this.offset+i,t.w-=i,t.h-=i,t.t+=1);break;case"sides":t.w=r*2;t.l=-r;t.t=r-1;Ext.isIE&&(t.l-=this.offset-i,t.t-=this.offset+i,t.l+=1,t.w-=(this.offset-i)*2,t.w-=i+1,t.h-=1);break;case"frame":t.w=t.h=r*2;t.l=t.t=-r;t.t+=1;t.h-=2;Ext.isIE&&(t.l-=this.offset-i,t.t-=this.offset-i,t.l+=1,t.w-=this.offset+i+1,t.h-=this.offset+i,t.h+=1)}this.adjusts=t};Ext.Shadow.prototype={offset:4,defaultMode:"drop",show:function(n){n=Ext.get(n);this.el||(this.el=Ext.Shadow.Pool.pull(),this.el.dom.nextSibling!=n.dom&&this.el.insertBefore(n));this.el.setStyle("z-index",this.zIndex||parseInt(n.getStyle("z-index"),10)-1);Ext.isIE&&(this.el.dom.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=50) progid:DXImageTransform.Microsoft.Blur(pixelradius="+this.offset+")");this.realign(n.getLeft(!0),n.getTop(!0),n.getWidth(),n.getHeight());this.el.dom.style.display="block"},isVisible:function(){return this.el?!0:!1},realign:function(n,t,i,r){var f,o;if(this.el){var e=this.adjusts,s=this.el.dom,u=s.style;u.left=n+e.l+"px";u.top=t+e.t+"px";var h=i+e.w,c=r+e.h,l=h+"px",a=c+"px";(u.width!=l||u.height!=a)&&(u.width=l,u.height=a,Ext.isIE||(f=s.childNodes,o=Math.max(0,h-12)+"px",f[0].childNodes[1].style.width=o,f[1].childNodes[1].style.width=o,f[2].childNodes[1].style.width=o,f[1].style.height=Math.max(0,c-12)+"px"))}},hide:function(){this.el&&(this.el.dom.style.display="none",Ext.Shadow.Pool.push(this.el),delete this.el)},setZIndex:function(n){this.zIndex=n;this.el&&this.el.setStyle("z-index",n)}};Ext.Shadow.Pool=function(){var n=[],t=Ext.isIE?'<div class="x-ie-shadow"><\/div>':'<div class="x-shadow"><div class="xst"><div class="xstl"><\/div><div class="xstc"><\/div><div class="xstr"><\/div><\/div><div class="xsc"><div class="xsml"><\/div><div class="xsmc"><\/div><div class="xsmr"><\/div><\/div><div class="xsb"><div class="xsbl"><\/div><div class="xsbc"><\/div><div class="xsbr"><\/div><\/div><\/div>';return{pull:function(){var i=n.shift();return i||(i=Ext.get(Ext.DomHelper.insertHtml("beforeBegin",document.body.firstChild,t)),i.autoBoxAdjust=!1),i},push:function(t){n.push(t)}}}();Ext.BoxComponent=Ext.extend(Ext.Component,{initComponent:function(){Ext.BoxComponent.superclass.initComponent.call(this);this.addEvents("resize","move")},boxReady:!1,deferHeight:!1,setSize:function(n,t){var u;if(typeof n=="object"&&(t=n.height,n=n.width),!this.boxReady)return this.width=n,this.height=t,this;if(this.lastSize&&this.lastSize.width==n&&this.lastSize.height==t)return this;this.lastSize={width:n,height:t};var f=this.adjustSize(n,t),i=f.width,r=f.height;if(i!==undefined||r!==undefined){u=this.getResizeEl();this.deferHeight||i===undefined||r===undefined?this.deferHeight||r===undefined?i!==undefined&&u.setWidth(i):u.setHeight(r):u.setSize(i,r);this.onResize(i,r,n,t);this.fireEvent("resize",this,i,r,n,t)}return this},setWidth:function(n){return this.setSize(n)},setHeight:function(n){return this.setSize(undefined,n)},getSize:function(){return this.el.getSize()},getPosition:function(n){return n===!0?[this.el.getLeft(!0),this.el.getTop(!0)]:this.xy||this.el.getXY()},getBox:function(n){var t=this.el.getSize(),i;return n===!0?(t.x=this.el.getLeft(!0),t.y=this.el.getTop(!0)):(i=this.xy||this.el.getXY(),t.x=i[0],t.y=i[1]),t},updateBox:function(n){return this.setSize(n.width,n.height),this.setPagePosition(n.x,n.y),this},getResizeEl:function(){return this.resizeEl||this.el},getPositionEl:function(){return this.positionEl||this.el},setPosition:function(n,t){if(n&&typeof n[1]=="number"&&(t=n[1],n=n[0]),this.x=n,this.y=t,!this.boxReady)return this;var f=this.adjustPosition(n,t),i=f.x,r=f.y,u=this.getPositionEl();if(i!==undefined||r!==undefined){i!==undefined&&r!==undefined?u.setLeftTop(i,r):i!==undefined?u.setLeft(i):r!==undefined&&u.setTop(r);this.onPosition(i,r);this.fireEvent("move",this,i,r)}return this},setPagePosition:function(n,t){if((n&&typeof n[1]=="number"&&(t=n[1],n=n[0]),this.pageX=n,this.pageY=t,this.boxReady)&&n!==undefined&&t!==undefined){var i=this.el.translatePoints(n,t);return this.setPosition(i.left,i.top),this}},onRender:function(n,t){Ext.BoxComponent.superclass.onRender.call(this,n,t);this.resizeEl&&(this.resizeEl=Ext.get(this.resizeEl));this.positionEl&&(this.positionEl=Ext.get(this.positionEl))},afterRender:function(){Ext.BoxComponent.superclass.afterRender.call(this);this.boxReady=!0;this.setSize(this.width,this.height);this.x||this.y?this.setPosition(this.x,this.y):(this.pageX||this.pageY)&&this.setPagePosition(this.pageX,this.pageY)},syncSize:function(){return delete this.lastSize,this.setSize(this.autoWidth?undefined:this.el.getWidth(),this.autoHeight?undefined:this.el.getHeight()),this},onResize:function(){},onPosition:function(){},adjustSize:function(n,t){return this.autoWidth&&(n="auto"),this.autoHeight&&(t="auto"),{width:n,height:t}},adjustPosition:function(n,t){return{x:n,y:t}}});Ext.reg("box",Ext.BoxComponent);Ext.Container=Ext.extend(Ext.BoxComponent,{autoDestroy:!0,defaultType:"panel",initComponent:function(){Ext.Container.superclass.initComponent.call(this);this.addEvents("afterlayout","beforeadd","beforeremove","add","remove");var n=this.items;n&&(delete this.items,n instanceof Array?this.add.apply(this,n):this.add(n))},initItems:function(){this.items||(this.items=new Ext.util.MixedCollection(!1,this.getComponentId),this.getLayout())},setLayout:function(n){this.layout&&this.layout!=n&&this.layout.setContainer(null);this.initItems();this.layout=n;n.setContainer(this)},render:function(){if(Ext.Container.superclass.render.apply(this,arguments),this.layout&&(typeof this.layout=="string"&&(this.layout=new Ext.Container.LAYOUTS[this.layout.toLowerCase()](this.layoutConfig)),this.setLayout(this.layout),this.activeItem!==undefined)){var n=this.activeItem;delete this.activeItem;this.layout.setActiveItem(n);return}if(this.ownerCt||this.doLayout(),this.monitorResize===!0)Ext.EventManager.onWindowResize(this.doLayout,this)},getLayoutTarget:function(){return this.el},getComponentId:function(n){return n.itemId||n.id},add:function(n){var r,u,i,t,f;if(this.items||this.initItems(),r=arguments,u=r.length,u>1){for(i=0;i<u;i++)this.add(r[i]);return}return t=this.lookupComponent(this.applyDefaults(n)),f=this.items.length,this.fireEvent("beforeadd",this,t,f)!==!1&&this.onBeforeAdd(t)!==!1&&(this.items.add(t),t.ownerCt=this,this.fireEvent("add",this,t,f)),t},insert:function(n,t){var u,f,r,i;if(this.items||this.initItems(),u=arguments,f=u.length,f>2){for(r=f-1;r>=1;--r)this.insert(n,u[r]);return}return i=this.lookupComponent(this.applyDefaults(t)),i.ownerCt==this&&this.items.indexOf(i)<n&&--n,this.fireEvent("beforeadd",this,i,n)!==!1&&this.onBeforeAdd(i)!==!1&&(this.items.insert(n,i),i.ownerCt=this,this.fireEvent("add",this,i,n)),i},applyDefaults:function(n){return this.defaults&&(typeof n=="string"?(n=Ext.ComponentMgr.get(n),Ext.apply(n,this.defaults)):n.events?Ext.apply(n,this.defaults):Ext.applyIf(n,this.defaults)),n},onBeforeAdd:function(n){n.ownerCt&&n.ownerCt.remove(n,!1);this.hideBorders===!0&&(n.border=n.border===!0)},remove:function(n,t){var i=this.getComponent(n);return i&&this.fireEvent("beforeremove",this,i)!==!1&&(this.items.remove(i),delete i.ownerCt,(t===!0||t!==!1&&this.autoDestroy)&&i.destroy(),this.layout&&this.layout.activeItem==i&&delete this.layout.activeItem,this.fireEvent("remove",this,i)),i},getComponent:function(n){return typeof n=="object"?n:this.items.get(n)},lookupComponent:function(n){return typeof n=="string"?Ext.ComponentMgr.get(n):n.events?n:this.createComponent(n)},createComponent:function(n){return Ext.ComponentMgr.create(n,this.defaultType)},doLayout:function(){var t,n,r,i;if(this.rendered&&this.layout&&this.layout.layout(),this.items)for(t=this.items.items,n=0,r=t.length;n<r;n++)i=t[n],i.doLayout&&i.doLayout()},getLayout:function(){if(!this.layout){var n=new Ext.layout.ContainerLayout(this.layoutConfig);this.setLayout(n)}return this.layout},onDestroy:function(){var t,n,i;if(this.items)for(t=this.items.items,n=0,i=t.length;n<i;n++)Ext.destroy(t[n]);this.monitorResize&&Ext.EventManager.removeResizeListener(this.doLayout,this);Ext.Container.superclass.onDestroy.call(this)},bubble:function(n,t,i){for(var r=this;r;){if(n.apply(t||r,i||[r])===!1)break;r=r.ownerCt}},cascade:function(n,t,i){var u,r,f;if(n.apply(t||this,i||[this])!==!1&&this.items)for(u=this.items.items,r=0,f=u.length;r<f;r++)u[r].cascade?u[r].cascade(n,t,i):n.apply(t||this,i||[u[r]])},findById:function(n){var t,i=this;return this.cascade(function(r){if(i!=r&&r.id===n)return t=r,!1}),t||null},findByType:function(n){return typeof n=="function"?this.findBy(function(t){return t.constructor===n}):this.findBy(function(t){return t.constructor.xtype===n})},find:function(n,t){return this.findBy(function(i){return i[n]===t})},findBy:function(n,t){var i=[],r=this;return this.cascade(function(u){r!=u&&n.call(t||u,u,r)===!0&&i.push(u)}),i}});Ext.Container.LAYOUTS={};Ext.reg("container",Ext.Container);Ext.Panel=Ext.extend(Ext.Container,{baseCls:"x-panel",collapsedCls:"x-panel-collapsed",maskDisabled:!0,animCollapse:Ext.enableFx,headerAsText:!0,buttonAlign:"right",collapsed:!1,collapseFirst:!0,minButtonWidth:75,elements:"body",toolTarget:"header",collapseEl:"bwrap",slideAnchor:"t",deferHeight:!0,expandDefaults:{duration:.25},collapseDefaults:{duration:.25},initComponent:function(){var t,n,i;if(Ext.Panel.superclass.initComponent.call(this),this.addEvents("bodyresize","titlechange","collapse","expand","beforecollapse","beforeexpand","beforeclose","close","activate","deactivate"),this.tbar&&(this.elements+=",tbar",typeof this.tbar=="object"&&(this.topToolbar=this.tbar),delete this.tbar),this.bbar&&(this.elements+=",bbar",typeof this.bbar=="object"&&(this.bottomToolbar=this.bbar),delete this.bbar),this.header===!0?(this.elements+=",header",delete this.header):this.title&&this.header!==!1&&(this.elements+=",header"),this.footer===!0&&(this.elements+=",footer",delete this.footer),this.buttons)for(t=this.buttons,this.buttons=[],n=0,i=t.length;n<i;n++)t[n].render?this.buttons.push(t[n]):this.addButton(t[n]);if(this.autoLoad)this.on("render",this.doAutoLoad,this,{delay:10})},createElement:function(n,t){if(this[n]){t.appendChild(this[n].dom);return}if(n==="bwrap"||this.elements.indexOf(n)!=-1)if(this[n+"Cfg"])this[n]=Ext.fly(t).createChild(this[n+"Cfg"]);else{var i=document.createElement("div");i.className=this[n+"Cls"];this[n]=Ext.get(t.appendChild(i))}},onRender:function(n,t){var u,o,r,f,i,h,c,l,e,a,v,s;if(Ext.Panel.superclass.onRender.call(this,n,t),this.createClasses(),this.el?(this.el.addClass(this.baseCls),this.header=this.el.down("."+this.headerCls),this.bwrap=this.el.down("."+this.bwrapCls),u=this.bwrap?this.bwrap:this.el,this.tbar=u.down("."+this.tbarCls),this.body=u.down("."+this.bodyCls),this.bbar=u.down("."+this.bbarCls),this.footer=u.down("."+this.footerCls),this.fromMarkup=!0):this.el=n.createChild({id:this.id,cls:this.baseCls},t),o=this.el,r=o.dom,this.cls&&this.el.addClass(this.cls),this.buttons&&(this.elements+=",footer"),this.frame){o.insertHtml("afterBegin",String.format(Ext.Element.boxMarkup,this.baseCls));this.createElement("header",r.firstChild.firstChild.firstChild);this.createElement("bwrap",r);var i=this.bwrap.dom,y=r.childNodes[1],p=r.childNodes[2];i.appendChild(y);i.appendChild(p);f=i.firstChild.firstChild.firstChild;this.createElement("tbar",f);this.createElement("body",f);this.createElement("bbar",f);this.createElement("footer",i.lastChild.firstChild.firstChild);this.footer||(this.bwrap.dom.lastChild.className+=" x-panel-nofooter")}else this.createElement("header",r),this.createElement("bwrap",r),i=this.bwrap.dom,this.createElement("tbar",i),this.createElement("body",i),this.createElement("bbar",i),this.createElement("footer",i),this.header||(this.body.addClass(this.bodyCls+"-noheader"),this.tbar&&this.tbar.addClass(this.tbarCls+"-noheader"));if(this.border===!1&&(this.el.addClass(this.baseCls+"-noborder"),this.body.addClass(this.bodyCls+"-noborder"),this.header&&this.header.addClass(this.headerCls+"-noborder"),this.footer&&this.footer.addClass(this.footerCls+"-noborder"),this.tbar&&this.tbar.addClass(this.tbarCls+"-noborder"),this.bbar&&this.bbar.addClass(this.bbarCls+"-noborder")),this.bodyBorder===!1&&this.body.addClass(this.bodyCls+"-noborder"),this.bodyStyle&&this.body.applyStyles(this.bodyStyle),this.bwrap.enableDisplayMode("block"),this.header&&(this.header.unselectable(),this.headerAsText&&(this.header.dom.innerHTML='<span class="'+this.headerTextCls+'">'+this.header.dom.innerHTML+"<\/span>",this.iconCls&&this.setIconClass(this.iconCls))),this.floating&&this.makeFloating(this.floating),this.collapsible&&(this.tools=this.tools?this.tools.slice(0):[],this.hideCollapseTool||this.tools[this.collapseFirst?"unshift":"push"]({id:"toggle",handler:this.toggleCollapse,scope:this}),this.titleCollapse&&this.header)){this.header.on("click",this.toggleCollapse,this);this.header.setStyle("cursor","pointer")}if(this.tools?(h=this.tools,this.tools={},this.addTool.apply(this,h)):this.tools={},this.buttons&&this.buttons.length>0)for(c=this.footer.createChild({cls:"x-panel-btns-ct",cn:{cls:"x-panel-btns x-panel-btns-"+this.buttonAlign,html:'<table cellspacing="0"><tbody><tr><\/tr><\/tbody><\/table><div class="x-clear"><\/div>'}},null,!0),l=c.getElementsByTagName("tr")[0],e=0,a=this.buttons.length;e<a;e++)v=this.buttons[e],s=document.createElement("td"),s.className="x-panel-btn-td",v.render(l.appendChild(s));this.tbar&&this.topToolbar&&(this.topToolbar instanceof Array&&(this.topToolbar=new Ext.Toolbar(this.topToolbar)),this.topToolbar.render(this.tbar));this.bbar&&this.bottomToolbar&&(this.bottomToolbar instanceof Array&&(this.bottomToolbar=new Ext.Toolbar(this.bottomToolbar)),this.bottomToolbar.render(this.bbar))},setIconClass:function(n){var r=this.iconCls,t,i;this.iconCls=n;this.rendered&&this.header&&(this.frame?(this.header.addClass("x-panel-icon"),this.header.replaceClass(r,this.iconCls)):(t=this.header.dom,i=t.firstChild&&String(t.firstChild.tagName).toLowerCase()=="img"?t.firstChild:null,i?Ext.fly(i).replaceClass(r,this.iconCls):Ext.DomHelper.insertBefore(t.firstChild,{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-panel-inline-icon "+this.iconCls})))},makeFloating:function(n){this.floating=!0;this.el=new Ext.Layer(typeof n=="object"?n:{shadow:this.shadow!==undefined?this.shadow:"sides",shadowOffset:this.shadowOffset,constrain:!1,shim:this.shim===!1?!1:undefined},this.el)},getTopToolbar:function(){return this.topToolbar},getBottomToolbar:function(){return this.bottomToolbar},addButton:function(n,t,i){var r={handler:t,scope:i,minWidth:this.minButtonWidth,hideParent:!0},u;return typeof n=="string"?r.text=n:Ext.apply(r,n),u=new Ext.Button(r),this.buttons||(this.buttons=[]),this.buttons.push(u),u},addTool:function(){var i;if(this[this.toolTarget]){this.toolTemplate||(i=new Ext.Template('<div class="x-tool x-tool-{id}">&#160;<\/div>'),i.disableFormats=!0,i.compile(),Ext.Panel.prototype.toolTemplate=i);for(var r=0,u=arguments,e=u.length;r<e;r++){var n=u[r],f="x-tool-"+n.id+"-over",t=this.toolTemplate.insertFirst(this[this.toolTarget],n,!0);this.tools[n.id]=t;t.enableDisplayMode("block");t.on("click",this.createToolHandler(t,n,f,this));if(n.on)t.on(n.on);n.hidden&&t.hide();n.qtip&&(typeof n.qtip=="object"?Ext.QuickTips.register(Ext.apply({target:t.id},n.qtip)):t.dom.qtip=n.qtip);t.addClassOnOver(f)}}},onShow:function(){if(this.floating)return this.el.show();Ext.Panel.superclass.onShow.call(this)},onHide:function(){if(this.floating)return this.el.hide();Ext.Panel.superclass.onHide.call(this)},createToolHandler:function(n,t,i,r){return function(u){n.removeClass(i);u.stopEvent();t.handler&&t.handler.call(t.scope||n,u,n,r)}},afterRender:function(){if(this.fromMarkup&&this.height===undefined&&!this.autoHeight&&(this.height=this.el.getHeight()),!this.floating||this.hidden||this.initHidden||this.el.show(),this.title&&this.setTitle(this.title),this.setAutoScroll(),this.html&&(this.body.update(typeof this.html=="object"?Ext.DomHelper.markup(this.html):this.html),delete this.html),this.contentEl){var n=Ext.getDom(this.contentEl);Ext.fly(n).removeClass(["x-hidden","x-hide-display"]);this.body.dom.appendChild(n)}this.collapsed&&(this.collapsed=!1,this.collapse(!1));Ext.Panel.superclass.afterRender.call(this);this.initEvents()},setAutoScroll:function(){this.rendered&&this.autoScroll&&this.body.setOverflow("auto")},getKeyMap:function(){return this.keyMap||(this.keyMap=new Ext.KeyMap(this.el,this.keys)),this.keyMap},initEvents:function(){this.keys&&this.getKeyMap();this.draggable&&this.initDraggable()},initDraggable:function(){this.dd=new Ext.Panel.DD(this,typeof this.draggable=="boolean"?null:this.draggable)},beforeEffect:function(){this.floating&&this.el.beforeAction();this.el.addClass("x-panel-animated")},afterEffect:function(){this.syncShadow();this.el.removeClass("x-panel-animated")},createEffect:function(n,t,i){var r={scope:i,block:!0};return n===!0?(r.callback=t,r):(r.callback=n.callback?function(){t.call(i);Ext.callback(n.callback,n.scope)}:t,Ext.applyIf(r,n))},collapse:function(n){if(!this.collapsed&&!this.el.hasFxBlock()&&this.fireEvent("beforecollapse",this,n)!==!1){var t=n===!0||n!==!1&&this.animCollapse;this.beforeEffect();this.onCollapse(t,n);return this}},onCollapse:function(n,t){n?this[this.collapseEl].slideOut(this.slideAnchor,Ext.apply(this.createEffect(t||!0,this.afterCollapse,this),this.collapseDefaults)):(this[this.collapseEl].hide(),this.afterCollapse())},afterCollapse:function(){this.collapsed=!0;this.el.addClass(this.collapsedCls);this.afterEffect();this.fireEvent("collapse",this)},expand:function(n){if(this.collapsed&&!this.el.hasFxBlock()&&this.fireEvent("beforeexpand",this,n)!==!1){var t=n===!0||n!==!1&&this.animCollapse;this.el.removeClass(this.collapsedCls);this.beforeEffect();this.onExpand(t,n);return this}},onExpand:function(n,t){n?this[this.collapseEl].slideIn(this.slideAnchor,Ext.apply(this.createEffect(t||!0,this.afterExpand,this),this.expandDefaults)):(this[this.collapseEl].show(),this.afterExpand())},afterExpand:function(){this.collapsed=!1;this.afterEffect();this.fireEvent("expand",this)},toggleCollapse:function(n){return this[this.collapsed?"expand":"collapse"](n),this},onDisable:function(){this.rendered&&this.maskDisabled&&this.el.mask();Ext.Panel.superclass.onDisable.call(this)},onEnable:function(){this.rendered&&this.maskDisabled&&this.el.unmask();Ext.Panel.superclass.onEnable.call(this)},onResize:function(n,t){if(n!==undefined||t!==undefined){if(this.collapsed){if(this.queuedBodySize={width:n,height:t},!this.queuedExpand&&this.allowQueuedExpand!==!1){this.queuedExpand=!0;this.on("expand",function(){delete this.queuedExpand;this.onResize(this.queuedBodySize.width,this.queuedBodySize.height);this.doLayout()},this,{single:!0})}}else typeof n=="number"?this.body.setWidth(this.adjustBodyWidth(n-this.getFrameWidth())):n=="auto"&&this.body.setWidth(n),typeof t=="number"?this.body.setHeight(this.adjustBodyHeight(t-this.getFrameHeight())):t=="auto"&&this.body.setHeight(t);this.fireEvent("bodyresize",this,n,t)}this.syncShadow()},adjustBodyHeight:function(n){return n},adjustBodyWidth:function(n){return n},onPosition:function(){this.syncShadow()},onDestroy:function(){var n,t;if(this.tools)for(n in this.tools)Ext.destroy(this.tools[n]);if(this.buttons)for(t in this.buttons)Ext.destroy(this.buttons[t]);Ext.destroy(this.topToolbar,this.bottomToolbar);Ext.Panel.superclass.onDestroy.call(this)},getFrameWidth:function(){var n=this.el.getFrameWidth("lr"),t,i;return this.frame&&(t=this.bwrap.dom.firstChild,n+=Ext.fly(t).getFrameWidth("l")+Ext.fly(t.firstChild).getFrameWidth("r"),i=this.bwrap.dom.firstChild.firstChild.firstChild,n+=Ext.fly(i).getFrameWidth("lr")),n},getFrameHeight:function(){var n=this.el.getFrameWidth("tb"),t,i,r;return n+=(this.tbar?this.tbar.getHeight():0)+(this.bbar?this.bbar.getHeight():0),this.frame?(t=this.el.dom.firstChild,i=this.bwrap.dom.lastChild,n+=t.offsetHeight+i.offsetHeight,r=this.bwrap.dom.firstChild.firstChild.firstChild,n+=Ext.fly(r).getFrameWidth("tb")):n+=(this.header?this.header.getHeight():0)+(this.footer?this.footer.getHeight():0),n},getInnerWidth:function(){return this.getSize().width-this.getFrameWidth()},getInnerHeight:function(){return this.getSize().height-this.getFrameHeight()},syncShadow:function(){this.floating&&this.el.sync(!0)},getLayoutTarget:function(){return this.body},setTitle:function(n,t){return this.title=n,this.header&&this.headerAsText&&this.header.child("span").update(n),t&&this.setIconClass(t),this.fireEvent("titlechange",this,n),this},getUpdater:function(){return this.body.getUpdater()},load:function(){var n=this.body.getUpdater();return n.update.apply(n,arguments),this},beforeDestroy:function(){Ext.Element.uncache(this.header,this.tbar,this.bbar,this.footer,this.body)},createClasses:function(){this.headerCls=this.baseCls+"-header";this.headerTextCls=this.baseCls+"-header-text";this.bwrapCls=this.baseCls+"-bwrap";this.tbarCls=this.baseCls+"-tbar";this.bodyCls=this.baseCls+"-body";this.bbarCls=this.baseCls+"-bbar";this.footerCls=this.baseCls+"-footer"},createGhost:function(n,t,i){var r=document.createElement("div"),u;return r.className="x-panel-ghost "+(n?n:""),this.header&&r.appendChild(this.el.dom.firstChild.cloneNode(!0)),Ext.fly(r.appendChild(document.createElement("ul"))).setHeight(this.bwrap.getHeight()),r.style.width=this.el.dom.offsetWidth+"px",i?Ext.getDom(i).appendChild(r):this.container.dom.appendChild(r),t!==!1&&this.el.useShim!==!1?(u=new Ext.Layer({shadow:!1,useDisplay:!0,constrain:!1},r),u.show(),u):new Ext.Element(r)},doAutoLoad:function(){this.body.load(typeof this.autoLoad=="object"?this.autoLoad:{url:this.autoLoad})}});Ext.reg("panel",Ext.Panel);Ext.Button=Ext.extend(Ext.Component,{hidden:!1,disabled:!1,pressed:!1,enableToggle:!1,menuAlign:"tl-bl?",type:"button",menuClassTarget:"tr",clickEvent:"click",handleMouseEvents:!0,tooltipType:"qtip",buttonSelector:"button:first",initComponent:function(){Ext.Button.superclass.initComponent.call(this);this.addEvents("click","toggle","mouseover","mouseout","menushow","menuhide","menutriggerover","menutriggerout");this.menu&&(this.menu=Ext.menu.MenuMgr.get(this.menu));typeof this.toggleGroup=="string"&&(this.enableToggle=!0)},onRender:function(n,t){var r,u,i;this.template||(Ext.Button.buttonTemplate||(Ext.Button.buttonTemplate=new Ext.Template('<table border="0" cellpadding="0" cellspacing="0" class="x-btn-wrap"><tbody><tr>','<td class="x-btn-left"><i>&#160;<\/i><\/td><td class="x-btn-center"><em unselectable="on"><button class="x-btn-text" type="{1}">{0}<\/button><\/em><\/td><td class="x-btn-right"><i>&#160;<\/i><\/td>',"<\/tr><\/tbody><\/table>")),this.template=Ext.Button.buttonTemplate);u=[this.text||"&#160;",this.type];r=t?this.template.insertBefore(t,u,!0):this.template.append(n,u,!0);i=r.child(this.buttonSelector);i.on("focus",this.onFocus,this);i.on("blur",this.onBlur,this);this.initButtonEl(r,i);this.menu&&this.el.child(this.menuClassTarget).addClass("x-btn-with-menu");Ext.ButtonToggleMgr.register(this)},initButtonEl:function(n,t){if(this.el=n,n.addClass("x-btn"),this.icon&&t.setStyle("background-image","url("+this.icon+")"),this.iconCls&&(t.addClass(this.iconCls),this.cls||n.addClass(this.text?"x-btn-text-icon":"x-btn-icon")),this.tabIndex!==undefined&&(t.dom.tabIndex=this.tabIndex),this.tooltip&&(typeof this.tooltip=="object"?Ext.QuickTips.register(Ext.apply({target:t.id},this.tooltip)):t.dom[this.tooltipType]=this.tooltip),this.pressed&&this.el.addClass("x-btn-pressed"),this.handleMouseEvents){n.on("mouseover",this.onMouseOver,this);n.on("mousedown",this.onMouseDown,this)}if(this.menu){this.menu.on("show",this.onMenuShow,this);this.menu.on("hide",this.onMenuHide,this)}if(this.id&&(this.el.dom.id=this.el.id=this.id),this.repeat){var i=new Ext.util.ClickRepeater(n,typeof this.repeat=="object"?this.repeat:{});i.on("click",this.onClick,this)}n.on(this.clickEvent,this.onClick,this)},afterRender:function(){Ext.Button.superclass.afterRender.call(this);Ext.isIE6?this.autoWidth.defer(1,this):this.autoWidth()},setIconClass:function(n){this.el&&this.el.child(this.buttonSelector).replaceClass(this.iconCls,n);this.iconCls=n},beforeDestroy:function(){if(this.rendered){var n=this.el.child(this.buttonSelector);n&&n.removeAllListeners()}this.menu&&Ext.destroy(this.menu)},onDestroy:function(){this.rendered&&Ext.ButtonToggleMgr.unregister(this)},autoWidth:function(){if(this.el){if(this.el.setWidth("auto"),Ext.isIE7&&Ext.isStrict){var n=this.el.child(this.buttonSelector);n&&n.getWidth()>20&&(n.clip(),n.setWidth(Ext.util.TextMetrics.measure(n,this.text).width+n.getFrameWidth("lr")))}this.minWidth&&this.el.getWidth()<this.minWidth&&this.el.setWidth(this.minWidth)}},setHandler:function(n,t){this.handler=n;this.scope=t},setText:function(n){this.text=n;this.el&&this.el.child("td.x-btn-center "+this.buttonSelector).update(n);this.autoWidth()},getText:function(){return this.text},toggle:function(n){n=n===undefined?!this.pressed:n;n!=this.pressed&&(n?(this.el.addClass("x-btn-pressed"),this.pressed=!0,this.fireEvent("toggle",this,!0)):(this.el.removeClass("x-btn-pressed"),this.pressed=!1,this.fireEvent("toggle",this,!1)),this.toggleHandler&&this.toggleHandler.call(this.scope||this,this,n))},focus:function(){this.el.child(this.buttonSelector).focus()},onDisable:function(){this.el&&(Ext.isIE6&&this.text||this.el.addClass(this.disabledClass),this.el.dom.disabled=!0);this.disabled=!0},onEnable:function(){this.el&&(Ext.isIE6&&this.text||this.el.removeClass(this.disabledClass),this.el.dom.disabled=!1);this.disabled=!1},showMenu:function(){return this.menu&&this.menu.show(this.el,this.menuAlign),this},hideMenu:function(){return this.menu&&this.menu.hide(),this},hasVisibleMenu:function(){return this.menu&&this.menu.isVisible()},onClick:function(n){(n&&n.preventDefault(),n.button==0)&&(this.disabled||(this.enableToggle&&(this.allowDepress!==!1||!this.pressed)&&this.toggle(),!this.menu||this.menu.isVisible()||this.ignoreNextClick||this.showMenu(),this.fireEvent("click",this,n),this.handler&&this.handler.call(this.scope||this,this,n)))},isMenuTriggerOver:function(n,t){return this.menu&&!t},isMenuTriggerOut:function(n,t){return this.menu&&!t},onMouseOver:function(n){if(!this.disabled){var t=n.within(this.el,!0);if(!t){this.el.addClass("x-btn-over");Ext.getDoc().on("mouseover",this.monitorMouseOver,this);this.fireEvent("mouseover",this,n)}this.isMenuTriggerOver(n,t)&&this.fireEvent("menutriggerover",this,this.menu,n)}},monitorMouseOver:function(n){if(n.target!=this.el.dom&&!n.within(this.el)){Ext.getDoc().un("mouseover",this.monitorMouseOver,this);this.onMouseOut(n)}},onMouseOut:function(n){var t=n.within(this.el)&&n.target!=this.el.dom;this.el.removeClass("x-btn-over");this.fireEvent("mouseout",this,n);this.isMenuTriggerOut(n,t)&&this.fireEvent("menutriggerout",this,this.menu,n)},onFocus:function(){this.disabled||this.el.addClass("x-btn-focus")},onBlur:function(){this.el.removeClass("x-btn-focus")},getClickEl:function(){return this.el},onMouseDown:function(n){if(!this.disabled&&n.button==0){this.getClickEl(n).addClass("x-btn-click");Ext.getDoc().on("mouseup",this.onMouseUp,this)}},onMouseUp:function(n){n.button==0&&(this.getClickEl(n,!0).removeClass("x-btn-click"),Ext.getDoc().un("mouseup",this.onMouseUp,this))},onMenuShow:function(){this.ignoreNextClick=0;this.el.addClass("x-btn-menu-active");this.fireEvent("menushow",this,this.menu)},onMenuHide:function(){this.el.removeClass("x-btn-menu-active");this.ignoreNextClick=this.restoreClick.defer(250,this);this.fireEvent("menuhide",this,this.menu)},restoreClick:function(){this.ignoreNextClick=0}});Ext.reg("button",Ext.Button);Ext.ButtonToggleMgr=function(){function t(t,i){var u,r,f;if(i)for(u=n[t.toggleGroup],r=0,f=u.length;r<f;r++)u[r]!=t&&u[r].toggle(!1)}var n={};return{register:function(i){if(i.toggleGroup){var r=n[i.toggleGroup];r||(r=n[i.toggleGroup]=[]);r.push(i);i.on("toggle",t)}},unregister:function(i){if(i.toggleGroup){var r=n[i.toggleGroup];r&&(r.remove(i),i.un("toggle",t))}}}}();Ext.Toolbar=function(n){n instanceof Array&&(n={buttons:n});Ext.Toolbar.superclass.constructor.call(this,n)},function(){var n=Ext.Toolbar;Ext.extend(n,Ext.BoxComponent,{trackMenus:!0,initComponent:function(){n.superclass.initComponent.call(this);this.items&&(this.buttons=this.items);this.items=new Ext.util.MixedCollection(!1,function(n){return n.itemId||n.id||Ext.id()})},autoCreate:{cls:"x-toolbar x-small-editor",html:'<table cellspacing="0"><tr><\/tr><\/table>'},onRender:function(n,t){this.el=n.createChild(Ext.apply({id:this.id},this.autoCreate),t);this.tr=this.el.child("tr",!0)},afterRender:function(){n.superclass.afterRender.call(this);this.buttons&&(this.add.apply(this,this.buttons),delete this.buttons)},add:function(){for(var n,i=arguments,r=i.length,t=0;t<r;t++)n=i[t],n.isFormField?this.addField(n):n.render?this.addItem(n):typeof n=="string"?n=="separator"||n=="-"?this.addSeparator():n==" "?this.addSpacer():n=="->"?this.addFill():this.addText(n):n.tagName?this.addElement(n):typeof n=="object"&&(n.xtype?this.addField(Ext.ComponentMgr.create(n,"button")):this.addButton(n))},addSeparator:function(){return this.addItem(new n.Separator)},addSpacer:function(){return this.addItem(new n.Spacer)},addFill:function(){return this.addItem(new n.Fill)},addElement:function(t){return this.addItem(new n.Item(t))},addItem:function(n){var t=this.nextBlock();return this.initMenuTracking(n),n.render(t),this.items.add(n),n},addButton:function(t){var u,r,f,i,e;if(t instanceof Array){for(u=[],r=0,f=t.length;r<f;r++)u.push(this.addButton(t[r]));return u}return i=t,t instanceof n.Button||(i=t.split?new n.SplitButton(t):new n.Button(t)),e=this.nextBlock(),this.initMenuTracking(i),i.render(e),this.items.add(i),i},initMenuTracking:function(n){if(this.trackMenus&&n.menu)n.on({menutriggerover:this.onButtonTriggerOver,menushow:this.onButtonMenuShow,menuhide:this.onButtonMenuHide,scope:this})},addText:function(t){return this.addItem(new n.TextItem(t))},insertButton:function(t,i){var u,r,e,f;if(i instanceof Array){for(u=[],r=0,e=i.length;r<e;r++)u.push(this.insertButton(t+r,i[r]));return u}return i instanceof n.Button||(i=new n.Button(i)),f=document.createElement("td"),this.tr.insertBefore(f,this.tr.childNodes[t]),this.initMenuTracking(i),i.render(f),this.items.insert(t,i),i},addDom:function(t){var r=this.nextBlock(),i;return Ext.DomHelper.overwrite(r,t),i=new n.Item(r.firstChild),i.render(r),this.items.add(i),i},addField:function(t){var r=this.nextBlock(),i;return t.render(r),i=new n.Item(r.firstChild),i.render(r),this.items.add(i),i},nextBlock:function(){var n=document.createElement("td");return this.tr.appendChild(n),n},onDestroy:function(){Ext.Toolbar.superclass.onDestroy.call(this);this.rendered&&(this.items&&Ext.destroy.apply(Ext,this.items.items),Ext.Element.uncache(this.tr))},onDisable:function(){this.items.each(function(n){n.disable&&n.disable()})},onEnable:function(){this.items.each(function(n){n.enable&&n.enable()})},onButtonTriggerOver:function(n){this.activeMenuBtn&&this.activeMenuBtn!=n&&(this.activeMenuBtn.hideMenu(),n.showMenu(),this.activeMenuBtn=n)},onButtonMenuShow:function(n){this.activeMenuBtn=n},onButtonMenuHide:function(){delete this.activeMenuBtn}});Ext.reg("toolbar",Ext.Toolbar);n.Item=function(n){this.el=Ext.getDom(n);this.id=Ext.id(this.el);this.hidden=!1};n.Item.prototype={getEl:function(){return this.el},render:function(n){this.td=n;n.appendChild(this.el)},destroy:function(){this.td&&this.td.parentNode&&this.td.parentNode.removeChild(this.td)},show:function(){this.hidden=!1;this.td.style.display=""},hide:function(){this.hidden=!0;this.td.style.display="none"},setVisible:function(n){n?this.show():this.hide()},focus:function(){Ext.fly(this.el).focus()},disable:function(){Ext.fly(this.td).addClass("x-item-disabled");this.disabled=!0;this.el.disabled=!0},enable:function(){Ext.fly(this.td).removeClass("x-item-disabled");this.disabled=!1;this.el.disabled=!1}};Ext.reg("tbitem",n.Item);n.Separator=function(){var t=document.createElement("span");t.className="ytb-sep";n.Separator.superclass.constructor.call(this,t)};Ext.extend(n.Separator,n.Item,{enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn});Ext.reg("tbseparator",n.Separator);n.Spacer=function(){var t=document.createElement("div");t.className="ytb-spacer";n.Spacer.superclass.constructor.call(this,t)};Ext.extend(n.Spacer,n.Item,{enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn});Ext.reg("tbspacer",n.Spacer);n.Fill=Ext.extend(n.Spacer,{render:function(t){t.style.width="100%";n.Fill.superclass.render.call(this,t)}});Ext.reg("tbfill",n.Fill);n.TextItem=function(t){var i=document.createElement("span");i.className="ytb-text";i.innerHTML=t.text?t.text:t;n.TextItem.superclass.constructor.call(this,i)};Ext.extend(n.TextItem,n.Item,{enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn});Ext.reg("tbtext",n.TextItem);n.Button=Ext.extend(Ext.Button,{hideParent:!0,onDestroy:function(){n.Button.superclass.onDestroy.call(this);this.container&&this.container.remove()}});Ext.reg("tbbutton",n.Button);n.SplitButton=Ext.extend(Ext.SplitButton,{hideParent:!0,onDestroy:function(){n.SplitButton.superclass.onDestroy.call(this);this.container&&this.container.remove()}});Ext.reg("tbsplit",n.SplitButton);n.MenuButton=n.SplitButton}();Ext.PagingToolbar=Ext.extend(Ext.Toolbar,{pageSize:20,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",paramNames:{start:"start",limit:"limit"},initComponent:function(){Ext.PagingToolbar.superclass.initComponent.call(this);this.cursor=0;this.bind(this.store)},onRender:function(n,t){Ext.PagingToolbar.superclass.onRender.call(this,n,t);this.first=this.addButton({tooltip:this.firstText,iconCls:"x-tbar-page-first",disabled:!0,handler:this.onClick.createDelegate(this,["first"])});this.prev=this.addButton({tooltip:this.prevText,iconCls:"x-tbar-page-prev",disabled:!0,handler:this.onClick.createDelegate(this,["prev"])});this.addSeparator();this.add(this.beforePageText);this.field=Ext.get(this.addDom({tag:"input",type:"text",size:"3",value:"1",cls:"x-tbar-page-number"}).el);this.field.on("keydown",this.onPagingKeydown,this);this.field.on("focus",function(){this.dom.select()});this.afterTextEl=this.addText(String.format(this.afterPageText,1));this.field.setHeight(18);this.addSeparator();this.next=this.addButton({tooltip:this.nextText,iconCls:"x-tbar-page-next",disabled:!0,handler:this.onClick.createDelegate(this,["next"])});this.last=this.addButton({tooltip:this.lastText,iconCls:"x-tbar-page-last",disabled:!0,handler:this.onClick.createDelegate(this,["last"])});this.addSeparator();this.loading=this.addButton({tooltip:this.refreshText,iconCls:"x-tbar-loading",handler:this.onClick.createDelegate(this,["refresh"])});this.displayInfo&&(this.displayEl=Ext.fly(this.el.dom).createChild({cls:"x-paging-info"}));this.dsLoaded&&this.onLoad.apply(this,this.dsLoaded)},updateInfo:function(){if(this.displayEl){var n=this.store.getCount(),t=n==0?this.emptyMsg:String.format(this.displayMsg,this.cursor+1,this.cursor+n,this.store.getTotalCount());this.displayEl.update(t)}},onLoad:function(n,t,i){if(!this.rendered){this.dsLoaded=[n,t,i];return}this.cursor=i.params?i.params[this.paramNames.start]:0;var u=this.getPageData(),r=u.activePage,f=u.pages;this.afterTextEl.el.innerHTML=String.format(this.afterPageText,u.pages);this.field.dom.value=r;this.first.setDisabled(r==1);this.prev.setDisabled(r==1);this.next.setDisabled(r==f);this.last.setDisabled(r==f);this.loading.enable();this.updateInfo()},getPageData:function(){var n=this.store.getTotalCount();return{total:n,activePage:Math.ceil((this.cursor+this.pageSize)/this.pageSize),pages:n<this.pageSize?1:Math.ceil(n/this.pageSize)}},onLoadError:function(){this.rendered&&this.loading.enable()},readPage:function(n){var t=this.field.dom.value,i;return!t||isNaN(i=parseInt(t,10))?(this.field.dom.value=n.activePage,!1):i},onPagingKeydown:function(n){var i=n.getKey(),r=this.getPageData(),t,u;i==n.RETURN?(n.stopEvent(),(t=this.readPage(r))&&(t=Math.min(Math.max(1,t),r.pages)-1,this.doLoad(t*this.pageSize))):i==n.HOME||i==n.END?(n.stopEvent(),t=i==n.HOME?1:r.pages,this.field.dom.value=t):(i==n.UP||i==n.PAGEUP||i==n.DOWN||i==n.PAGEDOWN)&&(n.stopEvent(),(t=this.readPage(r))&&(u=n.shiftKey?10:1,(i==n.DOWN||i==n.PAGEDOWN)&&(u*=-1),t+=u,t>=1&t<=r.pages&&(this.field.dom.value=t)))},beforeLoad:function(){this.rendered&&this.loading&&this.loading.disable()},doLoad:function(n){var t={},i=this.paramNames;t[i.start]=n;t[i.limit]=this.pageSize;this.store.load({params:t})},onClick:function(n){var r=this.store;switch(n){case"first":this.doLoad(0);break;case"prev":this.doLoad(Math.max(0,this.cursor-this.pageSize));break;case"next":this.doLoad(this.cursor+this.pageSize);break;case"last":var t=r.getTotalCount(),i=t%this.pageSize,u=i?t-i:t-this.pageSize;this.doLoad(u);break;case"refresh":this.doLoad(this.cursor)}},unbind:function(n){n=Ext.StoreMgr.lookup(n);n.un("beforeload",this.beforeLoad,this);n.un("load",this.onLoad,this);n.un("loadexception",this.onLoadError,this);this.store=undefined},bind:function(n){n=Ext.StoreMgr.lookup(n);n.on("beforeload",this.beforeLoad,this);n.on("load",this.onLoad,this);n.on("loadexception",this.onLoadError,this);this.store=n}});Ext.reg("paging",Ext.PagingToolbar);Ext.Editor=function(n,t){this.field=n;Ext.Editor.superclass.constructor.call(this,t)};Ext.extend(Ext.Editor,Ext.Component,{value:"",alignment:"c-c?",shadow:"frame",constrain:!1,swallowKeys:!0,completeOnEnter:!1,cancelOnEsc:!1,updateEl:!1,initComponent:function(){Ext.Editor.superclass.initComponent.call(this);this.addEvents("beforestartedit","startedit","beforecomplete","complete","specialkey")},onRender:function(n){this.el=new Ext.Layer({shadow:this.shadow,cls:"x-editor",parentEl:n,shim:this.shim,shadowOffset:4,id:this.id,constrain:this.constrain});this.el.setStyle("overflow",Ext.isGecko?"auto":"hidden");this.field.msgTarget!="title"&&(this.field.msgTarget="qtip");this.field.render(this.el);Ext.isGecko&&this.field.el.dom.setAttribute("autocomplete","off");this.field.on("specialkey",this.onSpecialKey,this);this.swallowKeys&&this.field.el.swallowEvent(["keydown","keypress"]);this.field.show();this.field.on("blur",this.onBlur,this);if(this.field.grow)this.field.on("autosize",this.el.sync,this.el,{delay:1})},onSpecialKey:function(n,t){this.completeOnEnter&&t.getKey()==t.ENTER?(t.stopEvent(),this.completeEdit()):this.cancelOnEsc&&t.getKey()==t.ESC?this.cancelEdit():this.fireEvent("specialkey",n,t)},startEdit:function(n,t){var r,i;if(this.editing&&this.completeEdit(),this.boundEl=Ext.get(n),r=t!==undefined?t:this.boundEl.dom.innerHTML,this.rendered||this.render(this.parentEl||document.body),this.fireEvent("beforestartedit",this,this.boundEl,r)!==!1){if(this.startValue=r,this.field.setValue(r),this.autoSize){i=this.boundEl.getSize();switch(this.autoSize){case"width":this.setSize(i.width,"");break;case"height":this.setSize("",i.height);break;default:this.setSize(i.width,i.height)}}this.el.alignTo(this.boundEl,this.alignment);this.editing=!0;this.show()}},setSize:function(n,t){this.field.setSize(n,t);this.el&&this.el.sync()},realign:function(){this.el.alignTo(this.boundEl,this.alignment)},completeEdit:function(n){if(this.editing){var t=this.getValue();if(this.revertInvalid===!1||this.field.isValid()||(t=this.startValue,this.cancelEdit(!0)),String(t)===String(this.startValue)&&this.ignoreNoChange){this.editing=!1;this.hide();return}this.fireEvent("beforecomplete",this,t,this.startValue)!==!1&&(this.editing=!1,this.updateEl&&this.boundEl&&this.boundEl.update(t),n!==!0&&this.hide(),this.fireEvent("complete",this,t,this.startValue))}},onShow:function(){this.el.show();this.hideEl!==!1&&this.boundEl.hide();this.field.show();Ext.isIE&&!this.fixIEFocus?(this.fixIEFocus=!0,this.deferredFocus.defer(50,this)):this.field.focus();this.fireEvent("startedit",this.boundEl,this.startValue)},deferredFocus:function(){this.editing&&this.field.focus()},cancelEdit:function(n){this.editing&&(this.setValue(this.startValue),n!==!0&&this.hide())},onBlur:function(){this.allowBlur!==!0&&this.editing&&this.completeEdit()},onHide:function(){if(this.editing){this.completeEdit();return}this.field.blur();this.field.collapse&&this.field.collapse();this.el.hide();this.hideEl!==!1&&this.boundEl.show()},setValue:function(n){this.field.setValue(n)},getValue:function(){return this.field.getValue()},beforeDestroy:function(){this.field.destroy();this.field=null}});Ext.reg("editor",Ext.Editor);Ext.tree.TreePanel=Ext.extend(Ext.Panel,{rootVisible:!0,animate:Ext.enableFx,lines:!0,enableDD:!1,hlDrop:Ext.enableFx,pathSeparator:"/",initComponent:function(){if(Ext.tree.TreePanel.superclass.initComponent.call(this),this.eventModel||(this.eventModel=new Ext.tree.TreeEventModel(this)),this.nodeHash={},this.root&&this.setRootNode(this.root),this.addEvents("append","remove","movenode","insert","beforeappend","beforeremove","beforemovenode","beforeinsert","beforeload","load","textchange","beforeexpandnode","beforecollapsenode","expandnode","disabledchange","collapsenode","beforeclick","click","checkchange","dblclick","contextmenu","beforechildrenrendered","startdrag","enddrag","dragdrop","beforenodedrop","nodedrop","nodedragover"),this.singleExpand)this.on("beforeexpandnode",this.restrictExpand,this)},proxyNodeEvent:function(n,t,i,r,u,f,e){return(n=="collapse"||n=="expand"||n=="beforecollapse"||n=="beforeexpand"||n=="move"||n=="beforemove")&&(n=n+"node"),this.fireEvent(n,t,i,r,u,f,e)},getRootNode:function(){return this.root},setRootNode:function(n){if(this.root=n,n.ownerTree=this,n.isRoot=!0,this.registerNode(n),!this.rootVisible){var t=n.attributes.uiProvider;n.ui=t?new t(n):new Ext.tree.RootTreeNodeUI(n)}return n},getNodeById:function(n){return this.nodeHash[n]},registerNode:function(n){this.nodeHash[n.id]=n},unregisterNode:function(n){delete this.nodeHash[n.id]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"},restrictExpand:function(n){var t=n.parentNode;t&&(t.expandedChild&&t.expandedChild.parentNode==t&&t.expandedChild.collapse(),t.expandedChild=n)},getChecked:function(n,t){t=t||this.root;var i=[],r=function(){this.attributes.checked&&i.push(n?n=="id"?this.id:this.attributes[n]:this)};return t.cascade(r),i},getEl:function(){return this.el},getLoader:function(){return this.loader},expandAll:function(){this.root.expand(!0)},collapseAll:function(){this.root.collapse(!0)},getSelectionModel:function(){return this.selModel||(this.selModel=new Ext.tree.DefaultSelectionModel),this.selModel},expandPath:function(n,t,i){var u,r,f,e;if(t=t||"id",u=n.split(this.pathSeparator),r=this.root,r.attributes[t]!=u[1]){i&&i(!1,null);return}f=1;e=function(){if(++f==u.length){i&&i(!0,r);return}var n=r.findChild(t,u[f]);if(!n){i&&i(!1,r);return}r=n;n.expand(!1,!1,e)};r.expand(!1,!1,e)},selectPath:function(n,t,i){var r,u,f;t=t||"id";r=n.split(this.pathSeparator);u=r.pop();r.length>0?(f=function(n,r){if(n&&r){var f=r.findChild(t,u);f?(f.select(),i&&i(!0,f)):i&&i(!1,f)}else i&&i(!1,f)},this.expandPath(r.join(this.pathSeparator),t,f)):(this.root.select(),i&&i(!0,this.root))},getTreeEl:function(){return this.body},onRender:function(n,t){Ext.tree.TreePanel.superclass.onRender.call(this,n,t);this.el.addClass("x-tree");this.innerCt=this.body.createChild({tag:"ul",cls:"x-tree-root-ct "+(this.lines?"x-tree-lines":"x-tree-no-lines")})},initEvents:function(){Ext.tree.TreePanel.superclass.initEvents.call(this);this.containerScroll&&Ext.dd.ScrollManager.register(this.body);(this.enableDD||this.enableDrop)&&!this.dropZone&&(this.dropZone=new Ext.tree.TreeDropZone(this,this.dropConfig||{ddGroup:this.ddGroup||"TreeDD",appendOnly:this.ddAppendOnly===!0}));(this.enableDD||this.enableDrag)&&!this.dragZone&&(this.dragZone=new Ext.tree.TreeDragZone(this,this.dragConfig||{ddGroup:this.ddGroup||"TreeDD",scroll:this.ddScroll}));this.getSelectionModel().init(this)},afterRender:function(){Ext.tree.TreePanel.superclass.afterRender.call(this);this.root.render();this.rootVisible||this.root.renderChildren()},onDestroy:function(){this.rendered&&(this.body.removeAllListeners(),Ext.dd.ScrollManager.unregister(this.body),this.dropZone&&this.dropZone.unreg(),this.dragZone&&this.dragZone.unreg());this.root.destroy();this.nodeHash=null;Ext.tree.TreePanel.superclass.onDestroy.call(this)}});Ext.reg("treepanel",Ext.tree.TreePanel);Ext.tree.TreeEventModel=function(n){this.tree=n;this.tree.on("render",this.initEvents,this)};Ext.tree.TreeEventModel.prototype={initEvents:function(){var n=this.tree.getTreeEl();n.on("click",this.delegateClick,this);n.on("mouseover",this.delegateOver,this);n.on("mouseout",this.delegateOut,this);n.on("dblclick",this.delegateDblClick,this);n.on("contextmenu",this.delegateContextMenu,this)},getNode:function(n){var i,t;return(i=n.getTarget(".x-tree-node-el",10))&&(t=Ext.fly(i,"_treeEvents").getAttributeNS("ext","tree-node-id"),t)?this.tree.getNodeById(t):null},getNodeTarget:function(n){var t=n.getTarget(".x-tree-node-icon",1);return t||(t=n.getTarget(".x-tree-node-el",6)),t},delegateOut:function(n,t){if(this.beforeEvent(n)&&(t=this.getNodeTarget(n),t&&!n.within(t,!0)))this.onNodeOut(n,this.getNode(n))},delegateOver:function(n,t){if(this.beforeEvent(n)&&(t=this.getNodeTarget(n),t))this.onNodeOver(n,this.getNode(n))},delegateClick:function(n){if(this.beforeEvent(n))if(n.getTarget("input[type=checkbox]",1))this.onCheckboxClick(n,this.getNode(n));else if(n.getTarget(".x-tree-ec-icon",1))this.onIconClick(n,this.getNode(n));else if(this.getNodeTarget(n))this.onNodeClick(n,this.getNode(n))},delegateDblClick:function(n){if(this.beforeEvent(n)&&this.getNodeTarget(n))this.onNodeDblClick(n,this.getNode(n))},delegateContextMenu:function(n){if(this.beforeEvent(n)&&this.getNodeTarget(n))this.onNodeContextMenu(n,this.getNode(n))},onNodeClick:function(n,t){t.ui.onClick(n)},onNodeOver:function(n,t){t.ui.onOver(n)},onNodeOut:function(n,t){t.ui.onOut(n)},onIconClick:function(n,t){t.ui.ecClick(n)},onCheckboxClick:function(n,t){t.ui.onCheckChange(n)},onNodeDblClick:function(n,t){t.ui.onDblClick(n)},onNodeContextMenu:function(n,t){t.ui.onContextMenu(n)},beforeEvent:function(n){return this.disabled?(n.stopEvent(),!1):!0},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1}};Ext.tree.DefaultSelectionModel=function(n){this.selNode=null;this.addEvents("selectionchange","beforeselect");Ext.apply(this,n);Ext.tree.DefaultSelectionModel.superclass.constructor.call(this)};Ext.extend(Ext.tree.DefaultSelectionModel,Ext.util.Observable,{init:function(n){this.tree=n;n.getTreeEl().on("keydown",this.onKeyDown,this);n.on("click",this.onNodeClick,this)},onNodeClick:function(n){this.select(n)},select:function(n){var t=this.selNode;if(t!=n&&this.fireEvent("beforeselect",this,n,t)!==!1){if(t)t.ui.onSelectedChange(!1);this.selNode=n;n.ui.onSelectedChange(!0);this.fireEvent("selectionchange",this,n,t)}return n},unselect:function(n){this.selNode==n&&this.clearSelections()},clearSelections:function(){var n=this.selNode;if(n){n.ui.onSelectedChange(!1);this.selNode=null;this.fireEvent("selectionchange",this,null)}return n},getSelectedNode:function(){return this.selNode},isSelected:function(n){return this.selNode==n},selectPrevious:function(){var i=this.selNode||this.lastSelNode,t,n;if(!i)return null;if(t=i.previousSibling,t){if(!t.isExpanded()||t.childNodes.length<1)return this.select(t);for(n=t.lastChild;n&&n.isExpanded()&&n.childNodes.length>0;)n=n.lastChild;return this.select(n)}return i.parentNode&&(this.tree.rootVisible||!i.parentNode.isRoot)?this.select(i.parentNode):null},selectNext:function(){var n=this.selNode||this.lastSelNode,t;return n?n.firstChild&&n.isExpanded()?this.select(n.firstChild):n.nextSibling?this.select(n.nextSibling):n.parentNode?(t=null,n.parentNode.bubble(function(){if(this.nextSibling)return t=this.getOwnerTree().selModel.select(this.nextSibling),!1}),t):null:null},onKeyDown:function(n){var t=this.selNode||this.lastSelNode,r=this,i;if(t){i=n.getKey();switch(i){case n.DOWN:n.stopEvent();this.selectNext();break;case n.UP:n.stopEvent();this.selectPrevious();break;case n.RIGHT:n.preventDefault();t.hasChildNodes()&&(t.isExpanded()?t.firstChild&&this.select(t.firstChild,n):t.expand());break;case n.LEFT:n.preventDefault();t.hasChildNodes()&&t.isExpanded()?t.collapse():t.parentNode&&(this.tree.rootVisible||t.parentNode!=this.tree.getRootNode())&&this.select(t.parentNode,n)}}}});Ext.tree.MultiSelectionModel=function(n){this.selNodes=[];this.selMap={};this.addEvents("selectionchange");Ext.apply(this,n);Ext.tree.MultiSelectionModel.superclass.constructor.call(this)};Ext.extend(Ext.tree.MultiSelectionModel,Ext.util.Observable,{init:function(n){this.tree=n;n.getTreeEl().on("keydown",this.onKeyDown,this);n.on("click",this.onNodeClick,this)},onNodeClick:function(n,t){this.select(n,t,t.ctrlKey)},select:function(n,t,i){if(i!==!0&&this.clearSelections(!0),this.isSelected(n))return this.lastSelNode=n,n;this.selNodes.push(n);this.selMap[n.id]=n;this.lastSelNode=n;n.ui.onSelectedChange(!0);return this.fireEvent("selectionchange",this,this.selNodes),n},unselect:function(n){if(this.selMap[n.id]){n.ui.onSelectedChange(!1);var i=this.selNodes,t=i.indexOf(n);t!=-1&&this.selNodes.splice(t,1);delete this.selMap[n.id];this.fireEvent("selectionchange",this,this.selNodes)}},clearSelections:function(n){var i=this.selNodes,t,r;if(i.length>0){for(t=0,r=i.length;t<r;t++)i[t].ui.onSelectedChange(!1);this.selNodes=[];this.selMap={};n!==!0&&this.fireEvent("selectionchange",this,this.selNodes)}},isSelected:function(n){return this.selMap[n.id]?!0:!1},getSelectedNodes:function(){return this.selNodes},onKeyDown:Ext.tree.DefaultSelectionModel.prototype.onKeyDown,selectNext:Ext.tree.DefaultSelectionModel.prototype.selectNext,selectPrevious:Ext.tree.DefaultSelectionModel.prototype.selectPrevious});Ext.tree.TreeNode=function(n){n=n||{};typeof n=="string"&&(n={text:n});this.childrenRendered=!1;this.rendered=!1;Ext.tree.TreeNode.superclass.constructor.call(this,n);this.expanded=n.expanded===!0;this.isTarget=n.isTarget!==!1;this.draggable=n.draggable!==!1&&n.allowDrag!==!1;this.allowChildren=n.allowChildren!==!1&&n.allowDrop!==!1;this.text=n.text;this.disabled=n.disabled===!0;this.addEvents("textchange","beforeexpand","beforecollapse","expand","disabledchange","collapse","beforeclick","click","checkchange","dblclick","contextmenu","beforechildrenrendered");var t=this.attributes.uiProvider||this.defaultUI||Ext.tree.TreeNodeUI;this.ui=new t(this)};Ext.extend(Ext.tree.TreeNode,Ext.data.Node,{preventHScroll:!0,isExpanded:function(){return this.expanded},getUI:function(){return this.ui},setFirstChild:function(n){var t=this.firstChild;Ext.tree.TreeNode.superclass.setFirstChild.call(this,n);this.childrenRendered&&t&&n!=t&&t.renderIndent(!0,!0);this.rendered&&this.renderIndent(!0,!0)},setLastChild:function(n){var t=this.lastChild;Ext.tree.TreeNode.superclass.setLastChild.call(this,n);this.childrenRendered&&t&&n!=t&&t.renderIndent(!0,!0);this.rendered&&this.renderIndent(!0,!0)},appendChild:function(){var n=Ext.tree.TreeNode.superclass.appendChild.apply(this,arguments);return n&&this.childrenRendered&&n.render(),this.ui.updateExpandIcon(),n},removeChild:function(n){return this.ownerTree.getSelectionModel().unselect(n),Ext.tree.TreeNode.superclass.removeChild.apply(this,arguments),this.childrenRendered&&n.ui.remove(),this.childNodes.length<1?this.collapse(!1,!1):this.ui.updateExpandIcon(),this.firstChild||this.isHiddenRoot()||(this.childrenRendered=!1),n},insertBefore:function(n,t){var i=Ext.tree.TreeNode.superclass.insertBefore.apply(this,arguments);return i&&t&&this.childrenRendered&&n.render(),this.ui.updateExpandIcon(),i},setText:function(n){var t=this.text;if(this.text=n,this.attributes.text=n,this.rendered)this.ui.onTextChange(this,n,t);this.fireEvent("textchange",this,n,t)},select:function(){this.getOwnerTree().getSelectionModel().select(this)},unselect:function(){this.getOwnerTree().getSelectionModel().unselect(this)},isSelected:function(){return this.getOwnerTree().getSelectionModel().isSelected(this)},expand:function(n,t,i){if(this.expanded)typeof i=="function"&&i(this);else{if(this.fireEvent("beforeexpand",this,n,t)===!1)return;if(this.childrenRendered||this.renderChildren(),this.expanded=!0,!this.isHiddenRoot()&&this.getOwnerTree().animate&&t!==!1||t){this.ui.animExpand(function(){this.fireEvent("expand",this);typeof i=="function"&&i(this);n===!0&&this.expandChildNodes(!0)}.createDelegate(this));return}this.ui.expand();this.fireEvent("expand",this);typeof i=="function"&&i(this)}n===!0&&this.expandChildNodes(!0)},isHiddenRoot:function(){return this.isRoot&&!this.getOwnerTree().rootVisible},collapse:function(n,t){var r,i,u;if(this.expanded&&!this.isHiddenRoot()){if(this.fireEvent("beforecollapse",this,n,t)===!1)return;if(this.expanded=!1,this.getOwnerTree().animate&&t!==!1||t){this.ui.animCollapse(function(){this.fireEvent("collapse",this);n===!0&&this.collapseChildNodes(!0)}.createDelegate(this));return}this.ui.collapse();this.fireEvent("collapse",this)}if(n===!0)for(r=this.childNodes,i=0,u=r.length;i<u;i++)r[i].collapse(!0,!1)},delayedExpand:function(n){this.expandProcId||(this.expandProcId=this.expand.defer(n,this))},cancelExpand:function(){this.expandProcId&&clearTimeout(this.expandProcId);this.expandProcId=!1},toggle:function(){this.expanded?this.collapse():this.expand()},ensureVisible:function(n){var t=this.getOwnerTree();t.expandPath(this.parentNode.getPath(),!1,function(){var i=t.getNodeById(this.id);t.getTreeEl().scrollChildIntoView(i.ui.anchor);Ext.callback(n)}.createDelegate(this))},expandChildNodes:function(n){for(var i=this.childNodes,t=0,r=i.length;t<r;t++)i[t].expand(n)},collapseChildNodes:function(n){for(var i=this.childNodes,t=0,r=i.length;t<r;t++)i[t].collapse(n)},disable:function(){if(this.disabled=!0,this.unselect(),this.rendered&&this.ui.onDisableChange)this.ui.onDisableChange(this,!0);this.fireEvent("disabledchange",this,!0)},enable:function(){if(this.disabled=!1,this.rendered&&this.ui.onDisableChange)this.ui.onDisableChange(this,!1);this.fireEvent("disabledchange",this,!1)},renderChildren:function(n){var i,t,r;for(n!==!1&&this.fireEvent("beforechildrenrendered",this),i=this.childNodes,t=0,r=i.length;t<r;t++)i[t].render(!0);this.childrenRendered=!0},sort:function(){var t,n,i;if(Ext.tree.TreeNode.superclass.sort.apply(this,arguments),this.childrenRendered)for(t=this.childNodes,n=0,i=t.length;n<i;n++)t[n].render(!0)},render:function(n){this.ui.render(n);this.rendered||(this.getOwnerTree().registerNode(this),this.rendered=!0,this.expanded&&(this.expanded=!1,this.expand(!1,!1)))},renderIndent:function(n,t){var r,i,u;if(t&&(this.ui.childIndent=null),this.ui.renderIndent(),n===!0&&this.childrenRendered)for(r=this.childNodes,i=0,u=r.length;i<u;i++)r[i].renderIndent(!0,t)},beginUpdate:function(){this.childrenRendered=!1},endUpdate:function(){this.expanded&&this.renderChildren()},destroy:function(){for(var n=0,t=this.childNodes.length;n<t;n++)this.childNodes[n].destroy();this.childNodes=null;this.ui.destroy&&this.ui.destroy()}});Ext.tree.TreeNodeUI=function(n){this.node=n;this.rendered=!1;this.animating=!1;this.wasLeaf=!0;this.ecc="x-tree-ec-icon x-tree-elbow";this.emptyIcon=Ext.BLANK_IMAGE_URL};Ext.tree.TreeNodeUI.prototype={removeChild:function(n){this.rendered&&this.ctNode.removeChild(n.ui.getEl())},beforeLoad:function(){this.addClass("x-tree-node-loading")},afterLoad:function(){this.removeClass("x-tree-node-loading")},onTextChange:function(n,t){this.rendered&&(this.textNode.innerHTML=t)},onDisableChange:function(n,t){this.disabled=t;this.checkbox&&(this.checkbox.disabled=t);t?this.addClass("x-tree-node-disabled"):this.removeClass("x-tree-node-disabled")},onSelectedChange:function(n){n?(this.focus(),this.addClass("x-tree-selected")):this.removeClass("x-tree-selected")},onMove:function(n,t,i,r,u,f){var e,o;if(this.childIndent=null,this.rendered){if(e=r.ui.getContainer(),!e){this.holder=document.createElement("div");this.holder.appendChild(this.wrap);return}o=f?f.ui.getEl():null;o?e.insertBefore(this.wrap,o):e.appendChild(this.wrap);this.node.renderIndent(!0)}},addClass:function(n){this.elNode&&Ext.fly(this.elNode).addClass(n)},removeClass:function(n){this.elNode&&Ext.fly(this.elNode).removeClass(n)},remove:function(){this.rendered&&(this.holder=document.createElement("div"),this.holder.appendChild(this.wrap))},fireEvent:function(){return this.node.fireEvent.apply(this.node,arguments)},initEvents:function(){this.node.on("move",this.onMove,this);this.node.disabled&&(this.addClass("x-tree-node-disabled"),this.checkbox&&(this.checkbox.disabled=!0));this.node.hidden&&this.hide();var n=this.node.getOwnerTree(),t=n.enableDD||n.enableDrag||n.enableDrop;t&&(!this.node.isRoot||n.rootVisible)&&Ext.dd.Registry.register(this.elNode,{node:this.node,handles:this.getDDHandles(),isHandle:!1})},getDDHandles:function(){return[this.iconNode,this.textNode,this.elNode]},hide:function(){this.node.hidden=!0;this.wrap&&(this.wrap.style.display="none")},show:function(){this.node.hidden=!1;this.wrap&&(this.wrap.style.display="")},onContextMenu:function(n){(this.node.hasListener("contextmenu")||this.node.getOwnerTree().hasListener("contextmenu"))&&(n.preventDefault(),this.focus(),this.fireEvent("contextmenu",this.node,n))},onClick:function(n){if(this.dropping){n.stopEvent();return}if(this.fireEvent("beforeclick",this.node,n)!==!1){var t=n.getTarget("a");if(!this.disabled&&this.node.attributes.href&&t){this.fireEvent("click",this.node,n);return}if(t&&n.ctrlKey&&n.stopEvent(),n.preventDefault(),this.disabled)return;this.node.attributes.singleClickExpand&&!this.animating&&this.node.hasChildNodes()&&this.node.toggle();this.fireEvent("click",this.node,n)}else n.stopEvent()},onDblClick:function(n){(n.preventDefault(),this.disabled)||(this.checkbox&&this.toggleCheck(),!this.animating&&this.node.hasChildNodes()&&this.node.toggle(),this.fireEvent("dblclick",this.node,n))},onOver:function(){this.addClass("x-tree-node-over")},onOut:function(){this.removeClass("x-tree-node-over")},onCheckChange:function(){var n=this.checkbox.checked;this.node.attributes.checked=n;this.fireEvent("checkchange",this.node,n)},ecClick:function(){!this.animating&&(this.node.hasChildNodes()||this.node.attributes.expandable)&&this.node.toggle()},startDrop:function(){this.dropping=!0},endDrop:function(){setTimeout(function(){this.dropping=!1}.createDelegate(this),50)},expand:function(){this.updateExpandIcon();this.ctNode.style.display=""},focus:function(){if(this.node.preventHScroll){if(!Ext.isIE)try{var n=this.node.getOwnerTree().getTreeEl().dom,t=n.scrollLeft;this.anchor.focus();n.scrollLeft=t}catch(i){}}else try{this.anchor.focus()}catch(i){}},toggleCheck:function(n){var t=this.checkbox;t&&(t.checked=n===undefined?!t.checked:n)},blur:function(){try{this.anchor.blur()}catch(n){}},animExpand:function(n){var t=Ext.get(this.ctNode);if(t.stopFx(),!this.node.hasChildNodes()){this.updateExpandIcon();this.ctNode.style.display="";Ext.callback(n);return}this.animating=!0;this.updateExpandIcon();t.slideIn("t",{callback:function(){this.animating=!1;Ext.callback(n)},scope:this,duration:this.node.ownerTree.duration||.25})},highlight:function(){var n=this.node.getOwnerTree();Ext.fly(this.wrap).highlight(n.hlColor||"C3DAF9",{endColor:n.hlBaseColor})},collapse:function(){this.updateExpandIcon();this.ctNode.style.display="none"},animCollapse:function(n){var t=Ext.get(this.ctNode);t.enableDisplayMode("block");t.stopFx();this.animating=!0;this.updateExpandIcon();t.slideOut("t",{callback:function(){this.animating=!1;Ext.callback(n)},scope:this,duration:this.node.ownerTree.duration||.25})},getContainer:function(){return this.ctNode},getEl:function(){return this.wrap},appendDDGhost:function(n){n.appendChild(this.elNode.cloneNode(!0))},getDDRepairXY:function(){return Ext.lib.Dom.getXY(this.iconNode)},onRender:function(){this.render()},render:function(n){var i=this.node,t=i.attributes,r=i.parentNode?i.parentNode.ui.getContainer():i.ownerTree.innerCt.dom;this.rendered?n===!0&&r.appendChild(this.wrap):(this.rendered=!0,this.renderElements(i,t,r,n),t.qtip?this.textNode.setAttributeNS?(this.textNode.setAttributeNS("ext","qtip",t.qtip),t.qtipTitle&&this.textNode.setAttributeNS("ext","qtitle",t.qtipTitle)):(this.textNode.setAttribute("ext:qtip",t.qtip),t.qtipTitle&&this.textNode.setAttribute("ext:qtitle",t.qtipTitle)):t.qtipCfg&&(t.qtipCfg.target=Ext.id(this.textNode),Ext.QuickTips.register(t.qtipCfg)),this.initEvents(),this.node.expanded||this.updateExpandIcon(!0))},renderElements:function(n,t,i,r){var u,f;this.indentMarkup=n.parentNode?n.parentNode.ui.getChildIndent():"";var e=typeof t.checked=="boolean",h=t.href?t.href:Ext.isGecko?"":"#",o=['<li class="x-tree-node"><div ext:tree-node-id="',n.id,'" class="x-tree-node-el x-tree-node-leaf x-unselectable ',t.cls,'" unselectable="on">','<span class="x-tree-node-indent">',this.indentMarkup,"<\/span>",'<img src="',this.emptyIcon,'" class="x-tree-ec-icon x-tree-elbow" />','<img src="',t.icon||this.emptyIcon,'" class="x-tree-node-icon',t.icon?" x-tree-node-inline-icon":"",t.iconCls?" "+t.iconCls:"",'" unselectable="on" />',e?'<input class="x-tree-node-cb" type="checkbox" '+(t.checked?'checked="checked" />':"/>"):"",'<a hidefocus="on" class="x-tree-node-anchor" href="',h,'" tabIndex="1" ',t.hrefTarget?' target="'+t.hrefTarget+'"':"",'><span unselectable="on">',n.text,"<\/span><\/a><\/div>",'<ul class="x-tree-node-ct" style="display:none;"><\/ul>',"<\/li>"].join(""),s;this.wrap=r!==!0&&n.nextSibling&&(s=n.nextSibling.ui.getEl())?Ext.DomHelper.insertHtml("beforeBegin",s,o):Ext.DomHelper.insertHtml("beforeEnd",i,o);this.elNode=this.wrap.childNodes[0];this.ctNode=this.wrap.childNodes[1];u=this.elNode.childNodes;this.indentNode=u[0];this.ecNode=u[1];this.iconNode=u[2];f=3;e&&(this.checkbox=u[3],f++);this.anchor=u[f];this.textNode=u[f].firstChild},getAnchor:function(){return this.anchor},getTextEl:function(){return this.textNode},getIconEl:function(){return this.iconNode},isChecked:function(){return this.checkbox?this.checkbox.checked:!1},updateExpandIcon:function(){var r;if(this.rendered){var i=this.node,n,t,u=i.isLast()?"x-tree-elbow-end":"x-tree-elbow",f=i.hasChildNodes();f||i.attributes.expandable?(i.expanded?(u+="-minus",n="x-tree-node-collapsed",t="x-tree-node-expanded"):(u+="-plus",n="x-tree-node-expanded",t="x-tree-node-collapsed"),this.wasLeaf&&(this.removeClass("x-tree-node-leaf"),this.wasLeaf=!1),(this.c1!=n||this.c2!=t)&&(Ext.fly(this.elNode).replaceClass(n,t),this.c1=n,this.c2=t)):this.wasLeaf||(Ext.fly(this.elNode).replaceClass("x-tree-node-expanded","x-tree-node-leaf"),delete this.c1,delete this.c2,this.wasLeaf=!0);r="x-tree-ec-icon "+u;this.ecc!=r&&(this.ecNode.className=r,this.ecc=r)}},getChildIndent:function(){if(!this.childIndent){for(var t=[],n=this.node;n;)(!n.isRoot||n.isRoot&&n.ownerTree.rootVisible)&&(n.isLast()?t.unshift('<img src="'+this.emptyIcon+'" class="x-tree-icon" />'):t.unshift('<img src="'+this.emptyIcon+'" class="x-tree-elbow-line" />')),n=n.parentNode;this.childIndent=t.join("")}return this.childIndent},renderIndent:function(){if(this.rendered){var n="",t=this.node.parentNode;t&&(n=t.ui.getChildIndent());this.indentMarkup!=n&&(this.indentNode.innerHTML=n,this.indentMarkup=n);this.updateExpandIcon()}},destroy:function(){this.elNode&&Ext.dd.Registry.unregister(this.elNode.id);delete this.elNode;delete this.ctNode;delete this.indentNode;delete this.ecNode;delete this.iconNode;delete this.checkbox;delete this.anchor;delete this.textNode;Ext.removeNode(this.ctNode)}};Ext.tree.RootTreeNodeUI=Ext.extend(Ext.tree.TreeNodeUI,{render:function(){if(!this.rendered){var n=this.node.ownerTree.innerCt.dom;this.node.expanded=!0;n.innerHTML='<div class="x-tree-root-node"><\/div>';this.wrap=this.ctNode=n.firstChild}},collapse:Ext.emptyFn,expand:Ext.emptyFn});Ext.tree.TreeFilter=function(n,t){this.tree=n;this.filtered={};Ext.apply(this,t)};Ext.tree.TreeFilter.prototype={clearBlank:!1,reverse:!1,autoClear:!1,remove:!1,filter:function(n,t,i){var r,u;if(t=t||"text",typeof n=="string"){if(u=n.length,u==0&&this.clearBlank){this.clear();return}n=n.toLowerCase();r=function(i){return i.attributes[t].substr(0,u).toLowerCase()==n}}else if(n.exec)r=function(i){return n.test(i.attributes[t])};else throw"Illegal filter type, must be string or regex";this.filterBy(r,null,i)},filterBy:function(n,t,i){var f,r;i=i||this.tree.root;this.autoClear&&this.clear();var u=this.filtered,e=this.reverse,o=function(r){if(r==i)return!0;if(u[r.id])return!1;var f=n.call(t||r,r);return!f||e?(u[r.id]=r,r.ui.hide(),!1):!0};if(i.cascade(o),this.remove)for(f in u)typeof f!="function"&&(r=u[f],r&&r.parentNode&&r.parentNode.removeChild(r))},clear:function(){var r=this.tree,i=this.filtered,n,t;for(n in i)typeof n!="function"&&(t=i[n],t&&t.ui.show());this.filtered={}}};Ext.tree.TreeSorter=function(n,t){Ext.apply(this,t);n.on("beforechildrenrendered",this.doSort,this);n.on("append",this.updateSort,this);n.on("insert",this.updateSort,this);n.on("textchange",this.updateSortParent,this);var f=this.dir&&this.dir.toLowerCase()=="desc",i=this.property||"text",r=this.sortType,o=this.folderSort,e=this.caseSensitive===!0,u=this.leafAttr||"leaf";this.sortFn=function(n,t){if(o){if(n.attributes[u]&&!t.attributes[u])return 1;if(!n.attributes[u]&&t.attributes[u])return-1}var s=r?r(n):e?n.attributes[i]:n.attributes[i].toUpperCase(),h=r?r(t):e?t.attributes[i]:t.attributes[i].toUpperCase();return s<h?f?1:-1:s>h?f?-1:1:0}};Ext.tree.TreeSorter.prototype={doSort:function(n){n.sort(this.sortFn)},compareNodes:function(n,t){return n.text.toUpperCase()>t.text.toUpperCase()?1:-1},updateSort:function(n,t){t.childrenRendered&&this.doSort.defer(1,this,[t])},updateSortParent:function(n){var t=n.parentNode;t&&t.childrenRendered&&this.doSort.defer(1,this,[t])}};Ext.dd.DropZone&&(Ext.tree.TreeDropZone=function(n,t){this.allowParentInsert=!1;this.allowContainerDrop=!1;this.appendOnly=!1;Ext.tree.TreeDropZone.superclass.constructor.call(this,n.innerCt,t);this.tree=n;this.dragOverData={};this.lastInsertClass="x-tree-no-status"},Ext.extend(Ext.tree.TreeDropZone,Ext.dd.DropZone,{ddGroup:"TreeDD",expandDelay:1e3,expandNode:function(n){n.hasChildNodes()&&!n.isExpanded()&&n.expand(!1,null,this.triggerCacheRefresh.createDelegate(this))},queueExpand:function(n){this.expandProcId=this.expandNode.defer(this.expandDelay,this,[n])},cancelExpand:function(){this.expandProcId&&(clearTimeout(this.expandProcId),this.expandProcId=!1)},isValidDropPoint:function(n,t,i,r,u){var e,o,f,s;return!n||!u?!1:(e=n.node,o=u.node,!(e&&e.isTarget&&t))?!1:t=="append"&&e.allowChildren===!1?!1:(t=="above"||t=="below")&&e.parentNode&&e.parentNode.allowChildren===!1?!1:o&&(e==o||o.contains(e))?!1:(f=this.dragOverData,f.tree=this.tree,f.target=e,f.data=u,f.point=t,f.source=i,f.rawEvent=r,f.dropNode=o,f.cancel=!1,s=this.tree.fireEvent("nodedragover",f),f.cancel===!1&&s!==!1)},getDropPoint:function(n,t){var i=t.node,o,s;if(i.isRoot)return i.allowChildren!==!1?"append":!1;var h=t.ddel,r=Ext.lib.Dom.getY(h),f=r+h.offsetHeight,u=Ext.lib.Event.getPageY(n),e=i.allowChildren===!1||i.isLeaf();return this.appendOnly||i.parentNode.allowChildren===!1?e?!1:"append":(o=!1,this.allowParentInsert||(o=i.hasChildNodes()&&i.isExpanded()),s=(f-r)/(e?2:3),u>=r&&u<r+s?"above":!o&&(e||u>=f-s&&u<=f)?"below":"append")},onNodeEnter:function(){this.cancelExpand()},onNodeOver:function(n,t,i,r){var u=this.getDropPoint(i,n,t),o=n.node,e,s,f;return this.expandProcId||u!="append"||!o.hasChildNodes()||n.node.isExpanded()?u!="append"&&this.cancelExpand():this.queueExpand(o),e=this.dropNotAllowed,this.isValidDropPoint(n,u,t,i,r)&&u&&(s=n.ddel,u=="above"?(e=n.node.isFirst()?"x-tree-drop-ok-above":"x-tree-drop-ok-between",f="x-tree-drag-insert-above"):u=="below"?(e=n.node.isLast()?"x-tree-drop-ok-below":"x-tree-drop-ok-between",f="x-tree-drag-insert-below"):(e="x-tree-drop-ok-append",f="x-tree-drag-append"),this.lastInsertClass!=f&&(Ext.fly(s).replaceClass(this.lastInsertClass,f),this.lastInsertClass=f)),e},onNodeOut:function(n){this.cancelExpand();this.removeDropIndicators(n)},onNodeDrop:function(n,t,i,r){var e=this.getDropPoint(i,n,t),u=n.node;if(u.ui.startDrop(),!this.isValidDropPoint(n,e,t,i,r))return u.ui.endDrop(),!1;var o=r.node||(t.getTreeNode?t.getTreeNode(r,u,e,i):null),f={tree:this.tree,target:u,data:r,point:e,source:t,rawEvent:i,dropNode:o,cancel:!o},s=this.tree.fireEvent("beforenodedrop",f);return s===!1||f.cancel===!0||!f.dropNode?(u.ui.endDrop(),!1):(u=f.target,e!="append"||u.isExpanded()?this.completeDrop(f):u.expand(!1,null,function(){this.completeDrop(f)}.createDelegate(this)),!0)},completeDrop:function(n){var r=n.dropNode,f=n.point,t=n.target,i,u,e;for(r instanceof Array||(r=[r]),u=0,e=r.length;u<e;u++)i=r[u],f=="above"?t.parentNode.insertBefore(i,t):f=="below"?t.parentNode.insertBefore(i,t.nextSibling):t.appendChild(i);i.ui.focus();this.tree.hlDrop&&i.ui.highlight();t.ui.endDrop();this.tree.fireEvent("nodedrop",n)},afterNodeMoved:function(n,t,i,r,u){this.tree.hlDrop&&(u.ui.focus(),u.ui.highlight());this.tree.fireEvent("nodedrop",this.tree,r,t,n,i)},getTree:function(){return this.tree},removeDropIndicators:function(n){if(n&&n.ddel){var t=n.ddel;Ext.fly(t).removeClass(["x-tree-drag-insert-above","x-tree-drag-insert-below","x-tree-drag-append"]);this.lastInsertClass="_noclass"}},beforeDragDrop:function(){return this.cancelExpand(),!0},afterRepair:function(n){n&&Ext.enableFx&&n.node.ui.highlight();this.hideProxy()}}));Ext.dd.DragZone&&(Ext.tree.TreeDragZone=function(n,t){Ext.tree.TreeDragZone.superclass.constructor.call(this,n.getTreeEl(),t);this.tree=n},Ext.extend(Ext.tree.TreeDragZone,Ext.dd.DragZone,{ddGroup:"TreeDD",onBeforeDrag:function(n){var t=n.node;return t&&t.draggable&&!t.disabled},onInitDrag:function(n){var t=this.dragData;this.tree.getSelectionModel().select(t.node);this.tree.eventModel.disable();this.proxy.update("");t.node.ui.appendDDGhost(this.proxy.ghost.dom);this.tree.fireEvent("startdrag",this.tree,t.node,n)},getRepairXY:function(n,t){return t.node.ui.getDDRepairXY()},onEndDrag:function(n,t){this.tree.eventModel.enable.defer(100,this.tree.eventModel);this.tree.fireEvent("enddrag",this.tree,n.node,t)},onValidDrop:function(n,t){this.tree.fireEvent("dragdrop",this.tree,this.dragData.node,n,t);this.hideProxy()},beforeInvalidDrop:function(){var n=this.tree.getSelectionModel();n.clearSelections();n.select(this.dragData.node)}}));Ext.grid.GridPanel=Ext.extend(Ext.Panel,{ddText:"{0} selected row{1}",minColumnWidth:25,monitorWindowResize:!0,maxRowsToMeasure:0,trackMouseOver:!0,enableDragDrop:!1,enableColumnMove:!0,enableColumnHide:!0,enableHdMenu:!0,stripeRows:!1,autoExpandColumn:!1,autoExpandMin:50,autoExpandMax:1e3,view:null,loadMask:!1,rendered:!1,viewReady:!1,stateEvents:["columnmove","columnresize","sortchange"],initComponent:function(){Ext.grid.GridPanel.superclass.initComponent.call(this);this.autoScroll=!1;this.columns&&this.columns instanceof Array&&(this.colModel=new Ext.grid.ColumnModel(this.columns),delete this.columns);this.ds&&(this.store=this.ds,delete this.ds);this.cm&&(this.colModel=this.cm,delete this.cm);this.sm&&(this.selModel=this.sm,delete this.sm);this.store=Ext.StoreMgr.lookup(this.store);this.addEvents("click","dblclick","contextmenu","mousedown","mouseup","mouseover","mouseout","keypress","keydown","cellmousedown","rowmousedown","headermousedown","cellclick","celldblclick","rowclick","rowdblclick","headerclick","headerdblclick","rowcontextmenu","cellcontextmenu","headercontextmenu","bodyscroll","columnresize","columnmove","sortchange")},onRender:function(){var n,t;Ext.grid.GridPanel.superclass.onRender.apply(this,arguments);n=this.body;this.el.addClass("x-grid-panel");t=this.getView();t.init(this);n.on("mousedown",this.onMouseDown,this);n.on("click",this.onClick,this);n.on("dblclick",this.onDblClick,this);n.on("contextmenu",this.onContextMenu,this);n.on("keydown",this.onKeyDown,this);this.relayEvents(n,["mousedown","mouseup","mouseover","mouseout","keypress"]);this.getSelectionModel().init(this);this.view.render()},initEvents:function(){Ext.grid.GridPanel.superclass.initEvents.call(this);this.loadMask&&(this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({store:this.store},this.loadMask)))},initStateEvents:function(){Ext.grid.GridPanel.superclass.initStateEvents.call(this);this.colModel.on("hiddenchange",this.saveState,this,{delay:100})},applyState:function(n){var u=this.colModel,f=n.columns,t,o,i,r,e;if(f)for(t=0,o=f.length;t<o;t++)i=f[t],r=u.getColumnById(i.id),r&&(r.hidden=i.hidden,r.width=i.width,e=u.getIndexById(i.id),e!=t&&u.moveColumn(e,t));n.sort&&this.store[this.store.remoteSort?"setDefaultSort":"sort"](n.sort.field,n.sort.direction)},getState:function(){for(var r,n={columns:[]},t=0,i;i=this.colModel.config[t];t++)n.columns[t]={id:i.id,width:i.width},i.hidden&&(n.columns[t].hidden=!0);return r=this.store.getSortState(),r&&(n.sort=r),n},afterRender:function(){Ext.grid.GridPanel.superclass.afterRender.call(this);this.view.layout();this.viewReady=!0},reconfigure:function(n,t){this.loadMask&&(this.loadMask.destroy(),this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({store:n},this.initialConfig.loadMask)));this.view.bind(n,t);this.store=n;this.colModel=t;this.rendered&&this.view.refresh(!0)},onKeyDown:function(n){this.fireEvent("keydown",n)},onDestroy:function(){if(this.rendered){this.loadMask&&this.loadMask.destroy();var n=this.body;n.removeAllListeners();this.view.destroy();n.update("")}this.colModel.purgeListeners();Ext.grid.GridPanel.superclass.onDestroy.call(this)},processEvent:function(n,t){var i,f;this.fireEvent(n,t);var r=t.getTarget(),u=this.view,e=u.findHeaderIndex(r);e!==!1?this.fireEvent("header"+n,this,e,t):(i=u.findRowIndex(r),f=u.findCellIndex(r),i!==!1&&(this.fireEvent("row"+n,this,i,t),f!==!1&&this.fireEvent("cell"+n,this,i,f,t)))},onClick:function(n){this.processEvent("click",n)},onMouseDown:function(n){this.processEvent("mousedown",n)},onContextMenu:function(n){this.processEvent("contextmenu",n)},onDblClick:function(n){this.processEvent("dblclick",n)},walkCells:function(n,t,i,r,u){var e=this.colModel,o=e.getColumnCount(),s=this.store,h=s.getCount(),f=!0;if(i<0)for(t<0&&(n--,f=!1);n>=0;){for(f||(t=o-1),f=!1;t>=0;){if(r.call(u||this,n,t,e)===!0)return[n,t];t--}n--}else for(t>=o&&(n++,f=!1);n<h;){for(f||(t=0),f=!1;t<o;){if(r.call(u||this,n,t,e)===!0)return[n,t];t++}n++}return null},getSelections:function(){return this.selModel.getSelections()},onResize:function(){Ext.grid.GridPanel.superclass.onResize.apply(this,arguments);this.viewReady&&this.view.layout()},getGridEl:function(){return this.body},stopEditing:function(){},getSelectionModel:function(){return this.selModel||(this.selModel=new Ext.grid.RowSelectionModel(this.disableSelection?{selectRow:Ext.emptyFn}:null)),this.selModel},getStore:function(){return this.store},getColumnModel:function(){return this.colModel},getView:function(){return this.view||(this.view=new Ext.grid.GridView(this.viewConfig)),this.view},getDragDropText:function(){var n=this.selModel.getCount();return String.format(this.ddText,n,n==1?"":"s")}});Ext.reg("grid",Ext.grid.GridPanel);Ext.grid.GridView=function(n){Ext.apply(this,n);this.addEvents("beforerowremoved","beforerowsinserted","beforerefresh","rowremoved","rowsinserted","rowupdated","refresh");Ext.grid.GridView.superclass.constructor.call(this)};Ext.extend(Ext.grid.GridView,Ext.util.Observable,{scrollOffset:19,autoFill:!1,forceFit:!1,sortClasses:["sort-asc","sort-desc"],sortAscText:"Sort Ascending",sortDescText:"Sort Descending",columnsText:"Columns",borderWidth:2,initTemplates:function(){var n=this.templates||{},i,t;n.master||(n.master=new Ext.Template('<div class="x-grid3" hidefocus="true">','<div class="x-grid3-viewport">','<div class="x-grid3-header"><div class="x-grid3-header-inner"><div class="x-grid3-header-offset">{header}<\/div><\/div><div class="x-clear"><\/div><\/div>','<div class="x-grid3-scroller"><div class="x-grid3-body">{body}<\/div><a href="#" class="x-grid3-focus" tabIndex="-1"><\/a><\/div>',"<\/div>",'<div class="x-grid3-resize-marker">&#160;<\/div>','<div class="x-grid3-resize-proxy">&#160;<\/div>',"<\/div>"));n.header||(n.header=new Ext.Template('<table border="0" cellspacing="0" cellpadding="0" style="{tstyle}">','<thead><tr class="x-grid3-hd-row">{cells}<\/tr><\/thead>',"<\/table>"));n.hcell||(n.hcell=new Ext.Template('<td class="x-grid3-hd x-grid3-cell x-grid3-td-{id}" style="{style}"><div {tooltip} {attr} class="x-grid3-hd-inner x-grid3-hd-{id}" unselectable="on" style="{istyle}">',this.grid.enableHdMenu?'<a class="x-grid3-hd-btn" href="#"><\/a>':"",'{value}<img class="x-grid3-sort-icon" src="',Ext.BLANK_IMAGE_URL,'" />',"<\/div><\/td>"));n.body||(n.body=new Ext.Template("{rows}"));n.row||(n.row=new Ext.Template('<div class="x-grid3-row {alt}" style="{tstyle}"><table class="x-grid3-row-table" border="0" cellspacing="0" cellpadding="0" style="{tstyle}">',"<tbody><tr>{cells}<\/tr>",this.enableRowBody?'<tr class="x-grid3-row-body-tr" style="{bodyStyle}"><td colspan="{cols}" class="x-grid3-body-cell" tabIndex="0" hidefocus="on"><div class="x-grid3-row-body">{body}<\/div><\/td><\/tr>':"","<\/tbody><\/table><\/div>"));n.cell||(n.cell=new Ext.Template('<td class="x-grid3-col x-grid3-cell x-grid3-td-{id} {css}" style="{style}" tabIndex="0" {cellAttr}>','<div class="x-grid3-cell-inner x-grid3-col-{id}" unselectable="on" {attr}>{value}<\/div>',"<\/td>"));for(i in n)t=n[i],t&&typeof t.compile=="function"&&!t.compiled&&(t.disableFormats=!0,t.compile());this.templates=n;this.tdClass="x-grid3-cell";this.cellSelector="td.x-grid3-cell";this.hdCls="x-grid3-hd";this.rowSelector="div.x-grid3-row";this.colRe=new RegExp("x-grid3-td-([^\\s]+)","")},fly:function(n){return this._flyweight||(this._flyweight=new Ext.Element.Flyweight(document.body)),this._flyweight.dom=n,this._flyweight},getEditorParent:function(){return this.scroller.dom},initElements:function(){var n=Ext.Element,i=this.grid.getGridEl().dom.firstChild,t=i.childNodes;this.el=new n(i);this.mainWrap=new n(t[0]);this.mainHd=new n(this.mainWrap.dom.firstChild);this.innerHd=this.mainHd.dom.firstChild;this.scroller=new n(this.mainWrap.dom.childNodes[1]);this.forceFit&&this.scroller.setStyle("overflow-x","hidden");this.mainBody=new n(this.scroller.dom.firstChild);this.focusEl=new n(this.scroller.dom.childNodes[1]);this.focusEl.swallowEvent("click",!0);this.resizeMarker=new n(t[1]);this.resizeProxy=new n(t[2])},getRows:function(){return this.hasRows()?this.mainBody.dom.childNodes:[]},findCell:function(n){return n?this.fly(n).findParent(this.cellSelector,3):!1},findCellIndex:function(n,t){var i=this.findCell(n);return i&&(!t||this.fly(i).hasClass(t))?this.getCellIndex(i):!1},getCellIndex:function(n){if(n){var t=n.className.match(this.colRe);if(t&&t[1])return this.cm.getIndexById(t[1])}return!1},findHeaderCell:function(n){var t=this.findCell(n);return t&&this.fly(t).hasClass(this.hdCls)?t:null},findHeaderIndex:function(n){return this.findCellIndex(n,this.hdCls)},findRow:function(n){return n?this.fly(n).findParent(this.rowSelector,10):!1},findRowIndex:function(n){var t=this.findRow(n);return t?t.rowIndex:!1},getRow:function(n){return this.getRows()[n]},getCell:function(n,t){return this.getRow(n).getElementsByTagName("td")[t]},getHeaderCell:function(n){return this.mainHd.dom.getElementsByTagName("td")[n]},addRowClass:function(n,t){var i=this.getRow(n);i&&this.fly(i).addClass(t)},removeRowClass:function(n,t){var i=this.getRow(n);i&&this.fly(i).removeClass(t)},removeRow:function(n){Ext.removeNode(this.getRow(n))},removeRows:function(n,t){for(var r=this.mainBody.dom,i=n;i<=t;i++)Ext.removeNode(r.childNodes[n])},getScrollState:function(){var n=this.scroller.dom;return{left:n.scrollLeft,top:n.scrollTop}},restoreScroll:function(n){var t=this.scroller.dom;t.scrollLeft=n.left;t.scrollTop=n.top},scrollToTop:function(){this.scroller.dom.scrollTop=0;this.scroller.dom.scrollLeft=0},syncScroll:function(){this.syncHeaderScroll();var n=this.scroller.dom;this.grid.fireEvent("bodyscroll",n.scrollLeft,n.scrollTop)},syncHeaderScroll:function(){var n=this.scroller.dom;this.innerHd.scrollLeft=n.scrollLeft;this.innerHd.scrollLeft=n.scrollLeft},updateSortIcon:function(n,t){var i=this.sortClasses,r=this.mainHd.select("td").removeClass(i);r.item(n).addClass(i[t=="DESC"?1:0])},updateAllColumnWidths:function(){for(var e,t,o,s,i,r=this.getTotalWidth(),f=this.cm.getColumnCount(),u=[],n=0;n<f;n++)u[n]=this.getColumnWidth(n);for(this.innerHd.firstChild.firstChild.style.width=r,n=0;n<f;n++)e=this.getHeaderCell(n),e.style.width=u[n];for(t=this.getRows(),n=0,o=t.length;n<o;n++)for(t[n].style.width=r,t[n].firstChild.style.width=r,s=t[n].firstChild.rows[0],i=0;i<f;i++)s.childNodes[i].style.width=u[i];this.onAllColumnWidthsUpdated(u,r)},updateColumnWidth:function(n){var u=this.getColumnWidth(n),r=this.getTotalWidth(),f,i,t,e;for(this.innerHd.firstChild.firstChild.style.width=r,f=this.getHeaderCell(n),f.style.width=u,i=this.getRows(),t=0,e=i.length;t<e;t++)i[t].style.width=r,i[t].firstChild.style.width=r,i[t].firstChild.rows[0].childNodes[n].style.width=u;this.onColumnWidthUpdated(n,u,r)},updateColumnHidden:function(n,t){var u=this.getTotalWidth(),f,e,r,i,o;for(this.innerHd.firstChild.firstChild.style.width=u,f=t?"none":"",e=this.getHeaderCell(n),e.style.display=f,r=this.getRows(),i=0,o=r.length;i<o;i++)r[i].style.width=u,r[i].firstChild.style.width=u,r[i].firstChild.rows[0].childNodes[n].style.display=f;this.onColumnHiddenUpdated(n,t,u);delete this.lastViewWidth;this.layout()},doRender:function(n,t,i,r,u,f){for(var y,s,l,w=this.templates,b=w.cell,k=w.row,d=u-1,g="width:"+this.getTotalWidth()+";",p=[],a,h,e={},c={tstyle:g},o,v=0,nt=t.length;v<nt;v++){for(o=t[v],a=[],y=v+r,s=0;s<u;s++)h=n[s],e.id=h.id,e.css=s==0?"x-grid3-cell-first ":s==d?"x-grid3-cell-last ":"",e.attr=e.cellAttr="",e.value=h.renderer(o.data[h.name],e,o,y,s,i),e.style=h.style,(e.value==undefined||e.value==="")&&(e.value="&#160;"),o.dirty&&typeof o.modified[h.name]!="undefined"&&(e.css+=" x-grid3-dirty-cell"),a[a.length]=b.apply(e);l=[];f&&(y+1)%2==0&&(l[0]="x-grid3-row-alt");o.dirty&&(l[1]=" x-grid3-dirty-row");c.cols=u;this.getRowClass&&(l[2]=this.getRowClass(o,y,c,i));c.alt=l.join(" ");c.cells=a.join("");p[p.length]=k.apply(c)}return p.join("")},processRows:function(n,t){var u,e,i,o,r,f,s;if(!(this.ds.getCount()<1))for(t=t||!this.grid.stripeRows,n=n||0,u=this.getRows(),e=" x-grid3-row-alt ",i=n,o=u.length;i<o;i++)if(r=u[i],r.rowIndex=i,!t){if(f=(i+1)%2==0,s=(" "+r.className+" ").indexOf(e)!=-1,f==s)continue;f?r.className+=" x-grid3-row-alt":r.className=r.className.replace("x-grid3-row-alt","")}},renderUI:function(){var t=this.renderHeaders(),i=this.templates.body.apply({rows:""}),r=this.templates.master.apply({body:i,header:t}),n=this.grid,u;n.getGridEl().dom.innerHTML=r;this.initElements();this.mainBody.dom.innerHTML=this.renderRows();this.processRows(0,!0);Ext.fly(this.innerHd).on("click",this.handleHdDown,this);this.mainHd.on("mouseover",this.handleHdOver,this);this.mainHd.on("mouseout",this.handleHdOut,this);this.mainHd.on("mousemove",this.handleHdMove,this);this.scroller.on("scroll",this.syncScroll,this);if(n.enableColumnResize!==!1&&(this.splitone=new Ext.grid.GridView.SplitDragZone(n,this.mainHd.dom)),n.enableColumnMove&&(this.columnDrag=new Ext.grid.GridView.ColumnDragZone(n,this.innerHd),this.columnDrop=new Ext.grid.HeaderDropZone(n,this.mainHd.dom)),n.enableHdMenu!==!1){if(n.enableColumnHide!==!1){this.colMenu=new Ext.menu.Menu({id:n.id+"-hcols-menu"});this.colMenu.on("beforeshow",this.beforeColMenuShow,this);this.colMenu.on("itemclick",this.handleHdMenuClick,this)}this.hmenu=new Ext.menu.Menu({id:n.id+"-hctx"});this.hmenu.add({id:"asc",text:this.sortAscText,cls:"xg-hmenu-sort-asc"},{id:"desc",text:this.sortDescText,cls:"xg-hmenu-sort-desc"});n.enableColumnHide!==!1&&this.hmenu.add("-",{id:"columns",text:this.columnsText,menu:this.colMenu,iconCls:"x-cols-icon"});this.hmenu.on("itemclick",this.handleHdMenuClick,this)}(n.enableDragDrop||n.enableDrag)&&(u=new Ext.grid.GridDragZone(n,{ddGroup:n.ddGroup||"GridDD"}));this.updateHeaderSortState()},layout:function(){var u,r;if(this.mainBody){var i=this.grid,f=i.getGridEl(),e=this.cm,o=i.autoExpandColumn,s=this,t=f.getSize(!0),n=t.width;if(!(n<20)&&!(t.height<20)){i.autoHeight?this.scroller.dom.style.overflow="visible":(this.el.setSize(t.width,t.height),u=this.mainHd.getHeight(),r=t.height-u,this.scroller.setSize(n,r),this.innerHd&&(this.innerHd.style.width=n+"px"));this.forceFit?this.lastViewWidth!=n&&(this.fitColumns(!1,!1),this.lastViewWidth=n):(this.autoExpand(),this.syncHeaderScroll());this.onLayout(n,r)}}},onLayout:function(){},onColumnWidthUpdated:function(){},onAllColumnWidthsUpdated:function(){},onColumnHiddenUpdated:function(){},updateColumnText:function(){},afterMove:function(){},init:function(n){this.grid=n;this.initTemplates();this.initData(n.store,n.colModel);this.initUI(n)},getColumnId:function(n){return this.cm.getColumnId(n)},renderHeaders:function(){for(var i=this.cm,u=this.templates,f=u.hcell,r=[],n={},t=0,e=i.getColumnCount();t<e;t++)n.id=i.getColumnId(t),n.value=i.getColumnHeader(t)||"",n.style=this.getColumnStyle(t,!0),n.tooltip=this.getColumnTooltip(t),i.config[t].align=="right"?n.istyle="padding-right:16px":delete n.istyle,r[r.length]=f.apply(n);return u.header.apply({cells:r.join(""),tstyle:"width:"+this.getTotalWidth()+";"})},getColumnTooltip:function(n){var t=this.cm.getColumnTooltip(n);return t?Ext.QuickTips.isEnabled()?'ext:qtip="'+t+'"':'title="'+t+'"':""},beforeUpdate:function(){this.grid.stopEditing()},updateHeaders:function(){this.innerHd.firstChild.innerHTML=this.renderHeaders()},focusRow:function(n){this.focusCell(n,0,!1)},focusCell:function(n,t,i){var r=this.ensureVisible(n,t,i);this.focusEl.setXY(r);Ext.isGecko?this.focusEl.focus():this.focusEl.focus.defer(1,this.focusEl)},ensureVisible:function(n,t,i){var u,f;if((typeof n!="number"&&(n=n.rowIndex),this.ds)&&!(n<0)&&!(n>=this.ds.getCount())){if(t=t!==undefined?t:0,u=this.getRow(n),!(i===!1&&t===0)){while(this.cm.isHidden(t))t++;f=this.getCell(n,t)}if(u){for(var r=this.scroller.dom,e=0,o=u,s=this.el.dom;o&&o!=s;)e+=o.offsetTop,o=o.offsetParent;e-=this.mainHd.dom.offsetHeight;var c=e+u.offsetHeight,l=r.clientHeight,s=parseInt(r.scrollTop,10),y=s+l;if(e<s?r.scrollTop=e:c>y&&(r.scrollTop=c-l),i!==!1){var h=parseInt(f.offsetLeft,10),a=h+f.offsetWidth,v=parseInt(r.scrollLeft,10),p=v+r.clientWidth;h<v?r.scrollLeft=h:a>p&&(r.scrollLeft=a-r.clientWidth)}return f?Ext.fly(f).getXY():[r.scrollLeft,Ext.fly(u).getY()]}}},insertRows:function(n,t,i,r){if(t===0&&i==n.getCount()-1)this.refresh();else{r||this.fireEvent("beforerowsinserted",this,t,i);var u=this.renderRows(t,i),f=this.getRow(t);f?Ext.DomHelper.insertHtml("beforeBegin",f,u):Ext.DomHelper.insertHtml("beforeEnd",this.mainBody.dom,u);r||(this.fireEvent("rowsinserted",this,t,i),this.processRows(t))}},deleteRows:function(n,t,i){n.getRowCount()<1?this.refresh():(this.fireEvent("beforerowsdeleted",this,t,i),this.removeRows(t,i),this.processRows(t),this.fireEvent("rowsdeleted",this,t,i))},getColumnStyle:function(n,t){var i=t?"":this.cm.config[n].css||"",r;return i+="width:"+this.getColumnWidth(n)+";",this.cm.isHidden(n)&&(i+="display:none;"),r=this.cm.config[n].align,r&&(i+="text-align:"+r+";"),i},getColumnWidth:function(n){var t=this.cm.getColumnWidth(n);return typeof t=="number"?(Ext.isBorderBox?t:t-this.borderWidth>0?t-this.borderWidth:0)+"px":t},getTotalWidth:function(){return this.cm.getTotalWidth()+"px"},fitColumns:function(n,t,i){var r=this.cm,u,h=r.getTotalWidth(!1),e=this.grid.getGridEl().getWidth(!0)-this.scrollOffset,a,c,s,p,l;if(!(e<20)){if(a=e-h,a===0)return!1;c=r.getColumnCount(!0);s=c-(typeof i=="number"?1:0);s===0&&(s=1,i=undefined);var w=r.getColumnCount(),o=[],v=0,y=0,f;for(u=0;u<w;u++)r.isHidden(u)||r.isFixed(u)||u===i||(f=r.getColumnWidth(u),o.push(u),v=u,o.push(f),y+=f);for(p=(e-r.getTotalWidth())/y;o.length;)f=o.pop(),u=o.pop(),r.setColumnWidth(u,Math.max(this.grid.minColumnWidth,Math.floor(f+f*p)),!0);return(h=r.getTotalWidth(!1))>e&&(l=s!=c?i:v,r.setColumnWidth(l,Math.max(1,r.getColumnWidth(l)-(h-e)),!0)),n!==!0&&this.updateAllColumnWidths(),!0}},autoExpand:function(n){var t=this.grid,i=this.cm,r,u;if(!this.userResized&&t.autoExpandColumn&&(r=i.getTotalWidth(!1),u=this.grid.getGridEl().getWidth(!0)-this.scrollOffset,r!=u)){var f=i.getIndexById(t.autoExpandColumn),o=i.getColumnWidth(f),e=Math.min(Math.max(u-r+o,t.autoExpandMin),t.autoExpandMax);e!=o&&(i.setColumnWidth(f,e,!0),n!==!0&&this.updateColumnWidth(f,e))}},getColumnData:function(){for(var i,r=[],t=this.cm,u=t.getColumnCount(),n=0;n<u;n++)i=t.getDataIndex(n),r[n]={name:typeof i=="undefined"?this.ds.fields.get(n).name:i,renderer:t.getRenderer(n),id:t.getColumnId(n),style:this.getColumnStyle(n)};return r},renderRows:function(n,t){var r=this.grid,e=r.colModel,i=r.store,o=r.stripeRows,s=e.getColumnCount(),u,f;return i.getCount()<1?"":(u=this.getColumnData(),n=n||0,t=typeof t=="undefined"?i.getCount()-1:t,f=i.getRange(n,t),this.doRender(u,f,i,n,s,o))},renderBody:function(){var n=this.renderRows();return this.templates.body.apply({rows:n})},refreshRow:function(n){var i=this.ds,t,r;typeof n=="number"?(t=n,n=i.getAt(t)):t=i.indexOf(n);r=[];this.insertRows(i,t,t,!0);this.getRow(t).rowIndex=t;this.onRemove(i,n,t+1,!0);this.fireEvent("rowupdated",this,t,n)},refresh:function(n){this.fireEvent("beforerefresh",this);this.grid.stopEditing();var t=this.renderBody();this.mainBody.update(t);n===!0&&(this.updateHeaders(),this.updateHeaderSortState());this.processRows(0,!0);this.layout();this.applyEmptyText();this.fireEvent("refresh",this)},applyEmptyText:function(){this.emptyText&&!this.hasRows()&&this.mainBody.update('<div class="x-grid-empty">'+this.emptyText+"<\/div>")},updateHeaderSortState:function(){var n=this.ds.getSortState(),t,i;n&&(this.sortState&&this.sortState.field==n.field&&this.sortState.direction==n.direction||this.grid.fireEvent("sortchange",this.grid,n),this.sortState=n,t=this.cm.findColumnIndex(n.field),t!=-1&&(i=n.direction,this.updateSortIcon(t,i)))},destroy:function(){var n,t,i;if(this.colMenu&&(this.colMenu.removeAll(),Ext.menu.MenuMgr.unregister(this.colMenu),this.colMenu.getEl().remove(),delete this.colMenu),this.hmenu&&(this.hmenu.removeAll(),Ext.menu.MenuMgr.unregister(this.hmenu),this.hmenu.getEl().remove(),delete this.hmenu),this.grid.enableColumnMove&&(n=Ext.dd.DDM.ids["gridHeader"+this.grid.getGridEl().id],n)){for(t in n)!n[t].config.isTarget&&n[t].dragElId?(i=n[t].dragElId,n[t].unreg(),Ext.get(i).remove()):n[t].config.isTarget&&(n[t].proxyTop.remove(),n[t].proxyBottom.remove(),n[t].unreg()),Ext.dd.DDM.locationCache[t]&&delete Ext.dd.DDM.locationCache[t];delete Ext.dd.DDM.ids["gridHeader"+this.grid.getGridEl().id]}Ext.destroy(this.resizeMarker,this.resizeProxy);this.initData(null,null);Ext.EventManager.removeResizeListener(this.onWindowResize,this)},onDenyColumnHide:function(){},render:function(){var n=this.cm,t=n.getColumnCount();if(this.grid.monitorWindowResize===!0)Ext.EventManager.onWindowResize(this.onWindowResize,this,!0);this.autoFill?this.fitColumns(!0,!0):this.forceFit?this.fitColumns(!0,!1):this.grid.autoExpandColumn&&this.autoExpand(!0);this.renderUI()},onWindowResize:function(){this.grid.monitorWindowResize&&!this.grid.autoHeight&&this.layout()},initData:function(n,t){if(this.ds&&(this.ds.un("load",this.onLoad,this),this.ds.un("datachanged",this.onDataChange,this),this.ds.un("add",this.onAdd,this),this.ds.un("remove",this.onRemove,this),this.ds.un("update",this.onUpdate,this),this.ds.un("clear",this.onClear,this)),n){n.on("load",this.onLoad,this);n.on("datachanged",this.onDataChange,this);n.on("add",this.onAdd,this);n.on("remove",this.onRemove,this);n.on("update",this.onUpdate,this);n.on("clear",this.onClear,this)}if(this.ds=n,this.cm&&(this.cm.un("configchange",this.onColConfigChange,this),this.cm.un("widthchange",this.onColWidthChange,this),this.cm.un("headerchange",this.onHeaderChange,this),this.cm.un("hiddenchange",this.onHiddenChange,this),this.cm.un("columnmoved",this.onColumnMove,this),this.cm.un("columnlockchange",this.onColumnLock,this)),t){t.on("configchange",this.onColConfigChange,this);t.on("widthchange",this.onColWidthChange,this);t.on("headerchange",this.onHeaderChange,this);t.on("hiddenchange",this.onHiddenChange,this);t.on("columnmoved",this.onColumnMove,this);t.on("columnlockchange",this.onColumnLock,this)}this.cm=t},onDataChange:function(){this.refresh();this.updateHeaderSortState()},onClear:function(){this.refresh()},onUpdate:function(n,t){this.refreshRow(t)},onAdd:function(n,t,i){this.insertRows(n,i,i+(t.length-1))},onRemove:function(n,t,i,r){r!==!0&&this.fireEvent("beforerowremoved",this,i,t);this.removeRow(i);r!==!0&&(this.processRows(i),this.applyEmptyText(),this.fireEvent("rowremoved",this,i,t))},onLoad:function(){this.scrollToTop()},onColWidthChange:function(n,t,i){this.updateColumnWidth(t,i)},onHeaderChange:function(){this.updateHeaders()},onHiddenChange:function(n,t,i){this.updateColumnHidden(t,i)},onColumnMove:function(n,t,i){this.indexMap=null;var r=this.getScrollState();this.refresh(!0);this.restoreScroll(r);this.afterMove(i)},onColConfigChange:function(){delete this.lastViewWidth;this.indexMap=null;this.refresh(!0)},initUI:function(n){n.on("headerclick",this.onHeaderClick,this);if(n.trackMouseOver){n.on("mouseover",this.onRowOver,this);n.on("mouseout",this.onRowOut,this)}},initEvents:function(){},onHeaderClick:function(n,t){!this.headersDisabled&&this.cm.isSortable(t)&&(n.stopEditing(),n.store.sort(this.cm.getDataIndex(t)))},onRowOver:function(n,t){var i;(i=this.findRowIndex(t))!==!1&&this.addRowClass(i,"x-grid3-row-over")},onRowOut:function(n,t){var i;(i=this.findRowIndex(t))!==!1&&i!==this.findRowIndex(n.getRelatedTarget())&&this.removeRowClass(i,"x-grid3-row-over")},handleWheel:function(n){n.stopPropagation()},onRowSelect:function(n){this.addRowClass(n,"x-grid3-row-selected")},onRowDeselect:function(n){this.removeRowClass(n,"x-grid3-row-selected")},onCellSelect:function(n,t){var i=this.getCell(n,t);i&&this.fly(i).addClass("x-grid3-cell-selected")},onCellDeselect:function(n,t){var i=this.getCell(n,t);i&&this.fly(i).removeClass("x-grid3-cell-selected")},onColumnSplitterMoved:function(n,t){this.userResized=!0;var i=this.grid.colModel;i.setColumnWidth(n,t,!0);this.forceFit?(this.fitColumns(!0,!1,n),this.updateAllColumnWidths()):this.updateColumnWidth(n,t);this.grid.fireEvent("columnresize",n,t)},handleHdMenuClick:function(n){var t=this.hdCtxIndex,i=this.cm,r=this.ds;switch(n.id){case"asc":r.sort(i.getDataIndex(t),"ASC");break;case"desc":r.sort(i.getDataIndex(t),"DESC");break;default:if(t=i.getIndexById(n.id.substr(4)),t!=-1){if(n.checked&&i.getColumnsBy(this.isHideableColumn,this).length<=1)return this.onDenyColumnHide(),!1;i.setHidden(t,n.checked)}}return!0},isHideableColumn:function(n){return!n.hidden&&!n.fixed},beforeColMenuShow:function(){var t=this.cm,i=t.getColumnCount(),n;for(this.colMenu.removeAll(),n=0;n<i;n++)t.config[n].fixed!==!0&&t.config[n].hideable!==!1&&this.colMenu.add(new Ext.menu.CheckItem({id:"col-"+t.getColumnId(n),text:t.getColumnHeader(n),checked:!t.isHidden(n),hideOnClick:!1,disabled:t.config[n].hideable===!1}))},handleHdDown:function(n,t){var i,r,u,f;if(Ext.fly(t).hasClass("x-grid3-hd-btn")){n.stopEvent();i=this.findHeaderCell(t);Ext.fly(i).addClass("x-grid3-hd-menu-open");r=this.getCellIndex(i);this.hdCtxIndex=r;u=this.hmenu.items;f=this.cm;u.get("asc").setDisabled(!f.isSortable(r));u.get("desc").setDisabled(!f.isSortable(r));this.hmenu.on("hide",function(){Ext.fly(i).removeClass("x-grid3-hd-menu-open")},this,{single:!0});this.hmenu.show(t,"tl-bl?")}},handleHdOver:function(n,t){var i=this.findHeaderCell(t),r;i&&!this.headersDisabled&&(this.activeHd=i,this.activeHdIndex=this.getCellIndex(i),r=this.fly(i),this.activeHdRegion=r.getRegion(),this.cm.isSortable(this.activeHdIndex)&&!this.cm.isFixed(this.activeHdIndex)&&(r.addClass("x-grid3-hd-over"),this.activeHdBtn=r.child(".x-grid3-hd-btn"),this.activeHdBtn&&(this.activeHdBtn.dom.style.height=i.firstChild.offsetHeight-1+"px")))},handleHdMove:function(n){if(this.activeHd&&!this.headersDisabled){var t=this.splitHandleWidth||5,i=this.activeHdRegion,r=n.getPageX(),u=this.activeHd.style;u.cursor=r-i.left<=t&&this.cm.isResizable(this.activeHdIndex-1)?Ext.isSafari?"e-resize":"col-resize":i.right-r<=(this.activeHdBtn?2:t)&&this.cm.isResizable(this.activeHdIndex)?Ext.isSafari?"w-resize":"col-resize":""}},handleHdOut:function(n,t){var i=this.findHeaderCell(t);!i||Ext.isIE&&n.within(i,!0)||(this.activeHd=null,this.fly(i).removeClass("x-grid3-hd-over"),i.style.cursor="")},hasRows:function(){var n=this.mainBody.dom.firstChild;return n&&n.className!="x-grid-empty"},bind:function(n,t){this.initData(n,t)}});Ext.grid.GridView.SplitDragZone=function(n,t){this.grid=n;this.view=n.getView();this.marker=this.view.resizeMarker;this.proxy=this.view.resizeProxy;Ext.grid.GridView.SplitDragZone.superclass.constructor.call(this,t,"gridSplitters"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:!1});this.scroll=!1;this.hw=this.view.splitHandleWidth||5};Ext.extend(Ext.grid.GridView.SplitDragZone,Ext.dd.DDProxy,{b4StartDrag:function(n,t){var i,u,r;this.view.headersDisabled=!0;i=this.view.mainWrap.getHeight();this.marker.setHeight(i);this.marker.show();this.marker.alignTo(this.view.getHeaderCell(this.cellIndex),"tl-tl",[-2,0]);this.proxy.setHeight(i);u=this.cm.getColumnWidth(this.cellIndex);r=Math.max(u-this.grid.minColumnWidth,0);this.resetConstraints();this.setXConstraint(r,1e3);this.setYConstraint(0,0);this.minX=n-r;this.maxX=n+1e3;this.startPos=n;Ext.dd.DDProxy.prototype.b4StartDrag.call(this,n,t)},handleMouseDown:function(n){var i=this.view.findHeaderCell(n.getTarget()),r;if(i){var u=this.view.fly(i).getXY(),f=u[0],h=u[1],e=n.getXY(),o=e[0],c=e[1],s=i.offsetWidth,t=!1;if(o-f<=this.hw?t=-1:f+s-o<=this.hw&&(t=0),t!==!1){if(this.cm=this.grid.colModel,r=this.view.getCellIndex(i),t==-1){if(r+t<0)return;while(this.cm.isHidden(r+t))if(--t,r+t<0)return}this.cellIndex=r+t;this.split=i.dom;this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)&&Ext.grid.GridView.SplitDragZone.superclass.handleMouseDown.apply(this,arguments)}else this.view.columnDrag&&this.view.columnDrag.callHandleMouseDown(n)}},endDrag:function(n){this.marker.hide();var t=this.view,i=Math.max(this.minX,n.getPageX()),r=i-this.startPos;t.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+r);setTimeout(function(){t.headersDisabled=!1},50)},autoOffset:function(){this.setDelta(0,0)}});Ext.grid.GroupingView=Ext.extend(Ext.grid.GridView,{hideGroupedColumn:!1,showGroupName:!0,startCollapsed:!1,enableGrouping:!0,enableGroupingMenu:!0,enableNoGroups:!0,emptyGroupText:"(None)",ignoreAdd:!1,groupTextTpl:"{text}",gidSeed:1e3,initTemplates:function(){Ext.grid.GroupingView.superclass.initTemplates.call(this);this.state={};var n=this.grid.getSelectionModel();n.on(n.selectRow?"beforerowselect":"beforecellselect",this.onBeforeRowSelect,this);this.startGroup||(this.startGroup=new Ext.XTemplate('<div id="{groupId}" class="x-grid-group {cls}">','<div id="{groupId}-hd" class="x-grid-group-hd" style="{style}"><div>',this.groupTextTpl,"<\/div><\/div>",'<div id="{groupId}-bd" class="x-grid-group-body">'));this.startGroup.compile();this.endGroup="<\/div><\/div>"},findGroup:function(n){return Ext.fly(n).up(".x-grid-group",this.mainBody.dom)},getGroups:function(){return this.hasRows()?this.mainBody.dom.childNodes:[]},onAdd:function(){if(this.enableGrouping&&!this.ignoreAdd){var n=this.getScrollState();this.refresh();this.restoreScroll(n)}else this.enableGrouping||Ext.grid.GroupingView.superclass.onAdd.apply(this,arguments)},onRemove:function(n,t){Ext.grid.GroupingView.superclass.onRemove.apply(this,arguments);var i=document.getElementById(t._groupId);i&&i.childNodes[1].childNodes.length<1&&Ext.removeNode(i);this.applyEmptyText()},refreshRow:function(){this.ds.getCount()==1?this.refresh():(this.isUpdating=!0,Ext.grid.GroupingView.superclass.refreshRow.apply(this,arguments),this.isUpdating=!1)},beforeMenuShow:function(){var t=this.getGroupField(),i=this.hmenu.items.get("groupBy"),n;i&&i.setDisabled(this.cm.config[this.hdCtxIndex].groupable===!1);n=this.hmenu.items.get("showGroups");n&&(!t||n.setDisabled(this.cm.config[this.hdCtxIndex].groupable===!1),n.setChecked(!!t))},renderUI:function(){Ext.grid.GroupingView.superclass.renderUI.call(this);this.mainBody.on("mousedown",this.interceptMouse,this);if(this.enableGroupingMenu&&this.hmenu){this.hmenu.add("-",{id:"groupBy",text:this.groupByText,handler:this.onGroupByClick,scope:this,iconCls:"x-group-by-icon"});this.enableNoGroups&&this.hmenu.add({id:"showGroups",text:this.showGroupsText,checked:!0,checkHandler:this.onShowGroupsClick,scope:this});this.hmenu.on("beforeshow",this.beforeMenuShow,this)}},onGroupByClick:function(){this.grid.store.groupBy(this.cm.getDataIndex(this.hdCtxIndex));this.beforeMenuShow()},onShowGroupsClick:function(n,t){t?this.onGroupByClick():this.grid.store.clearGrouping()},toggleGroup:function(n,t){this.grid.stopEditing();n=Ext.getDom(n);var i=Ext.fly(n);t=t!==undefined?t:i.hasClass("x-grid-group-collapsed");this.state[i.dom.id]=t;i[t?"removeClass":"addClass"]("x-grid-group-collapsed")},toggleAllGroups:function(n){for(var i=this.getGroups(),t=0,r=i.length;t<r;t++)this.toggleGroup(i[t],n)},expandAllGroups:function(){this.toggleAllGroups(!0)},collapseAllGroups:function(){this.toggleAllGroups(!1)},interceptMouse:function(n){var t=n.getTarget(".x-grid-group-hd",this.mainBody);t&&(n.stopEvent(),this.toggleGroup(t.parentNode))},getGroup:function(n,t,i,r,u,f){var e=i?i(n,{},t,r,u,f):String(n);return e===""&&(e=this.cm.config[u].emptyGroupText||this.emptyGroupText),e},getGroupField:function(){return this.grid.store.getGroupState()},renderRows:function(){var n=this.getGroupField(),t=!!n,i,r;return this.hideGroupedColumn&&(i=this.cm.findColumnIndex(n),t||this.lastGroupField===undefined?t&&this.lastGroupField===undefined?(this.lastGroupField=n,this.cm.setHidden(i,!0)):t&&this.lastGroupField!==undefined&&n!==this.lastGroupField&&(this.mainBody.update(""),r=this.cm.findColumnIndex(this.lastGroupField),this.cm.setHidden(r,!1),this.lastGroupField=n,this.cm.setHidden(i,!0)):(this.mainBody.update(""),this.cm.setHidden(this.cm.findColumnIndex(this.lastGroupField),!1),delete this.lastGroupField)),Ext.grid.GroupingView.superclass.renderRows.apply(this,arguments)},doRender:function(n,t,i,r,u,f){var h,p,d,g,s,o;if(t.length<1)return"";if(h=this.getGroupField(),p=this.cm.findColumnIndex(h),this.enableGrouping=!!h,!this.enableGrouping||this.isUpdating)return Ext.grid.GroupingView.superclass.doRender.apply(this,arguments);for(var nt="width:"+this.getTotalWidth()+";",tt=this.grid.getGridEl().id,v=this.cm.config[p],it=v.groupRenderer||v.renderer,rt=this.showGroupName?(v.groupName||v.header)+": ":"",w=[],c,l,e=0,y=t.length;e<y;e++){var b=r+e,a=t[e],k=a.data[h],o=this.getGroup(k,a,it,b,p,i);c&&c.group==o?c.rs.push(a):(l=tt+"-gp-"+h+"-"+Ext.util.Format.htmlEncode(o),d=typeof this.state[l]!="undefined"?!this.state[l]:this.startCollapsed,g=d?"x-grid-group-collapsed":"",c={group:o,gvalue:k,text:rt+o,groupId:l,startRow:b,rs:[a],cls:g,style:nt},w.push(c));a._groupId=l}for(s=[],e=0,y=w.length;e<y;e++)o=w[e],this.doGroupStart(s,o,n,i,u),s[s.length]=Ext.grid.GroupingView.superclass.doRender.call(this,n,o.rs,i,o.startRow,u,f),this.doGroupEnd(s,o,n,i,u);return s.join("")},getGroupId:function(n){var u=this.grid.getGridEl().id,t=this.getGroupField(),i=this.cm.findColumnIndex(t),r=this.cm.config[i],f=r.groupRenderer||r.renderer,e=this.getGroup(n,{data:{}},f,0,i,this.ds);return u+"-gp-"+t+"-"+Ext.util.Format.htmlEncode(n)},doGroupStart:function(n,t){n[n.length]=this.startGroup.apply(t)},doGroupEnd:function(n){n[n.length]=this.endGroup},getRows:function(){var n,r,u,t,f,i,e;if(!this.enableGrouping)return Ext.grid.GroupingView.superclass.getRows.call(this);for(n=[],u=this.getGroups(),t=0,f=u.length;t<f;t++)for(r=u[t].childNodes[1].childNodes,i=0,e=r.length;i<e;i++)n[n.length]=r[i];return n},updateGroupWidths:function(){var i,t,n,r;if(this.enableGrouping&&this.hasRows())for(i=Math.max(this.cm.getTotalWidth(),this.el.dom.offsetWidth-this.scrollOffset)+"px",t=this.getGroups(),n=0,r=t.length;n<r;n++)t[n].firstChild.style.width=i},onColumnWidthUpdated:function(){this.updateGroupWidths()},onAllColumnWidthsUpdated:function(){this.updateGroupWidths()},onColumnHiddenUpdated:function(){this.updateGroupWidths()},onLayout:function(){this.updateGroupWidths()},onBeforeRowSelect:function(n,t){var i,r;this.enableGrouping&&(i=this.getRow(t),i&&!i.offsetParent&&(r=this.findGroup(i),this.toggleGroup(r,!0)))},groupByText:"Group By This Field",showGroupsText:"Show in Groups"});Ext.grid.GroupingView.GROUP_ID=1e3;Ext.grid.HeaderDragZone=function(n,t,i){this.grid=n;this.view=n.getView();this.ddGroup="gridHeader"+this.grid.getGridEl().id;Ext.grid.HeaderDragZone.superclass.constructor.call(this,t);i&&(this.setHandleElId(Ext.id(t)),this.setOuterHandleElId(Ext.id(i)));this.scroll=!1};Ext.extend(Ext.grid.HeaderDragZone,Ext.dd.DragZone,{maxDragWidth:120,getDragData:function(n){var i=Ext.lib.Event.getTarget(n),t=this.view.findHeaderCell(i);return t?{ddel:t.firstChild,header:t}:!1},onInitDrag:function(){this.view.headersDisabled=!0;var n=this.dragData.ddel.cloneNode(!0);return n.id=Ext.id(),n.style.width=Math.min(this.dragData.header.offsetWidth,this.maxDragWidth)+"px",this.proxy.update(n),!0},afterValidDrop:function(){var n=this.view;setTimeout(function(){n.headersDisabled=!1},50)},afterInvalidDrop:function(){var n=this.view;setTimeout(function(){n.headersDisabled=!1},50)}});Ext.grid.HeaderDropZone=function(n){this.grid=n;this.view=n.getView();this.proxyTop=Ext.DomHelper.append(document.body,{cls:"col-move-top",html:"&#160;"},!0);this.proxyBottom=Ext.DomHelper.append(document.body,{cls:"col-move-bottom",html:"&#160;"},!0);this.proxyTop.hide=this.proxyBottom.hide=function(){this.setLeftTop(-100,-100);this.setStyle("visibility","hidden")};this.ddGroup="gridHeader"+this.grid.getGridEl().id;Ext.grid.HeaderDropZone.superclass.constructor.call(this,n.getGridEl().dom)};Ext.extend(Ext.grid.HeaderDropZone,Ext.dd.DropZone,{proxyOffsets:[-4,-9],fly:Ext.Element.fly,getTargetFromEvent:function(n){var i=Ext.lib.Event.getTarget(n),t=this.view.findCellIndex(i);if(t!==!1)return this.view.getHeaderCell(t)},nextVisible:function(n){var t=this.view,i=this.grid.colModel;for(n=n.nextSibling;n;){if(!i.isHidden(t.getCellIndex(n)))return n;n=n.nextSibling}return null},prevVisible:function(n){var t=this.view,i=this.grid.colModel;for(n=n.prevSibling;n;){if(!i.isHidden(t.getCellIndex(n)))return n;n=n.prevSibling}return null},positionIndicator:function(n,t,i){var c=Ext.lib.Event.getPageX(i),u=Ext.lib.Dom.getRegion(t.firstChild),f,e,s=u.top+this.proxyOffsets[1],o,r,h;return(u.right-c<=(u.right-u.left)/2?(f=u.right+this.view.borderWidth,e="after"):(f=u.left,e="before"),o=this.view.getCellIndex(n),r=this.view.getCellIndex(t),this.grid.colModel.isFixed(r))?!1:(h=this.grid.colModel.isLocked(r),e=="after"&&r++,o<r&&r--,o==r&&h==this.grid.colModel.isLocked(o))?!1:(f+=this.proxyOffsets[0],this.proxyTop.setLeftTop(f,s),this.proxyTop.show(),this.bottomOffset||(this.bottomOffset=this.view.mainHd.getHeight()),this.proxyBottom.setLeftTop(f,s+this.proxyTop.dom.offsetHeight+this.bottomOffset),this.proxyBottom.show(),e)},onNodeEnter:function(n,t,i,r){r.header!=n&&this.positionIndicator(r.header,n,i)},onNodeOver:function(n,t,i,r){var u=!1;return r.header!=n&&(u=this.positionIndicator(r.header,n,i)),u||(this.proxyTop.hide(),this.proxyBottom.hide()),u?this.dropAllowed:this.dropNotAllowed},onNodeOut:function(){this.proxyTop.hide();this.proxyBottom.hide()},onNodeDrop:function(n,t,i,r){var s=r.header;if(s!=n){var e=this.grid.colModel,c=Ext.lib.Event.getPageX(i),o=Ext.lib.Dom.getRegion(n.firstChild),l=o.right-c<=(o.right-o.left)/2?"after":"before",f=this.view.getCellIndex(s),u=this.view.getCellIndex(n),h=e.isLocked(u);return(l=="after"&&u++,f<u&&u--,f==u&&h==e.isLocked(f))?!1:(e.setLocked(f,h,!0),e.moveColumn(f,u),this.grid.fireEvent("columnmove",f,u),!0)}return!1}});Ext.grid.GridView.ColumnDragZone=function(n,t){Ext.grid.GridView.ColumnDragZone.superclass.constructor.call(this,n,t,null);this.proxy.el.addClass("x-grid3-col-dd")};Ext.extend(Ext.grid.GridView.ColumnDragZone,Ext.grid.HeaderDragZone,{handleMouseDown:function(){},callHandleMouseDown:function(n){Ext.grid.GridView.ColumnDragZone.superclass.handleMouseDown.call(this,n)}});Ext.grid.SplitDragZone=function(n,t,i){this.grid=n;this.view=n.getView();this.proxy=this.view.resizeProxy;Ext.grid.SplitDragZone.superclass.constructor.call(this,t,"gridSplitters"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:!1});this.setHandleElId(Ext.id(t));this.setOuterHandleElId(Ext.id(i));this.scroll=!1};Ext.extend(Ext.grid.SplitDragZone,Ext.dd.DDProxy,{fly:Ext.Element.fly,b4StartDrag:function(n,t){this.view.headersDisabled=!0;this.proxy.setHeight(this.view.mainWrap.getHeight());var r=this.cm.getColumnWidth(this.cellIndex),i=Math.max(r-this.grid.minColumnWidth,0);this.resetConstraints();this.setXConstraint(i,1e3);this.setYConstraint(0,0);this.minX=n-i;this.maxX=n+1e3;this.startPos=n;Ext.dd.DDProxy.prototype.b4StartDrag.call(this,n,t)},handleMouseDown:function(n){ev=Ext.EventObject.setEvent(n);var t=this.fly(ev.getTarget());t.hasClass("x-grid-split")&&(this.cellIndex=this.view.getCellIndex(t.dom),this.split=t.dom,this.cm=this.grid.colModel,this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)&&Ext.grid.SplitDragZone.superclass.handleMouseDown.apply(this,arguments))},endDrag:function(n){this.view.headersDisabled=!1;var t=Math.max(this.minX,Ext.lib.Event.getPageX(n)),i=t-this.startPos;this.view.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+i)},autoOffset:function(){this.setDelta(0,0)}});Ext.grid.GridDragZone=function(n,t){this.view=n.getView();Ext.grid.GridDragZone.superclass.constructor.call(this,this.view.mainBody.dom,t);this.view.lockedBody&&(this.setHandleElId(Ext.id(this.view.mainBody.dom)),this.setOuterHandleElId(Ext.id(this.view.lockedBody.dom)));this.scroll=!1;this.grid=n;this.ddel=document.createElement("div");this.ddel.className="x-grid-dd-wrap"};Ext.extend(Ext.grid.GridDragZone,Ext.dd.DragZone,{ddGroup:"GridDD",getDragData:function(n){var r=Ext.lib.Event.getTarget(n),t=this.view.findRowIndex(r),i;return t!==!1?(i=this.grid.selModel,(!i.isSelected(t)||n.hasModifier())&&i.handleMouseDown(this.grid,t,n),{grid:this.grid,ddel:this.ddel,rowIndex:t,selections:i.getSelections()}):!1},onInitDrag:function(){var n=this.dragData;this.ddel.innerHTML=this.grid.getDragDropText();this.proxy.update(this.ddel)},afterRepair:function(){this.dragging=!1},getRepairXY:function(){return!1},onEndDrag:function(){},onValidDrop:function(){this.hideProxy()},beforeInvalidDrop:function(){}});Ext.grid.ColumnModel=function(n){this.setConfig(n,!0);this.defaultWidth=100;this.defaultSortable=!1;this.addEvents("widthchange","headerchange","hiddenchange","columnmoved","columnlockchange","configchange");Ext.grid.ColumnModel.superclass.constructor.call(this)};Ext.extend(Ext.grid.ColumnModel,Ext.util.Observable,{getColumnId:function(n){return this.config[n].id},setConfig:function(n,t){var r,u,i;if(!t)for(delete this.totalWidth,r=0,u=this.config.length;r<u;r++)i=this.config[r],i.editor&&i.editor.destroy();for(this.config=n,this.lookup={},r=0,u=n.length;r<u;r++)i=n[r],typeof i.renderer=="string"&&(i.renderer=Ext.util.Format[i.renderer]),typeof i.id=="undefined"&&(i.id=r),i.editor&&i.editor.isFormField&&(i.editor=new Ext.grid.GridEditor(i.editor)),this.lookup[i.id]=i;t||this.fireEvent("configchange",this)},getColumnById:function(n){return this.lookup[n]},getIndexById:function(n){for(var t=0,i=this.config.length;t<i;t++)if(this.config[t].id==n)return t;return-1},moveColumn:function(n,t){var i=this.config[n];this.config.splice(n,1);this.config.splice(t,0,i);this.dataMap=null;this.fireEvent("columnmoved",this,n,t)},isLocked:function(n){return this.config[n].locked===!0},setLocked:function(n,t,i){this.isLocked(n)!=t&&(this.config[n].locked=t,i||this.fireEvent("columnlockchange",this,n,t))},getTotalLockedWidth:function(){for(var n=0;n<this.config.length;n++)this.isLocked(n)&&!this.isHidden(n)&&(this.totalWidth+=this.getColumnWidth(n));return 0},getLockedCount:function(){for(var n=0,t=this.config.length;n<t;n++)if(!this.isLocked(n))return n},getColumnCount:function(n){var i,t,r;if(n===!0){for(i=0,t=0,r=this.config.length;t<r;t++)this.isHidden(t)||i++;return i}return this.config.length},getColumnsBy:function(n,t){for(var u,r=[],i=0,f=this.config.length;i<f;i++)u=this.config[i],n.call(t||this,u,i)===!0&&(r[r.length]=u);return r},isSortable:function(n){return typeof this.config[n].sortable=="undefined"?this.defaultSortable:this.config[n].sortable},getRenderer:function(n){return this.config[n].renderer?this.config[n].renderer:Ext.grid.ColumnModel.defaultRenderer},setRenderer:function(n,t){this.config[n].renderer=t},getColumnWidth:function(n){return this.config[n].width||this.defaultWidth},setColumnWidth:function(n,t,i){this.config[n].width=t;this.totalWidth=null;i||this.fireEvent("widthchange",this,n,t)},getTotalWidth:function(n){if(!this.totalWidth){this.totalWidth=0;for(var t=0,i=this.config.length;t<i;t++)(n||!this.isHidden(t))&&(this.totalWidth+=this.getColumnWidth(t))}return this.totalWidth},getColumnHeader:function(n){return this.config[n].header},setColumnHeader:function(n,t){this.config[n].header=t;this.fireEvent("headerchange",this,n,t)},getColumnTooltip:function(n){return this.config[n].tooltip},setColumnTooltip:function(n,t){this.config[n].tooltip=t},getDataIndex:function(n){return this.config[n].dataIndex},setDataIndex:function(n,t){this.config[n].dataIndex=t},findColumnIndex:function(n){for(var i=this.config,t=0,r=i.length;t<r;t++)if(i[t].dataIndex==n)return t;return-1},isCellEditable:function(n){return this.config[n].editable||typeof this.config[n].editable=="undefined"&&this.config[n].editor?!0:!1},getCellEditor:function(n){return this.config[n].editor},setEditable:function(n,t){this.config[n].editable=t},isHidden:function(n){return this.config[n].hidden},isFixed:function(n){return this.config[n].fixed},isResizable:function(n){return n>=0&&this.config[n].resizable!==!1&&this.config[n].fixed!==!0},setHidden:function(n,t){var i=this.config[n];i.hidden!==t&&(i.hidden=t,this.totalWidth=null,this.fireEvent("hiddenchange",this,n,t))},setEditor:function(n,t){this.config[n].editor=t}});Ext.grid.ColumnModel.defaultRenderer=function(n){return typeof n=="string"&&n.length<1?"&#160;":n};Ext.grid.DefaultColumnModel=Ext.grid.ColumnModel;Ext.grid.AbstractSelectionModel=function(){this.locked=!1;Ext.grid.AbstractSelectionModel.superclass.constructor.call(this)};Ext.extend(Ext.grid.AbstractSelectionModel,Ext.util.Observable,{init:function(n){this.grid=n;this.initEvents()},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},isLocked:function(){return this.locked}});Ext.grid.RowSelectionModel=function(n){Ext.apply(this,n);this.selections=new Ext.util.MixedCollection(!1,function(n){return n.id});this.last=!1;this.lastActive=!1;this.addEvents("selectionchange","beforerowselect","rowselect","rowdeselect");Ext.grid.RowSelectionModel.superclass.constructor.call(this)};Ext.extend(Ext.grid.RowSelectionModel,Ext.grid.AbstractSelectionModel,{singleSelect:!1,initEvents:function(){if(this.grid.enableDragDrop||this.grid.enableDrag)this.grid.on("rowclick",function(n,t,i){i.button!==0||i.shiftKey||i.ctrlKey||(this.selectRow(t,!1),n.view.focusRow(t))},this);else this.grid.on("rowmousedown",this.handleMouseDown,this);this.rowNav=new Ext.KeyNav(this.grid.getGridEl(),{up:function(n){if(n.shiftKey)if(this.last!==!1&&this.lastActive!==!1){var t=this.last;this.selectRange(this.last,this.lastActive-1);this.grid.getView().focusRow(this.lastActive);t!==!1&&(this.last=t)}else this.selectFirstRow();else this.selectPrevious(n.shiftKey)},down:function(n){if(n.shiftKey)if(this.last!==!1&&this.lastActive!==!1){var t=this.last;this.selectRange(this.last,this.lastActive+1);this.grid.getView().focusRow(this.lastActive);t!==!1&&(this.last=t)}else this.selectFirstRow();else this.selectNext(n.shiftKey)},scope:this});var n=this.grid.view;n.on("refresh",this.onRefresh,this);n.on("rowupdated",this.onRowUpdated,this);n.on("rowremoved",this.onRemove,this)},onRefresh:function(){var f=this.grid.store,i,t=this.getSelections(),n,r,u;for(this.clearSelections(!0),n=0,r=t.length;n<r;n++)u=t[n],(i=f.indexOfId(u.id))!=-1&&this.selectRow(i,!0);t.length!=this.selections.getCount()&&this.fireEvent("selectionchange",this)},onRemove:function(n,t,i){this.selections.remove(i)!==!1&&this.fireEvent("selectionchange",this)},onRowUpdated:function(n,t,i){if(this.isSelected(i))n.onRowSelect(t)},selectRecords:function(n,t){var r,i,u;for(t||this.clearSelections(),r=this.grid.store,i=0,u=n.length;i<u;i++)this.selectRow(r.indexOf(n[i]),!0)},getCount:function(){return this.selections.length},selectFirstRow:function(){this.selectRow(0)},selectLastRow:function(n){this.selectRow(this.grid.store.getCount()-1,n)},selectNext:function(n){return this.hasNext()?(this.selectRow(this.last+1,n),this.grid.getView().focusRow(this.last),!0):!1},selectPrevious:function(n){return this.hasPrevious()?(this.selectRow(this.last-1,n),this.grid.getView().focusRow(this.last),!0):!1},hasNext:function(){return this.last!==!1&&this.last+1<this.grid.store.getCount()},hasPrevious:function(){return!!this.last},getSelections:function(){return[].concat(this.selections.items)},getSelected:function(){return this.selections.itemAt(0)},each:function(n,t){for(var r=this.getSelections(),i=0,u=r.length;i<u;i++)if(n.call(t||this,r[i],i)===!1)return!1;return!0},clearSelections:function(n){if(!this.locked){if(n!==!0){var i=this.grid.store,t=this.selections;t.each(function(n){this.deselectRow(i.indexOfId(n.id))},this);t.clear()}else this.selections.clear();this.last=!1}},selectAll:function(){if(!this.locked){this.selections.clear();for(var n=0,t=this.grid.store.getCount();n<t;n++)this.selectRow(n,!0)}},hasSelection:function(){return this.selections.length>0},isSelected:function(n){var t=typeof n=="number"?this.grid.store.getAt(n):n;return t&&this.selections.key(t.id)?!0:!1},isIdSelected:function(n){return this.selections.key(n)?!0:!1},handleMouseDown:function(n,t,i){var r,u,f;i.button!==0||this.isLocked()||(r=this.grid.getView(),i.shiftKey&&this.last!==!1?(u=this.last,this.selectRange(u,t,i.ctrlKey),this.last=u,r.focusRow(t)):(f=this.isSelected(t),i.ctrlKey&&f?this.deselectRow(t):(!f||this.getCount()>1)&&(this.selectRow(t,i.ctrlKey||i.shiftKey),r.focusRow(t))))},selectRows:function(n,t){t||this.clearSelections();for(var i=0,r=n.length;i<r;i++)this.selectRow(n[i],!0)},selectRange:function(n,t,i){var r;if(!this.locked)if(i||this.clearSelections(),n<=t)for(r=n;r<=t;r++)this.selectRow(r,!0);else for(r=n;r>=t;r--)this.selectRow(r,!0)},deselectRange:function(n,t,i){if(!this.locked)for(var r=n;r<=t;r++)this.deselectRow(r,i)},selectRow:function(n,t,i){if(!this.locked&&!(n<0)&&!(n>=this.grid.store.getCount())){var r=this.grid.store.getAt(n);if(r&&this.fireEvent("beforerowselect",this,n,t,r)!==!1){if((!t||this.singleSelect)&&this.clearSelections(),this.selections.add(r),this.last=this.lastActive=n,!i)this.grid.getView().onRowSelect(n);this.fireEvent("rowselect",this,n,r);this.fireEvent("selectionchange",this)}}},deselectRow:function(n,t){if(!this.locked){this.last==n&&(this.last=!1);this.lastActive==n&&(this.lastActive=!1);var i=this.grid.store.getAt(n);if(i){if(this.selections.remove(i),!t)this.grid.getView().onRowDeselect(n);this.fireEvent("rowdeselect",this,n,i);this.fireEvent("selectionchange",this)}}},restoreLast:function(){this._last&&(this.last=this._last)},acceptsNav:function(n,t,i){return!i.isHidden(t)&&i.isCellEditable(t,n)},onEditorKey:function(n,t){var f=t.getKey(),u,r=this.grid,i=r.activeEditor,e=t.shiftKey;f==t.TAB?(t.stopEvent(),i.completeEdit(),u=e?r.walkCells(i.row,i.col-1,-1,this.acceptsNav,this):r.walkCells(i.row,i.col+1,1,this.acceptsNav,this)):f==t.ENTER?(t.stopEvent(),i.completeEdit(),u=e?r.walkCells(i.row-1,i.col,-1,this.acceptsNav,this):r.walkCells(i.row+1,i.col,1,this.acceptsNav,this)):f==t.ESC&&i.cancelEdit();u&&r.startEditing(u[0],u[1])}});Ext.grid.CellSelectionModel=function(n){Ext.apply(this,n);this.selection=null;this.addEvents("beforecellselect","cellselect","selectionchange");Ext.grid.CellSelectionModel.superclass.constructor.call(this)};Ext.extend(Ext.grid.CellSelectionModel,Ext.grid.AbstractSelectionModel,{initEvents:function(){this.grid.on("cellmousedown",this.handleMouseDown,this);this.grid.getGridEl().on(Ext.isIE?"keydown":"keypress",this.handleKeyDown,this);var n=this.grid.view;n.on("refresh",this.onViewChange,this);n.on("rowupdated",this.onRowUpdated,this);n.on("beforerowremoved",this.clearSelections,this);n.on("beforerowsinserted",this.clearSelections,this);if(this.grid.isEditor)this.grid.on("beforeedit",this.beforeEdit,this)},beforeEdit:function(n){this.select(n.row,n.column,!1,!0,n.record)},onRowUpdated:function(n,t,i){if(this.selection&&this.selection.record==i)n.onCellSelect(t,this.selection.cell[1])},onViewChange:function(){this.clearSelections(!0)},getSelectedCell:function(){return this.selection?this.selection.cell:null},clearSelections:function(n){var t=this.selection;if(t){if(n!==!0)this.grid.view.onCellDeselect(t.cell[0],t.cell[1]);this.selection=null;this.fireEvent("selectionchange",this,null)}},hasSelection:function(){return this.selection?!0:!1},handleMouseDown:function(n,t,i,r){r.button!==0||this.isLocked()||this.select(t,i)},select:function(n,t,i,r,u){if(this.fireEvent("beforecellselect",this,n,t)!==!1){if(this.clearSelections(),u=u||this.grid.store.getAt(n),this.selection={record:u,cell:[n,t]},!i){var f=this.grid.getView();f.onCellSelect(n,t);r!==!0&&f.focusCell(n,t)}this.fireEvent("cellselect",this,n,t);this.fireEvent("selectionchange",this,this.selection)}},isSelectable:function(n,t,i){return!i.isHidden(t)},handleKeyDown:function(n){var u,e,o;if(n.isNavKeyPress()){if(u=this.grid,e=this.selection,!e){n.stopEvent();o=u.walkCells(0,0,1,this.isSelectable,this);o&&this.select(o[0],o[1]);return}var s=this,f=function(n,t,i){return u.walkCells(n,t,i,s.isSelectable,s)},h=n.getKey(),i=e.cell[0],r=e.cell[1],t;switch(h){case n.TAB:t=n.shiftKey?f(i,r-1,-1):f(i,r+1,1);break;case n.DOWN:t=f(i+1,r,1);break;case n.UP:t=f(i-1,r,-1);break;case n.RIGHT:t=f(i,r+1,1);break;case n.LEFT:t=f(i,r-1,-1);break;case n.ENTER:if(u.isEditor&&!u.editing){u.startEditing(i,r);n.stopEvent();return}}t&&(this.select(t[0],t[1]),n.stopEvent())}},acceptsNav:function(n,t,i){return!i.isHidden(t)&&i.isCellEditable(t,n)},onEditorKey:function(n,t){var f=t.getKey(),r,u=this.grid,i=u.activeEditor;f==t.TAB?(r=t.shiftKey?u.walkCells(i.row,i.col-1,-1,this.acceptsNav,this):u.walkCells(i.row,i.col+1,1,this.acceptsNav,this),t.stopEvent()):f==t.ENTER?(i.completeEdit(),t.stopEvent()):f==t.ESC&&(t.stopEvent(),i.cancelEdit());r&&u.startEditing(r[0],r[1])}});Ext.grid.EditorGridPanel=Ext.extend(Ext.grid.GridPanel,{clicksToEdit:2,isEditor:!0,detectEdit:!1,autoEncode:!1,trackMouseOver:!1,initComponent:function(){Ext.grid.EditorGridPanel.superclass.initComponent.call(this);this.selModel||(this.selModel=new Ext.grid.CellSelectionModel);this.activeEditor=null;this.addEvents("beforeedit","afteredit","validateedit")},initEvents:function(){Ext.grid.EditorGridPanel.superclass.initEvents.call(this);this.on("bodyscroll",this.stopEditing,this);if(this.clicksToEdit==1)this.on("cellclick",this.onCellDblClick,this);else{if(this.clicksToEdit=="auto"&&this.view.mainBody)this.view.mainBody.on("mousedown",this.onAutoEditClick,this);this.on("celldblclick",this.onCellDblClick,this)}this.getGridEl().addClass("xedit-grid")},onCellDblClick:function(n,t,i){this.startEditing(t,i)},onAutoEditClick:function(n,t){var i=this.view.findRowIndex(t),r=this.view.findCellIndex(t),u;i!==!1&&r!==!1&&(this.selModel.getSelectedCell?(u=this.selModel.getSelectedCell(),u&&u.cell[0]===i&&u.cell[1]===r&&this.startEditing(i,r)):this.selModel.isSelected(i)&&this.startEditing(i,r))},onEditComplete:function(n,t,i){var u,f,r;this.editing=!1;this.activeEditor=null;n.un("specialkey",this.selModel.onEditorKey,this.selModel);u=n.record;f=this.colModel.getDataIndex(n.col);t=this.postEditValue(t,i,u,f);String(t)!==String(i)&&(r={grid:this,record:u,field:f,originalValue:i,value:t,row:n.row,column:n.col,cancel:!1},this.fireEvent("validateedit",r)===!1||r.cancel||(u.set(f,r.value),delete r.cancel,this.fireEvent("afteredit",r)));this.view.focusCell(n.row,n.col)},startEditing:function(n,t){var i;if(this.stopEditing(),this.colModel.isCellEditable(t,n)){this.view.ensureVisible(n,t,!0);var r=this.store.getAt(n),u=this.colModel.getDataIndex(t),f={grid:this,record:r,field:u,value:r.data[u],row:n,column:t,cancel:!1};this.fireEvent("beforeedit",f)===!1||f.cancel||(this.editing=!0,i=this.colModel.getCellEditor(t,n),i.rendered||i.render(this.view.getEditorParent(i)),function(){i.row=n;i.col=t;i.record=r;i.on("complete",this.onEditComplete,this,{single:!0});i.on("specialkey",this.selModel.onEditorKey,this.selModel);this.activeEditor=i;var f=this.preEditValue(r,u);i.startEdit(this.view.getCell(n,t),f)}.defer(50,this))}},preEditValue:function(n,t){return this.autoEncode?Ext.util.Format.htmlDecode(n.data[t]):n.data[t]},postEditValue:function(n){return this.autoEncode?Ext.util.Format.htmlEncode(n):n},stopEditing:function(){this.activeEditor&&this.activeEditor.completeEdit();this.activeEditor=null}});Ext.reg("editorgrid",Ext.grid.EditorGridPanel);Ext.grid.GridEditor=function(n,t){Ext.grid.GridEditor.superclass.constructor.call(this,n,t);n.monitorTab=!1};Ext.extend(Ext.grid.GridEditor,Ext.Editor,{alignment:"tl-tl",autoSize:"width",hideEl:!1,cls:"x-small-editor x-grid-editor",shim:!1,shadow:!1});Ext.grid.PropertyRecord=Ext.data.Record.create([{name:"name",type:"string"},"value"]);Ext.grid.PropertyStore=function(n,t){this.grid=n;this.store=new Ext.data.Store({recordType:Ext.grid.PropertyRecord});this.store.on("update",this.onUpdate,this);t&&this.setSource(t);Ext.grid.PropertyStore.superclass.constructor.call(this)};Ext.extend(Ext.grid.PropertyStore,Ext.util.Observable,{setSource:function(n){var i,t;this.source=n;this.store.removeAll();i=[];for(t in n)this.isEditableValue(n[t])&&i.push(new Ext.grid.PropertyRecord({name:t,value:n[t]},t));this.store.loadRecords({records:i},{},!0)},onUpdate:function(n,t,i){if(i==Ext.data.Record.EDIT){var r=t.data.value,u=t.modified.value;this.grid.fireEvent("beforepropertychange",this.source,t.id,r,u)!==!1?(this.source[t.id]=r,t.commit(),this.grid.fireEvent("propertychange",this.source,t.id,r,u)):t.reject()}},getProperty:function(n){return this.store.getAt(n)},isEditableValue:function(n){return n&&n instanceof Date?!0:typeof n=="object"||typeof n=="function"?!1:!0},setValue:function(n,t){this.source[n]=t;this.store.getById(n).set("value",t)},getSource:function(){return this.source}});Ext.grid.PropertyColumnModel=function(n,t){var i,r,u;this.grid=n;i=Ext.grid;i.PropertyColumnModel.superclass.constructor.call(this,[{header:this.nameText,width:50,sortable:!0,dataIndex:"name",id:"name"},{header:this.valueText,width:50,resizable:!1,dataIndex:"value",id:"value"}]);this.store=t;this.bselect=Ext.DomHelper.append(document.body,{tag:"select",cls:"x-grid-editor x-hide-display",children:[{tag:"option",value:"true",html:"true"},{tag:"option",value:"false",html:"false"}]});r=Ext.form;u=new r.Field({el:this.bselect,bselect:this.bselect,autoShow:!0,getValue:function(){return this.bselect.value=="true"}});this.editors={date:new i.GridEditor(new r.DateField({selectOnFocus:!0})),string:new i.GridEditor(new r.TextField({selectOnFocus:!0})),number:new i.GridEditor(new r.NumberField({selectOnFocus:!0,style:"text-align:left;"})),boolean:new i.GridEditor(u)};this.renderCellDelegate=this.renderCell.createDelegate(this);this.renderPropDelegate=this.renderProp.createDelegate(this)};Ext.extend(Ext.grid.PropertyColumnModel,Ext.grid.ColumnModel,{nameText:"Name",valueText:"Value",dateFormat:"m/j/Y",renderDate:function(n){return n.dateFormat(this.dateFormat)},renderBool:function(n){return n?"true":"false"},isCellEditable:function(n){return n==1},getRenderer:function(n){return n==1?this.renderCellDelegate:this.renderPropDelegate},renderProp:function(n){return this.getPropertyName(n)},renderCell:function(n){var t=n;return n instanceof Date?t=this.renderDate(n):typeof n=="boolean"&&(t=this.renderBool(n)),Ext.util.Format.htmlEncode(t)},getPropertyName:function(n){var t=this.grid.propertyNames;return t&&t[n]?t[n]:n},getCellEditor:function(n,t){var r=this.store.getProperty(t),u=r.data.name,i=r.data.value;return this.grid.customEditors[u]?this.grid.customEditors[u]:i instanceof Date?this.editors.date:typeof i=="number"?this.editors.number:typeof i=="boolean"?this.editors.boolean:this.editors.string}});Ext.grid.PropertyGrid=Ext.extend(Ext.grid.EditorGridPanel,{enableColumnMove:!1,stripeRows:!1,trackMouseOver:!1,clicksToEdit:1,enableHdMenu:!1,viewConfig:{forceFit:!0},initComponent:function(){var n,t;this.customEditors=this.customEditors||{};this.lastEditRow=null;n=new Ext.grid.PropertyStore(this);this.propStore=n;t=new Ext.grid.PropertyColumnModel(this,n);n.store.sort("name","ASC");this.addEvents("beforepropertychange","propertychange");this.cm=t;this.ds=n.store;Ext.grid.PropertyGrid.superclass.initComponent.call(this);this.selModel.on("beforecellselect",function(n,t,i){if(i===0)return this.startEditing.defer(200,this,[t,1]),!1},this)},onRender:function(){Ext.grid.PropertyGrid.superclass.onRender.apply(this,arguments);this.getGridEl().addClass("x-props-grid")},afterRender:function(){Ext.grid.PropertyGrid.superclass.afterRender.apply(this,arguments);this.source&&this.setSource(this.source)},setSource:function(n){this.propStore.setSource(n)},getSource:function(){return this.propStore.getSource()}});Ext.grid.RowNumberer=function(n){Ext.apply(this,n);this.rowspan&&(this.renderer=this.renderer.createDelegate(this))};Ext.grid.RowNumberer.prototype={header:"",width:23,sortable:!1,fixed:!0,dataIndex:"",id:"numberer",rowspan:undefined,renderer:function(n,t,i,r){return this.rowspan&&(t.cellAttr='rowspan="'+this.rowspan+'"'),r+1}};Ext.grid.CheckboxSelectionModel=Ext.extend(Ext.grid.RowSelectionModel,{header:'<div class="x-grid3-hd-checker">&#160;<\/div>',width:20,sortable:!1,fixed:!0,dataIndex:"",id:"checker",initEvents:function(){Ext.grid.CheckboxSelectionModel.superclass.initEvents.call(this);this.grid.on("render",function(){var n=this.grid.getView();n.mainBody.on("mousedown",this.onMouseDown,this);Ext.fly(n.innerHd).on("mousedown",this.onHdMouseDown,this)},this)},onMouseDown:function(n,t){var r,i;n.button===0&&t.className=="x-grid3-row-checker"&&(n.stopEvent(),r=n.getTarget(".x-grid3-row"),r&&(i=r.rowIndex,this.isSelected(i)?this.deselectRow(i):this.selectRow(i,!0)))},onHdMouseDown:function(n,t){if(t.className=="x-grid3-hd-checker"){n.stopEvent();var i=Ext.fly(t.parentNode),r=i.hasClass("x-grid3-hd-checker-on");r?(i.removeClass("x-grid3-hd-checker-on"),this.clearSelections()):(i.addClass("x-grid3-hd-checker-on"),this.selectAll())}},renderer:function(){return'<div class="x-grid3-row-checker">&#160;<\/div>'}});Ext.LoadMask=function(n,t){if(this.el=Ext.get(n),Ext.apply(this,t),this.store){this.store.on("beforeload",this.onBeforeLoad,this);this.store.on("load",this.onLoad,this);this.store.on("loadexception",this.onLoad,this);this.removeMask=Ext.value(this.removeMask,!1)}else{var i=this.el.getUpdater();i.showLoadIndicator=!1;i.on("beforeupdate",this.onBeforeLoad,this);i.on("update",this.onLoad,this);i.on("failure",this.onLoad,this);this.removeMask=Ext.value(this.removeMask,!0)}};Ext.LoadMask.prototype={msg:"Loading...",msgCls:"x-mask-loading",disabled:!1,disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},onLoad:function(){this.el.unmask(this.removeMask)},onBeforeLoad:function(){this.disabled||this.el.mask(this.msg,this.msgCls)},show:function(){this.onBeforeLoad()},hide:function(){this.onLoad()},destroy:function(){if(this.store)this.store.un("beforeload",this.onBeforeLoad,this),this.store.un("load",this.onLoad,this),this.store.un("loadexception",this.onLoad,this);else{var n=this.el.getUpdater();n.un("beforeupdate",this.onBeforeLoad,this);n.un("update",this.onLoad,this);n.un("failure",this.onLoad,this)}}}