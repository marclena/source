Ext.DomHelper=function(){var i=null,c=/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,l=/^table|tbody|tr|td$/i,t=function(n){var i,r,u,e,f,o,s;if(typeof n=="string")return n;i="";n.tag||(n.tag="div");i+="<"+n.tag;for(r in n)if(r!="tag"&&r!="children"&&r!="cn"&&r!="html"&&typeof n[r]!="function")if(r=="style"){if(u=n.style,typeof u=="function"&&(u=u.call()),typeof u=="string")i+=' style="'+u+'"';else if(typeof u=="object"){i+=' style="';for(e in u)typeof u[e]!="function"&&(i+=e+":"+u[e]+";");i+='"'}}else i+=r=="cls"?' class="'+n.cls+'"':r=="htmlFor"?' for="'+n.htmlFor+'"':" "+r+'="'+n[r]+'"';if(c.test(n.tag))i+="/>";else{if(i+=">",f=n.children||n.cn,f)if(f instanceof Array)for(o=0,s=f.length;o<s;o++)i+=t(f[o],i);else i+=t(f,i);n.html&&(i+=n.html);i+="<\/"+n.tag+">"}return i},r=function(n,t){var u=document.createElement(n.tag||"div"),s=u.setAttribute?!0:!1,i,f,e,o;for(i in n)i!="tag"&&i!="children"&&i!="cn"&&i!="html"&&i!="style"&&typeof n[i]!="function"&&(i=="cls"?u.className=n.cls:s?u.setAttribute(i,n[i]):u[i]=n[i]);if(Ext.DomHelper.applyStyles(u,n.style),f=n.children||n.cn,f)if(f instanceof Array)for(e=0,o=f.length;e<o;e++)r(f[e],u);else r(f,u);return n.html&&(u.innerHTML=n.html),t&&t.appendChild(u),u},n=function(n,t,r,u){i.innerHTML=[t,r,u].join("");for(var e=-1,f=i;++e<n;)f=f.firstChild;return f},u="<table>",f="<\/table>",e=u+"<tbody>",o="<\/tbody>"+f,s=e+"<tr>",h="<\/tr>"+o,a=function(t,r,c,l){i||(i=document.createElement("div"));var a,v=null;if(t=="td"){if(r=="afterbegin"||r=="beforeend")return;r=="beforebegin"?(v=c,c=c.parentNode):(v=c.nextSibling,c=c.parentNode);a=n(4,s,l,h)}else if(t=="tr")r=="beforebegin"?(v=c,c=c.parentNode,a=n(3,e,l,o)):r=="afterend"?(v=c.nextSibling,c=c.parentNode,a=n(3,e,l,o)):(r=="afterbegin"&&(v=c.firstChild),a=n(4,s,l,h));else if(t=="tbody")r=="beforebegin"?(v=c,c=c.parentNode,a=n(2,u,l,f)):r=="afterend"?(v=c.nextSibling,c=c.parentNode,a=n(2,u,l,f)):(r=="afterbegin"&&(v=c.firstChild),a=n(3,e,l,o));else{if(r=="beforebegin"||r=="afterend")return;r=="afterbegin"&&(v=c.firstChild);a=n(2,u,l,f)}return c.insertBefore(a,v),a};return{useDom:!1,markup:function(n){return t(n)},applyStyles:function(n,t){var u,i,r;if(t)if(n=Ext.fly(n),typeof t=="string")for(u=/\s?([a-z\-]*)\:\s?([^;]*);?/gi;(i=u.exec(t))!=null;)n.setStyle(i[1],i[2]);else if(typeof t=="object")for(r in t)n.setStyle(r,t[r]);else typeof t=="function"&&Ext.DomHelper.applyStyles(n,t.call())},insertHtml:function(n,t,i){var f,r,u;if(n=n.toLowerCase(),t.insertAdjacentHTML){if(l.test(t.tagName)&&(f=a(t.tagName.toLowerCase(),n,t,i)))return f;switch(n){case"beforebegin":return t.insertAdjacentHTML("BeforeBegin",i),t.previousSibling;case"afterbegin":return t.insertAdjacentHTML("AfterBegin",i),t.firstChild;case"beforeend":return t.insertAdjacentHTML("BeforeEnd",i),t.lastChild;case"afterend":return t.insertAdjacentHTML("AfterEnd",i),t.nextSibling}throw'Illegal insertion point -> "'+n+'"';}r=t.ownerDocument.createRange();switch(n){case"beforebegin":return r.setStartBefore(t),u=r.createContextualFragment(i),t.parentNode.insertBefore(u,t),t.previousSibling;case"afterbegin":return t.firstChild?(r.setStartBefore(t.firstChild),u=r.createContextualFragment(i),t.insertBefore(u,t.firstChild),t.firstChild):(t.innerHTML=i,t.firstChild);case"beforeend":return t.lastChild?(r.setStartAfter(t.lastChild),u=r.createContextualFragment(i),t.appendChild(u),t.lastChild):(t.innerHTML=i,t.lastChild);case"afterend":return r.setStartAfter(t),u=r.createContextualFragment(i),t.parentNode.insertBefore(u,t.nextSibling),t.nextSibling}throw'Illegal insertion point -> "'+n+'"';},insertBefore:function(n,t,i){return this.doInsert(n,t,i,"beforeBegin")},insertAfter:function(n,t,i){return this.doInsert(n,t,i,"afterEnd","nextSibling")},insertFirst:function(n,t,i){return this.doInsert(n,t,i,"afterBegin","firstChild")},doInsert:function(n,i,u,f,e){var o,s;return n=Ext.getDom(n),this.useDom?(o=r(i,null),(e==="firstChild"?n:n.parentNode).insertBefore(o,e?n[e]:n)):(s=t(i),o=this.insertHtml(f,n,s)),u?Ext.get(o,!0):o},append:function(n,i,u){var f,e;return n=Ext.getDom(n),this.useDom?(f=r(i,null),n.appendChild(f)):(e=t(i),f=this.insertHtml("beforeEnd",n,e)),u?Ext.get(f,!0):f},overwrite:function(n,i,r){return n=Ext.getDom(n),n.innerHTML=t(i),r?Ext.get(n.firstChild,!0):n.firstChild},createTemplate:function(n){var i=t(n);return new Ext.Template(i)}}}();Ext.Template=function(n){var i=arguments,r,t,u;if(n instanceof Array)n=n.join("");else if(i.length>1){for(r=[],t=0,u=i.length;t<u;t++)typeof i[t]=="object"?Ext.apply(this,i[t]):r[r.length]=i[t];n=r.join("")}this.html=n;this.compiled&&this.compile()};Ext.Template.prototype={applyTemplate:function(n){if(this.compiled)return this.compiled(n);var i=this.disableFormats!==!0,t=Ext.util.Format,r=this,u=function(u,f,e,o){var h,s,c;if(e&&i){if(e.substr(0,5)=="this.")return r.call(e.substr(5),n[f],n);if(o){for(h=/^\s*['"](.*)["']\s*$/,o=o.split(","),s=0,c=o.length;s<c;s++)o[s]=o[s].replace(h,"$1");o=[n[f]].concat(o)}else o=[n[f]];return t[e].apply(t,o)}return n[f]!==undefined?n[f]:""};return this.html.replace(this.re,u)},set:function(n,t){return this.html=n,this.compiled=null,t&&this.compile(),this},disableFormats:!1,re:/\{([\w-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,compile:function(){var u=Ext.util.Format,r=this.disableFormats!==!0,t=Ext.isGecko?"+":",",i=function(n,i,u,f){return u&&r?(f=f?","+f:"",u.substr(0,5)!="this."?u="fm."+u+"(":(u='this.call("'+u.substr(5)+'", ',f=", values")):(f="",u="(values['"+i+"'] == undefined ? '' : "),"'"+t+u+"values['"+i+"']"+f+")"+t+"'"},n;return Ext.isGecko?n="this.compiled = function(values){ return '"+this.html.replace(/\\/g,"\\\\").replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,i)+"';};":(n=["this.compiled = function(values){ return ['"],n.push(this.html.replace(/\\/g,"\\\\").replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,i)),n.push("'].join('');};"),n=n.join("")),eval(n),this},call:function(n,t,i){return this[n](t,i)},insertFirst:function(n,t,i){return this.doInsert("afterBegin",n,t,i)},insertBefore:function(n,t,i){return this.doInsert("beforeBegin",n,t,i)},insertAfter:function(n,t,i){return this.doInsert("afterEnd",n,t,i)},append:function(n,t,i){return this.doInsert("beforeEnd",n,t,i)},doInsert:function(n,t,i,r){t=Ext.getDom(t);var u=Ext.DomHelper.insertHtml(n,t,this.applyTemplate(i));return r?Ext.get(u,!0):u},overwrite:function(n,t,i){return n=Ext.getDom(n),n.innerHTML=this.applyTemplate(t),i?Ext.get(n.firstChild,!0):n.firstChild}};Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate;Ext.DomHelper.Template=Ext.Template;Ext.Template.from=function(n,t){return n=Ext.getDom(n),new Ext.Template(n.value||n.innerHTML,t||"")};Ext.DomQuery=function(){function o(n){while((n=n.nextSibling)&&n.nodeType!=1);return n}function s(n){while((n=n.previousSibling)&&n.nodeType!=1);return n}function b(n){var e=++t,r,f,i,u;for(n[0].setAttribute("_nodup",e),r=[n[0]],i=1,u=n.length;i<u;i++)f=n[i],!f.getAttribute("_nodup")!=e&&(f.setAttribute("_nodup",e),r[r.length]=f);for(i=0,u=n.length;i<u;i++)n[i].removeAttribute("_nodup");return r}function k(n){var r,i;if(!n)return[];var s=n.length,o,u,f=n,e,c=-1;if(!s||typeof n.nodeType!="undefined"||s==1)return n;if(h&&typeof n[0].selectSingleNode!="undefined")return b(n);for(r=++t,n[0]._nodup=r,u=1;o=n[u];u++)if(o._nodup!=r)o._nodup=r;else{for(f=[],i=0;i<u;i++)f[++c]=n[i];for(i=u+1;e=n[i];i++)e._nodup!=r&&(e._nodup=r,f[++c]=e);return f}return f}function d(n,i){for(var f,e=++t,r=0,u=n.length;r<u;r++)n[r].setAttribute("_qdiff",e);for(f=[],r=0,u=i.length;r<u;r++)i[r].getAttribute("_qdiff")!=e&&(f[f.length]=i[r]);for(r=0,u=n.length;r<u;r++)n[r].removeAttribute("_qdiff");return f}function g(n,i){var e=n.length,f,u,r,o;if(!e)return i;if(h&&n[0].selectSingleNode)return d(n,i);for(f=++t,r=0;r<e;r++)n[r]._qdiff=f;for(u=[],r=0,o=i.length;r<o;r++)i[r]._qdiff!=f&&(u[u.length]=i[r]);return u}var i={},r={},u={},c=/\S/,n=/^\s+|\s+$/g,l=/\{(\d+)\}/g,e=/^(\s?[\/>+~]\s?|\s|$)/,a=/^(#)?([\w-\*]+)/,v=/(\d*)n\+?(\d*)/,y=/\D/,h=window.ActiveXObject?!0:!1,t;return eval("var batch = 30803;"),t=30803,{getStyle:function(n,t){return Ext.fly(n).getStyle(t)},compile:function(t,i){var o,y,c,p,v;i=i||"select";var u=["var f = function(root){\n var mode; ++batch; var n = root || document;\n"],r=t,w,b=Ext.DomQuery.matchers,k=b.length,s,h=r.match(e);for(h&&h[1]&&(u[u.length]='mode="'+h[1].replace(n,"")+'";',r=r.replace(h[1],""));t.substr(0,1)=="/";)t=t.substr(1);while(r&&w!=r){for(w=r,o=r.match(a),i=="select"?o?(u[u.length]=o[1]=="#"?'n = quickId(n, mode, root, "'+o[2]+'");':'n = getNodes(n, mode, "'+o[2]+'");',r=r.replace(o[0],"")):r.substr(0,1)!="@"&&(u[u.length]='n = getNodes(n, mode, "*");'):o&&(u[u.length]=o[1]=="#"?'n = byId(n, null, "'+o[2]+'");':'n = byTag(n, "'+o[2]+'");',r=r.replace(o[0],""));!(s=r.match(e));){for(y=!1,c=0;c<k;c++)if(p=b[c],v=r.match(p.re),v){u[u.length]=p.select.replace(l,function(n,t){return v[t]});r=r.replace(v[0],"");y=!0;break}if(!y)throw'Error parsing selector, parsing failed at "'+r+'"';}s[1]&&(u[u.length]='mode="'+s[1].replace(n,"")+'";',r=r.replace(s[1],""))}return u[u.length]="return nodup(n);\n}",eval(u.join("")),f},select:function(t,r){var e,f,o,h,u,s;for(r&&r!=document||(r=document),typeof r=="string"&&(r=document.getElementById(r)),e=t.split(","),f=[],o=0,h=e.length;o<h;o++){if(u=e[o].replace(n,""),!i[u]&&(i[u]=Ext.DomQuery.compile(u),!i[u]))throw u+" is not a valid selector";s=i[u](r);s&&s!=document&&(f=f.concat(s))}return e.length>1?k(f):f},selectNode:function(n,t){return Ext.DomQuery.select(n,t)[0]},selectValue:function(t,i,r){var f,e;return t=t.replace(n,""),u[t]||(u[t]=Ext.DomQuery.compile(t,"select")),f=u[t](i),f=f[0]?f[0]:f,e=f&&f.firstChild?f.firstChild.nodeValue:null,e===null||e===undefined||e===""?r:e},selectNumber:function(n,t,i){var r=Ext.DomQuery.selectValue(n,t,i||0);return parseFloat(r)},is:function(n,t){typeof n=="string"&&(n=document.getElementById(n));var i=n instanceof Array,r=Ext.DomQuery.filter(i?n:[n],t);return i?r.length==n.length:r.length>0},filter:function(t,i,u){i=i.replace(n,"");r[i]||(r[i]=Ext.DomQuery.compile(i,"simple"));var f=r[i](t);return u?g(f,t):f},matchers:[{re:/^\.([\w-]+)/,select:'n = byClassName(n, null, " {1} ");'},{re:/^\:([\w-]+)(?:\(((?:[^\s>\/]*|.*?))\))?/,select:'n = byPseudo(n, "{1}", "{2}");'},{re:/^(?:([\[\{])(?:@)?([\w-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]\}])/,select:'n = byAttribute(n, "{2}", "{4}", "{3}", "{1}");'},{re:/^#([\w-]+)/,select:'n = byId(n, null, "{1}");'},{re:/^@([\w-]+)/,select:'return {firstChild:{nodeValue:attrValue(n, "{1}")}};'}],operators:{"=":function(n,t){return n==t},"!=":function(n,t){return n!=t},"^=":function(n,t){return n&&n.substr(0,t.length)==t},"$=":function(n,t){return n&&n.substr(n.length-t.length)==t},"*=":function(n,t){return n&&n.indexOf(t)!==-1},"%=":function(n,t){return n%t==0},"|=":function(n,t){return n&&(n==t||n.substr(0,t.length+1)==t+"-")},"~=":function(n,t){return n&&(" "+n+" ").indexOf(" "+t+" ")!=-1}},pseudos:{"first-child":function(n){for(var i=[],f=-1,t,r=0,u;u=t=n[r];r++){while((t=t.previousSibling)&&t.nodeType!=1);t||(i[++f]=u)}return i},"last-child":function(n){for(var i=[],f=-1,t,r=0,u;u=t=n[r];r++){while((t=t.nextSibling)&&t.nodeType!=1);t||(i[++f]=u)}return i},"nth-child":function(n,t){for(var u,l,r,f=[],o=-1,s=v.exec(t=="even"&&"2n"||t=="odd"&&"2n+1"||!y.test(t)&&"n+"+t||t),h=(s[1]||1)-0,e=s[2]-0,c=0,i;i=n[c];c++){if(u=i.parentNode,batch!=u._batch){for(l=0,r=u.firstChild;r;r=r.nextSibling)r.nodeType==1&&(r.nodeIndex=++l);u._batch=batch}h==1?(e==0||i.nodeIndex==e)&&(f[++o]=i):(i.nodeIndex+e)%h==0&&(f[++o]=i)}return f},"only-child":function(n){for(var i=[],u=-1,r=0,t;t=n[r];r++)s(t)||o(t)||(i[++u]=t);return i},empty:function(n){for(var r=[],o=-1,u=0,t;t=n[u];u++){for(var s=t.childNodes,f=0,i,e=!0;i=s[f];)if(++f,i.nodeType==1||i.nodeType==3){e=!1;break}e&&(r[++o]=t)}return r},contains:function(n,t){for(var r=[],f=-1,u=0,i;i=n[u];u++)(i.textContent||i.innerText||"").indexOf(t)!=-1&&(r[++f]=i);return r},nodeValue:function(n,t){for(var r=[],f=-1,u=0,i;i=n[u];u++)i.firstChild&&i.firstChild.nodeValue==t&&(r[++f]=i);return r},checked:function(n){for(var i=[],u=-1,r=0,t;t=n[r];r++)t.checked==!0&&(i[++u]=t);return i},not:function(n,t){return Ext.DomQuery.filter(n,t,!0)},any:function(n,t){for(var r,o=t.split("|"),u=[],s=-1,f,e=0,i;i=n[e];e++)for(r=0;f=o[r];r++)if(Ext.DomQuery.is(i,f)){u[++s]=i;break}return u},odd:function(n){return this["nth-child"](n,"odd")},even:function(n){return this["nth-child"](n,"even")},nth:function(n,t){return n[t-1]||[]},first:function(n){return n[0]||[]},last:function(n){return n[n.length-1]||[]},has:function(n,t){for(var f=Ext.DomQuery.select,r=[],e=-1,u=0,i;i=n[u];u++)f(t,i).length>0&&(r[++e]=i);return r},next:function(n,t){for(var r,e=Ext.DomQuery.is,u=[],s=-1,f=0,i;i=n[f];f++)r=o(i),r&&e(r,t)&&(u[++s]=i);return u},prev:function(n,t){for(var r,e=Ext.DomQuery.is,u=[],o=-1,f=0,i;i=n[f];f++)r=s(i),r&&e(r,t)&&(u[++o]=i);return u}}}}();Ext.query=Ext.DomQuery.select;Ext.util.Observable=function(){if(this.listeners){this.on(this.listeners);delete this.listeners}};Ext.util.Observable.prototype={fireEvent:function(){if(this.eventsSuspended!==!0){var n=this.events[arguments[0].toLowerCase()];if(typeof n=="object")return n.fire.apply(n,Array.prototype.slice.call(arguments,1))}return!0},filterOptRe:/^(?:scope|delay|buffer|single)$/,addListener:function(n,t,i,r){var u,f;if(typeof n=="object"){r=n;for(u in r)this.filterOptRe.test(u)||(typeof r[u]=="function"?this.addListener(u,r[u],r.scope,r):this.addListener(u,r[u].fn,r[u].scope,r[u]));return}r=!r||typeof r=="boolean"?{}:r;n=n.toLowerCase();f=this.events[n]||!0;typeof f=="boolean"&&(f=new Ext.util.Event(this,n),this.events[n]=f);f.addListener(t,i,r)},removeListener:function(n,t,i){var r=this.events[n.toLowerCase()];typeof r=="object"&&r.removeListener(t,i)},purgeListeners:function(){for(var n in this.events)typeof this.events[n]=="object"&&this.events[n].clearListeners()},relayEvents:function(n,t){for(var i,u=function(n){return function(){return this.fireEvent.apply(this,Ext.combine(n,Array.prototype.slice.call(arguments,0)))}},r=0,f=t.length;r<f;r++){i=t[r];this.events[i]||(this.events[i]=!0);n.on(i,u(i),this)}},addEvents:function(n){if(this.events||(this.events={}),typeof n=="string")for(var t=0,i=arguments,r;r=i[t];t++)this.events[i[t]]||(n[i[t]]=!0);else Ext.applyIf(this.events,n)},hasListener:function(n){var t=this.events[n];return typeof t=="object"&&t.listeners.length>0},suspendEvents:function(){this.eventsSuspended=!0},resumeEvents:function(){this.eventsSuspended=!1},getMethodEvent:function(n){var t,r,i,u,f,e;return this.methodEvents||(this.methodEvents={}),t=this.methodEvents[n],t||(t={},this.methodEvents[n]=t,t.originalFn=this[n],t.methodName=n,t.before=[],t.after=[],f=this,e=function(n,t,e){(i=n.apply(t||f,e))!==undefined&&(typeof i=="object"?(r=i.returnValue!==undefined?i.returnValue:i,i.cancel===!0&&(u=!0)):i===!1?u=!0:r=i)},this[n]=function(){var o,n,s;for(r=i=undefined,u=!1,o=Array.prototype.slice.call(arguments,0),n=0,s=t.before.length;n<s;n++)if(e(t.before[n].fn,t.before[n].scope,o),u)return r;for((i=t.originalFn.apply(f,o))!==undefined&&(r=i),n=0,s=t.after.length;n<s;n++)if(e(t.after[n].fn,t.after[n].scope,o),u)return r;return r}),t},beforeMethod:function(n,t,i){var r=this.getMethodEvent(n);r.before.push({fn:t,scope:i})},afterMethod:function(n,t,i){var r=this.getMethodEvent(n);r.after.push({fn:t,scope:i})},removeMethodListener:function(n,t,i){for(var u=this.getMethodEvent(n),r=0,f=u.before.length;r<f;r++)if(u.before[r].fn==t&&u.before[r].scope==i){u.before.splice(r,1);return}for(r=0,f=u.after.length;r<f;r++)if(u.after[r].fn==t&&u.after[r].scope==i){u.after.splice(r,1);return}}};Ext.util.Observable.prototype.on=Ext.util.Observable.prototype.addListener;Ext.util.Observable.prototype.un=Ext.util.Observable.prototype.removeListener;Ext.util.Observable.capture=function(n,t,i){n.fireEvent=n.fireEvent.createInterceptor(t,i)};Ext.util.Observable.releaseCapture=function(n){n.fireEvent=Ext.util.Observable.prototype.fireEvent},function(){var n=function(n,t,i){var r=new Ext.util.DelayedTask;return function(){r.delay(t.buffer,n,i,Array.prototype.slice.call(arguments,0))}},t=function(n,t,i,r){return function(){return t.removeListener(i,r),n.apply(r,arguments)}},i=function(n,t,i){return function(){var r=Array.prototype.slice.call(arguments,0);setTimeout(function(){n.apply(i,r)},t.delay||10)}};Ext.util.Event=function(n,t){this.name=t;this.obj=n;this.listeners=[]};Ext.util.Event.prototype={addListener:function(n,t,i){if(t=t||this.obj,!this.isListening(n,t)){var r=this.createListener(n,t,i);this.firing?(this.listeners=this.listeners.slice(0),this.listeners.push(r)):this.listeners.push(r)}},createListener:function(r,u,f){f=f||{};u=u||this.obj;var o={fn:r,scope:u,options:f},e=r;return f.delay&&(e=i(e,f,u)),f.single&&(e=t(e,this,r,u)),f.buffer&&(e=n(e,f,u)),o.fireFn=e,o},findListener:function(n,t){var r,i,f,u;for(t=t||this.obj,r=this.listeners,i=0,f=r.length;i<f;i++)if(u=r[i],u.fn==n&&u.scope==t)return i;return-1},isListening:function(n,t){return this.findListener(n,t)!=-1},removeListener:function(n,t){var i;return(i=this.findListener(n,t))!=-1?(this.firing?(this.listeners=this.listeners.slice(0),this.listeners.splice(i,1)):this.listeners.splice(i,1),!0):!1},clearListeners:function(){this.listeners=[]},fire:function(){var i=this.listeners,r=i.length,u,n,t;if(r>0){for(this.firing=!0,u=Array.prototype.slice.call(arguments,0),n=0;n<r;n++)if(t=i[n],t.fireFn.apply(t.scope||this.obj||window,arguments)===!1)return this.firing=!1,!1;this.firing=!1}return!0}}}();Ext.EventManager=function(){var t,s,h=!1,n,c,e,o,u=Ext.lib.Event,i=Ext.lib.Dom,f=function(){if(!h){if(h=!0,Ext.isReady=!0,s&&clearInterval(s),(Ext.isGecko||Ext.isOpera)&&document.removeEventListener("DOMContentLoaded",f,!1),Ext.isIE){var n=document.getElementById("ie-deferred-loader");n&&(n.onreadystatechange=null,n.parentNode.removeChild(n))}t&&(t.fire(),t.clearListeners())}},a=function(){if(t=new Ext.util.Event,Ext.isGecko||Ext.isOpera)document.addEventListener("DOMContentLoaded",f,!1);else if(Ext.isIE){document.write('<script id="ie-deferred-loader" defer="defer" src="//:"><\/script>');var n=document.getElementById("ie-deferred-loader");n.onreadystatechange=function(){this.readyState=="complete"&&f()}}else Ext.isSafari&&(s=setInterval(function(){var n=document.readyState;n=="complete"&&f()},10));u.on(window,"load",f)},v=function(n,t){var i=new Ext.util.DelayedTask(n);return function(r){r=new Ext.EventObjectImpl(r);i.delay(t.buffer,n,null,[r])}},y=function(n,t,i,r){return function(u){Ext.EventManager.removeListener(t,i,r);n(u)}},p=function(n,t){return function(i){i=new Ext.EventObjectImpl(i);setTimeout(function(){n(i)},t.delay||10)}},l=function(n,t,i,r,f){var e=!i||typeof i=="boolean"?{}:i,s,o;if(r=r||e.fn,f=f||e.scope,s=Ext.getDom(n),!s)throw'Error listening for "'+t+'". Element "'+n+"\" doesn't exist.";o=function(n){n=Ext.EventObject.setEvent(n);var t;if(e.delegate){if(t=n.getTarget(e.delegate,s),!t)return}else t=n.target;e.stopEvent===!0&&n.stopEvent();e.preventDefault===!0&&n.preventDefault();e.stopPropagation===!0&&n.stopPropagation();e.normalized===!1&&(n=n.browserEvent);r.call(f||s,n,t,e)};e.delay&&(o=p(o,e));e.single&&(o=y(o,s,t,r));e.buffer&&(o=v(o,e));r._handlers=r._handlers||[];r._handlers.push([Ext.id(s),t,o]);u.on(s,t,o);if(t=="mousewheel"&&s.addEventListener){s.addEventListener("DOMMouseScroll",o,!1);u.on(window,"unload",function(){s.removeEventListener("DOMMouseScroll",o,!1)})}return t=="mousedown"&&s==document&&Ext.EventManager.stoppedMouseDownEvent.addListener(o),o},w=function(n,t,i){var h=Ext.id(n),f=i._handlers,e=i,r,s,o;if(f)for(r=0,s=f.length;r<s;r++)if(o=f[r],o[0]==h&&o[1]==t){e=o[2];f.splice(r,1);break}u.un(n,t,e);n=Ext.getDom(n);t=="mousewheel"&&n.addEventListener&&n.removeEventListener("DOMMouseScroll",e,!1);t=="mousedown"&&n==document&&Ext.EventManager.stoppedMouseDownEvent.removeListener(e)},b=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,r={addListener:function(n,t,i,r,u){var f,e;if(typeof t=="object"){f=t;for(e in f)b.test(e)||(typeof f[e]=="function"?l(n,e,f,f[e],f.scope):l(n,e,f[e]));return}return l(n,t,u,i,r)},removeListener:function(n,t,i){return w(n,t,i)},onDocumentReady:function(n,i,r){if(h){t.addListener(n,i,r);t.fire();t.clearListeners();return}t||a();t.addListener(n,i,r)},onWindowResize:function(t,r,f){if(!n){n=new Ext.util.Event;c=new Ext.util.DelayedTask(function(){n.fire(i.getViewWidth(),i.getViewHeight())});u.on(window,"resize",this.fireWindowResize,this)}n.addListener(t,r,f)},fireWindowResize:function(){n&&((Ext.isIE||Ext.isAir)&&c?c.delay(50):n.fire(i.getViewWidth(),i.getViewHeight()))},onTextResize:function(n,t,i){if(!e){e=new Ext.util.Event;var r=new Ext.Element(document.createElement("div"));r.dom.className="x-text-resize";r.dom.innerHTML="X";r.appendTo(document.body);o=r.dom.offsetHeight;setInterval(function(){r.dom.offsetHeight!=o&&e.fire(o,o=r.dom.offsetHeight)},this.textResizeInterval)}e.addListener(n,t,i)},removeResizeListener:function(t,i){n&&n.removeListener(t,i)},fireResize:function(){n&&n.fire(i.getViewWidth(),i.getViewHeight())},ieDeferSrc:!1,textResizeInterval:50};return r.on=r.addListener,r.un=r.removeListener,r.stoppedMouseDownEvent=new Ext.util.Event,r}();Ext.onReady=Ext.EventManager.onDocumentReady;Ext.onReady(function(){var t=Ext.getBody(),n,i;t&&(n=[Ext.isIE?"ext-ie "+(Ext.isIE6?"ext-ie6":"ext-ie7"):Ext.isGecko?"ext-gecko":Ext.isOpera?"ext-opera":Ext.isSafari?"ext-safari":""],Ext.isMac&&n.push("ext-mac"),Ext.isLinux&&n.push("ext-linux"),Ext.isBorderBox&&n.push("ext-border-box"),Ext.isStrict&&(i=t.dom.parentNode,i&&(i.className+=" ext-strict")),t.addClass(n.join(" ")))});Ext.EventObject=function(){var n=Ext.lib.Event,t={63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35},i=Ext.isIE?{1:0,4:1,2:2}:Ext.isSafari?{1:0,2:1,3:2}:{0:0,1:1,2:2};return Ext.EventObjectImpl=function(n){n&&this.setEvent(n.browserEvent||n)},Ext.EventObjectImpl.prototype={browserEvent:null,button:-1,shiftKey:!1,ctrlKey:!1,altKey:!1,BACKSPACE:8,TAB:9,RETURN:13,ENTER:13,SHIFT:16,CONTROL:17,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,F5:116,setEvent:function(t){return t==this||t&&t.browserEvent?t:(this.browserEvent=t,t?(this.button=t.button?i[t.button]:t.which?t.which-1:-1,t.type=="click"&&this.button==-1&&(this.button=0),this.type=t.type,this.shiftKey=t.shiftKey,this.ctrlKey=t.ctrlKey||t.metaKey,this.altKey=t.altKey,this.keyCode=t.keyCode,this.charCode=t.charCode,this.target=n.getTarget(t),this.xy=n.getXY(t)):(this.button=-1,this.shiftKey=!1,this.ctrlKey=!1,this.altKey=!1,this.keyCode=0,this.charCode=0,this.target=null,this.xy=[0,0]),this)},stopEvent:function(){this.browserEvent&&(this.browserEvent.type=="mousedown"&&Ext.EventManager.stoppedMouseDownEvent.fire(this),n.stopEvent(this.browserEvent))},preventDefault:function(){this.browserEvent&&n.preventDefault(this.browserEvent)},isNavKeyPress:function(){var n=this.keyCode;return n=Ext.isSafari?t[n]||n:n,n>=33&&n<=40||n==this.RETURN||n==this.TAB||n==this.ESC},isSpecialKey:function(){var n=this.keyCode;return this.type=="keypress"&&this.ctrlKey||n==9||n==13||n==40||n==27||n==16||n==17||n>=18&&n<=20||n>=33&&n<=35||n>=36&&n<=39||n>=44&&n<=45},stopPropagation:function(){this.browserEvent&&(this.browserEvent.type=="mousedown"&&Ext.EventManager.stoppedMouseDownEvent.fire(this),n.stopPropagation(this.browserEvent))},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){var n=this.keyCode||this.charCode;return Ext.isSafari?t[n]||n:n},getPageX:function(){return this.xy[0]},getPageY:function(){return this.xy[1]},getTime:function(){return this.browserEvent?n.getTime(this.browserEvent):null},getXY:function(){return this.xy},getTarget:function(n,t,i){var r=Ext.get(this.target);return n?r.findParent(n,t,i):i?r:this.target},getRelatedTarget:function(){return this.browserEvent?n.getRelatedTarget(this.browserEvent):null},getWheelDelta:function(){var n=this.browserEvent,t=0;return n.wheelDelta?t=n.wheelDelta/120:n.detail&&(t=-n.detail/3),t},hasModifier:function(){return this.ctrlKey||this.altKey||this.shiftKey?!0:!1},within:function(n,t){var i=this[t?"getRelatedTarget":"getTarget"]();return i&&Ext.fly(n).contains(i)},getPoint:function(){return new Ext.lib.Point(this.xy[0],this.xy[1])}},new Ext.EventObjectImpl}(),function(){var t=Ext.lib.Dom,e=Ext.lib.Event,i=Ext.lib.Anim,u={},o=/(-[a-z])/gi,s=function(n,t){return t.charAt(1).toUpperCase()},h=document.defaultView,n,r,f,c,a,l;Ext.Element=function(n,t){var r=typeof n=="string"?document.getElementById(n):n,i;if(!r)return null;if(i=r.id,t!==!0&&i&&Ext.Element.cache[i])return Ext.Element.cache[i];this.dom=r;this.id=i||Ext.id(r)};n=Ext.Element;n.prototype={originalDisplay:"",visibilityMode:1,defaultUnit:"px",setVisibilityMode:function(n){return this.visibilityMode=n,this},enableDisplayMode:function(t){return this.setVisibilityMode(n.DISPLAY),typeof t!="undefined"&&(this.originalDisplay=t),this},findParent:function(n,t,i){var r=this.dom,e=document.body,u=0,o=Ext.DomQuery,f;for(t=t||50,typeof t!="number"&&(f=Ext.getDom(t),t=10);r&&r.nodeType==1&&u<t&&r!=e&&r!=f;){if(o.is(r,n))return i?Ext.get(r):r;u++;r=r.parentNode}return null},findParentNode:function(n,t,i){var r=Ext.fly(this.dom.parentNode,"_internal");return r?r.findParent(n,t,i):null},up:function(n,t){return this.findParentNode(n,t,!0)},is:function(n){return Ext.DomQuery.is(this.dom,n)},animate:function(n,t,i,r,u){return this.anim(n,{duration:t,callback:i,easing:r},u),this},anim:function(n,t,i,r,u,f){i=i||"run";t=t||{};var e=Ext.lib.Anim[i](this.dom,n,t.duration||r||.35,t.easing||u||"easeOut",function(){Ext.callback(f,this);Ext.callback(t.callback,t.scope||this,[this,t])},this);return t.anim=e,e},preanim:function(n,t){return n[t]?typeof n[t]=="object"?n[t]:{duration:n[t+1],callback:n[t+2],easing:n[t+3]}:!1},clean:function(n){var r;if(this.isCleaned&&n!==!0)return this;for(var i=this.dom,t=i.firstChild,u=-1;t;)r=t.nextSibling,t.nodeType!=3||/\S/.test(t.nodeValue)?t.nodeIndex=++u:i.removeChild(t),t=r;return this.isCleaned=!0,this},scrollIntoView:function(n,t){var i=Ext.getDom(n)||Ext.getBody().dom,r=this.dom,o=this.getOffsetsTo(i),u=o[0]+i.scrollLeft,f=o[1]+i.scrollTop,s=f+r.offsetHeight,h=u+r.offsetWidth,e=i.clientHeight,c=parseInt(i.scrollTop,10),l=parseInt(i.scrollLeft,10),a=c+e,v=l+i.clientWidth;return r.offsetHeight>e||f<c?i.scrollTop=f:s>a&&(i.scrollTop=s-e),i.scrollTop=i.scrollTop,t!==!1&&(r.offsetWidth>i.clientWidth||u<l?i.scrollLeft=u:h>v&&(i.scrollLeft=h-i.clientWidth),i.scrollLeft=i.scrollLeft),this},scrollChildIntoView:function(n,t){Ext.fly(n,"_scrollChildIntoView").scrollIntoView(this,t)},autoHeight:function(n,t,i,r){var u=this.getHeight();return this.clip(),this.setHeight(1),setTimeout(function(){var f=parseInt(this.dom.scrollHeight,10);n?(this.setHeight(u),this.setHeight(f,n,t,function(){this.unclip();typeof i=="function"&&i()}.createDelegate(this),r)):(this.setHeight(f),this.unclip(),typeof i=="function"&&i())}.createDelegate(this),0),this},contains:function(n){return n?t.isAncestor(this.dom,n.dom?n.dom:n):!1},isVisible:function(n){var i=!(this.getStyle("visibility")=="hidden"||this.getStyle("display")=="none"),t;if(n!==!0||!i)return i;for(t=this.dom.parentNode;t&&t.tagName.toLowerCase()!="body";){if(!Ext.fly(t,"_isVisible").isVisible())return!1;t=t.parentNode}return!0},select:function(t,i){return n.select(t,i,this.dom)},query:function(n){return Ext.DomQuery.select(n,this.dom)},child:function(n,t){var i=Ext.DomQuery.selectNode(n,this.dom);return t?i:Ext.get(i)},down:function(n,t){var i=Ext.DomQuery.selectNode(" > "+n,this.dom);return t?i:Ext.get(i)},initDD:function(n,t,i){var r=new Ext.dd.DD(Ext.id(this.dom),n,t);return Ext.apply(r,i)},initDDProxy:function(n,t,i){var r=new Ext.dd.DDProxy(Ext.id(this.dom),n,t);return Ext.apply(r,i)},initDDTarget:function(n,t,i){var r=new Ext.dd.DDTarget(Ext.id(this.dom),n,t);return Ext.apply(r,i)},setVisible:function(t,r){if(r&&i){var u=this.dom,f=this.visibilityMode;t&&(this.setOpacity(.01),this.setVisible(!0));this.anim({opacity:{to:t?1:0}},this.preanim(arguments,1),null,.35,"easeIn",function(){t||(f==n.DISPLAY?u.style.display="none":u.style.visibility="hidden",Ext.get(u).setOpacity(1))})}else this.visibilityMode==n.DISPLAY?this.setDisplayed(t):(this.fixDisplay(),this.dom.style.visibility=t?"visible":"hidden");return this},isDisplayed:function(){return this.getStyle("display")!="none"},toggle:function(){return this.setVisible(!this.isVisible(),this.preanim(arguments,0)),this},setDisplayed:function(n){return typeof n=="boolean"&&(n=n?this.originalDisplay:"none"),this.setStyle("display",n),this},focus:function(){try{this.dom.focus()}catch(n){}return this},blur:function(){try{this.dom.blur()}catch(n){}return this},addClass:function(n){if(n instanceof Array)for(var t=0,i=n.length;t<i;t++)this.addClass(n[t]);else n&&!this.hasClass(n)&&(this.dom.className=this.dom.className+" "+n);return this},radioClass:function(n){for(var i,r=this.dom.parentNode.childNodes,t=0;t<r.length;t++)i=r[t],i.nodeType==1&&Ext.get(i).removeClass(n);return this.addClass(n),this},removeClass:function(n){var i,r,t;if(!n||!this.dom.className)return this;if(n instanceof Array)for(i=0,r=n.length;i<r;i++)this.removeClass(n[i]);else this.hasClass(n)&&(t=this.classReCache[n],t||(t=new RegExp("(?:^|\\s+)"+n+"(?:\\s+|$)","g"),this.classReCache[n]=t),this.dom.className=this.dom.className.replace(t," "));return this},classReCache:{},toggleClass:function(n){return this.hasClass(n)?this.removeClass(n):this.addClass(n),this},hasClass:function(n){return n&&(" "+this.dom.className+" ").indexOf(" "+n+" ")!=-1},replaceClass:function(n,t){return this.removeClass(n),this.addClass(t),this},getStyles:function(){for(var t=arguments,r=t.length,i={},n=0;n<r;n++)i[t[n]]=this.getStyle(t[n]);return i},getStyle:function(){return h&&h.getComputedStyle?function(n){var i=this.dom,r,f,t;return(n=="float"&&(n="cssFloat"),r=i.style[n])?r:(f=h.getComputedStyle(i,""))?((t=u[n])||(t=u[n]=n.replace(o,s)),f[t]):null}:function(n){var t=this.dom,e,h,i,f,r;return n=="opacity"?typeof t.style.filter=="string"&&(f=t.style.filter.match(/alpha\(opacity=(.*)\)/i),f&&(r=parseFloat(f[1]),!isNaN(r)))?r?r/100:0:1:(n=="float"&&(n="styleFloat"),(i=u[n])||(i=u[n]=n.replace(o,s)),e=t.style[i])?e:(h=t.currentStyle)?h[i]:null}}(),setStyle:function(n,t){var i,r;if(typeof n=="string")(i=u[n])||(i=u[n]=n.replace(o,s)),i=="opacity"?this.setOpacity(t):this.dom.style[i]=t;else for(r in n)typeof n[r]!="function"&&this.setStyle(r,n[r]);return this},applyStyles:function(n){return Ext.DomHelper.applyStyles(this.dom,n),this},getX:function(){return t.getX(this.dom)},getY:function(){return t.getY(this.dom)},getXY:function(){return t.getXY(this.dom)},getOffsetsTo:function(n){var t=this.getXY(),i=Ext.fly(n,"_internal").getXY();return[t[0]-i[0],t[1]-i[1]]},setX:function(n,r){return r&&i?this.setXY([n,this.getY()],this.preanim(arguments,1)):t.setX(this.dom,n),this},setY:function(n,r){return r&&i?this.setXY([this.getX(),n],this.preanim(arguments,1)):t.setY(this.dom,n),this},setLeft:function(n){return this.setStyle("left",this.addUnits(n)),this},setTop:function(n){return this.setStyle("top",this.addUnits(n)),this},setRight:function(n){return this.setStyle("right",this.addUnits(n)),this},setBottom:function(n){return this.setStyle("bottom",this.addUnits(n)),this},setXY:function(n,r){return r&&i?this.anim({points:{to:n}},this.preanim(arguments,1),"motion"):t.setXY(this.dom,n),this},setLocation:function(n,t){return this.setXY([n,t],this.preanim(arguments,2)),this},moveTo:function(n,t){return this.setXY([n,t],this.preanim(arguments,2)),this},getRegion:function(){return t.getRegion(this.dom)},getHeight:function(n){var t=this.dom.offsetHeight||0;return t=n!==!0?t:t-this.getBorderWidth("tb")-this.getPadding("tb"),t<0?0:t},getWidth:function(n){var t=this.dom.offsetWidth||0;return t=n!==!0?t:t-this.getBorderWidth("lr")-this.getPadding("lr"),t<0?0:t},getComputedHeight:function(){var n=Math.max(this.dom.offsetHeight,this.dom.clientHeight);return n||(n=parseInt(this.getStyle("height"),10)||0,this.isBorderBox()||(n+=this.getFrameWidth("tb"))),n},getComputedWidth:function(){var n=Math.max(this.dom.offsetWidth,this.dom.clientWidth);return n||(n=parseInt(this.getStyle("width"),10)||0,this.isBorderBox()||(n+=this.getFrameWidth("lr"))),n},getSize:function(n){return{width:this.getWidth(n),height:this.getHeight(n)}},getStyleSize:function(){var t,i,r=this.dom,n=r.style;return n.width&&n.width!="auto"&&(t=parseInt(n.width,10),Ext.isBorderBox&&(t-=this.getFrameWidth("lr"))),n.height&&n.height!="auto"&&(i=parseInt(n.height,10),Ext.isBorderBox&&(i-=this.getFrameWidth("tb"))),{width:t||this.getWidth(!0),height:i||this.getHeight(!0)}},getViewSize:function(){var n=this.dom,i=document;return n==i||n==i.body?{width:t.getViewWidth(),height:t.getViewHeight()}:{width:n.clientWidth,height:n.clientHeight}},getValue:function(n){return n?parseInt(this.dom.value,10):this.dom.value},adjustWidth:function(n){return typeof n=="number"&&(this.autoBoxAdjust&&!this.isBorderBox()&&(n-=this.getBorderWidth("lr")+this.getPadding("lr")),n<0&&(n=0)),n},adjustHeight:function(n){return typeof n=="number"&&(this.autoBoxAdjust&&!this.isBorderBox()&&(n-=this.getBorderWidth("tb")+this.getPadding("tb")),n<0&&(n=0)),n},setWidth:function(n,t){return n=this.adjustWidth(n),t&&i?this.anim({width:{to:n}},this.preanim(arguments,1)):this.dom.style.width=this.addUnits(n),this},setHeight:function(n,t){return n=this.adjustHeight(n),t&&i?this.anim({height:{to:n}},this.preanim(arguments,1)):this.dom.style.height=this.addUnits(n),this},setSize:function(n,t,r){return typeof n=="object"&&(t=n.height,n=n.width),n=this.adjustWidth(n),t=this.adjustHeight(t),r&&i?this.anim({width:{to:n},height:{to:t}},this.preanim(arguments,2)):(this.dom.style.width=this.addUnits(n),this.dom.style.height=this.addUnits(t)),this},setBounds:function(n,t,r,u,f){return f&&i?(r=this.adjustWidth(r),u=this.adjustHeight(u),this.anim({points:{to:[n,t]},width:{to:r},height:{to:u}},this.preanim(arguments,4),"motion")):(this.setSize(r,u),this.setLocation(n,t)),this},setRegion:function(n){return this.setBounds(n.left,n.top,n.right-n.left,n.bottom-n.top,this.preanim(arguments,1)),this},addListener:function(n,t,i,r){Ext.EventManager.on(this.dom,n,t,i||this,r)},removeListener:function(n,t){return Ext.EventManager.removeListener(this.dom,n,t),this},removeAllListeners:function(){return e.purgeElement(this.dom),this},relayEvent:function(n,t){this.on(n,function(i){t.fireEvent(n,i)})},setOpacity:function(n,t){if(t&&i)this.anim({opacity:{to:n}},this.preanim(arguments,1),null,.35,"easeIn");else{var r=this.dom.style;Ext.isIE?(r.zoom=1,r.filter=(r.filter||"").replace(/alpha\([^\)]*\)/gi,"")+(n==1?"":" alpha(opacity="+n*100+")")):r.opacity=n}return this},getLeft:function(n){return n?parseInt(this.getStyle("left"),10)||0:this.getX()},getRight:function(n){return n?this.getLeft(!0)+this.getWidth()||0:this.getX()+this.getWidth()},getTop:function(n){return n?parseInt(this.getStyle("top"),10)||0:this.getY()},getBottom:function(n){return n?this.getTop(!0)+this.getHeight()||0:this.getY()+this.getHeight()},position:function(n,t,i,r){n?this.setStyle("position",n):this.getStyle("position")=="static"&&this.setStyle("position","relative");t&&this.setStyle("z-index",t);i!==undefined&&r!==undefined?this.setXY([i,r]):i!==undefined?this.setX(i):r!==undefined&&this.setY(r)},clearPositioning:function(n){return n=n||"",this.setStyle({left:n,right:n,top:n,bottom:n,"z-index":"",position:"static"}),this},getPositioning:function(){var n=this.getStyle("left"),t=this.getStyle("top");return{position:this.getStyle("position"),left:n,right:n?"":this.getStyle("right"),top:t,bottom:t?"":this.getStyle("bottom"),"z-index":this.getStyle("z-index")}},getBorderWidth:function(t){return this.addStyles(t,n.borders)},getPadding:function(t){return this.addStyles(t,n.paddings)},setPositioning:function(n){return this.applyStyles(n),n.right=="auto"&&(this.dom.style.right=""),n.bottom=="auto"&&(this.dom.style.bottom=""),this},fixDisplay:function(){this.getStyle("display")=="none"&&(this.setStyle("visibility","hidden"),this.setStyle("display",this.originalDisplay),this.getStyle("display")=="none"&&this.setStyle("display","block"))},setOverflow:function(n){n=="auto"&&Ext.isMac&&Ext.isGecko?(this.dom.style.overflow="hidden",function(){this.dom.style.overflow="auto"}.defer(1,this)):this.dom.style.overflow=n},setLeftTop:function(n,t){return this.dom.style.left=this.addUnits(n),this.dom.style.top=this.addUnits(t),this},move:function(n,t){var i=this.getXY();n=n.toLowerCase();switch(n){case"l":case"left":this.moveTo(i[0]-t,i[1],this.preanim(arguments,2));break;case"r":case"right":this.moveTo(i[0]+t,i[1],this.preanim(arguments,2));break;case"t":case"top":case"up":this.moveTo(i[0],i[1]-t,this.preanim(arguments,2));break;case"b":case"bottom":case"down":this.moveTo(i[0],i[1]+t,this.preanim(arguments,2))}return this},clip:function(){return this.isClipped||(this.isClipped=!0,this.originalClip={o:this.getStyle("overflow"),x:this.getStyle("overflow-x"),y:this.getStyle("overflow-y")},this.setStyle("overflow","hidden"),this.setStyle("overflow-x","hidden"),this.setStyle("overflow-y","hidden")),this},unclip:function(){if(this.isClipped){this.isClipped=!1;var n=this.originalClip;n.o&&this.setStyle("overflow",n.o);n.x&&this.setStyle("overflow-x",n.x);n.y&&this.setStyle("overflow-y",n.y)}return this},getAnchorXY:function(n,i,r){var e,o,a=!1,h,c,l;r?(e=r.width,o=r.height):(h=this.dom,h==document.body||h==document?(a=!0,e=t.getViewWidth(),o=t.getViewHeight()):(e=this.getWidth(),o=this.getHeight()));var u=0,f=0,s=Math.round;switch((n||"tl").toLowerCase()){case"c":u=s(e*.5);f=s(o*.5);break;case"t":u=s(e*.5);f=0;break;case"l":u=0;f=s(o*.5);break;case"r":u=e;f=s(o*.5);break;case"b":u=s(e*.5);f=o;break;case"tl":u=0;f=0;break;case"bl":u=0;f=o;break;case"br":u=e;f=o;break;case"tr":u=e;f=0}return i===!0?[u,f]:a?(c=this.getScroll(),[u+c.left,f+c.top]):(l=this.getXY(),[u+l[0],f+l[1]])},getAlignToXY:function(n,i,r){var e;if(n=Ext.get(n),!n||!n.dom)throw"Element.alignToXY with an element that doesn't exist";var ft=this.dom,p=!1,u="",f="";if(r=r||[0,0],i?i=="?"?i="tl-bl?":i.indexOf("-")==-1&&(i="tl-"+i):i="tl-bl",i=i.toLowerCase(),e=i.match(/^([a-z]+)-([a-z]+)(\?)?$/),!e)throw"Element.alignTo with an invalid alignment "+i;u=e[1];f=e[2];p=!!e[3];var w=this.getAnchorXY(u,!0),b=n.getAnchorXY(f,!1),o=b[0]-w[0]+r[0],s=b[1]-w[1]+r[1];if(p){var v=this.getWidth(),y=this.getHeight(),h=n.getRegion(),k=t.getViewWidth()-5,d=t.getViewHeight()-5,g=u.charAt(0),nt=u.charAt(u.length-1),tt=f.charAt(0),it=f.charAt(f.length-1),rt=g=="t"&&tt=="b"||g=="b"&&tt=="t",ut=nt=="r"&&it=="l"||nt=="l"&&it=="r",c=document,l=(c.documentElement.scrollLeft||c.body.scrollLeft||0)+5,a=(c.documentElement.scrollTop||c.body.scrollTop||0)+5;o+v>k+l&&(o=ut?h.left-v:k+l-v);o<l&&(o=ut?h.right:l);s+y>d+a&&(s=rt?h.top-y:d+a-y);s<a&&(s=rt?h.bottom:a)}return[o,s]},getConstrainToXY:function(){var n={top:0,left:0,bottom:0,right:0};return function(t,i,r,u){var c,l,f,e,a,v;t=Ext.get(t);r=r?Ext.applyIf(r,n):n;f=0;e=0;t.dom==document.body||t.dom==document?(c=Ext.lib.Dom.getViewWidth(),l=Ext.lib.Dom.getViewHeight()):(c=t.dom.clientWidth,l=t.dom.clientHeight,i||(a=t.getXY(),f=a[0],e=a[1]));v=t.getScroll();f+=r.left+v.left;e+=r.top+v.top;c-=r.right;l-=r.bottom;var y=f+c,p=e+l,w=u||(i?[this.getLeft(!0),this.getTop(!0)]:this.getXY()),o=w[0],s=w[1],b=this.dom.offsetWidth,k=this.dom.offsetHeight,h=!1;return o+b>y&&(o=y-b,h=!0),s+k>p&&(s=p-k,h=!0),o<f&&(o=f,h=!0),s<e&&(s=e,h=!0),h?[o,s]:!1}}(),adjustForConstraints:function(n,t,i){return this.getConstrainToXY(t||document,!1,i,n)||n},alignTo:function(n,t,i){var r=this.getAlignToXY(n,t,i);return this.setXY(r,this.preanim(arguments,3)),this},anchorTo:function(n,t,i,r,u,f){var e=function(){this.alignTo(n,t,i,r);Ext.callback(f,this)},o;Ext.EventManager.onWindowResize(e,this);if(o=typeof u,o!="undefined")Ext.EventManager.on(window,"scroll",e,this,{buffer:o=="number"?u:50});return e.call(this),this},clearOpacity:function(){return window.ActiveXObject?typeof this.dom.style.filter=="string"&&/alpha/i.test(this.dom.style.filter)&&(this.dom.style.filter=""):(this.dom.style.opacity="",this.dom.style["-moz-opacity"]="",this.dom.style["-khtml-opacity"]=""),this},hide:function(){return this.setVisible(!1,this.preanim(arguments,0)),this},show:function(){return this.setVisible(!0,this.preanim(arguments,0)),this},addUnits:function(n){return Ext.Element.addUnits(n,this.defaultUnit)},update:function(n,t,i){if(typeof n=="undefined"&&(n=""),t!==!0)return this.dom.innerHTML=n,typeof i=="function"&&i(),this;var r=Ext.id(),u=this.dom;n+='<span id="'+r+'"><\/span>';e.onAvailable(r,function(){for(var h=document.getElementsByTagName("head")[0],c=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,t,u,f,e,o,s;t=c.exec(n);)u=t[1],f=u?u.match(/\ssrc=([\'\"])(.*?)\1/i):!1,f&&f[2]?(e=document.createElement("script"),e.src=f[2],o=u.match(/\stype=([\'\"])(.*?)\1/i),o&&o[2]&&(e.type=o[2]),h.appendChild(e)):t[2]&&t[2].length>0&&(window.execScript?window.execScript(t[2]):window.eval(t[2]));s=document.getElementById(r);s&&Ext.removeNode(s);typeof i=="function"&&i()});return u.innerHTML=n.replace(/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,""),this},load:function(){var n=this.getUpdater();return n.update.apply(n,arguments),this},getUpdater:function(){return this.updateManager||(this.updateManager=new Ext.Updater(this)),this.updateManager},unselectable:function(){return this.dom.unselectable="on",this.swallowEvent("selectstart",!0),this.applyStyles("-moz-user-select:none;-khtml-user-select:none;"),this.addClass("x-unselectable"),this},getCenterXY:function(){return this.getAlignToXY(document,"c-c")},center:function(n){return this.alignTo(n||document,"c-c"),this},isBorderBox:function(){return l[this.dom.tagName.toLowerCase()]||Ext.isBorderBox},getBox:function(n,t){var i,e,o;t?(e=parseInt(this.getStyle("left"),10)||0,o=parseInt(this.getStyle("top"),10)||0,i=[e,o]):i=this.getXY();var s=this.dom,h=s.offsetWidth,c=s.offsetHeight,r;if(n){var u=this.getBorderWidth("l")+this.getPadding("l"),l=this.getBorderWidth("r")+this.getPadding("r"),f=this.getBorderWidth("t")+this.getPadding("t"),a=this.getBorderWidth("b")+this.getPadding("b");r={x:i[0]+u,y:i[1]+f,0:i[0]+u,1:i[1]+f,width:h-(u+l),height:c-(f+a)}}else r={x:i[0],y:i[1],0:i[0],1:i[1],width:h,height:c};return r.right=r.x+r.width,r.bottom=r.y+r.height,r},getFrameWidth:function(n,t){return t&&Ext.isBorderBox?0:this.getPadding(n)+this.getBorderWidth(n)},setBox:function(n,t){var i=n.width,r=n.height;return!t||this.autoBoxAdjust||this.isBorderBox()||(i-=this.getBorderWidth("lr")+this.getPadding("lr"),r-=this.getBorderWidth("tb")+this.getPadding("tb")),this.setBounds(n.x,n.y,i,r,this.preanim(arguments,2)),this},repaint:function(){var n=this.dom;return this.addClass("x-repaint"),setTimeout(function(){Ext.get(n).removeClass("x-repaint")},1),this},getMargins:function(t){return t?this.addStyles(t,n.margins):{top:parseInt(this.getStyle("margin-top"),10)||0,left:parseInt(this.getStyle("margin-left"),10)||0,bottom:parseInt(this.getStyle("margin-bottom"),10)||0,right:parseInt(this.getStyle("margin-right"),10)||0}},addStyles:function(n,t){for(var f=0,r,i,u=0,e=n.length;u<e;u++)r=this.getStyle(t[n.charAt(u)]),r&&(i=parseInt(r,10),i&&(f+=i>=0?i:-1*i));return f},createProxy:function(n,t,i){n=typeof n=="object"?n:{tag:"div",cls:n};var r;return r=t?Ext.DomHelper.append(t,n,!0):Ext.DomHelper.insertBefore(this.dom,n,!0),i&&r.setBox(this.getBox()),r},mask:function(n,t){if(this.getStyle("position")=="static"&&this.setStyle("position","relative"),this._maskMsg&&this._maskMsg.remove(),this._mask&&this._mask.remove(),this._mask=Ext.DomHelper.append(this.dom,{cls:"ext-el-mask"},!0),this.addClass("x-masked"),this._mask.setDisplayed(!0),typeof n=="string"){this._maskMsg=Ext.DomHelper.append(this.dom,{cls:"ext-el-mask-msg",cn:{tag:"div"}},!0);var i=this._maskMsg;i.dom.className=t?"ext-el-mask-msg "+t:"ext-el-mask-msg";i.dom.firstChild.innerHTML=n;i.setDisplayed(!0);i.center(this)}return!Ext.isIE||Ext.isIE7&&Ext.isStrict||this.getStyle("height")!="auto"||this._mask.setSize(this.dom.clientWidth,this.getHeight()),this._mask},unmask:function(){this._mask&&(this._maskMsg&&(this._maskMsg.remove(),delete this._maskMsg),this._mask.remove(),delete this._mask);this.removeClass("x-masked")},isMasked:function(){return this._mask&&this._mask.isVisible()},createShim:function(){var n=document.createElement("iframe"),t;return n.frameBorder="no",n.className="ext-shim",Ext.isIE&&Ext.isSecure&&(n.src=Ext.SSL_SECURE_URL),t=Ext.get(this.dom.parentNode.insertBefore(n,this.dom)),t.autoBoxAdjust=!1,t},remove:function(){Ext.removeNode(this.dom);delete n.cache[this.dom.id]},hover:function(n,t,i){var r=function(t){t.within(this,!0)||n.apply(i||this,arguments)},u=function(n){n.within(this,!0)||t.apply(i||this,arguments)};this.on("mouseover",r,this.dom);this.on("mouseout",u,this.dom);return this},addClassOnOver:function(n){return this.hover(function(){Ext.fly(this,"_internal").addClass(n)},function(){Ext.fly(this,"_internal").removeClass(n)}),this},addClassOnFocus:function(n){this.on("focus",function(){Ext.fly(this,"_internal").addClass(n)},this.dom);this.on("blur",function(){Ext.fly(this,"_internal").removeClass(n)},this.dom);return this},addClassOnClick:function(n){var t=this.dom;this.on("mousedown",function(){Ext.fly(t,"_internal").addClass(n);var i=Ext.getDoc(),r=function(){Ext.fly(t,"_internal").removeClass(n);i.removeListener("mouseup",r)};i.on("mouseup",r)});return this},swallowEvent:function(n,t){var r=function(n){n.stopPropagation();t&&n.preventDefault()},i,u;if(n instanceof Array){for(i=0,u=n.length;i<u;i++)this.on(n[i],r);return this}this.on(n,r);return this},parent:function(n,t){return this.matchNode("parentNode","parentNode",n,t)},next:function(n,t){return this.matchNode("nextSibling","nextSibling",n,t)},prev:function(n,t){return this.matchNode("previousSibling","previousSibling",n,t)},first:function(n,t){return this.matchNode("nextSibling","firstChild",n,t)},last:function(n,t){return this.matchNode("previousSibling","lastChild",n,t)},matchNode:function(n,t,i,r){for(var u=this.dom[t];u;){if(u.nodeType==1&&(!i||Ext.DomQuery.is(u,i)))return r?u:Ext.get(u);u=u[n]}return null},appendChild:function(n){return n=Ext.get(n),n.appendTo(this),this},createChild:function(n,t,i){return(n=n||{tag:"div"},t)?Ext.DomHelper.insertBefore(t,n,i!==!0):Ext.DomHelper[this.dom.firstChild?"append":"overwrite"](this.dom,n,i!==!0)},appendTo:function(n){return n=Ext.getDom(n),n.appendChild(this.dom),this},insertBefore:function(n){return n=Ext.getDom(n),n.parentNode.insertBefore(this.dom,n),this},insertAfter:function(n){return n=Ext.getDom(n),n.parentNode.insertBefore(this.dom,n.nextSibling),this},insertFirst:function(n,t){return n=n||{},typeof n!="object"||n.nodeType||n.dom?(n=Ext.getDom(n),this.dom.insertBefore(n,this.dom.firstChild),t?n:Ext.get(n)):this.createChild(n,this.dom.firstChild,t)},insertSibling:function(n,t,i){var r,u,f,e;if(n instanceof Array){for(u=0,f=n.length;u<f;u++)r=this.insertSibling(n[u],t,i);return r}return t=t?t.toLowerCase():"before",n=n||{},e=t=="before"?this.dom:this.dom.nextSibling,typeof n!="object"||n.nodeType||n.dom?(r=this.dom.parentNode.insertBefore(Ext.getDom(n),e),i||(r=Ext.get(r))):r=t!="after"||this.dom.nextSibling?Ext.DomHelper[t=="after"?"insertAfter":"insertBefore"](this.dom,n,!i):Ext.DomHelper.append(this.dom.parentNode,n,!i),r},wrap:function(n,t){n||(n={tag:"div"});var i=Ext.DomHelper.insertBefore(this.dom,n,!t);return i.dom?i.dom.appendChild(this.dom):i.appendChild(this.dom),i},replace:function(n){return n=Ext.get(n),this.insertBefore(n),n.remove(),this},replaceWith:function(t){return typeof t!="object"||t.nodeType||t.dom?(t=Ext.getDom(t),this.dom.parentNode.insertBefore(t,this.dom)):t=this.insertSibling(t,"before"),n.uncache(this.id),this.dom.parentNode.removeChild(this.dom),this.dom=t,this.id=Ext.id(t),n.cache[this.id]=this,this},insertHtml:function(n,t,i){var r=Ext.DomHelper.insertHtml(n,this.dom,t);return i?Ext.get(r):r},set:function(n,t){var r=this.dom,i;t=typeof t=="undefined"?r.setAttribute?!0:!1:t;for(i in n)i!="style"&&typeof n[i]!="function"&&(i=="cls"?r.className=n.cls:n.hasOwnProperty(i)&&(t?r.setAttribute(i,n[i]):r[i]=n[i]));return n.style&&Ext.DomHelper.applyStyles(r,n.style),this},addKeyListener:function(n,t,i){var r;return r=typeof n!="object"||n instanceof Array?{key:n,fn:t,scope:i}:{key:n.key,shift:n.shift,ctrl:n.ctrl,alt:n.alt,fn:t,scope:i},new Ext.KeyMap(this,r)},addKeyMap:function(n){return new Ext.KeyMap(this,n)},isScrollable:function(){var n=this.dom;return n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth},scrollTo:function(n,t,r){var u=n.toLowerCase()=="left"?"scrollLeft":"scrollTop",f;return r&&i?(f=u=="scrollLeft"?[t,this.dom.scrollTop]:[this.dom.scrollLeft,t],this.anim({scroll:{to:f}},this.preanim(arguments,2),"scroll")):this.dom[u]=t,this},scroll:function(n,t){var u,f,i;if(this.isScrollable()){var r=this.dom,e=r.scrollLeft,o=r.scrollTop,s=r.scrollWidth,h=r.scrollHeight,c=r.clientWidth,l=r.clientHeight;n=n.toLowerCase();u=!1;f=this.preanim(arguments,2);switch(n){case"l":case"left":s-e>c&&(i=Math.min(e+t,s-c),this.scrollTo("left",i,f),u=!0);break;case"r":case"right":e>0&&(i=Math.max(e-t,0),this.scrollTo("left",i,f),u=!0);break;case"t":case"top":case"up":o>0&&(i=Math.max(o-t,0),this.scrollTo("top",i,f),u=!0);break;case"b":case"bottom":case"down":h-o>l&&(i=Math.min(o+t,h-l),this.scrollTo("top",i,f),u=!0)}return u}},translatePoints:function(n,t){(typeof n=="object"||n instanceof Array)&&(t=n[1],n=n[0]);var u=this.getStyle("position"),f=this.getXY(),i=parseInt(this.getStyle("left"),10),r=parseInt(this.getStyle("top"),10);return isNaN(i)&&(i=u=="relative"?0:this.dom.offsetLeft),isNaN(r)&&(r=u=="relative"?0:this.dom.offsetTop),{left:n-f[0]+i,top:t-f[1]+r}},getScroll:function(){var t=this.dom,n=document,i,r;return t==n||t==n.body?(Ext.isIE&&Ext.isStrict?(i=n.documentElement.scrollLeft||n.body.scrollLeft||0,r=n.documentElement.scrollTop||n.body.scrollTop||0):(i=window.pageXOffset||n.body.scrollLeft||0,r=window.pageYOffset||n.body.scrollTop||0),{left:i,top:r}):{left:t.scrollLeft,top:t.scrollTop}},getColor:function(n,t,i){var r=this.getStyle(n),f,h,o,e,u,s;if(!r||r=="transparent"||r=="inherit")return t;if(f=typeof i=="undefined"?"#":i,r.substr(0,4)=="rgb(")for(h=r.slice(4,r.length-1).split(","),u=0;u<3;u++)o=parseInt(h[u]),e=o.toString(16),o<16&&(e="0"+e),f+=e;else if(r.substr(0,1)=="#")if(r.length==4)for(u=1;u<4;u++)s=r.charAt(u),f+=s+s;else r.length==7&&(f+=r.substr(1));return f.length>5?f.toLowerCase():t},boxWrap:function(t){t=t||"x-box";var i=Ext.get(this.insertHtml("beforeBegin",String.format('<div class="{0}">'+n.boxMarkup+"<\/div>",t)));return i.child("."+t+"-mc").dom.appendChild(this.dom),i},getAttributeNS:Ext.isIE?function(n,t){var i=this.dom,r=typeof i[n+":"+t];return r!="undefined"&&r!="unknown"?i[n+":"+t]:i[t]}:function(n,t){var i=this.dom;return i.getAttributeNS(n,t)||i.getAttribute(n+":"+t)||i.getAttribute(t)||i[t]},getTextWidth:function(n,t,i){return Ext.util.TextMetrics.measure(this.dom,Ext.value(n,this.dom.innerHTML,!0)).width.constrain(t||0,i||1e6)}};r=n.prototype;r.on=r.addListener;r.mon=r.addListener;r.getUpdateManager=r.getUpdater;r.un=r.removeListener;r.autoBoxAdjust=!0;n.unitPattern=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i;n.addUnits=function(t,i){return t===""||t=="auto"?t:t===undefined?"":typeof t=="number"||!n.unitPattern.test(t)?t+(i||"px"):t};n.boxMarkup='<div class="{0}-tl"><div class="{0}-tr"><div class="{0}-tc"><\/div><\/div><\/div><div class="{0}-ml"><div class="{0}-mr"><div class="{0}-mc"><\/div><\/div><\/div><div class="{0}-bl"><div class="{0}-br"><div class="{0}-bc"><\/div><\/div><\/div>';n.VISIBILITY=1;n.DISPLAY=2;n.borders={l:"border-left-width",r:"border-right-width",t:"border-top-width",b:"border-bottom-width"};n.paddings={l:"padding-left",r:"padding-right",t:"padding-top",b:"padding-bottom"};n.margins={l:"margin-left",r:"margin-right",t:"margin-top",b:"margin-bottom"};n.cache={};n.get=function(t){var i,u,r,e;return t?typeof t=="string"?(u=document.getElementById(t))?((i=n.cache[t])?i.dom=u:i=n.cache[t]=new n(u),i):null:t.tagName?((r=t.id)||(r=Ext.id(t)),(i=n.cache[r])?i.dom=t:i=n.cache[r]=new n(t),i):t instanceof n?(t!=f&&(t.dom=document.getElementById(t.id)||t.dom,n.cache[t.id]=t),t):t.isComposite?t:t instanceof Array?n.select(t):t==document?(f||(e=function(){},e.prototype=n.prototype,f=new e,f.dom=document),f):null:null};n.uncache=function(){for(var t=0,i=arguments,r=i.length;t<r;t++)i[t]&&delete n.cache[i[t].id||i[t]]};n.garbageCollect=function(){var i,r,t;if(!Ext.enableGarbageCollector){clearInterval(n.collectorThread);return}for(i in n.cache)r=n.cache[i],t=r.dom,t&&t.parentNode&&(t.offsetParent||document.getElementById(i))||(delete n.cache[i],t&&Ext.enableListenerCollection&&e.purgeElement(t))};n.collectorThreadId=setInterval(n.garbageCollect,3e4);c=function(){};c.prototype=n.prototype;a=new c;n.Flyweight=function(n){this.dom=n};n.Flyweight.prototype=a;n.Flyweight.prototype.isFlyweight=!0;n._flyweights={};n.fly=function(t,i){return(i=i||"_global",t=Ext.getDom(t),!t)?null:(n._flyweights[i]||(n._flyweights[i]=new n.Flyweight),n._flyweights[i].dom=t,n._flyweights[i])};Ext.get=n.get;Ext.fly=n.fly;l=Ext.isStrict?{select:1}:{input:1,select:1,textarea:1};(Ext.isIE||Ext.isGecko)&&(l.button=1);Ext.EventManager.on(window,"unload",function(){delete n.cache;delete n._flyweights})}();Ext.enableFx=!0;Ext.Fx={slideIn:function(n,t){var i=this.getFxEl();return t=t||{},i.queueFx(t,function(){var h,u,f,r;n=n||"t";this.fixDisplay();h=this.getFxRestore();u=this.getBox();this.setSize(u);f=this.fxWrap(h.pos,t,"hidden");r=this.dom.style;r.visibility="visible";r.position="absolute";var l=function(){i.fxUnwrap(f,h.pos,t);r.width=h.width;r.height=h.height;i.afterFx(t)},e,c={to:[u.x,u.y]},o={to:u.width},s={to:u.height};switch(n.toLowerCase()){case"t":f.setSize(u.width,0);r.left=r.bottom="0";e={height:s};break;case"l":f.setSize(0,u.height);r.right=r.top="0";e={width:o};break;case"r":f.setSize(0,u.height);f.setX(u.right);r.left=r.top="0";e={width:o,points:c};break;case"b":f.setSize(u.width,0);f.setY(u.bottom);r.left=r.top="0";e={height:s,points:c};break;case"tl":f.setSize(0,0);r.right=r.bottom="0";e={width:o,height:s};break;case"bl":f.setSize(0,0);f.setY(u.y+u.height);r.right=r.top="0";e={width:o,height:s,points:c};break;case"br":f.setSize(0,0);f.setXY([u.right,u.bottom]);r.left=r.top="0";e={width:o,height:s,points:c};break;case"tr":f.setSize(0,0);f.setX(u.x+u.width);r.left=r.bottom="0";e={width:o,height:s,points:c}}this.dom.style.visibility="visible";f.show();arguments.callee.anim=f.fxanim(e,t,"motion",.5,"easeOut",l)}),this},slideOut:function(n,t){var i=this.getFxEl();return t=t||{},i.queueFx(t,function(){var o,u,s,r,h,e,f;n=n||"t";o=this.getFxRestore();u=this.getBox();this.setSize(u);s=this.fxWrap(o.pos,t,"visible");r=this.dom.style;r.visibility="visible";r.position="absolute";s.setSize(u);h=function(){t.useDisplay?i.setDisplayed(!1):i.hide();i.fxUnwrap(s,o.pos,t);r.width=o.width;r.height=o.height;i.afterFx(t)};f={to:0};switch(n.toLowerCase()){case"t":r.left=r.bottom="0";e={height:f};break;case"l":r.right=r.top="0";e={width:f};break;case"r":r.left=r.top="0";e={width:f,points:{to:[u.right,u.y]}};break;case"b":r.left=r.top="0";e={height:f,points:{to:[u.x,u.bottom]}};break;case"tl":r.right=r.bottom="0";e={width:f,height:f};break;case"bl":r.right=r.top="0";e={width:f,height:f,points:{to:[u.x,u.bottom]}};break;case"br":r.left=r.top="0";e={width:f,height:f,points:{to:[u.x+u.width,u.bottom]}};break;case"tr":r.left=r.bottom="0";e={width:f,height:f,points:{to:[u.right,u.y]}}}arguments.callee.anim=s.fxanim(e,t,"motion",.5,"easeOut",h)}),this},puff:function(n){var t=this.getFxEl();return n=n||{},t.queueFx(n,function(){this.clearOpacity();this.show();var i=this.getFxRestore(),r=this.dom.style,e=function(){n.useDisplay?t.setDisplayed(!1):t.hide();t.clearOpacity();t.setPositioning(i.pos);r.width=i.width;r.height=i.height;r.fontSize="";t.afterFx(n)},u=this.getWidth(),f=this.getHeight();arguments.callee.anim=this.fxanim({width:{to:this.adjustWidth(u*2)},height:{to:this.adjustHeight(f*2)},points:{by:[-(u*.5),-(f*.5)]},opacity:{to:0},fontSize:{to:200,unit:"%"}},n,"motion",.5,"easeOut",e)}),this},switchOff:function(n){var t=this.getFxEl();return n=n||{},t.queueFx(n,function(){this.clearOpacity();this.clip();var i=this.getFxRestore(),r=this.dom.style,u=function(){n.useDisplay?t.setDisplayed(!1):t.hide();t.clearOpacity();t.setPositioning(i.pos);r.width=i.width;r.height=i.height;t.afterFx(n)};this.fxanim({opacity:{to:.3}},null,null,.1,null,function(){this.clearOpacity(),function(){this.fxanim({height:{to:1},points:{by:[0,this.getHeight()*.5]}},n,"motion",.3,"easeIn",u)}.defer(100,this)})}),this},highlight:function(n,t){var i=this.getFxEl();return t=t||{},i.queueFx(t,function(){var r;n=n||"ffff9c";r=t.attr||"backgroundColor";this.clearOpacity();this.show();var f=this.getColor(r),e=this.dom.style[r],o=t.endColor||f||"ffffff",s=function(){i.dom.style[r]=e;i.afterFx(t)},u={};u[r]={from:n,to:o};arguments.callee.anim=this.fxanim(u,t,"color",1,"easeIn",s)}),this},frame:function(n,t,i){var r=this.getFxEl();return i=i||{},r.queueFx(i,function(){var e,u,f;n=n||"#C3DAF9";n.length==6&&(n="#"+n);t=t||1;e=i.duration||1;this.show();u=this.getBox();f=function(){var o=Ext.getBody().createChild({style:{visbility:"hidden",position:"absolute","z-index":"35000",border:"0px solid "+n}}),s=Ext.isBorderBox?2:1;o.animate({top:{from:u.y,to:u.y-20},left:{from:u.x,to:u.x-20},borderWidth:{from:0,to:10},opacity:{from:1,to:0},height:{from:u.height,to:u.height+20*s},width:{from:u.width,to:u.width+20*s}},e,function(){o.remove();--t>0?f():r.afterFx(i)})};f.call(this)}),this},pause:function(n){var t=this.getFxEl(),i={};return t.queueFx(i,function(){setTimeout(function(){t.afterFx(i)},n*1e3)}),this},fadeIn:function(n){var t=this.getFxEl();return n=n||{},t.queueFx(n,function(){this.setOpacity(0);this.fixDisplay();this.dom.style.visibility="visible";var i=n.endOpacity||1;arguments.callee.anim=this.fxanim({opacity:{to:i}},n,null,.5,"easeOut",function(){i==1&&this.clearOpacity();t.afterFx(n)})}),this},fadeOut:function(n){var t=this.getFxEl();return n=n||{},t.queueFx(n,function(){arguments.callee.anim=this.fxanim({opacity:{to:n.endOpacity||0}},n,null,.5,"easeOut",function(){this.visibilityMode==Ext.Element.DISPLAY||n.useDisplay?this.dom.style.display="none":this.dom.style.visibility="hidden";this.clearOpacity();t.afterFx(n)})}),this},scale:function(n,t,i){return this.shift(Ext.apply({},i,{width:n,height:t})),this},shift:function(n){var t=this.getFxEl();return n=n||{},t.queueFx(n,function(){var i={},f=n.width,e=n.height,r=n.x,u=n.y,o=n.opacity;f!==undefined&&(i.width={to:this.adjustWidth(f)});e!==undefined&&(i.height={to:this.adjustHeight(e)});(r!==undefined||u!==undefined)&&(i.points={to:[r!==undefined?r:this.getX(),u!==undefined?u:this.getY()]});o!==undefined&&(i.opacity={to:o});n.xy!==undefined&&(i.points={to:n.xy});arguments.callee.anim=this.fxanim(i,n,"motion",.35,"easeOut",function(){t.afterFx(n)})}),this},ghost:function(n,t){var i=this.getFxEl();return t=t||{},i.queueFx(t,function(){n=n||"b";var e=this.getFxRestore(),u=this.getWidth(),f=this.getHeight(),o=this.dom.style,h=function(){t.useDisplay?i.setDisplayed(!1):i.hide();i.clearOpacity();i.setPositioning(e.pos);o.width=e.width;o.height=e.height;i.afterFx(t)},s={opacity:{to:0},points:{}},r=s.points;switch(n.toLowerCase()){case"t":r.by=[0,-f];break;case"l":r.by=[-u,0];break;case"r":r.by=[u,0];break;case"b":r.by=[0,f];break;case"tl":r.by=[-u,-f];break;case"bl":r.by=[-u,f];break;case"br":r.by=[u,f];break;case"tr":r.by=[u,-f]}arguments.callee.anim=this.fxanim(s,t,"motion",.5,"easeOut",h)}),this},syncFx:function(){return this.fxDefaults=Ext.apply(this.fxDefaults||{},{block:!1,concurrent:!0,stopFx:!1}),this},sequenceFx:function(){return this.fxDefaults=Ext.apply(this.fxDefaults||{},{block:!1,concurrent:!1,stopFx:!1}),this},nextFx:function(){var n=this.fxQueue[0];n&&n.call(this)},hasActiveFx:function(){return this.fxQueue&&this.fxQueue[0]},stopFx:function(){if(this.hasActiveFx()){var n=this.fxQueue[0];n&&n.anim&&n.anim.isAnimated()&&(this.fxQueue=[n],n.anim.stop(!0))}return this},beforeFx:function(n){return this.hasActiveFx()&&!n.concurrent?n.stopFx?(this.stopFx(),!0):!1:!0},hasFxBlock:function(){var n=this.fxQueue;return n&&n[0]&&n[0].block},queueFx:function(n,t){if(this.fxQueue||(this.fxQueue=[]),!this.hasFxBlock())if(Ext.applyIf(n,this.fxDefaults),n.concurrent)t.call(this);else{var i=this.beforeFx(n);t.block=n.block;this.fxQueue.push(t);i&&this.nextFx()}return this},fxWrap:function(n,t,i){var r,u,f;return t.wrap&&(r=Ext.get(t.wrap))||(t.fixPosition&&(u=this.getXY()),f=document.createElement("div"),f.style.visibility=i,r=Ext.get(this.dom.parentNode.insertBefore(f,this.dom)),r.setPositioning(n),r.getStyle("position")=="static"&&r.position("relative"),this.clearPositioning("auto"),r.clip(),r.dom.appendChild(this.dom),u&&r.setXY(u)),r},fxUnwrap:function(n,t,i){this.clearPositioning();this.setPositioning(t);i.wrap||(n.dom.parentNode.insertBefore(this.dom,n.dom),n.remove())},getFxRestore:function(){var n=this.dom.style;return{pos:this.getPositioning(),width:n.width,height:n.height}},afterFx:function(n){n.afterStyle&&this.applyStyles(n.afterStyle);n.afterCls&&this.addClass(n.afterCls);n.remove===!0&&this.remove();Ext.callback(n.callback,n.scope,[this]);n.concurrent||(this.fxQueue.shift(),this.nextFx())},getFxEl:function(){return Ext.get(this.dom)},fxanim:function(n,t,i,r,u,f){i=i||"run";t=t||{};var e=Ext.lib.Anim[i](this.dom,n,t.duration||r||.35,t.easing||u||"easeOut",function(){Ext.callback(f,this)},this);return t.anim=e,e}};Ext.Fx.resize=Ext.Fx.scale;Ext.apply(Ext.Element.prototype,Ext.Fx);Ext.CompositeElement=function(n){this.elements=[];this.addElements(n)};Ext.CompositeElement.prototype={isComposite:!0,addElements:function(n){var i,r,t,u;if(!n)return this;for(typeof n=="string"&&(n=Ext.Element.selectorFunction(n)),i=this.elements,r=i.length-1,t=0,u=n.length;t<u;t++)i[++r]=Ext.get(n[t]);return this},fill:function(n){return this.elements=[],this.add(n),this},filter:function(n){var t=[];return this.each(function(i){i.is(n)&&(t[t.length]=i.dom)}),this.fill(t),this},invoke:function(n,t){for(var r=this.elements,i=0,u=r.length;i<u;i++)Ext.Element.prototype[n].apply(r[i],t);return this},add:function(n){return typeof n=="string"?this.addElements(Ext.Element.selectorFunction(n)):n.length!==undefined?this.addElements(n):this.addElements([n]),this},each:function(n,t){for(var r=this.elements,i=0,u=r.length;i<u;i++)if(n.call(t||r[i],r[i],this,i)===!1)break;return this},item:function(n){return this.elements[n]||null},first:function(){return this.item(0)},last:function(){return this.item(this.elements.length-1)},getCount:function(){return this.elements.length},contains:function(n){return this.indexOf(n)!==-1},indexOf:function(n){return this.elements.indexOf(Ext.get(n))},removeElement:function(n,t){var r,f,i,u;if(n instanceof Array){for(r=0,f=n.length;r<f;r++)this.removeElement(n[r]);return this}return i=typeof n=="number"?n:this.indexOf(n),i!==-1&&this.elements[i]&&(t&&(u=this.elements[i],u.dom?u.remove():Ext.removeNode(u)),this.elements.splice(i,1)),this},replaceElement:function(n,t,i){var r=typeof n=="number"?n:this.indexOf(n);return r!==-1&&(i?this.elements[r].replaceWith(t):this.elements.splice(r,1,Ext.get(t))),this},clear:function(){this.elements=[]}},function(){Ext.CompositeElement.createCall=function(n,t){n[t]||(n[t]=function(){return this.invoke(t,arguments)})};for(var n in Ext.Element.prototype)typeof Ext.Element.prototype[n]=="function"&&Ext.CompositeElement.createCall(Ext.CompositeElement.prototype,n)}();Ext.CompositeElementLite=function(n){Ext.CompositeElementLite.superclass.constructor.call(this,n);this.el=new Ext.Element.Flyweight};Ext.extend(Ext.CompositeElementLite,Ext.CompositeElement,{addElements:function(n){var i,r,t,u;if(n)if(n instanceof Array)this.elements=this.elements.concat(n);else for(i=this.elements,r=i.length-1,t=0,u=n.length;t<u;t++)i[++r]=n[t];return this},invoke:function(n,t){for(var r=this.elements,u=this.el,i=0,f=r.length;i<f;i++)u.dom=r[i],Ext.Element.prototype[n].apply(u,t);return this},item:function(n){return this.elements[n]?(this.el.dom=this.elements[n],this.el):null},addListener:function(n,t,i,r){for(var f=this.elements,u=0,e=f.length;u<e;u++)Ext.EventManager.on(f[u],n,t,i||f[u],r);return this},each:function(n,t){for(var u=this.elements,r=this.el,i=0,f=u.length;i<f;i++)if(r.dom=u[i],n.call(t||r,r,this,i)===!1)break;return this},indexOf:function(n){return this.elements.indexOf(Ext.getDom(n))},replaceElement:function(n,t,i){var u=typeof n=="number"?n:this.indexOf(n),r;return u!==-1&&(t=Ext.getDom(t),i&&(r=this.elements[u],r.parentNode.insertBefore(t,r),Ext.removeNode(r)),this.elements.splice(u,1,t)),this}});Ext.CompositeElementLite.prototype.on=Ext.CompositeElementLite.prototype.addListener;Ext.DomQuery&&(Ext.Element.selectorFunction=Ext.DomQuery.select);Ext.Element.select=function(n,t,i){var r;if(typeof n=="string")r=Ext.Element.selectorFunction(n,i);else if(n.length!==undefined)r=n;else throw"Invalid selector";return t===!0?new Ext.CompositeElement(r):new Ext.CompositeElementLite(r)};Ext.select=Ext.Element.select;Ext.data.Connection=function(n){Ext.apply(this,n);this.addEvents("beforerequest","requestcomplete","requestexception");Ext.data.Connection.superclass.constructor.call(this)};Ext.extend(Ext.data.Connection,Ext.util.Observable,{timeout:3e4,autoAbort:!1,disableCaching:!0,request:function(n){var t,e,i,r,o,s,u,h,f;if(this.fireEvent("beforerequest",this,n)!==!1){if(t=n.params,typeof t=="function"&&(t=t.call(n.scope||window,n)),typeof t=="object"&&(t=Ext.urlEncode(t)),this.extraParams&&(e=Ext.urlEncode(this.extraParams),t=t?t+"&"+e:e),i=n.url||this.url,typeof i=="function"&&(i=i.call(n.scope||window,n)),n.form){if(r=Ext.getDom(n.form),i=i||r.action,o=r.getAttribute("enctype"),n.isUpload||o&&o.toLowerCase()=="multipart/form-data")return this.doFormUpload(n,t,i);s=Ext.lib.Ajax.serializeForm(r);t=t?t+"&"+s:s}return u=n.headers,this.defaultHeaders&&(u=Ext.apply(u||{},this.defaultHeaders),n.headers||(n.headers=u)),h={success:this.handleResponse,failure:this.handleFailure,scope:this,argument:{options:n},timeout:n.timeout||this.timeout},f=n.method||this.method||(t?"POST":"GET"),(f=="GET"&&this.disableCaching&&n.disableCaching!==!1||n.disableCaching===!0)&&(i+=(i.indexOf("?")!=-1?"&":"?")+"_dc="+(new Date).getTime()),typeof n.autoAbort=="boolean"?n.autoAbort&&this.abort():this.autoAbort!==!1&&this.abort(),(f=="GET"&&t||n.xmlData||n.jsonData)&&(i+=(i.indexOf("?")!=-1?"&":"?")+t,t=""),this.transId=Ext.lib.Ajax.request(f,i,h,t,n),this.transId}return Ext.callback(n.callback,n.scope,[n,null,null]),null},isLoading:function(n){return n?Ext.lib.Ajax.isCallInProgress(n):this.transId?!0:!1},abort:function(n){(n||this.isLoading())&&Ext.lib.Ajax.abort(n||this.transId)},handleResponse:function(n){this.transId=!1;var t=n.argument.options;n.argument=t?t.argument:null;this.fireEvent("requestcomplete",this,n,t);Ext.callback(t.success,t.scope,[n,t]);Ext.callback(t.callback,t.scope,[t,!0,n])},handleFailure:function(n,t){this.transId=!1;var i=n.argument.options;n.argument=i?i.argument:null;this.fireEvent("requestexception",this,n,i,t);Ext.callback(i.failure,i.scope,[n,i]);Ext.callback(i.callback,i.scope,[i,!1,n])},doFormUpload:function(n,t,i){function c(){var i={responseText:"",responseXML:null},t;i.argument=n?n.argument:null;try{t=Ext.isIE?r.contentWindow.document:r.contentDocument||window.frames[f].document;t&&t.body&&(i.responseText=t.body.innerHTML);i.responseXML=t&&t.XMLDocument?t.XMLDocument:t}catch(u){}Ext.EventManager.removeListener(r,"load",c,this);this.fireEvent("requestcomplete",this,i,n);Ext.callback(n.success,n.scope,[i,n]);Ext.callback(n.callback,n.scope,[n,!0,i]);setTimeout(function(){Ext.removeNode(r)},100)}var f=Ext.id(),r=document.createElement("iframe"),u,o,e,s,h,l;if(r.id=f,r.name=f,r.className="x-hidden",Ext.isIE&&(r.src=Ext.SSL_SECURE_URL),document.body.appendChild(r),Ext.isIE&&(document.frames[f].name=f),u=Ext.getDom(n.form),u.target=f,u.method="POST",u.enctype=u.encoding="multipart/form-data",i&&(u.action=i),t){o=[];t=Ext.urlDecode(t,!1);for(s in t)t.hasOwnProperty(s)&&(e=document.createElement("input"),e.type="hidden",e.name=s,e.value=t[s],u.appendChild(e),o.push(e))}Ext.EventManager.on(r,"load",c,this);if(u.submit(),o)for(h=0,l=o.length;h<l;h++)Ext.removeNode(o[h])}});Ext.Ajax=new Ext.data.Connection({autoAbort:!1,serializeForm:function(n){return Ext.lib.Ajax.serializeForm(n)}});Ext.Updater=function(n,t){if(n=Ext.get(n),!t&&n.updateManager)return n.updateManager;this.el=n;this.defaultUrl=null;this.addEvents("beforeupdate","update","failure");var i=Ext.Updater.defaults;this.sslBlankUrl=i.sslBlankUrl;this.disableCaching=i.disableCaching;this.indicatorText=i.indicatorText;this.showLoadIndicator=i.showLoadIndicator;this.timeout=i.timeout;this.loadScripts=i.loadScripts;this.transaction=null;this.autoRefreshProcId=null;this.refreshDelegate=this.refresh.createDelegate(this);this.updateDelegate=this.update.createDelegate(this);this.formUpdateDelegate=this.formUpdate.createDelegate(this);this.renderer||(this.renderer=new Ext.Updater.BasicRenderer);Ext.Updater.superclass.constructor.call(this)};Ext.extend(Ext.Updater,Ext.util.Observable,{getEl:function(){return this.el},update:function(n,t,i,r){var f,u,e,o;this.fireEvent("beforeupdate",this.el,n,t)!==!1&&(f=this.method,typeof n=="object"&&(u=n,n=u.url,t=t||u.params,i=i||u.callback,r=r||u.discardUrl,e=u.scope,typeof u.method!="undefined"&&(f=u.method),typeof u.nocache!="undefined"&&(this.disableCaching=u.nocache),typeof u.text!="undefined"&&(this.indicatorText='<div class="loading-indicator">'+u.text+"<\/div>"),typeof u.scripts!="undefined"&&(this.loadScripts=u.scripts),typeof u.timeout!="undefined"&&(this.timeout=u.timeout)),this.showLoading(),r||(this.defaultUrl=n),typeof n=="function"&&(n=n.call(this)),f=f||(t?"POST":"GET"),f=="GET"&&(n=this.prepareUrl(n)),o=Ext.apply(u||{},{url:n,params:typeof t=="function"&&e?t.createDelegate(e):t,success:this.processSuccess,failure:this.processFailure,scope:this,callback:undefined,timeout:this.timeout*1e3,argument:{options:u,url:n,form:null,callback:i,scope:e||window,params:t}}),this.transaction=Ext.Ajax.request(o))},formUpdate:function(n,t,i,r){this.fireEvent("beforeupdate",this.el,n,t)!==!1&&(typeof t=="function"&&(t=t.call(this)),n=Ext.getDom(n),this.transaction=Ext.Ajax.request({form:n,url:t,success:this.processSuccess,failure:this.processFailure,scope:this,timeout:this.timeout*1e3,argument:{url:t,form:n,callback:r,reset:i}}),this.showLoading.defer(1,this))},refresh:function(n){this.defaultUrl!=null&&this.update(this.defaultUrl,null,n,!0)},startAutoRefresh:function(n,t,i,r,u){u&&this.update(t||this.defaultUrl,i,r,!0);this.autoRefreshProcId&&clearInterval(this.autoRefreshProcId);this.autoRefreshProcId=setInterval(this.update.createDelegate(this,[t||this.defaultUrl,i,r,!0]),n*1e3)},stopAutoRefresh:function(){this.autoRefreshProcId&&(clearInterval(this.autoRefreshProcId),delete this.autoRefreshProcId)},isAutoRefreshing:function(){return this.autoRefreshProcId?!0:!1},showLoading:function(){this.showLoadIndicator&&this.el.update(this.indicatorText)},prepareUrl:function(n){if(this.disableCaching){var t="_dc="+(new Date).getTime();n+=n.indexOf("?")!==-1?"&"+t:"?"+t}return n},processSuccess:function(n){if(this.transaction=null,n.argument.form&&n.argument.reset)try{n.argument.form.reset()}catch(t){}this.loadScripts?this.renderer.render(this.el,n,this,this.updateComplete.createDelegate(this,[n])):(this.renderer.render(this.el,n,this),this.updateComplete(n))},updateComplete:function(n){this.fireEvent("update",this.el,n);typeof n.argument.callback=="function"&&n.argument.callback.call(n.argument.scope,this.el,!0,n,n.argument.options)},processFailure:function(n){this.transaction=null;this.fireEvent("failure",this.el,n);typeof n.argument.callback=="function"&&n.argument.callback.call(n.argument.scope,this.el,!1,n,n.argument.options)},setRenderer:function(n){this.renderer=n},getRenderer:function(){return this.renderer},setDefaultUrl:function(n){this.defaultUrl=n},abort:function(){this.transaction&&Ext.Ajax.abort(this.transaction)},isUpdating:function(){return this.transaction?Ext.Ajax.isLoading(this.transaction):!1}});Ext.Updater.defaults={timeout:30,loadScripts:!1,sslBlankUrl:Ext.SSL_SECURE_URL||"javascript:false",disableCaching:!1,showLoadIndicator:!0,indicatorText:'<div class="loading-indicator">Loading...<\/div>'};Ext.Updater.updateElement=function(n,t,i,r){var u=Ext.get(n).getUpdater();Ext.apply(u,r);u.update(t,i,r?r.callback:null)};Ext.Updater.update=Ext.Updater.updateElement;Ext.Updater.BasicRenderer=function(){};Ext.Updater.BasicRenderer.prototype={render:function(n,t,i,r){n.update(t.responseText,i.loadScripts,r)}};Ext.UpdateManager=Ext.Updater;Date.parseFunctions={count:0};Date.parseRegexes=[];Date.formatFunctions={count:0};Date.prototype.dateFormat=function(n){Date.formatFunctions[n]==null&&Date.createNewFormat(n);var t=Date.formatFunctions[n];return this[t]()};Date.prototype.format=Date.prototype.dateFormat;Date.createNewFormat=function(n){var f="format"+Date.formatFunctions.count++,u;Date.formatFunctions[n]=f;var t="Date.prototype."+f+" = function(){return ",i=!1,r="";for(u=0;u<n.length;++u)r=n.charAt(u),i||r!="\\"?i?(i=!1,t+="'"+String.escape(r)+"' + "):t+=Date.getFormatCode(r):i=!0;eval(t.substring(0,t.length-3)+";}")};Date.getFormatCode=function(n){var i;switch(n){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.getShortDayName(this.getDay()) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"N":return"(this.getDay() ? this.getDay() : 7) + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"String.leftPad(this.getWeekOfYear(), 2, '0') + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.getShortMonthName(this.getMonth()) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"o":return"(this.getFullYear() + (this.getWeekOfYear() == 1 && this.getMonth() > 0 ? +1 : (this.getWeekOfYear() >= 52 && this.getMonth() < 11 ? -1 : 0))) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() % 12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"u":return"String.leftPad(this.getMilliseconds(), 3, '0') + ";case"O":return"this.getGMTOffset() + ";case"P":return"this.getGMTOffset(true) + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";case"c":for(var f=Date.getFormatCode,r="Y-m-dTH:i:sP",u="",t=0,e=r.length;t<e;++t)i=r.charAt(t),u+=i=="T"?"'T' + ":f(i);return u;case"U":return"Math.round(this.getTime() / 1000) + ";default:return"'"+String.escape(n)+"' + "}};Date.parseDate=function(n,t){Date.parseFunctions[t]==null&&Date.createParser(t);var i=Date.parseFunctions[t];return Date[i](n)};Date.createParser=function(n){var o="parse"+Date.parseFunctions.count++,s=Date.parseRegexes.length,h=1,u,t;Date.parseFunctions[n]=o;var f="Date."+o+" = function(input){\nvar y = -1, m = -1, d = -1, h = -1, i = -1, s = -1, ms = -1, o, z, u, v;\nvar d = new Date();\ny = d.getFullYear();\nm = d.getMonth();\nd = d.getDate();\nvar results = input.match(Date.parseRegexes["+s+"]);\nif (results && results.length > 0) {",e="",i=!1,r="";for(u=0;u<n.length;++u)r=n.charAt(u),i||r!="\\"?i?(i=!1,e+=String.escape(r)):(t=Date.formatCodeToRegex(r,h),h+=t.g,e+=t.s,t.g&&t.c&&(f+=t.c)):i=!0;f+="if (u)\n{v = new Date(u * 1000);}else if (y >= 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0 && ms >= 0)\n{v = new Date(y, m, d, h, i, s, ms);}\nelse if (y >= 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n{v = new Date(y, m, d, h, i, s);}\nelse if (y >= 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n{v = new Date(y, m, d, h, i);}\nelse if (y >= 0 && m >= 0 && d > 0 && h >= 0)\n{v = new Date(y, m, d, h);}\nelse if (y >= 0 && m >= 0 && d > 0)\n{v = new Date(y, m, d);}\nelse if (y >= 0 && m >= 0)\n{v = new Date(y, m);}\nelse if (y >= 0)\n{v = new Date(y);}\n}return (v && (z || o))?\n    (z ? v.add(Date.SECOND, (v.getTimezoneOffset() * 60) + (z*1)) :\n        v.add(Date.HOUR, (v.getGMTOffset() / 100) + (o / -100))) : v\n;}";Date.parseRegexes[s]=new RegExp("^"+e+"$","i");eval(f)};Date.formatCodeToRegex=function(n,t){var f,i,o;switch(n){case"d":return{g:1,c:"d = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"D":for(f=[],i=0;i<7;f.push(Date.getShortDayName(i)),++i);return{g:0,c:null,s:"(?:"+f.join("|")+")"};case"j":return{g:1,c:"d = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"N":return{g:0,c:null,s:"[1-7]"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"[0-6]"};case"z":return{g:0,c:null,s:"(?:\\d{1,3}"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.getMonthNumber(results["+t+"]), 10);\n",s:"("+Date.monthNames.join("|")+")"};case"m":return{g:1,c:"m = parseInt(results["+t+"], 10) - 1;\n",s:"(\\d{2})"};case"M":for(f=[],i=0;i<12;f.push(Date.getShortMonthName(i)),++i);return{g:1,c:"m = parseInt(Date.getMonthNumber(results["+t+"]), 10);\n",s:"("+f.join("|")+")"};case"n":return{g:1,c:"m = parseInt(results["+t+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"(?:\\d{2})"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"o":case"Y":return{g:1,c:"y = parseInt(results["+t+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+t+"], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+t+"] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+t+"] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":return{g:1,c:"h = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"h":case"H":return{g:1,c:"h = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"i":return{g:1,c:"i = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"u":return{g:1,c:"ms = parseInt(results["+t+"], 10);\n",s:"(\\d{3})"};case"O":return{g:1,c:["o = results[",t,"];\n","var sn = o.substring(0,1);\n","var hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60);\n","var mn = o.substring(3,5) % 60;\n","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))?\n","    (sn + String.leftPad(hr, 2, 0) + String.leftPad(mn, 2, 0)) : null;\n"].join(""),s:"([+-]\\d{4})"};case"P":return{g:1,c:["o = results[",t,"];\n","var sn = o.substring(0,1);\n","var hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60);\n","var mn = o.substring(4,6) % 60;\n","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))?\n","    (sn + String.leftPad(hr, 2, 0) + String.leftPad(mn, 2, 0)) : null;\n"].join(""),s:"([+-]\\d{2}:\\d{2})"};case"T":return{g:0,c:null,s:"[A-Z]{1,4}"};case"Z":return{g:1,c:"z = results["+t+"] * 1;\nz = (-43200 <= z && z <= 50400)? z : null;\n",s:"([+-]?\\d{1,5})"};case"c":var u=Date.formatCodeToRegex,e=[],r=[u("Y",1),u("m",2),u("d",3),u("h",4),u("i",5),u("s",6),u("P",7)];for(i=0,o=r.length;i<o;++i)e.push(r[i].c);return{g:1,c:e.join(""),s:r[0].s+"-"+r[1].s+"-"+r[2].s+"T"+r[3].s+":"+r[4].s+":"+r[5].s+r[6].s};case"U":return{g:1,c:"u = parseInt(results["+t+"], 10);\n",s:"(-?\\d+)"};default:return{g:0,c:null,s:Ext.escapeRe(n)}}};Date.prototype.getTimezone=function(){return this.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,4})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")};Date.prototype.getGMTOffset=function(n){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.abs(Math.floor(this.getTimezoneOffset()/60)),2,"0")+(n?":":"")+String.leftPad(this.getTimezoneOffset()%60,2,"0")};Date.prototype.getDayOfYear=function(){var t=0,n;for(Date.daysInMonth[1]=this.isLeapYear()?29:28,n=0;n<this.getMonth();++n)t+=Date.daysInMonth[n];return t+this.getDate()-1};Date.prototype.getWeekOfYear=function(){var n=864e5,t=7*n,r=Date.UTC(this.getFullYear(),this.getMonth(),this.getDate()+3)/n,i=Math.floor(r/7),u=new Date(i*t).getUTCFullYear();return i-Math.floor(Date.UTC(u,0,7)/t)+1};Date.prototype.isLeapYear=function(){var n=this.getFullYear();return(n&3)==0&&(n%100||n%400==0&&n)};Date.prototype.getFirstDayOfMonth=function(){var n=(this.getDay()-(this.getDate()-1))%7;return n<0?n+7:n};Date.prototype.getLastDayOfMonth=function(){var n=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return n<0?n+7:n};Date.prototype.getFirstDateOfMonth=function(){return new Date(this.getFullYear(),this.getMonth(),1)};Date.prototype.getLastDateOfMonth=function(){return new Date(this.getFullYear(),this.getMonth(),this.getDaysInMonth())};Date.prototype.getDaysInMonth=function(){return Date.daysInMonth[1]=this.isLeapYear()?29:28,Date.daysInMonth[this.getMonth()]};Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];Date.getShortMonthName=function(n){return Date.monthNames[n].substring(0,3)};Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Date.getShortDayName=function(n){return Date.dayNames[n].substring(0,3)};Date.y2kYear=50;Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};Date.getMonthNumber=function(n){return Date.monthNumbers[n.substring(0,1).toUpperCase()+n.substring(1,3).toLowerCase()]};Date.prototype.clone=function(){return new Date(this.getTime())};Date.prototype.clearTime=function(n){return n?this.clone().clearTime():(this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this)};Ext.isSafari&&(Date.brokenSetMonth=Date.prototype.setMonth,Date.prototype.setMonth=function(n){if(n<=-1){var t=Math.ceil(-n),i=Math.ceil(t/12),r=t%12?12-t%12:0;return this.setFullYear(this.getFullYear()-i),Date.brokenSetMonth.call(this,r)}return Date.brokenSetMonth.apply(this,arguments)});Date.MILLI="ms";Date.SECOND="s";Date.MINUTE="mi";Date.HOUR="h";Date.DAY="d";Date.MONTH="mo";Date.YEAR="y";Date.prototype.add=function(n,t){var i=this.clone(),r;if(!n||t===0)return i;switch(n.toLowerCase()){case Date.MILLI:i.setMilliseconds(this.getMilliseconds()+t);break;case Date.SECOND:i.setSeconds(this.getSeconds()+t);break;case Date.MINUTE:i.setMinutes(this.getMinutes()+t);break;case Date.HOUR:i.setHours(this.getHours()+t);break;case Date.DAY:i.setDate(this.getDate()+t);break;case Date.MONTH:r=this.getDate();r>28&&(r=Math.min(r,this.getFirstDateOfMonth().add("mo",t).getLastDateOfMonth().getDate()));i.setDate(r);i.setMonth(this.getMonth()+t);break;case Date.YEAR:i.setFullYear(this.getFullYear()+t)}return i};Date.prototype.between=function(n,t){var i=this.getTime();return n.getTime()<=i&&i<=t.getTime()};Ext.util.DelayedTask=function(n,t,i){var r=null,u,f,e=function(){var e=(new Date).getTime();e-f>=u&&(clearInterval(r),r=null,n.apply(t,i||[]))};this.delay=function(o,s,h,c){r&&o!=u&&this.cancel();u=o;f=(new Date).getTime();n=s||n;t=h||t;i=c||i;r||(r=setInterval(e,u))};this.cancel=function(){r&&(clearInterval(r),r=null)}};Ext.util.TaskRunner=function(n){n=n||10;var t=[],i=[],r=0,u=!1,e=function(){u=!1;clearInterval(r);r=0},o=function(){u||(u=!0,r=setInterval(s,n))},f=function(n){i.push(n);n.onStop&&n.onStop.apply(n.scope||n)},s=function(){var o,r,u,n,s,h;if(i.length>0){for(r=0,u=i.length;r<u;r++)t.remove(i[r]);if(i=[],t.length<1){e();return}}for(o=(new Date).getTime(),r=0,u=t.length;r<u;++r){if(n=t[r],s=o-n.taskRunTime,n.interval<=s&&(h=n.run.apply(n.scope||n,n.args||[++n.taskRunCount]),n.taskRunTime=o,h===!1||n.taskRunCount===n.repeat)){f(n);return}n.duration&&n.duration<=o-n.taskStartTime&&f(n)}};this.start=function(n){return t.push(n),n.taskStartTime=(new Date).getTime(),n.taskRunTime=0,n.taskRunCount=0,o(),n};this.stop=function(n){return f(n),n};this.stopAll=function(){e();for(var n=0,r=t.length;n<r;n++)t[n].onStop&&t[n].onStop();t=[];i=[]}};Ext.TaskMgr=new Ext.util.TaskRunner;Ext.util.MixedCollection=function(n,t){this.items=[];this.map={};this.keys=[];this.length=0;this.addEvents("clear","add","replace","remove","sort");this.allowFunctions=n===!0;t&&(this.getKey=t);Ext.util.MixedCollection.superclass.constructor.call(this)};Ext.extend(Ext.util.MixedCollection,Ext.util.Observable,{allowFunctions:!1,add:function(n,t){if(arguments.length==1&&(t=arguments[0],n=this.getKey(t)),typeof n=="undefined"||n===null)this.length++,this.items.push(t),this.keys.push(null);else{var i=this.map[n];if(i)return this.replace(n,t);this.length++;this.items.push(t);this.map[n]=t;this.keys.push(n)}return this.fireEvent("add",this.length-1,t,n),t},getKey:function(n){return n.id},replace:function(n,t){var i,r;return(arguments.length==1&&(t=arguments[0],n=this.getKey(t)),i=this.item(n),typeof n=="undefined"||n===null||typeof i=="undefined")?this.add(n,t):(r=this.indexOfKey(n),this.items[r]=t,this.map[n]=t,this.fireEvent("replace",n,i,t),t)},addAll:function(n){var r,t,u,i;if(arguments.length>1||n instanceof Array)for(r=arguments.length>1?arguments:n,t=0,u=r.length;t<u;t++)this.add(r[t]);else for(i in n)(this.allowFunctions||typeof n[i]!="function")&&this.add(i,n[i])},each:function(n,t){for(var r=[].concat(this.items),i=0,u=r.length;i<u;i++)if(n.call(t||r[i],r[i],i,u)===!1)break},eachKey:function(n,t){for(var i=0,r=this.keys.length;i<r;i++)n.call(t||window,this.keys[i],this.items[i],i,r)},find:function(n,t){for(var i=0,r=this.items.length;i<r;i++)if(n.call(t||window,this.items[i],this.keys[i]))return this.items[i];return null},insert:function(n,t,i){return(arguments.length==2&&(i=arguments[1],t=this.getKey(i)),n>=this.length)?this.add(t,i):(this.length++,this.items.splice(n,0,i),typeof t!="undefined"&&t!=null&&(this.map[t]=i),this.keys.splice(n,0,t),this.fireEvent("add",n,i,t),i)},remove:function(n){return this.removeAt(this.indexOf(n))},removeAt:function(n){var i,t;return n<this.length&&n>=0?(this.length--,i=this.items[n],this.items.splice(n,1),t=this.keys[n],typeof t!="undefined"&&delete this.map[t],this.keys.splice(n,1),this.fireEvent("remove",i,t),i):!1},removeKey:function(n){return this.removeAt(this.indexOfKey(n))},getCount:function(){return this.length},indexOf:function(n){return this.items.indexOf(n)},indexOfKey:function(n){return this.keys.indexOf(n)},item:function(n){var t=typeof this.map[n]!="undefined"?this.map[n]:this.items[n];return typeof t!="function"||this.allowFunctions?t:null},itemAt:function(n){return this.items[n]},key:function(n){return this.map[n]},contains:function(n){return this.indexOf(n)!=-1},containsKey:function(n){return typeof this.map[n]!="undefined"},clear:function(){this.length=0;this.items=[];this.keys=[];this.map={};this.fireEvent("clear")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},_sort:function(n,t,i){var s=String(t).toUpperCase()=="DESC"?-1:1,r,f;i=i||function(n,t){return n-t};var u=[],o=this.keys,e=this.items;for(r=0,f=e.length;r<f;r++)u[u.length]={key:o[r],value:e[r],index:r};for(u.sort(function(t,r){var u=i(t[n],r[n])*s;return u==0&&(u=t.index<r.index?-1:1),u}),r=0,f=u.length;r<f;r++)e[r]=u[r].value,o[r]=u[r].key;this.fireEvent("sort",this)},sort:function(n,t){this._sort("value",n,t)},keySort:function(n,t){this._sort("key",n,t||function(n,t){return String(n).toUpperCase()-String(t).toUpperCase()})},getRange:function(n,t){var u=this.items,r,i;if(u.length<1)return[];if(n=n||0,t=Math.min(typeof t=="undefined"?this.length-1:t,this.length-1),r=[],n<=t)for(i=n;i<=t;i++)r[r.length]=u[i];else for(i=n;i>=t;i--)r[r.length]=u[i];return r},filter:function(n,t,i,r){return Ext.isEmpty(t,!1)?this.clone():(t=this.createValueMatcher(t,i,r),this.filterBy(function(i){return i&&t.test(i[n])}))},filterBy:function(n,t){var u=new Ext.util.MixedCollection,f,r,i,e;for(u.getKey=this.getKey,f=this.keys,r=this.items,i=0,e=r.length;i<e;i++)n.call(t||this,r[i],f[i])&&u.add(f[i],r[i]);return u},findIndex:function(n,t,i,r,u){return Ext.isEmpty(t,!1)?-1:(t=this.createValueMatcher(t,r,u),this.findIndexBy(function(i){return i&&t.test(i[n])},null,i))},findIndexBy:function(n,t,i){for(var f=this.keys,u=this.items,r=i||0,e=u.length;r<e;r++)if(n.call(t||this,u[r],f[r]))return r;if(typeof i=="number"&&i>0)for(r=0;r<i;r++)if(n.call(t||this,u[r],f[r]))return r;return-1},createValueMatcher:function(n,t,i){return n.exec||(n=String(n),n=new RegExp((t===!0?"":"^")+Ext.escapeRe(n),i?"":"i")),n},clone:function(){for(var t=new Ext.util.MixedCollection,r=this.keys,i=this.items,n=0,u=i.length;n<u;n++)t.add(r[n],i[n]);return t.getKey=this.getKey,t}});Ext.util.MixedCollection.prototype.get=Ext.util.MixedCollection.prototype.item;Ext.util.JSON=new function(){var t={}.hasOwnProperty?!0:!1,n=function(n){return n<10?"0"+n:n},i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},r=function(n){return/["\\\x00-\x1f]/.test(n)?'"'+n.replace(/([\x00-\x1f\\"])/g,function(n,t){var r=i[t];return r?r:(r=t.charCodeAt(),"\\u00"+Math.floor(r/16).toString(16)+(r%16).toString(16))})+'"':'"'+n+'"'},u=function(n){for(var t=["["],u,f=n.length,r,i=0;i<f;i+=1){r=n[i];switch(typeof r){case"undefined":case"function":case"unknown":break;default:u&&t.push(",");t.push(r===null?"null":Ext.util.JSON.encode(r));u=!0}}return t.push("]"),t.join("")},f=function(t){return'"'+t.getFullYear()+"-"+n(t.getMonth()+1)+"-"+n(t.getDate())+"T"+n(t.getHours())+":"+n(t.getMinutes())+":"+n(t.getSeconds())+'"'};this.encode=function(n){if(typeof n=="undefined"||n===null)return"null";if(n instanceof Array)return u(n);if(n instanceof Date)return f(n);if(typeof n=="string")return r(n);if(typeof n=="number")return isFinite(n)?String(n):"null";if(typeof n=="boolean")return String(n);var i=["{"],s,e,o;for(e in n)if(!t||n.hasOwnProperty(e)){o=n[e];switch(typeof o){case"undefined":case"function":case"unknown":break;default:s&&i.push(",");i.push(this.encode(e),":",o===null?"null":this.encode(o));s=!0}}return i.push("}"),i.join("")};this.decode=function(n){return eval("("+n+")")}};Ext.encode=Ext.util.JSON.encode;Ext.decode=Ext.util.JSON.decode;Ext.util.Format=function(){var n=/^\s+|\s+$/g;return{ellipsis:function(n,t){return n&&n.length>t?n.substr(0,t-3)+"...":n},undef:function(n){return n!==undefined?n:""},defaultValue:function(n,t){return n!==undefined&&n!==""?n:t},htmlEncode:function(n){return n?String(n).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;"):n},htmlDecode:function(n){return n?String(n).replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"'):n},trim:function(t){return String(t).replace(n,"")},substr:function(n,t,i){return String(n).substr(t,i)},lowercase:function(n){return String(n).toLowerCase()},uppercase:function(n){return String(n).toUpperCase()},capitalize:function(n){return n?n.charAt(0).toUpperCase()+n.substr(1).toLowerCase():n},call:function(n,t){if(arguments.length>2){var i=Array.prototype.slice.call(arguments,2);return i.unshift(n),eval(t).apply(window,i)}return eval(t).call(window,n)},usMoney:function(n){n=Math.round((+n)*100)/100;n=n==Math.floor(n)?n+".00":n*10==Math.floor(n*10)?n+"0":n;n=String(n);for(var i=n.split("."),t=i[0],u=i[1]?"."+i[1]:".00",r=/(\d+)(\d{3})/;r.test(t);)t=t.replace(r,"$1,$2");return(n=t+u,n.charAt(0)=="-")?"-$"+n.substr(1):"$"+n},date:function(n,t){return n?(n instanceof Date||(n=new Date(Date.parse(n))),n.dateFormat(t||"m/d/Y")):""},dateRenderer:function(n){return function(t){return Ext.util.Format.date(t,n)}},stripTagsRE:/<\/?[^>]+>/gi,stripTags:function(n){return n?String(n).replace(this.stripTagsRE,""):n},stripScriptsRe:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,stripScripts:function(n){return n?String(n).replace(this.stripScriptsRe,""):n},fileSize:function(n){return n<1024?n+" bytes":n<1048576?Math.round(n*10/1024)/10+" KB":Math.round(n*10/1048576)/10+" MB"},math:function(){var n={};return function(t,i){return n[i]||(n[i]=new Function("v","return v "+i+";")),n[i](t)}}()}}();Ext.XTemplate=function(){var t,o;Ext.XTemplate.superclass.constructor.apply(this,arguments);t=this.html;t=["<tpl>",t,"<\/tpl>"].join("");for(var i,s=0,r=[];i=t.match(/<tpl\b[^>]*>((?:(?=([^<]+))\2|<(?!tpl\b[^>]*>))*?)<\/tpl>/);){var h=i[0].match(/^<tpl\b[^>]*?for="(.*?)"/),f=i[0].match(/^<tpl\b[^>]*?if="(.*?)"/),e=i[0].match(/^<tpl\b[^>]*?exec="(.*?)"/),u=null,c=null,l=null,n=h&&h[1]?h[1]:"";if(f&&(u=f&&f[1]?f[1]:null,u&&(c=new Function("values","parent","xindex","xcount","with(values){ return "+Ext.util.Format.htmlDecode(u)+"; }"))),e&&(u=e&&e[1]?e[1]:null,u&&(l=new Function("values","parent","xindex","xcount","with(values){ "+Ext.util.Format.htmlDecode(u)+"; }"))),n)switch(n){case".":n=new Function("values","parent","with(values){ return values; }");break;case"..":n=new Function("values","parent","with(values){ return parent; }");break;default:n=new Function("values","parent","with(values){ return "+n+"; }")}r.push({id:s,target:n,exec:l,test:c,body:i[1]||""});t=t.replace(i[0],"{xtpl"+s+"}");++s}for(o=r.length-1;o>=0;--o)this.compileTpl(r[o]);this.master=r[r.length-1];this.tpls=r};Ext.extend(Ext.XTemplate,Ext.Template,{re:/\{([\w-\.\#]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\\]\s?[\d\.\+\-\*\\\(\)]+)?\}/g,codeRe:/\{\[((?:\\\]|.|\n)*?)\]\}/g,applySubTemplate:function(n,t,i,r,u){var f=this.tpls[n],e,s,o,h;if(f.test&&!f.test.call(this,t,i,r,u)||f.exec&&f.exec.call(this,t,i,r,u))return"";if(e=f.target?f.target.call(this,t,i):t,i=f.target?t:i,f.target&&e instanceof Array){for(s=[],o=0,h=e.length;o<h;o++)s[s.length]=f.compiled.call(this,e[o],i,o+1,h);return s.join("")}return f.compiled.call(this,e,i,r,u)},compileTpl:function(n){var e=Ext.util.Format,f=this.disableFormats!==!0,i=Ext.isGecko?"+":",",r=function(n,t,r,u,e){if(t.substr(0,4)=="xtpl")return"'"+i+"this.applySubTemplate("+t.substr(4)+", values, parent, xindex, xcount)"+i+"'";var o;return o=t==="."?"values":t==="#"?"xindex":t.indexOf(".")!=-1?t:"values['"+t+"']",e&&(o="("+o+e+")"),r&&f?(u=u?","+u:"",r.substr(0,5)!="this."?r="fm."+r+"(":(r='this.call("'+r.substr(5)+'", ',u=", values")):(u="",r="("+o+" === undefined ? '' : "),"'"+i+r+o+u+")"+i+"'"},u=function(n,t){return"'"+i+"("+t+")"+i+"'"},t;return Ext.isGecko?t="tpl.compiled = function(values, parent, xindex, xcount){ return '"+n.body.replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,r).replace(this.codeRe,u)+"';};":(t=["tpl.compiled = function(values, parent, xindex, xcount){ return ['"],t.push(n.body.replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,r).replace(this.codeRe,u)),t.push("'].join('');};"),t=t.join("")),eval(t),this},apply:function(n){return this.master.compiled.call(this,n,{},1,1)},applyTemplate:function(n){return this.master.compiled.call(this,n,{},1,1)},compile:function(){return this}});Ext.XTemplate.from=function(n){return n=Ext.getDom(n),new Ext.XTemplate(n.value||n.innerHTML)};Ext.util.CSS=function(){var t=null,n=document,i=/(-[a-z])/gi,r=function(n,t){return t.charAt(1).toUpperCase()};return{createStyleSheet:function(t,i){var u,f=n.getElementsByTagName("head")[0],r=n.createElement("style");if(r.setAttribute("type","text/css"),i&&r.setAttribute("id",i),Ext.isIE)f.appendChild(r),u=r.styleSheet,u.cssText=t;else{try{r.appendChild(n.createTextNode(t))}catch(e){r.cssText=t}f.appendChild(r);u=r.styleSheet?r.styleSheet:r.sheet||n.styleSheets[n.styleSheets.length-1]}return this.cacheStyleSheet(u),u},removeStyleSheet:function(t){var i=n.getElementById(t);i&&i.parentNode.removeChild(i)},swapStyleSheet:function(t,i){this.removeStyleSheet(t);var r=n.createElement("link");r.setAttribute("rel","stylesheet");r.setAttribute("type","text/css");r.setAttribute("id",t);r.setAttribute("href",i);n.getElementsByTagName("head")[0].appendChild(r)},refreshCache:function(){return this.getRules(!0)},cacheStyleSheet:function(n){var r,i;t||(t={});try{for(r=n.cssRules||n.rules,i=r.length-1;i>=0;--i)t[r[i].selectorText]=r[i]}catch(u){}},getRules:function(i){var u,r,f;if(t==null||i)for(t={},u=n.styleSheets,r=0,f=u.length;r<f;r++)try{this.cacheStyleSheet(u[r])}catch(e){}return t},getRule:function(n,t){var r=this.getRules(t),i;if(!(n instanceof Array))return r[n];for(i=0;i<n.length;i++)if(r[n[i]])return r[n[i]];return null},updateRule:function(n,t,u){var e,f;if(n instanceof Array){for(f=0;f<n.length;f++)if(this.updateRule(n[f],t,u))return!0}else if(e=this.getRule(n),e)return e.style[t.replace(i,r)]=u,!0;return!1}}}();Ext.util.ClickRepeater=function(n,t){this.el=Ext.get(n);this.el.unselectable();Ext.apply(this,t);this.addEvents("mousedown","click","mouseup");this.el.on("mousedown",this.handleMouseDown,this);if(this.preventDefault||this.stopDefault)this.el.on("click",function(n){this.preventDefault&&n.preventDefault();this.stopDefault&&n.stopEvent()},this);if(this.handler)this.on("click",this.handler,this.scope||this);Ext.util.ClickRepeater.superclass.constructor.call(this)};Ext.extend(Ext.util.ClickRepeater,Ext.util.Observable,{interval:20,delay:250,preventDefault:!0,stopDefault:!1,timer:0,handleMouseDown:function(){clearTimeout(this.timer);this.el.blur();this.pressClass&&this.el.addClass(this.pressClass);this.mousedownTime=new Date;Ext.getDoc().on("mouseup",this.handleMouseUp,this);this.el.on("mouseout",this.handleMouseOut,this);this.fireEvent("mousedown",this);this.fireEvent("click",this);this.accelerate&&(this.delay=400);this.timer=this.click.defer(this.delay||this.interval,this)},click:function(){this.fireEvent("click",this);this.timer=this.click.defer(this.accelerate?this.easeOutExpo(this.mousedownTime.getElapsed(),400,-390,12e3):this.interval,this)},easeOutExpo:function(n,t,i,r){return n==r?t+i:i*(-Math.pow(2,-10*n/r)+1)+t},handleMouseOut:function(){clearTimeout(this.timer);this.pressClass&&this.el.removeClass(this.pressClass);this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(){this.el.un("mouseover",this.handleMouseReturn);this.pressClass&&this.el.addClass(this.pressClass);this.click()},handleMouseUp:function(){clearTimeout(this.timer);this.el.un("mouseover",this.handleMouseReturn);this.el.un("mouseout",this.handleMouseOut);Ext.getDoc().un("mouseup",this.handleMouseUp);this.el.removeClass(this.pressClass);this.fireEvent("mouseup",this)}});Ext.KeyNav=function(n,t){this.el=Ext.get(n);Ext.apply(this,t);this.disabled||(this.disabled=!0,this.enable())};Ext.KeyNav.prototype={disabled:!1,defaultEventAction:"stopEvent",forceKeyDown:!1,prepareEvent:function(n){var t=n.getKey(),i=this.keyToHandler[t];Ext.isSafari&&i&&t>=37&&t<=40&&n.stopEvent()},relay:function(n){var i=n.getKey(),t=this.keyToHandler[i];t&&this[t]&&this.doRelay(n,this[t],t)!==!0&&n[this.defaultEventAction]()},doRelay:function(n,t){return t.call(this.scope||this,n)},enter:!1,left:!1,right:!1,up:!1,down:!1,tab:!1,esc:!1,pageUp:!1,pageDown:!1,del:!1,home:!1,end:!1,keyToHandler:{37:"left",39:"right",38:"up",40:"down",33:"pageUp",34:"pageDown",46:"del",36:"home",35:"end",13:"enter",27:"esc",9:"tab"},enable:function(){if(this.disabled){if(this.forceKeyDown||Ext.isIE||Ext.isAir)this.el.on("keydown",this.relay,this);else{this.el.on("keydown",this.prepareEvent,this);this.el.on("keypress",this.relay,this)}this.disabled=!1}},disable:function(){this.disabled||(this.forceKeyDown||Ext.isIE||Ext.isAir?this.el.un("keydown",this.relay):(this.el.un("keydown",this.prepareEvent),this.el.un("keypress",this.relay)),this.disabled=!0)}};Ext.KeyMap=function(n,t,i){this.el=Ext.get(n);this.eventName=i||"keydown";this.bindings=[];t&&this.addBinding(t);this.enable()};Ext.KeyMap.prototype={stopEvent:!1,addBinding:function(n){var i,f,e,u,r,h,c;if(n instanceof Array){for(i=0,r=n.length;i<r;i++)this.addBinding(n[i]);return}var t=n.key,l=n.shift,a=n.ctrl,v=n.alt,o=n.fn||n.handler,s=n.scope;if(typeof t=="string"){for(f=[],e=t.toUpperCase(),u=0,r=e.length;u<r;u++)f.push(e.charCodeAt(u));t=f}h=t instanceof Array;c=function(n){var i,r,u;if((!l||n.shiftKey)&&(!a||n.ctrlKey)&&(!v||n.altKey))if(i=n.getKey(),h){for(r=0,u=t.length;r<u;r++)if(t[r]==i){this.stopEvent&&n.stopEvent();o.call(s||window,i,n);return}}else i==t&&(this.stopEvent&&n.stopEvent(),o.call(s||window,i,n))};this.bindings.push(c)},on:function(n,t,i){var r,u,f,e;typeof n!="object"||n instanceof Array?r=n:(r=n.key,u=n.shift,f=n.ctrl,e=n.alt);this.addBinding({key:r,shift:u,ctrl:f,alt:e,fn:t,scope:i})},handleKeyDown:function(n){var i,t,r;if(this.enabled)for(i=this.bindings,t=0,r=i.length;t<r;t++)i[t].call(this,n)},isEnabled:function(){return this.enabled},enable:function(){if(!this.enabled){this.el.on(this.eventName,this.handleKeyDown,this);this.enabled=!0}},disable:function(){this.enabled&&(this.el.removeListener(this.eventName,this.handleKeyDown,this),this.enabled=!1)}};Ext.util.TextMetrics=function(){var n;return{measure:function(t,i,r){return n||(n=Ext.util.TextMetrics.Instance(t,r)),n.bind(t),n.setFixedWidth(r||"auto"),n.getSize(i)},createInstance:function(n,t){return Ext.util.TextMetrics.Instance(n,t)}}}();Ext.util.TextMetrics.Instance=function(n,t){var i=new Ext.Element(document.createElement("div")),r;return document.body.appendChild(i.dom),i.position("absolute"),i.setLeftTop(-1e3,-1e3),i.hide(),t&&i.setWidth(t),r={getSize:function(n){i.update(n);var t=i.getSize();return i.update(""),t},bind:function(n){i.setStyle(Ext.fly(n).getStyles("font-size","font-style","font-weight","font-family","line-height"))},setFixedWidth:function(n){i.setWidth(n)},getWidth:function(n){return i.dom.style.width="auto",this.getSize(n).width},getHeight:function(n){return this.getSize(n).height}},r.bind(n),r};Ext.Element.measureText=Ext.util.TextMetrics.measure,function(){var n=Ext.EventManager,t=Ext.lib.Dom;Ext.dd.DragDrop=function(n,t,i){n&&this.init(n,t,i)};Ext.dd.DragDrop.prototype={id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:!1,lock:function(){this.locked=!0},unlock:function(){this.locked=!1},isTarget:!0,padding:null,_domRef:null,__ygDragDrop:!0,constrainX:!1,constrainY:!1,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:!1,xTicks:null,yTicks:null,primaryButtonOnly:!0,available:!1,hasOuterHandles:!1,b4StartDrag:function(){},startDrag:function(){},b4Drag:function(){},onDrag:function(){},onDragEnter:function(){},b4DragOver:function(){},onDragOver:function(){},b4DragOut:function(){},onDragOut:function(){},b4DragDrop:function(){},onDragDrop:function(){},onInvalidDrop:function(){},b4EndDrag:function(){},endDrag:function(){},b4MouseDown:function(){},onMouseDown:function(){},onMouseUp:function(){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(n,t){var o,s,h;typeof t=="number"&&(t={left:t,right:t,top:t,bottom:t});t=t||this.defaultPadding;var r=Ext.get(this.getEl()).getBox(),f=Ext.get(n),u=f.getScroll(),i,e=f.dom;e==document.body?i={x:u.left,y:u.top,width:Ext.lib.Dom.getViewWidth(),height:Ext.lib.Dom.getViewHeight()}:(o=f.getXY(),i={x:o[0]+u.left,y:o[1]+u.top,width:e.clientWidth,height:e.clientHeight});s=r.y-i.y;h=r.x-i.x;this.resetConstraints();this.setXConstraint(h-(t.left||0),i.width-h-r.width-(t.right||0),this.xTickSize);this.setYConstraint(s-(t.top||0),i.height-s-r.height-(t.bottom||0),this.yTickSize)},getEl:function(){return this._domRef||(this._domRef=Ext.getDom(this.id)),this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(t,i,r){this.initTarget(t,i,r);n.on(this.id,"mousedown",this.handleMouseDown,this)},initTarget:function(n,t,i){this.config=i||{};this.DDM=Ext.dd.DDM;this.groups={};typeof n!="string"&&(n=Ext.id(n));this.id=n;this.addToGroup(t?t:"default");this.handleElId=n;this.setDragElId(n);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0];this.isTarget=this.config.isTarget!==!1;this.maintainOffset=this.config.maintainOffset;this.primaryButtonOnly=this.config.primaryButtonOnly!==!1},handleOnAvailable:function(){this.available=!0;this.resetConstraints();this.onAvailable()},setPadding:function(n,t,i,r){this.padding=t||0===t?i||0===i?[n,t,i,r]:[n,t,n,t]:[n,n,n,n]},setInitPosition:function(n,i){var u=this.getEl();if(this.DDM.verifyEl(u)){var f=n||0,e=i||0,r=t.getXY(u);this.initPageX=r[0]-f;this.initPageY=r[1]-e;this.lastPageX=r[0];this.lastPageY=r[1];this.setStartPosition(r)}},setStartPosition:function(n){var i=n||t.getXY(this.getEl());this.deltaSetXY=null;this.startPageX=i[0];this.startPageY=i[1]},addToGroup:function(n){this.groups[n]=!0;this.DDM.regDragDrop(this,n)},removeFromGroup:function(n){this.groups[n]&&delete this.groups[n];this.DDM.removeDDFromGroup(this,n)},setDragElId:function(n){this.dragElId=n},setHandleElId:function(n){typeof n!="string"&&(n=Ext.id(n));this.handleElId=n;this.DDM.regHandle(this.id,n)},setOuterHandleElId:function(t){typeof t!="string"&&(t=Ext.id(t));n.on(t,"mousedown",this.handleMouseDown,this);this.setHandleElId(t);this.hasOuterHandles=!0},unreg:function(){n.un(this.id,"mousedown",this.handleMouseDown);this._domRef=null;this.DDM._remove(this)},destroy:function(){this.unreg()},isLocked:function(){return this.DDM.isLocked()||this.locked},handleMouseDown:function(n){if((!this.primaryButtonOnly||n.button==0)&&!this.isLocked()){this.DDM.refreshCache(this.groups);var t=new Ext.lib.Point(Ext.lib.Event.getPageX(n),Ext.lib.Event.getPageY(n));if((this.hasOuterHandles||this.DDM.isOverTarget(t,this))&&this.clickValidator(n)){this.setStartPosition();this.b4MouseDown(n);this.onMouseDown(n);this.DDM.handleMouseDown(n,this);this.DDM.stopEvent(n)}}},clickValidator:function(n){var t=n.getTarget();return this.isValidHandleChild(t)&&(this.id==this.handleElId||this.DDM.handleWasClicked(t,this.id))},addInvalidHandleType:function(n){var t=n.toUpperCase();this.invalidHandleTypes[t]=t},addInvalidHandleId:function(n){typeof n!="string"&&(n=Ext.id(n));this.invalidHandleIds[n]=n},addInvalidHandleClass:function(n){this.invalidHandleClasses.push(n)},removeInvalidHandleType:function(n){var t=n.toUpperCase();delete this.invalidHandleTypes[t]},removeInvalidHandleId:function(n){typeof n!="string"&&(n=Ext.id(n));delete this.invalidHandleIds[n]},removeInvalidHandleClass:function(n){for(var t=0,i=this.invalidHandleClasses.length;t<i;++t)this.invalidHandleClasses[t]==n&&delete this.invalidHandleClasses[t]},isValidHandleChild:function(n){var i=!0,u,r,f;try{u=n.nodeName.toUpperCase()}catch(e){u=n.nodeName}for(i=i&&!this.invalidHandleTypes[u],i=i&&!this.invalidHandleIds[n.id],r=0,f=this.invalidHandleClasses.length;i&&r<f;++r)i=!t.hasClass(n,this.invalidHandleClasses[r]);return i},setXTicks:function(n,t){var r,i;for(this.xTicks=[],this.xTickSize=t,r={},i=this.initPageX;i>=this.minX;i=i-t)r[i]||(this.xTicks[this.xTicks.length]=i,r[i]=!0);for(i=this.initPageX;i<=this.maxX;i=i+t)r[i]||(this.xTicks[this.xTicks.length]=i,r[i]=!0);this.xTicks.sort(this.DDM.numericSort)},setYTicks:function(n,t){var r,i;for(this.yTicks=[],this.yTickSize=t,r={},i=this.initPageY;i>=this.minY;i=i-t)r[i]||(this.yTicks[this.yTicks.length]=i,r[i]=!0);for(i=this.initPageY;i<=this.maxY;i=i+t)r[i]||(this.yTicks[this.yTicks.length]=i,r[i]=!0);this.yTicks.sort(this.DDM.numericSort)},setXConstraint:function(n,t,i){this.leftConstraint=n;this.rightConstraint=t;this.minX=this.initPageX-n;this.maxX=this.initPageX+t;i&&this.setXTicks(this.initPageX,i);this.constrainX=!0},clearConstraints:function(){this.constrainX=!1;this.constrainY=!1;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(n,t,i){this.topConstraint=n;this.bottomConstraint=t;this.minY=this.initPageY-n;this.maxY=this.initPageY+t;i&&this.setYTicks(this.initPageY,i);this.constrainY=!0},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var n=this.maintainOffset?this.lastPageX-this.initPageX:0,t=this.maintainOffset?this.lastPageY-this.initPageY:0;this.setInitPosition(n,t)}else this.setInitPosition();this.constrainX&&this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize);this.constrainY&&this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)},getTick:function(n,t){var i,u,r,f,e;if(t){if(t[0]>=n)return t[0];for(i=0,u=t.length;i<u;++i)if(r=i+1,t[r]&&t[r]>=n)return f=n-t[i],e=t[r]-n,e>f?t[i]:t[r];return t[t.length-1]}return n},toString:function(){return"DragDrop "+this.id}}}();Ext.dd.DragDropMgr||(Ext.dd.DragDropMgr=function(){var n=Ext.EventManager;return{ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:!0,stopPropagation:!0,initalized:!1,locked:!1,init:function(){this.initialized=!0},POINT:0,INTERSECT:1,mode:0,_execOnAll:function(n,t){var r,u,i;for(r in this.ids)for(u in this.ids[r])(i=this.ids[r][u],this.isTypeOfDD(i))&&i[n].apply(i,t)},_onLoad:function(){this.init();n.on(document,"mouseup",this.handleMouseUp,this,!0);n.on(document,"mousemove",this.handleMouseMove,this,!0);n.on(window,"unload",this._onUnload,this,!0);n.on(window,"resize",this._onResize,this,!0)},_onResize:function(){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},isLocked:function(){return this.locked},locationCache:{},useCache:!0,clickPixelThresh:3,clickTimeThresh:350,dragThreshMet:!1,clickTimeout:null,startX:0,startY:0,regDragDrop:function(n,t){this.initialized||this.init();this.ids[t]||(this.ids[t]={});this.ids[t][n.id]=n},removeDDFromGroup:function(n,t){this.ids[t]||(this.ids[t]={});var i=this.ids[t];i&&i[n.id]&&delete i[n.id]},_remove:function(n){for(var t in n.groups)t&&this.ids[t][n.id]&&delete this.ids[t][n.id];delete this.handleIds[n.id]},regHandle:function(n,t){this.handleIds[n]||(this.handleIds[n]={});this.handleIds[n][t]=t},isDragDrop:function(n){return this.getDDById(n)?!0:!1},getRelated:function(n,t){var r=[],u,i;for(u in n.groups)for(j in this.ids[u])(i=this.ids[u][j],this.isTypeOfDD(i))&&(!t||i.isTarget)&&(r[r.length]=i);return r},isLegalTarget:function(n,t){for(var r=this.getRelated(n,!0),i=0,u=r.length;i<u;++i)if(r[i].id==t.id)return!0;return!1},isTypeOfDD:function(n){return n&&n.__ygDragDrop},isHandle:function(n,t){return this.handleIds[n]&&this.handleIds[n][t]},getDDById:function(n){for(var t in this.ids)if(this.ids[t][n])return this.ids[t][n];return null},handleMouseDown:function(n,t){Ext.QuickTips&&Ext.QuickTips.disable();this.currentTarget=n.getTarget();this.dragCurrent=t;var i=t.getEl();this.startX=n.getPageX();this.startY=n.getPageY();this.deltaX=this.startX-i.offsetLeft;this.deltaY=this.startY-i.offsetTop;this.dragThreshMet=!1;this.clickTimeout=setTimeout(function(){var n=Ext.dd.DDM;n.startDrag(n.startX,n.startY)},this.clickTimeThresh)},startDrag:function(n,t){clearTimeout(this.clickTimeout);this.dragCurrent&&(this.dragCurrent.b4StartDrag(n,t),this.dragCurrent.startDrag(n,t));this.dragThreshMet=!0},handleMouseUp:function(n){(Ext.QuickTips&&Ext.QuickTips.enable(),this.dragCurrent)&&(clearTimeout(this.clickTimeout),this.dragThreshMet&&this.fireEvents(n,!0),this.stopDrag(n),this.stopEvent(n))},stopEvent:function(n){this.stopPropagation&&n.stopPropagation();this.preventDefault&&n.preventDefault()},stopDrag:function(n){if(this.dragCurrent){this.dragThreshMet&&(this.dragCurrent.b4EndDrag(n),this.dragCurrent.endDrag(n));this.dragCurrent.onMouseUp(n)}this.dragCurrent=null;this.dragOvers={}},handleMouseMove:function(n){if(!this.dragCurrent)return!0;if(Ext.isIE&&n.button!==0&&n.button!==1&&n.button!==2)return this.stopEvent(n),this.handleMouseUp(n);if(!this.dragThreshMet){var t=Math.abs(this.startX-n.getPageX()),i=Math.abs(this.startY-n.getPageY());(t>this.clickPixelThresh||i>this.clickPixelThresh)&&this.startDrag(this.startX,this.startY)}if(this.dragThreshMet){this.dragCurrent.b4Drag(n);this.dragCurrent.onDrag(n);this.dragCurrent.moveOnly||this.fireEvents(n,!1)}return this.stopEvent(n),!0},fireEvents:function(n,t){var r=this.dragCurrent,i,c,l,u,f;if(r&&!r.isLocked()){var a=n.getPoint(),v=[],o=[],s=[],e=[],h=[];for(i in this.dragOvers)(c=this.dragOvers[i],this.isTypeOfDD(c))&&(this.isOverTarget(a,c,this.mode)||o.push(c),v[i]=!0,delete this.dragOvers[i]);for(l in r.groups)if("string"==typeof l)for(i in this.ids[l])(u=this.ids[l][i],this.isTypeOfDD(u))&&u.isTarget&&!u.isLocked()&&u!=r&&this.isOverTarget(a,u,this.mode)&&(t?e.push(u):(v[u.id]?s.push(u):h.push(u),this.dragOvers[u.id]=u));if(this.mode){if(o.length){r.b4DragOut(n,o);r.onDragOut(n,o)}if(h.length)r.onDragEnter(n,h);if(s.length){r.b4DragOver(n,s);r.onDragOver(n,s)}if(e.length){r.b4DragDrop(n,e);r.onDragDrop(n,e)}}else{for(f=0,i=0,f=o.length;i<f;++i){r.b4DragOut(n,o[i].id);r.onDragOut(n,o[i].id)}for(i=0,f=h.length;i<f;++i)r.onDragEnter(n,h[i].id);for(i=0,f=s.length;i<f;++i){r.b4DragOver(n,s[i].id);r.onDragOver(n,s[i].id)}for(i=0,f=e.length;i<f;++i){r.b4DragDrop(n,e[i].id);r.onDragDrop(n,e[i].id)}}if(t&&!e.length)r.onInvalidDrop(n)}},getBestMatch:function(n){var t=null,u=n.length,r,i;if(u==1)t=n[0];else for(r=0;r<u;++r)if(i=n[r],i.cursorIsOver){t=i;break}else(!t||t.overlap.getArea()<i.overlap.getArea())&&(t=i);return t},refreshCache:function(n){var i,u,t,r;for(i in n)if("string"==typeof i)for(u in this.ids[i])t=this.ids[i][u],this.isTypeOfDD(t)&&(r=this.getLocation(t),r?this.locationCache[t.id]=r:delete this.locationCache[t.id])},verifyEl:function(n){if(n){var t;if(Ext.isIE)try{t=n.offsetParent}catch(i){}else t=n.offsetParent;if(t)return!0}return!1},getLocation:function(n){if(!this.isTypeOfDD(n))return null;var i=n.getEl(),t,r,f,u,e,o,s,h,c;try{t=Ext.lib.Dom.getXY(i)}catch(l){}return t?(r=t[0],f=r+i.offsetWidth,u=t[1],e=u+i.offsetHeight,o=u-n.padding[0],s=f+n.padding[1],h=e+n.padding[2],c=r-n.padding[3],new Ext.lib.Region(o,s,h,c)):null},isOverTarget:function(n,t,i){var u=this.locationCache[t.id],r;if(u&&this.useCache||(u=this.getLocation(t),this.locationCache[t.id]=u),!u)return!1;if(t.cursorIsOver=u.contains(n),r=this.dragCurrent,!r||!r.getTargetCoord||!i&&!r.constrainX&&!r.constrainY)return t.cursorIsOver;t.overlap=null;var f=r.getTargetCoord(n.x,n.y),e=r.getDragEl(),s=new Ext.lib.Region(f.y,f.x+e.offsetWidth,f.y+e.offsetHeight,f.x),o=s.intersect(u);return o?(t.overlap=o,i?!0:t.cursorIsOver):!1},_onUnload:function(){Ext.dd.DragDropMgr.unregAll()},unregAll:function(){this.dragCurrent&&(this.stopDrag(),this.dragCurrent=null);this._execOnAll("unreg",[]);for(var n in this.elementCache)delete this.elementCache[n];this.elementCache={};this.ids={}},elementCache:{},getElWrapper:function(n){var t=this.elementCache[n];return t&&t.el||(t=this.elementCache[n]=new this.ElementWrapper(Ext.getDom(n))),t},getElement:function(n){return Ext.getDom(n)},getCss:function(n){var t=Ext.getDom(n);return t?t.style:null},ElementWrapper:function(n){this.el=n||null;this.id=this.el&&n.id;this.css=this.el&&n.style},getPosX:function(n){return Ext.lib.Dom.getX(n)},getPosY:function(n){return Ext.lib.Dom.getY(n)},swapNode:function(n,t){if(n.swapNode)n.swapNode(t);else{var i=t.parentNode,r=t.nextSibling;r==n?i.insertBefore(n,t):t==n.nextSibling?i.insertBefore(t,n):(n.parentNode.replaceChild(t,n),i.insertBefore(n,r))}},getScroll:function(){var t,i,n=document.documentElement,r=document.body;return n&&(n.scrollTop||n.scrollLeft)?(t=n.scrollTop,i=n.scrollLeft):r&&(t=r.scrollTop,i=r.scrollLeft),{top:t,left:i}},getStyle:function(n,t){return Ext.fly(n).getStyle(t)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(n,t){var i=Ext.lib.Dom.getXY(t);Ext.lib.Dom.setXY(n,i)},numericSort:function(n,t){return n-t},_timeoutCount:0,_addListeners:function(){var n=Ext.dd.DDM;Ext.lib.Event&&document?n._onLoad():n._timeoutCount>2e3||(setTimeout(n._addListeners,10),document&&document.body&&(n._timeoutCount+=1))},handleWasClicked:function(n,t){if(this.isHandle(t,n.id))return!0;for(var i=n.parentNode;i;){if(this.isHandle(t,i.id))return!0;i=i.parentNode}return!1}}}(),Ext.dd.DDM=Ext.dd.DragDropMgr,Ext.dd.DDM._addListeners());Ext.dd.DD=function(n,t,i){n&&this.init(n,t,i)};Ext.extend(Ext.dd.DD,Ext.dd.DragDrop,{scroll:!0,autoOffset:function(n,t){var i=n-this.startPageX,r=t-this.startPageY;this.setDelta(i,r)},setDelta:function(n,t){this.deltaX=n;this.deltaY=t},setDragElPos:function(n,t){var i=this.getDragEl();this.alignElWithMouse(i,n,t)},alignElWithMouse:function(n,t,i){var r=this.getTargetCoord(t,i),u=n.dom?n:Ext.fly(n,"_dd"),f,e,o;return this.deltaSetXY?u.setLeftTop(r.x+this.deltaSetXY[0],r.y+this.deltaSetXY[1]):(f=[r.x,r.y],u.setXY(f),e=u.getLeft(!0),o=u.getTop(!0),this.deltaSetXY=[e-r.x,o-r.y]),this.cachePosition(r.x,r.y),this.autoScroll(r.x,r.y,n.offsetHeight,n.offsetWidth),r},cachePosition:function(n,t){if(n)this.lastPageX=n,this.lastPageY=t;else{var i=Ext.lib.Dom.getXY(this.getEl());this.lastPageX=i[0];this.lastPageY=i[1]}},autoScroll:function(n,t,i,r){if(this.scroll){var s=Ext.lib.Dom.getViewHeight(),h=Ext.lib.Dom.getViewWidth(),u=this.DDM.getScrollTop(),f=this.DDM.getScrollLeft(),c=i+t,l=r+n,a=s+u-t-this.deltaY,v=h+f-n-this.deltaX,e=40,o=document.all?80:30;c>s&&a<e&&window.scrollTo(f,u+o);t<u&&u>0&&t-u<e&&window.scrollTo(f,u-o);l>h&&v<e&&window.scrollTo(f+o,u);n<f&&f>0&&n-f<e&&window.scrollTo(f-o,u)}},getTargetCoord:function(n,t){var i=n-this.deltaX,r=t-this.deltaY;return this.constrainX&&(i<this.minX&&(i=this.minX),i>this.maxX&&(i=this.maxX)),this.constrainY&&(r<this.minY&&(r=this.minY),r>this.maxY&&(r=this.maxY)),i=this.getTick(i,this.xTicks),r=this.getTick(r,this.yTicks),{x:i,y:r}},applyConfig:function(){Ext.dd.DD.superclass.applyConfig.call(this);this.scroll=this.config.scroll!==!1},b4MouseDown:function(n){this.autoOffset(n.getPageX(),n.getPageY())},b4Drag:function(n){this.setDragElPos(n.getPageX(),n.getPageY())},toString:function(){return"DD "+this.id}});Ext.dd.DDProxy=function(n,t,i){n&&(this.init(n,t,i),this.initFrame())};Ext.dd.DDProxy.dragElId="ygddfdiv";Ext.extend(Ext.dd.DDProxy,Ext.dd.DD,{resizeFrame:!0,centerFrame:!1,createFrame:function(){var r=this,i=document.body,n,t;if(!i||!i.firstChild){setTimeout(function(){r.createFrame()},50);return}n=this.getDragEl();n||(n=document.createElement("div"),n.id=this.dragElId,t=n.style,t.position="absolute",t.visibility="hidden",t.cursor="move",t.border="2px solid #aaa",t.zIndex=999,i.insertBefore(n,i.firstChild))},initFrame:function(){this.createFrame()},applyConfig:function(){Ext.dd.DDProxy.superclass.applyConfig.call(this);this.resizeFrame=this.config.resizeFrame!==!1;this.centerFrame=this.config.centerFrame;this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(n,t){var u=this.getEl(),i=this.getDragEl(),r=i.style;this._resizeProxy();this.centerFrame&&this.setDelta(Math.round(parseInt(r.width,10)/2),Math.round(parseInt(r.height,10)/2));this.setDragElPos(n,t);Ext.fly(i).show()},_resizeProxy:function(){if(this.resizeFrame){var n=this.getEl();Ext.fly(this.getDragEl()).setSize(n.offsetWidth,n.offsetHeight)}},b4MouseDown:function(n){var t=n.getPageX(),i=n.getPageY();this.autoOffset(t,i);this.setDragElPos(t,i)},b4StartDrag:function(n,t){this.showFrame(n,t)},b4EndDrag:function(){Ext.fly(this.getDragEl()).hide()},endDrag:function(){var n=this.getEl(),t=this.getDragEl();t.style.visibility="";this.beforeMove();n.style.visibility="hidden";Ext.dd.DDM.moveToEl(n,t);t.style.visibility="hidden";n.style.visibility="";this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return"DDProxy "+this.id}});Ext.dd.DDTarget=function(n,t,i){n&&this.initTarget(n,t,i)};Ext.extend(Ext.dd.DDTarget,Ext.dd.DragDrop,{toString:function(){return"DDTarget "+this.id}});Ext.dd.DragTracker=function(n){Ext.apply(this,n);this.addEvents("mousedown","mouseup","mousemove","dragstart","dragend","drag");this.dragRegion=new Ext.lib.Region(0,0,0,0);this.el&&this.initEl(this.el)};Ext.extend(Ext.dd.DragTracker,Ext.util.Observable,{active:!1,tolerance:5,autoStart:!1,initEl:function(n){this.el=Ext.get(n);n.on("mousedown",this.onMouseDown,this,this.delegate?{delegate:this.delegate}:undefined)},destroy:function(){this.el.un("mousedown",this.onMouseDown,this)},onMouseDown:function(n,t){if(this.fireEvent("mousedown",this,n)!==!1&&this.onBeforeStart(n)!==!1){this.startXY=this.lastXY=n.getXY();this.dragTarget=this.delegate?t:this.el.dom;n.preventDefault();var i=Ext.getDoc();i.on("mouseup",this.onMouseUp,this);i.on("mousemove",this.onMouseMove,this);i.on("selectstart",this.stopSelect,this);this.autoStart&&(this.timer=this.triggerStart.defer(this.autoStart===!0?1e3:this.autoStart,this))}},onMouseMove:function(n){n.preventDefault();var t=n.getXY(),i=this.startXY;if(this.lastXY=t,!this.active)if(Math.abs(i[0]-t[0])>this.tolerance||Math.abs(i[1]-t[1])>this.tolerance)this.triggerStart();else return;this.fireEvent("mousemove",this,n);this.onDrag(n);this.fireEvent("drag",this,n)},onMouseUp:function(n){var t=Ext.getDoc();t.un("mousemove",this.onMouseMove,this);t.un("mouseup",this.onMouseUp,this);t.un("selectstart",this.stopSelect,this);n.preventDefault();this.clearStart();this.active=!1;delete this.elRegion;this.fireEvent("mouseup",this,n);this.onEnd(n);this.fireEvent("dragend",this,n)},triggerStart:function(){this.clearStart();this.active=!0;this.onStart(this.startXY);this.fireEvent("dragstart",this,this.startXY)},clearStart:function(){this.timer&&(clearTimeout(this.timer),delete this.timer)},stopSelect:function(n){return n.stopEvent(),!1},onBeforeStart:function(){},onStart:function(){},onDrag:function(){},onEnd:function(){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getXY:function(n){return n?this.constrainModes[n].call(this,this.lastXY):this.lastXY},getOffset:function(n){var t=this.getXY(n),i=this.startXY;return[i[0]-t[0],i[1]-t[1]]},constrainModes:{point:function(n){this.elRegion||(this.elRegion=this.getDragCt().getRegion());var t=this.dragRegion;return t.left=n[0],t.top=n[1],t.right=n[0],t.bottom=n[1],t.constrainTo(this.elRegion),[t.left,t.top]}}});Ext.dd.ScrollManager=function(){var t=Ext.dd.DragDropMgr,i={},r=null,n={},o=function(){r=null;f()},e=function(){t.dragCurrent&&t.refreshCache(t.dragCurrent.groups)},s=function(){if(t.dragCurrent){var i=Ext.dd.ScrollManager,r=n.el.ddScrollConfig?n.el.ddScrollConfig.increment:i.increment;i.animate?n.el.scroll(n.dir,r,!0,i.animDuration,e):n.el.scroll(n.dir,r)&&e()}},f=function(){n.id&&clearInterval(n.id);n.id=0;n.el=null;n.dir=""},u=function(t,i){f();n.el=t;n.dir=i;n.id=setInterval(s,Ext.dd.ScrollManager.frequency)},h=function(e,o){var a,v,h,y;if(!o&&t.dragCurrent){a=Ext.dd.ScrollManager;r&&r==t.dragCurrent||(r=t.dragCurrent,a.refreshCache());v=Ext.lib.Event.getXY(e);h=new Ext.lib.Point(v[0],v[1]);for(y in i){var s=i[y],c=s._region,l=s.ddScrollConfig?s.ddScrollConfig:a;if(c&&c.contains(h)&&s.isScrollable()){if(c.bottom-h.y<=l.vthresh){n.el!=s&&u(s,"down");return}if(c.right-h.x<=l.hthresh){n.el!=s&&u(s,"left");return}if(h.y-c.top<=l.vthresh){n.el!=s&&u(s,"up");return}if(h.x-c.left<=l.hthresh){n.el!=s&&u(s,"right");return}}}f()}};return t.fireEvents=t.fireEvents.createSequence(h,t),t.stopDrag=t.stopDrag.createSequence(o,t),{register:function(n){if(n instanceof Array)for(var t=0,r=n.length;t<r;t++)this.register(n[t]);else n=Ext.get(n),i[n.id]=n},unregister:function(n){if(n instanceof Array)for(var t=0,r=n.length;t<r;t++)this.unregister(n[t]);else n=Ext.get(n),delete i[n.id]},vthresh:25,hthresh:25,increment:100,frequency:500,animate:!0,animDuration:.4,refreshCache:function(){for(var n in i)typeof i[n]=="object"&&(i[n]._region=i[n].getRegion())}}}();Ext.dd.Registry=function(){var t={},n={},r=0,i=function(n,t){if(typeof n=="string")return n;var i=n.id;return i||t===!1||(i="extdd-"+ ++r,n.id=i),i};return{register:function(r,u){var e,f,o;if(u=u||{},typeof r=="string"&&(r=document.getElementById(r)),u.ddel=r,t[i(r)]=u,u.isHandle!==!1&&(n[u.ddel.id]=u),u.handles)for(e=u.handles,f=0,o=e.length;f<o;f++)n[i(e[f])]=u},unregister:function(r){var o=i(r,!1),f=t[o],e,u,s;if(f&&(delete t[o],f.handles))for(e=f.handles,u=0,s=e.length;u<s;u++)delete n[i(e[u],!1)]},getHandle:function(t){return typeof t!="string"&&(t=t.id),n[t]},getHandleFromEvent:function(t){var i=Ext.lib.Event.getTarget(t);return i?n[i.id]:null},getTarget:function(n){return typeof n!="string"&&(n=n.id),t[n]},getTargetFromEvent:function(i){var r=Ext.lib.Event.getTarget(i);return r?t[r.id]||n[r.id]:null}}}();Ext.dd.StatusProxy=function(n){Ext.apply(this,n);this.id=this.id||Ext.id();this.el=new Ext.Layer({dh:{id:this.id,tag:"div",cls:"x-dd-drag-proxy "+this.dropNotAllowed,children:[{tag:"div",cls:"x-dd-drop-icon"},{tag:"div",cls:"x-dd-drag-ghost"}]},shadow:!n||n.shadow!==!1});this.ghost=Ext.get(this.el.dom.childNodes[1]);this.dropStatus=this.dropNotAllowed};Ext.dd.StatusProxy.prototype={dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",setStatus:function(n){n=n||this.dropNotAllowed;this.dropStatus!=n&&(this.el.replaceClass(this.dropStatus,n),this.dropStatus=n)},reset:function(n){this.el.dom.className="x-dd-drag-proxy "+this.dropNotAllowed;this.dropStatus=this.dropNotAllowed;n&&this.ghost.update("")},update:function(n){typeof n=="string"?this.ghost.update(n):(this.ghost.update(""),n.style.margin="0",this.ghost.dom.appendChild(n))},getEl:function(){return this.el},getGhost:function(){return this.ghost},hide:function(n){this.el.hide();n&&this.reset(!0)},stop:function(){this.anim&&this.anim.isAnimated&&this.anim.isAnimated()&&this.anim.stop()},show:function(){this.el.show()},sync:function(){this.el.sync()},repair:function(n,t,i){this.callback=t;this.scope=i;n&&this.animRepair!==!1?(this.el.addClass("x-dd-drag-repair"),this.el.hideUnders(!0),this.anim=this.el.shift({duration:this.repairDuration||.5,easing:"easeOut",xy:n,stopFx:!0,callback:this.afterRepair,scope:this})):this.afterRepair()},afterRepair:function(){this.hide(!0);typeof this.callback=="function"&&this.callback.call(this.scope||this);this.callback=null;this.scope=null}};Ext.dd.DragSource=function(n,t){this.el=Ext.get(n);this.dragData||(this.dragData={});Ext.apply(this,t);this.proxy||(this.proxy=new Ext.dd.StatusProxy);Ext.dd.DragSource.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:!1,isTarget:!1,scroll:this.scroll===!0});this.dragging=!1};Ext.extend(Ext.dd.DragSource,Ext.dd.DDProxy,{dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",getDragData:function(){return this.dragData},onDragEnter:function(n,t){var i=Ext.dd.DragDropMgr.getDDById(t),r;this.cachedTarget=i;this.beforeDragEnter(i,n,t)!==!1&&(i.isNotifyTarget?(r=i.notifyEnter(this,n,this.dragData),this.proxy.setStatus(r)):this.proxy.setStatus(this.dropAllowed),this.afterDragEnter&&this.afterDragEnter(i,n,t))},beforeDragEnter:function(){return!0},alignElWithMouse:function(){Ext.dd.DragSource.superclass.alignElWithMouse.apply(this,arguments);this.proxy.sync()},onDragOver:function(n,t){var i=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(t),r;this.beforeDragOver(i,n,t)!==!1&&(i.isNotifyTarget&&(r=i.notifyOver(this,n,this.dragData),this.proxy.setStatus(r)),this.afterDragOver&&this.afterDragOver(i,n,t))},beforeDragOver:function(){return!0},onDragOut:function(n,t){var i=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(t);this.beforeDragOut(i,n,t)!==!1&&(i.isNotifyTarget&&i.notifyOut(this,n,this.dragData),this.proxy.reset(),this.afterDragOut&&this.afterDragOut(i,n,t));this.cachedTarget=null},beforeDragOut:function(){return!0},onDragDrop:function(n,t){var i=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(t);if(this.beforeDragDrop(i,n,t)!==!1){if(i.isNotifyTarget)if(i.notifyDrop(this,n,this.dragData))this.onValidDrop(i,n,t);else this.onInvalidDrop(i,n,t);else this.onValidDrop(i,n,t);this.afterDragDrop&&this.afterDragDrop(i,n,t)}delete this.cachedTarget},beforeDragDrop:function(){return!0},onValidDrop:function(n,t,i){this.hideProxy();this.afterValidDrop&&this.afterValidDrop(n,t,i)},getRepairXY:function(){return this.el.getXY()},onInvalidDrop:function(n,t,i){this.beforeInvalidDrop(n,t,i);this.cachedTarget&&(this.cachedTarget.isNotifyTarget&&this.cachedTarget.notifyOut(this,t,this.dragData),this.cacheTarget=null);this.proxy.repair(this.getRepairXY(t,this.dragData),this.afterRepair,this);this.afterInvalidDrop&&this.afterInvalidDrop(t,i)},afterRepair:function(){Ext.enableFx&&this.el.highlight(this.hlColor||"c3daf9");this.dragging=!1},beforeInvalidDrop:function(){return!0},handleMouseDown:function(n){if(!this.dragging){var t=this.getDragData(n);t&&this.onBeforeDrag(t,n)!==!1&&(this.dragData=t,this.proxy.stop(),Ext.dd.DragSource.superclass.handleMouseDown.apply(this,arguments))}},onBeforeDrag:function(){return!0},onStartDrag:Ext.emptyFn,startDrag:function(n,t){this.proxy.reset();this.dragging=!0;this.proxy.update("");this.onInitDrag(n,t);this.proxy.show()},onInitDrag:function(n,t){var i=this.el.dom.cloneNode(!0);i.id=Ext.id();this.proxy.update(i);this.onStartDrag(n,t);return!0},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide();this.proxy.reset(!0);this.dragging=!1},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(){},endDrag:function(n){this.onEndDrag(this.dragData,n)},onEndDrag:function(){},autoOffset:function(){this.setDelta(-12,-20)}});Ext.dd.DropTarget=function(n,t){this.el=Ext.get(n);Ext.apply(this,t);this.containerScroll&&Ext.dd.ScrollManager.register(this.el);Ext.dd.DropTarget.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{isTarget:!0})};Ext.extend(Ext.dd.DropTarget,Ext.dd.DDTarget,{dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",isTarget:!0,isNotifyTarget:!0,notifyEnter:function(){return this.overClass&&this.el.addClass(this.overClass),this.dropAllowed},notifyOver:function(){return this.dropAllowed},notifyOut:function(){this.overClass&&this.el.removeClass(this.overClass)},notifyDrop:function(){return!1}});Ext.dd.DragZone=function(n,t){Ext.dd.DragZone.superclass.constructor.call(this,n,t);this.containerScroll&&Ext.dd.ScrollManager.register(this.el)};Ext.extend(Ext.dd.DragZone,Ext.dd.DragSource,{getDragData:function(n){return Ext.dd.Registry.getHandleFromEvent(n)},onInitDrag:function(n,t){this.proxy.update(this.dragData.ddel.cloneNode(!0));this.onStartDrag(n,t);return!0},afterRepair:function(){Ext.enableFx&&Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||"c3daf9");this.dragging=!1},getRepairXY:function(){return Ext.Element.fly(this.dragData.ddel).getXY()}});Ext.dd.DropZone=function(n,t){Ext.dd.DropZone.superclass.constructor.call(this,n,t)};Ext.extend(Ext.dd.DropZone,Ext.dd.DropTarget,{getTargetFromEvent:function(n){return Ext.dd.Registry.getTargetFromEvent(n)},onNodeEnter:function(){},onNodeOver:function(){return this.dropAllowed},onNodeOut:function(){},onNodeDrop:function(){return!1},onContainerOver:function(){return this.dropNotAllowed},onContainerDrop:function(){return!1},notifyEnter:function(){return this.dropNotAllowed},notifyOver:function(n,t,i){var r=this.getTargetFromEvent(t);if(!r){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,n,t,i);this.lastOverNode=null}return this.onContainerOver(n,t,i)}if(this.lastOverNode!=r){if(this.lastOverNode)this.onNodeOut(this.lastOverNode,n,t,i);this.onNodeEnter(r,n,t,i);this.lastOverNode=r}return this.onNodeOver(r,n,t,i)},notifyOut:function(n,t,i){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,n,t,i);this.lastOverNode=null}},notifyDrop:function(n,t,i){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,n,t,i);this.lastOverNode=null}var r=this.getTargetFromEvent(t);return r?this.onNodeDrop(r,n,t,i):this.onContainerDrop(n,t,i)},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}});Ext.data.SortTypes={none:function(n){return n},stripTagsRE:/<\/?[^>]+>/gi,asText:function(n){return String(n).replace(this.stripTagsRE,"")},asUCText:function(n){return String(n).toUpperCase().replace(this.stripTagsRE,"")},asUCString:function(n){return String(n).toUpperCase()},asDate:function(n){return n?n instanceof Date?n.getTime():Date.parse(String(n)):0},asFloat:function(n){var t=parseFloat(String(n).replace(/,/g,""));return isNaN(t)&&(t=0),t},asInt:function(n){var t=parseInt(String(n).replace(/,/g,""));return isNaN(t)&&(t=0),t}};Ext.data.Record=function(n,t){this.id=t||t===0?t:++Ext.data.Record.AUTO_ID;this.data=n};Ext.data.Record.create=function(n){var i=Ext.extend(Ext.data.Record,{}),r=i.prototype,t,u;for(r.fields=new Ext.util.MixedCollection(!1,function(n){return n.name}),t=0,u=n.length;t<u;t++)r.fields.add(new Ext.data.Field(n[t]));return i.getField=function(n){return r.fields.get(n)},i};Ext.data.Record.AUTO_ID=1e3;Ext.data.Record.EDIT="edit";Ext.data.Record.REJECT="reject";Ext.data.Record.COMMIT="commit";Ext.data.Record.prototype={dirty:!1,editing:!1,error:null,modified:null,join:function(n){this.store=n},set:function(n,t){String(this.data[n])!=String(t)&&(this.dirty=!0,this.modified||(this.modified={}),typeof this.modified[n]=="undefined"&&(this.modified[n]=this.data[n]),this.data[n]=t,!this.editing&&this.store&&this.store.afterEdit(this))},get:function(n){return this.data[n]},beginEdit:function(){this.editing=!0;this.modified={}},cancelEdit:function(){this.editing=!1;delete this.modified},endEdit:function(){this.editing=!1;this.dirty&&this.store&&this.store.afterEdit(this)},reject:function(n){var t=this.modified;for(var i in t)typeof t[i]!="function"&&(this.data[i]=t[i]);this.dirty=!1;delete this.modified;this.editing=!1;this.store&&n!==!0&&this.store.afterReject(this)},commit:function(n){this.dirty=!1;delete this.modified;this.editing=!1;this.store&&n!==!0&&this.store.afterCommit(this)},getChanges:function(){var t=this.modified,i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]=this.data[n]);return i},hasError:function(){return this.error!=null},clearError:function(){this.error=null},copy:function(n){return new this.constructor(Ext.apply({},this.data),n||this.id)}};Ext.StoreMgr=Ext.apply(new Ext.util.MixedCollection,{register:function(){for(var n=0,t;t=arguments[n];n++)this.add(t)},unregister:function(){for(var n=0,t;t=arguments[n];n++)this.remove(this.lookup(t))},lookup:function(n){return typeof n=="object"?n:this.get(n)},getKey:function(n){return n.storeId||n.id}});Ext.data.Store=function(n){this.data=new Ext.util.MixedCollection(!1);this.data.getKey=function(n){return n.id};this.baseParams={};this.paramNames={start:"start",limit:"limit",sort:"sort",dir:"dir"};n&&n.data&&(this.inlineData=n.data,delete n.data);Ext.apply(this,n);this.url&&!this.proxy&&(this.proxy=new Ext.data.HttpProxy({url:this.url}));this.reader&&(this.recordType||(this.recordType=this.reader.recordType),this.reader.onMetaChange&&(this.reader.onMetaChange=this.onMetaChange.createDelegate(this)));this.recordType&&(this.fields=this.recordType.prototype.fields);this.modified=[];this.addEvents("datachanged","metachange","add","remove","update","clear","beforeload","load","loadexception");this.proxy&&this.relayEvents(this.proxy,["loadexception"]);this.sortToggle={};this.sortInfo&&this.setDefaultSort(this.sortInfo.field,this.sortInfo.direction);Ext.data.Store.superclass.constructor.call(this);(this.storeId||this.id)&&Ext.StoreMgr.register(this);this.inlineData?(this.loadData(this.inlineData),delete this.inlineData):this.autoLoad&&this.load.defer(10,this,[typeof this.autoLoad=="object"?this.autoLoad:undefined])};Ext.extend(Ext.data.Store,Ext.util.Observable,{remoteSort:!1,pruneModifiedRecords:!1,lastOptions:null,destroy:function(){this.id&&Ext.StoreMgr.unregister(this);this.data=null;this.purgeListeners()},add:function(n){var t,i,r;if(n=[].concat(n),!(n.length<1)){for(t=0,i=n.length;t<i;t++)n[t].join(this);r=this.data.length;this.data.addAll(n);this.snapshot&&this.snapshot.addAll(n);this.fireEvent("add",this,n,r)}},addSorted:function(n){var t=this.findInsertIndex(n);this.insert(t,n)},remove:function(n){var t=this.data.indexOf(n);this.data.removeAt(t);this.pruneModifiedRecords&&this.modified.remove(n);this.snapshot&&this.snapshot.remove(n);this.fireEvent("remove",this,n,t)},removeAll:function(){this.data.clear();this.snapshot&&this.snapshot.clear();this.pruneModifiedRecords&&(this.modified=[]);this.fireEvent("clear",this)},insert:function(n,t){t=[].concat(t);for(var i=0,r=t.length;i<r;i++)this.data.insert(n,t[i]),t[i].join(this);this.fireEvent("add",this,t,n)},indexOf:function(n){return this.data.indexOf(n)},indexOfId:function(n){return this.data.indexOfKey(n)},getById:function(n){return this.data.key(n)},getAt:function(n){return this.data.itemAt(n)},getRange:function(n,t){return this.data.getRange(n,t)},storeOptions:function(n){n=Ext.apply({},n);delete n.callback;delete n.scope;this.lastOptions=n},load:function(n){var t,i;return n=n||{},this.fireEvent("beforeload",this,n)!==!1?(this.storeOptions(n),t=Ext.apply(n.params||{},this.baseParams),this.sortInfo&&this.remoteSort&&(i=this.paramNames,t[i.sort]=this.sortInfo.field,t[i.dir]=this.sortInfo.direction),this.proxy.load(t,this.reader,this.loadRecords,this,n),!0):!1},reload:function(n){this.load(Ext.applyIf(n||{},this.lastOptions))},loadRecords:function(n,t,i){var r,f,u,e;if(!n||i===!1){i!==!1&&this.fireEvent("load",this,[],t);t.callback&&t.callback.call(t.scope||this,[],t,!1);return}if(r=n.records,f=n.totalRecords||r.length,t&&t.add===!0)this.totalLength=Math.max(f,this.data.length+r.length),this.add(r);else{for(this.pruneModifiedRecords&&(this.modified=[]),u=0,e=r.length;u<e;u++)r[u].join(this);this.snapshot&&(this.data=this.snapshot,delete this.snapshot);this.data.clear();this.data.addAll(r);this.totalLength=f;this.applySort();this.fireEvent("datachanged",this)}this.fireEvent("load",this,r,t);t.callback&&t.callback.call(t.scope||this,r,t,!0)},loadData:function(n,t){var i=this.reader.readRecords(n);this.loadRecords(i,{add:t},!0)},getCount:function(){return this.data.length||0},getTotalCount:function(){return this.totalLength||0},getSortState:function(){return this.sortInfo},applySort:function(){if(this.sortInfo&&!this.remoteSort){var n=this.sortInfo,t=n.field;this.sortData(t,n.direction)}},sortData:function(n,t){t=t||"ASC";var i=this.fields.get(n).sortType,r=function(t,r){var u=i(t.data[n]),f=i(r.data[n]);return u>f?1:u<f?-1:0};this.data.sort(t,r);this.snapshot&&this.snapshot!=this.data&&this.snapshot.sort(t,r)},setDefaultSort:function(n,t){t=t?t.toUpperCase():"ASC";this.sortInfo={field:n,direction:t};this.sortToggle[n]=t},sort:function(n,t){var i=this.fields.get(n),r,u;if(!i)return!1;t||(t=this.sortInfo&&this.sortInfo.field==i.name?(this.sortToggle[i.name]||"ASC").toggle("ASC","DESC"):i.sortDir);r=this.sortToggle?this.sortToggle[i.name]:null;u=this.sortInfo?this.sortInfo:null;this.sortToggle[i.name]=t;this.sortInfo={field:i.name,direction:t};this.remoteSort?this.load(this.lastOptions)||(r&&(this.sortToggle[i.name]=r),u&&(this.sortInfo=u)):(this.applySort(),this.fireEvent("datachanged",this))},each:function(n,t){this.data.each(n,t)},getModifiedRecords:function(){return this.modified},createFilterFn:function(n,t,i,r){return Ext.isEmpty(t,!1)?!1:(t=this.data.createValueMatcher(t,i,r),function(i){return t.test(i.data[n])})},sum:function(n,t,i){var u=this.data.items,f=0,r;for(t=t||0,i=i||i===0?i:u.length-1,r=t;r<=i;r++)f+=u[r].data[n]||0;return f},filter:function(n,t,i,r){var u=this.createFilterFn(n,t,i,r);return u?this.filterBy(u):this.clearFilter()},filterBy:function(n,t){this.snapshot=this.snapshot||this.data;this.data=this.queryBy(n,t||this);this.fireEvent("datachanged",this)},query:function(n,t,i,r){var u=this.createFilterFn(n,t,i,r);return u?this.queryBy(u):this.data.clone()},queryBy:function(n,t){var i=this.snapshot||this.data;return i.filterBy(n,t||this)},find:function(n,t,i,r,u){var f=this.createFilterFn(n,t,r,u);return f?this.data.findIndexBy(f,null,i):-1},findBy:function(n,t,i){return this.data.findIndexBy(n,t,i)},collect:function(n,t,i){for(var o=i===!0&&this.snapshot?this.snapshot.items:this.data.items,r,u,f=[],s={},e=0,h=o.length;e<h;e++)r=o[e].data[n],u=String(r),!t&&Ext.isEmpty(r)||s[u]||(s[u]=!0,f[f.length]=r);return f},clearFilter:function(n){this.isFiltered()&&(this.data=this.snapshot,delete this.snapshot,n!==!0&&this.fireEvent("datachanged",this))},isFiltered:function(){return this.snapshot&&this.snapshot!=this.data},afterEdit:function(n){this.modified.indexOf(n)==-1&&this.modified.push(n);this.fireEvent("update",this,n,Ext.data.Record.EDIT)},afterReject:function(n){this.modified.remove(n);this.fireEvent("update",this,n,Ext.data.Record.REJECT)},afterCommit:function(n){this.modified.remove(n);this.fireEvent("update",this,n,Ext.data.Record.COMMIT)},commitChanges:function(){var t=this.modified.slice(0),n,i;for(this.modified=[],n=0,i=t.length;n<i;n++)t[n].commit()},rejectChanges:function(){var t=this.modified.slice(0),n,i;for(this.modified=[],n=0,i=t.length;n<i;n++)t[n].reject()},onMetaChange:function(n,t){this.recordType=t;this.fields=t.prototype.fields;delete this.snapshot;this.sortInfo=n.sortInfo;this.modified=[];this.fireEvent("metachange",this,this.reader.meta)},findInsertIndex:function(n){var t,i;return this.suspendEvents(),t=this.data.clone(),this.data.add(n),this.applySort(),i=this.data.indexOf(n),this.data=t,this.resumeEvents(),i}});Ext.data.SimpleStore=function(n){Ext.data.SimpleStore.superclass.constructor.call(this,Ext.apply(n,{reader:new Ext.data.ArrayReader({id:n.id},Ext.data.Record.create(n.fields))}))};Ext.extend(Ext.data.SimpleStore,Ext.data.Store,{loadData:function(n,t){var i,r,u;if(this.expandData===!0){for(i=[],r=0,u=n.length;r<u;r++)i[i.length]=[n[r]];n=i}Ext.data.SimpleStore.superclass.loadData.call(this,n,t)}});Ext.data.JsonStore=function(n){Ext.data.JsonStore.superclass.constructor.call(this,Ext.apply(n,{proxy:n.data?undefined:new Ext.data.HttpProxy({url:n.url}),reader:new Ext.data.JsonReader(n,n.fields)}))};Ext.extend(Ext.data.JsonStore,Ext.data.Store);Ext.data.Field=function(n){var i,u,t,r;if(typeof n=="string"&&(n={name:n}),Ext.apply(this,n),this.type||(this.type="auto"),i=Ext.data.SortTypes,typeof this.sortType=="string"&&(this.sortType=i[this.sortType]),!this.sortType)switch(this.type){case"string":this.sortType=i.asUCString;break;case"date":this.sortType=i.asDate;break;default:this.sortType=i.none}if(u=/[\$,%]/g,!this.convert){r=this.dateFormat;switch(this.type){case"":case"auto":case undefined:t=function(n){return n};break;case"string":t=function(n){return n===undefined||n===null?"":String(n)};break;case"int":t=function(n){return n!==undefined&&n!==null&&n!==""?parseInt(String(n).replace(u,""),10):""};break;case"float":t=function(n){return n!==undefined&&n!==null&&n!==""?parseFloat(String(n).replace(u,""),10):""};break;case"bool":case"boolean":t=function(n){return n===!0||n==="true"||n==1};break;case"date":t=function(n){if(!n)return"";if(n instanceof Date)return n;if(r)return r=="timestamp"?new Date(n*1e3):r=="time"?new Date(parseInt(n,10)):Date.parseDate(n,r);var t=Date.parse(n);return t?new Date(t):null}}this.convert=t}};Ext.data.Field.prototype={dateFormat:null,defaultValue:"",mapping:null,sortType:null,sortDir:"ASC"};Ext.data.DataReader=function(n,t){this.meta=n;this.recordType=t instanceof Array?Ext.data.Record.create(t):t};Ext.data.DataReader.prototype={};Ext.data.DataProxy=function(){this.addEvents("beforeload","load","loadexception");Ext.data.DataProxy.superclass.constructor.call(this)};Ext.extend(Ext.data.DataProxy,Ext.util.Observable);Ext.data.MemoryProxy=function(n){Ext.data.MemoryProxy.superclass.constructor.call(this);this.data=n};Ext.extend(Ext.data.MemoryProxy,Ext.data.DataProxy,{load:function(n,t,i,r,u){n=n||{};var f;try{f=t.readRecords(this.data)}catch(e){this.fireEvent("loadexception",this,u,null,e);i.call(r,null,u,!1);return}i.call(r,f,u,!0)},update:function(){}});Ext.data.HttpProxy=function(n){Ext.data.HttpProxy.superclass.constructor.call(this);this.conn=n;this.useAjax=!n||!n.events};Ext.extend(Ext.data.HttpProxy,Ext.data.DataProxy,{getConnection:function(){return this.useAjax?Ext.Ajax:this.conn},load:function(n,t,i,r,u){if(this.fireEvent("beforeload",this,n)!==!1){var f={params:n||{},request:{callback:i,scope:r,arg:u},reader:t,callback:this.loadResponse,scope:this};this.useAjax?(Ext.applyIf(f,this.conn),this.activeRequest&&Ext.Ajax.abort(this.activeRequest),this.activeRequest=Ext.Ajax.request(f)):this.conn.request(f)}else i.call(r||this,null,u,!1)},loadResponse:function(n,t,i){if(delete this.activeRequest,!t){this.fireEvent("loadexception",this,n,i);n.request.callback.call(n.request.scope,null,n.request.arg,!1);return}var r;try{r=n.reader.read(i)}catch(u){this.fireEvent("loadexception",this,n,i,u);n.request.callback.call(n.request.scope,null,n.request.arg,!1);return}this.fireEvent("load",this,n,n.request.arg);n.request.callback.call(n.request.scope,r,n.request.arg,!0)},update:function(){},updateResponse:function(){}});Ext.data.ScriptTagProxy=function(n){Ext.data.ScriptTagProxy.superclass.constructor.call(this);Ext.apply(this,n);this.head=document.getElementsByTagName("head")[0]};Ext.data.ScriptTagProxy.TRANS_ID=1e3;Ext.extend(Ext.data.ScriptTagProxy,Ext.data.DataProxy,{timeout:3e4,callbackParam:"callback",nocache:!0,load:function(n,t,i,r,u){var h,f,o;if(this.fireEvent("beforeload",this,n)!==!1){h=Ext.urlEncode(Ext.apply(n,this.extraParams));f=this.url;f+=(f.indexOf("?")!=-1?"&":"?")+h;this.nocache&&(f+="&_dc="+(new Date).getTime());var s=++Ext.data.ScriptTagProxy.TRANS_ID,e={id:s,cb:"stcCallback"+s,scriptId:"stcScript"+s,params:n,arg:u,url:f,callback:i,scope:r,reader:t},c=this;window[e.cb]=function(n){c.handleResponse(n,e)};f+=String.format("&{0}={1}",this.callbackParam,e.cb);this.autoAbort!==!1&&this.abort();e.timeoutId=this.handleFailure.defer(this.timeout,this,[e]);o=document.createElement("script");o.setAttribute("src",f);o.setAttribute("type","text/javascript");o.setAttribute("id",e.scriptId);this.head.appendChild(o);this.trans=e}else i.call(r||this,null,u,!1)},isLoading:function(){return this.trans?!0:!1},abort:function(){this.isLoading()&&this.destroyTrans(this.trans)},destroyTrans:function(n,t){if(this.head.removeChild(document.getElementById(n.scriptId)),clearTimeout(n.timeoutId),t){window[n.cb]=undefined;try{delete window[n.cb]}catch(i){}}else window[n.cb]=function(){window[n.cb]=undefined;try{delete window[n.cb]}catch(t){}}},handleResponse:function(n,t){this.trans=!1;this.destroyTrans(t,!0);var i;try{i=t.reader.readRecords(n)}catch(r){this.fireEvent("loadexception",this,n,t.arg,r);t.callback.call(t.scope||window,null,t.arg,!1);return}this.fireEvent("load",this,n,t.arg);t.callback.call(t.scope||window,i,t.arg,!0)},handleFailure:function(n){this.trans=!1;this.destroyTrans(n,!1);this.fireEvent("loadexception",this,null,n.arg);n.callback.call(n.scope||window,null,n.arg,!1)}});Ext.data.JsonReader=function(n,t){n=n||{};Ext.data.JsonReader.superclass.constructor.call(this,n,t||n.fields)};Ext.extend(Ext.data.JsonReader,Ext.data.DataReader,{read:function(n){var i=n.responseText,t=eval("("+i+")");if(!t)throw{message:"JsonReader.read: Json object not found"};if(t.metaData){delete this.ef;this.meta=t.metaData;this.recordType=Ext.data.Record.create(t.metaData.fields);this.onMetaChange(this.meta,this.recordType,t)}return this.readRecords(t)},onMetaChange:function(){},simpleAccess:function(n,t){return n[t]},getJsonAccessor:function(){var n=/[\[\.]/;return function(t){try{return n.test(t)?new Function("obj","return obj."+t):function(n){return n[t]}}catch(i){}return Ext.emptyFn}}(),readRecords:function(n){var a,v,e,r,f,u,s;this.jsonData=n;var i=this.meta,h=this.recordType,t=h.prototype.fields,c=t.items,l=t.length;if(!this.ef)for(i.totalProperty&&(this.getTotal=this.getJsonAccessor(i.totalProperty)),i.successProperty&&(this.getSuccess=this.getJsonAccessor(i.successProperty)),this.getRoot=i.root?this.getJsonAccessor(i.root):function(n){return n},i.id?(a=this.getJsonAccessor(i.id),this.getId=function(n){var t=a(n);return t===undefined||t===""?null:t}):this.getId=function(){return null},this.ef=[],r=0;r<l;r++)t=c[r],v=t.mapping!==undefined&&t.mapping!==null?t.mapping:t.name,this.ef[r]=this.getJsonAccessor(v);var y=this.getRoot(n),p=y.length,w=p,b=!0;for(i.totalProperty&&(u=parseInt(this.getTotal(n),10),isNaN(u)||(w=u)),i.successProperty&&(u=this.getSuccess(n),(u===!1||u==="false")&&(b=!1)),e=[],r=0;r<p;r++){var o=y[r],k={},d=this.getId(o);for(f=0;f<l;f++)t=c[f],u=this.ef[f](o),k[t.name]=t.convert(u!==undefined?u:t.defaultValue);s=new h(k,d);s.json=o;e[r]=s}return{success:b,records:e,totalRecords:w}}});Ext.data.XmlReader=function(n,t){n=n||{};Ext.data.XmlReader.superclass.constructor.call(this,n,t||n.fields)};Ext.extend(Ext.data.XmlReader,Ext.data.DataReader,{read:function(n){var t=n.responseXML;if(!t)throw{message:"XmlReader.read: XML Document not available"};return this.readRecords(t)},readRecords:function(n){var s,r,h,u,b,f,d,t,e,l;this.xmlData=n;var o=n.documentElement||n,i=Ext.DomQuery,a=this.recordType,v=a.prototype.fields,y=this.meta.id,p=0,w=!0;for(this.meta.totalRecords&&(p=i.selectNumber(this.meta.totalRecords,o,0)),this.meta.success&&(s=i.selectValue(this.meta.success,o,!0),w=s!==!1&&s!=="false"),r=[],h=i.select(this.meta.record,o),u=0,b=h.length;u<b;u++){var c=h[u],k={},g=y?i.selectValue(y,c):undefined;for(f=0,d=v.length;f<d;f++)t=v.items[f],e=i.selectValue(t.mapping||t.name,c,t.defaultValue),e=t.convert(e),k[t.name]=e;l=new a(k,g);l.node=c;r[r.length]=l}return{success:w,records:r,totalRecords:p||r.length}}});Ext.data.ArrayReader=Ext.extend(Ext.data.JsonReader,{readRecords:function(n){for(var u,v,s,r=this.meta?this.meta.id:null,h=this.recordType,c=h.prototype.fields,f=[],l=n,e=0;e<l.length;e++){var t=l[e],a={},p=(r||r===0)&&t[r]!==undefined&&t[r]!==""?t[r]:null;for(u=0,v=c.length;u<v;u++){var i=c.items[u],y=i.mapping!==undefined&&i.mapping!==null?i.mapping:u,o=t[y]!==undefined?t[y]:i.defaultValue;o=i.convert(o);a[i.name]=o}s=new h(a,p);s.json=t;f[f.length]=s}return{records:f,totalRecords:f.length}}});Ext.data.Tree=function(n){this.nodeHash={};this.root=null;n&&this.setRootNode(n);this.addEvents("append","remove","move","insert","beforeappend","beforeremove","beforemove","beforeinsert");Ext.data.Tree.superclass.constructor.call(this)};Ext.extend(Ext.data.Tree,Ext.util.Observable,{pathSeparator:"/",proxyNodeEvent:function(){return this.fireEvent.apply(this,arguments)},getRootNode:function(){return this.root},setRootNode:function(n){return this.root=n,n.ownerTree=this,n.isRoot=!0,this.registerNode(n),n},getNodeById:function(n){return this.nodeHash[n]},registerNode:function(n){this.nodeHash[n.id]=n},unregisterNode:function(n){delete this.nodeHash[n.id]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"}});Ext.data.Node=function(n){this.attributes=n||{};this.leaf=this.attributes.leaf;this.id=this.attributes.id;this.id||(this.id=Ext.id(null,"ynode-"),this.attributes.id=this.id);this.childNodes=[];this.childNodes.indexOf||(this.childNodes.indexOf=function(n){for(var t=0,i=this.length;t<i;t++)if(this[t]==n)return t;return-1});this.parentNode=null;this.firstChild=null;this.lastChild=null;this.previousSibling=null;this.nextSibling=null;this.addEvents({append:!0,remove:!0,move:!0,insert:!0,beforeappend:!0,beforeremove:!0,beforemove:!0,beforeinsert:!0});this.listeners=this.attributes.listeners;Ext.data.Node.superclass.constructor.call(this)};Ext.extend(Ext.data.Node,Ext.util.Observable,{fireEvent:function(){if(Ext.data.Node.superclass.fireEvent.apply(this,arguments)===!1)return!1;var n=this.getOwnerTree();return n&&n.proxyNodeEvent.apply(n,arguments)===!1?!1:!0},isLeaf:function(){return this.leaf===!0},setFirstChild:function(n){this.firstChild=n},setLastChild:function(n){this.lastChild=n},isLast:function(){return this.parentNode?this.parentNode.lastChild==this:!0},isFirst:function(){return this.parentNode?this.parentNode.firstChild==this:!0},hasChildNodes:function(){return!this.isLeaf()&&this.childNodes.length>0},appendChild:function(n){var r=!1,u,e,t,i,f;if(n instanceof Array?r=n:arguments.length>1&&(r=arguments),r)for(u=0,e=r.length;u<e;u++)this.appendChild(r[u]);else{if(this.fireEvent("beforeappend",this.ownerTree,this,n)===!1)return!1;if(t=this.childNodes.length,i=n.parentNode,i){if(n.fireEvent("beforemove",n.getOwnerTree(),n,i,this,t)===!1)return!1;i.removeChild(n)}return t=this.childNodes.length,t==0&&this.setFirstChild(n),this.childNodes.push(n),n.parentNode=this,f=this.childNodes[t-1],f?(n.previousSibling=f,f.nextSibling=n):n.previousSibling=null,n.nextSibling=null,this.setLastChild(n),n.setOwnerTree(this.getOwnerTree()),this.fireEvent("append",this.ownerTree,this,n,t),i&&n.fireEvent("move",this.ownerTree,n,i,this,t),n}},removeChild:function(n){var t=this.childNodes.indexOf(n);return t==-1?!1:this.fireEvent("beforeremove",this.ownerTree,this,n)===!1?!1:(this.childNodes.splice(t,1),n.previousSibling&&(n.previousSibling.nextSibling=n.nextSibling),n.nextSibling&&(n.nextSibling.previousSibling=n.previousSibling),this.firstChild==n&&this.setFirstChild(n.nextSibling),this.lastChild==n&&this.setLastChild(n.previousSibling),n.setOwnerTree(null),n.parentNode=null,n.previousSibling=null,n.nextSibling=null,this.fireEvent("remove",this.ownerTree,this,n),n)},insertBefore:function(n,t){var u;if(!t)return this.appendChild(n);if(n==t||this.fireEvent("beforeinsert",this.ownerTree,this,n,t)===!1)return!1;var f=this.childNodes.indexOf(t),i=n.parentNode,r=f;if(i==this&&this.childNodes.indexOf(n)<f&&r--,i){if(n.fireEvent("beforemove",n.getOwnerTree(),n,i,this,f,t)===!1)return!1;i.removeChild(n)}return r==0&&this.setFirstChild(n),this.childNodes.splice(r,0,n),n.parentNode=this,u=this.childNodes[r-1],u?(n.previousSibling=u,u.nextSibling=n):n.previousSibling=null,n.nextSibling=t,t.previousSibling=n,n.setOwnerTree(this.getOwnerTree()),this.fireEvent("insert",this.ownerTree,this,n,t),i&&n.fireEvent("move",this.ownerTree,n,i,this,r,t),n},remove:function(){return this.parentNode.removeChild(this),this},item:function(n){return this.childNodes[n]},replaceChild:function(n,t){return this.insertBefore(n,t),this.removeChild(t),t},indexOf:function(n){return this.childNodes.indexOf(n)},getOwnerTree:function(){if(!this.ownerTree)for(var n=this;n;){if(n.ownerTree){this.ownerTree=n.ownerTree;break}n=n.parentNode}return this.ownerTree},getDepth:function(){for(var t=0,n=this;n.parentNode;)++t,n=n.parentNode;return t},setOwnerTree:function(n){var i,t,r;if(n!=this.ownerTree){for(this.ownerTree&&this.ownerTree.unregisterNode(this),this.ownerTree=n,i=this.childNodes,t=0,r=i.length;t<r;t++)i[t].setOwnerTree(n);n&&n.registerNode(this)}},getPath:function(n){var t,i,r;for(n=n||"id",t=this.parentNode,i=[this.attributes[n]];t;)i.unshift(t.attributes[n]),t=t.parentNode;return r=this.getOwnerTree().pathSeparator,r+i.join(r)},bubble:function(n,t,i){for(var r=this;r;){if(n.apply(t||r,i||[r])===!1)break;r=r.parentNode}},cascade:function(n,t,i){var u,r,f;if(n.apply(t||this,i||[this])!==!1)for(u=this.childNodes,r=0,f=u.length;r<f;r++)u[r].cascade(n,t,i)},eachChild:function(n,t,i){for(var u=this.childNodes,r=0,f=u.length;r<f;r++)if(n.apply(t||this,i||[u[r]])===!1)break},findChild:function(n,t){for(var r=this.childNodes,i=0,u=r.length;i<u;i++)if(r[i].attributes[n]==t)return r[i];return null},findChildBy:function(n,t){for(var r=this.childNodes,i=0,u=r.length;i<u;i++)if(n.call(t||r[i],r[i])===!0)return r[i];return null},sort:function(n,t){var r=this.childNodes,f=r.length,e,i,u;if(f>0)for(e=t?function(){n.apply(t,arguments)}:n,r.sort(e),i=0;i<f;i++)u=r[i],u.previousSibling=r[i-1],u.nextSibling=r[i+1],i==0&&this.setFirstChild(u),i==f-1&&this.setLastChild(u)},contains:function(n){return n.isAncestor(this)},isAncestor:function(n){for(var t=this.parentNode;t;){if(t==n)return!0;t=t.parentNode}return!1},toString:function(){return"[Node"+(this.id?" "+this.id:"")+"]"}});Ext.data.GroupingStore=Ext.extend(Ext.data.Store,{remoteGroup:!1,groupOnSort:!1,clearGrouping:function(){this.groupField=!1;this.remoteGroup?(this.baseParams&&delete this.baseParams.groupBy,this.reload()):(this.applySort(),this.fireEvent("datachanged",this))},groupBy:function(n,t){if(this.groupField!=n||t){if(this.groupField=n,this.remoteGroup&&(this.baseParams||(this.baseParams={}),this.baseParams.groupBy=n),this.groupOnSort){this.sort(n);return}if(this.remoteGroup)this.reload();else{var i=this.sortInfo||{};i.field!=n?this.applySort():this.sortData(n);this.fireEvent("datachanged",this)}}},applySort:function(){if(Ext.data.GroupingStore.superclass.applySort.call(this),!this.groupOnSort&&!this.remoteGroup){var n=this.getGroupState();n&&n!=this.sortInfo.field&&this.sortData(this.groupField)}},applyGrouping:function(n){return this.groupField!==!1?(this.groupBy(this.groupField,!0),!0):(n===!0&&this.fireEvent("datachanged",this),!1)},getGroupState:function(){return this.groupOnSort&&this.groupField!==!1?this.sortInfo?this.sortInfo.field:undefined:this.groupField}});Ext.ComponentMgr=function(){var n=new Ext.util.MixedCollection,t={};return{register:function(t){n.add(t)},unregister:function(t){n.remove(t)},get:function(t){return n.get(t)},onAvailable:function(t,i,r){n.on("add",function(u,f){f.id==t&&(i.call(r||f,f),n.un("add",i,r))})},all:n,registerType:function(n,i){t[n]=i;i.xtype=n},create:function(n,i){return new t[n.xtype||i](n)}}}();Ext.reg=Ext.ComponentMgr.registerType;Ext.Component=function(n){if(n=n||{},n.initialConfig?(n.isAction&&(this.baseAction=n),n=n.initialConfig):(n.tagName||n.dom||typeof n=="string")&&(n={applyTo:n,id:n.id||n}),this.initialConfig=n,Ext.apply(this,n),this.addEvents("disable","enable","beforeshow","show","beforehide","hide","beforerender","render","beforedestroy","destroy","beforestaterestore","staterestore","beforestatesave","statesave"),this.getId(),Ext.ComponentMgr.register(this),Ext.Component.superclass.constructor.call(this),this.baseAction&&this.baseAction.addComponent(this),this.initComponent(),this.plugins)if(this.plugins instanceof Array)for(var t=0,i=this.plugins.length;t<i;t++)this.plugins[t].init(this);else this.plugins.init(this);this.stateful!==!1&&this.initState(n);this.applyTo?(this.applyToMarkup(this.applyTo),delete this.applyTo):this.renderTo&&(this.render(this.renderTo),delete this.renderTo)};Ext.Component.AUTO_ID=1e3;Ext.extend(Ext.Component,Ext.util.Observable,{disabledClass:"x-item-disabled",allowDomMove:!0,autoShow:!1,hideMode:"display",hideParent:!1,hidden:!1,disabled:!1,rendered:!1,ctype:"Ext.Component",actionMode:"el",getActionEl:function(){return this[this.actionMode]},initComponent:Ext.emptyFn,render:function(n,t){if(!this.rendered&&this.fireEvent("beforerender",this)!==!1){!n&&this.el&&(this.el=Ext.get(this.el),n=this.el.dom.parentNode,this.allowDomMove=!1);this.container=Ext.get(n);this.ctCls&&this.container.addClass(this.ctCls);this.rendered=!0;t!==undefined&&(t=typeof t=="number"?this.container.dom.childNodes[t]:Ext.getDom(t));this.onRender(this.container,t||null);this.autoShow&&this.el.removeClass(["x-hidden","x-hide-"+this.hideMode]);this.cls&&(this.el.addClass(this.cls),delete this.cls);this.style&&(this.el.applyStyles(this.style),delete this.style);this.fireEvent("render",this);this.afterRender(this.container);this.hidden&&this.hide();this.disabled&&this.disable();this.initStateEvents()}return this},initState:function(){if(Ext.state.Manager){var n=Ext.state.Manager.get(this.stateId||this.id);n&&this.fireEvent("beforestaterestore",this,n)!==!1&&(this.applyState(n),this.fireEvent("staterestore",this,n))}},initStateEvents:function(){if(this.stateEvents)for(var n=0,t;t=this.stateEvents[n];n++)this.on(t,this.saveState,this,{delay:100})},applyState:function(n){n&&Ext.apply(this,n)},getState:function(){return null},saveState:function(){if(Ext.state.Manager){var n=this.getState();this.fireEvent("beforestatesave",this,n)!==!1&&(Ext.state.Manager.set(this.stateId||this.id,n),this.fireEvent("statesave",this,n))}},applyToMarkup:function(n){this.allowDomMove=!1;this.el=Ext.get(n);this.render(this.el.dom.parentNode)},addClass:function(n){this.el?this.el.addClass(n):this.cls=this.cls?this.cls+" "+n:n},removeClass:function(n){this.el?this.el.removeClass(n):this.cls&&(this.cls=this.cls.split(" ").remove(n).join(" "))},onRender:function(n,t){if(this.autoEl)if(typeof this.autoEl=="string")this.el=document.createElement(this.autoEl);else{var i=document.createElement("div");Ext.DomHelper.overwrite(i,this.autoEl);this.el=i.firstChild}this.el&&(this.el=Ext.get(this.el),this.allowDomMove!==!1&&n.dom.insertBefore(this.el.dom,t))},getAutoCreate:function(){var n=typeof this.autoCreate=="object"?this.autoCreate:Ext.apply({},this.defaultAutoCreate);return this.id&&!n.id&&(n.id=this.id),n},afterRender:Ext.emptyFn,destroy:function(){this.fireEvent("beforedestroy",this)!==!1&&(this.beforeDestroy(),this.rendered&&(this.el.removeAllListeners(),this.el.remove(),this.actionMode=="container"&&this.container.remove()),this.onDestroy(),Ext.ComponentMgr.unregister(this),this.fireEvent("destroy",this),this.purgeListeners())},beforeDestroy:Ext.emptyFn,onDestroy:Ext.emptyFn,getEl:function(){return this.el},getId:function(){return this.id||(this.id="ext-comp-"+ ++Ext.Component.AUTO_ID)},getItemId:function(){return this.itemId||this.getId()},focus:function(n,t){if(t){this.focus.defer(typeof t=="number"?t:10,this,[n,!1]);return}return this.rendered&&(this.el.focus(),n===!0&&this.el.dom.select()),this},blur:function(){return this.rendered&&this.el.blur(),this},disable:function(){return this.rendered&&this.onDisable(),this.disabled=!0,this.fireEvent("disable",this),this},onDisable:function(){this.getActionEl().addClass(this.disabledClass);this.el.dom.disabled=!0},enable:function(){return this.rendered&&this.onEnable(),this.disabled=!1,this.fireEvent("enable",this),this},onEnable:function(){this.getActionEl().removeClass(this.disabledClass);this.el.dom.disabled=!1},setDisabled:function(n){this[n?"disable":"enable"]()},show:function(){return this.fireEvent("beforeshow",this)!==!1&&(this.hidden=!1,this.autoRender&&this.render(typeof this.autoRender=="boolean"?Ext.getBody():this.autoRender),this.rendered&&this.onShow(),this.fireEvent("show",this)),this},onShow:function(){this.hideParent?this.container.removeClass("x-hide-"+this.hideMode):this.getActionEl().removeClass("x-hide-"+this.hideMode)},hide:function(){return this.fireEvent("beforehide",this)!==!1&&(this.hidden=!0,this.rendered&&this.onHide(),this.fireEvent("hide",this)),this},onHide:function(){this.hideParent?this.container.addClass("x-hide-"+this.hideMode):this.getActionEl().addClass("x-hide-"+this.hideMode)},setVisible:function(n){return n?this.show():this.hide(),this},isVisible:function(){return this.rendered&&this.getActionEl().isVisible()},cloneConfig:function(n){n=n||{};var i=n.id||Ext.id(),t=Ext.applyIf(n,this.initialConfig);return t.id=i,new this.constructor(t)},getXType:function(){return this.constructor.xtype},isXType:function(n,t){return t?this.constructor.xtype==n:("/"+this.getXTypes()+"/").indexOf("/"+n+"/")!=-1},getXTypes:function(){var t=this.constructor,i,n;if(!t.xtypes){for(i=[],n=this;n&&n.constructor.xtype;)i.unshift(n.constructor.xtype),n=n.constructor.superclass;t.xtypeChain=i;t.xtypes=i.join("/")}return t.xtypes}});Ext.reg("component",Ext.Component);Ext.Action=function(n){this.initialConfig=n;this.items=[]};Ext.Action.prototype={isAction:!0,setText:function(n){this.initialConfig.text=n;this.callEach("setText",[n])},getText:function(){return this.initialConfig.text},setIconClass:function(n){this.initialConfig.iconCls=n;this.callEach("setIconClass",[n])},getIconClass:function(){return this.initialConfig.iconCls},setDisabled:function(n){this.initialConfig.disabled=n;this.callEach("setDisabled",[n])},enable:function(){this.setDisabled(!1)},disable:function(){this.setDisabled(!0)},isDisabled:function(){return this.initialConfig.disabled},setHidden:function(n){this.initialConfig.hidden=n;this.callEach("setVisible",[!n])},show:function(){this.setHidden(!1)},hide:function(){this.setHidden(!0)},isHidden:function(){return this.initialConfig.hidden},setHandler:function(n,t){this.initialConfig.handler=n;this.initialConfig.scope=t;this.callEach("setHandler",[n,t])},each:function(n,t){Ext.each(this.items,n,t)},callEach:function(n,t){for(var r=this.items,i=0,u=r.length;i<u;i++)r[i][n].apply(r[i],t)},addComponent:function(n){this.items.push(n);n.on("destroy",this.removeComponent,this)},removeComponent:function(n){this.items.remove(n)}},function(){Ext.Layer=function(n,t){var r;n=n||{};var u=Ext.DomHelper,i=n.parentEl,f=i?Ext.getDom(i):document.body;t&&(this.dom=Ext.getDom(t));this.dom||(r=n.dh||{tag:"div",cls:"x-layer"},this.dom=u.append(f,r));n.cls&&this.addClass(n.cls);this.constrain=n.constrain!==!1;this.visibilityMode=Ext.Element.VISIBILITY;this.id=n.id?this.dom.id=n.id:Ext.id(this.dom);this.zindex=n.zindex||this.getZIndex();this.position("absolute",this.zindex);n.shadow?(this.shadowOffset=n.shadowOffset||4,this.shadow=new Ext.Shadow({offset:this.shadowOffset,mode:n.shadow})):this.shadowOffset=0;this.useShim=n.shim!==!1&&Ext.useShims;this.useDisplay=n.useDisplay;this.hide()};var n=Ext.Element.prototype,t=[];Ext.extend(Ext.Layer,Ext.Element,{getZIndex:function(){return this.zindex||parseInt(this.getStyle("z-index"),10)||11e3},getShim:function(){var n,i;return this.useShim?this.shim?this.shim:(n=t.shift(),n||(n=this.createShim(),n.enableDisplayMode("block"),n.dom.style.display="none",n.dom.style.visibility="visible"),i=this.dom.parentNode,n.dom.parentNode!=i&&i.insertBefore(n.dom,this.dom),n.setStyle("z-index",this.getZIndex()-2),this.shim=n,n):null},hideShim:function(){this.shim&&(this.shim.setDisplayed(!1),t.push(this.shim),delete this.shim)},disableShadow:function(){this.shadow&&(this.shadowDisabled=!0,this.shadow.hide(),this.lastShadowOffset=this.shadowOffset,this.shadowOffset=0)},enableShadow:function(n){this.shadow&&(this.shadowDisabled=!1,this.shadowOffset=this.lastShadowOffset,delete this.lastShadowOffset,n&&this.sync(!0))},sync:function(n){var i=this.shadow,r,u;if(!this.updating&&this.isVisible()&&(i||this.useShim)){var t=this.getShim(),o=this.getWidth(),s=this.getHeight(),f=this.getLeft(!0),e=this.getTop(!0);i&&!this.shadowDisabled?(n&&!i.isVisible()?i.show(this):i.realign(f,e,o,s),t&&(n&&t.show(),r=i.adjusts,u=t.dom.style,u.left=Math.min(f,f+r.l)+"px",u.top=Math.min(e,e+r.t)+"px",u.width=o+r.w+"px",u.height=s+r.h+"px")):t&&(n&&t.show(),t.setSize(o,s),t.setLeftTop(f,e))}},destroy:function(){this.hideShim();this.shadow&&this.shadow.hide();this.removeAllListeners();Ext.removeNode(this.dom);Ext.Element.uncache(this.id)},remove:function(){this.destroy()},beginUpdate:function(){this.updating=!0},endUpdate:function(){this.updating=!1;this.sync(!0)},hideUnders:function(){this.shadow&&this.shadow.hide();this.hideShim()},constrainXY:function(){var o;if(this.constrain){var s=Ext.lib.Dom.getViewWidth(),h=Ext.lib.Dom.getViewHeight(),i=Ext.getDoc().getScroll(),r=this.getXY(),u=r[0],t=r[1],c=this.dom.offsetWidth+this.shadowOffset,e=this.dom.offsetHeight+this.shadowOffset,f=!1;u+c>s+i.left&&(u=s-c-this.shadowOffset,f=!0);t+e>h+i.top&&(t=h-e-this.shadowOffset,f=!0);u<i.left&&(u=i.left,f=!0);t<i.top&&(t=i.top,f=!0);f&&(this.avoidY&&(o=this.avoidY,t<=o&&t+e>=o&&(t=o-e-5)),r=[u,t],this.storeXY(r),n.setXY.call(this,r),this.sync())}},isVisible:function(){return this.visible},showAction:function(){this.visible=!0;this.useDisplay===!0?this.setDisplayed(""):this.lastXY?n.setXY.call(this,this.lastXY):this.lastLT&&n.setLeftTop.call(this,this.lastLT[0],this.lastLT[1])},hideAction:function(){this.visible=!1;this.useDisplay===!0?this.setDisplayed(!1):this.setLeftTop(-1e4,-1e4)},setVisible:function(t,i,r,u,f){var e;t&&this.showAction();i&&t?(e=function(){this.sync(!0);u&&u()}.createDelegate(this),n.setVisible.call(this,!0,!0,r,e,f)):(t||this.hideUnders(!0),e=u,i&&(e=function(){this.hideAction();u&&u()}.createDelegate(this)),n.setVisible.call(this,t,i,r,e,f),t?this.sync(!0):i||this.hideAction())},storeXY:function(n){delete this.lastLT;this.lastXY=n},storeLeftTop:function(n,t){delete this.lastXY;this.lastLT=[n,t]},beforeFx:function(){return this.beforeAction(),Ext.Layer.superclass.beforeFx.apply(this,arguments)},afterFx:function(){Ext.Layer.superclass.afterFx.apply(this,arguments);this.sync(this.isVisible())},beforeAction:function(){!this.updating&&this.shadow&&this.shadow.hide()},setLeft:function(t){this.storeLeftTop(t,this.getTop(!0));n.setLeft.apply(this,arguments);this.sync()},setTop:function(t){this.storeLeftTop(this.getLeft(!0),t);n.setTop.apply(this,arguments);this.sync()},setLeftTop:function(t,i){this.storeLeftTop(t,i);n.setLeftTop.apply(this,arguments);this.sync()},setXY:function(t,i,r,u,f){this.fixDisplay();this.beforeAction();this.storeXY(t);var e=this.createCB(u);n.setXY.call(this,t,i,r,e,f);i||e()},createCB:function(n){var t=this;return function(){t.constrainXY();t.sync(!0);n&&n()}},setX:function(n,t,i,r,u){this.setXY([n,this.getY()],t,i,r,u)},setY:function(n,t,i,r,u){this.setXY([this.getX(),n],t,i,r,u)},setSize:function(t,i,r,u,f,e){this.beforeAction();var o=this.createCB(f);n.setSize.call(this,t,i,r,u,o,e);r||o()},setWidth:function(t,i,r,u,f){this.beforeAction();var e=this.createCB(u);n.setWidth.call(this,t,i,r,e,f);i||e()},setHeight:function(t,i,r,u,f){this.beforeAction();var e=this.createCB(u);n.setHeight.call(this,t,i,r,e,f);i||e()},setBounds:function(t,i,r,u,f,e,o,s){this.beforeAction();var h=this.createCB(o);return f?n.setBounds.call(this,t,i,r,u,f,e,h,s):(this.storeXY([t,i]),n.setXY.call(this,[t,i]),n.setSize.call(this,r,u,f,e,h,s),h()),this},setZIndex:function(n){this.zindex=n;this.setStyle("z-index",n+2);this.shadow&&this.shadow.setZIndex(n+1);this.shim&&this.shim.setStyle("z-index",n)}})}();Ext.Shadow=function(n){Ext.apply(this,n);typeof this.mode!="string"&&(this.mode=this.defaultMode);var r=this.offset,t={h:0},i=Math.floor(this.offset/2);switch(this.mode.toLowerCase()){case"drop":t.w=0;t.l=t.t=r;t.t-=1;Ext.isIE&&(t.l-=this.offset+i,t.t-=this.offset+i,t.w-=i,t.h-=i,t.t+=1);break;case"sides":t.w=r*2;t.l=-r;t.t=r-1;Ext.isIE&&(t.l-=this.offset-i,t.t-=this.offset+i,t.l+=1,t.w-=(this.offset-i)*2,t.w-=i+1,t.h-=1);break;case"frame":t.w=t.h=r*2;t.l=t.t=-r;t.t+=1;t.h-=2;Ext.isIE&&(t.l-=this.offset-i,t.t-=this.offset-i,t.l+=1,t.w-=this.offset+i+1,t.h-=this.offset+i,t.h+=1)}this.adjusts=t};Ext.Shadow.prototype={offset:4,defaultMode:"drop",show:function(n){n=Ext.get(n);this.el||(this.el=Ext.Shadow.Pool.pull(),this.el.dom.nextSibling!=n.dom&&this.el.insertBefore(n));this.el.setStyle("z-index",this.zIndex||parseInt(n.getStyle("z-index"),10)-1);Ext.isIE&&(this.el.dom.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=50) progid:DXImageTransform.Microsoft.Blur(pixelradius="+this.offset+")");this.realign(n.getLeft(!0),n.getTop(!0),n.getWidth(),n.getHeight());this.el.dom.style.display="block"},isVisible:function(){return this.el?!0:!1},realign:function(n,t,i,r){var f,o;if(this.el){var e=this.adjusts,s=this.el.dom,u=s.style;u.left=n+e.l+"px";u.top=t+e.t+"px";var h=i+e.w,c=r+e.h,l=h+"px",a=c+"px";(u.width!=l||u.height!=a)&&(u.width=l,u.height=a,Ext.isIE||(f=s.childNodes,o=Math.max(0,h-12)+"px",f[0].childNodes[1].style.width=o,f[1].childNodes[1].style.width=o,f[2].childNodes[1].style.width=o,f[1].style.height=Math.max(0,c-12)+"px"))}},hide:function(){this.el&&(this.el.dom.style.display="none",Ext.Shadow.Pool.push(this.el),delete this.el)},setZIndex:function(n){this.zIndex=n;this.el&&this.el.setStyle("z-index",n)}};Ext.Shadow.Pool=function(){var n=[],t=Ext.isIE?'<div class="x-ie-shadow"><\/div>':'<div class="x-shadow"><div class="xst"><div class="xstl"><\/div><div class="xstc"><\/div><div class="xstr"><\/div><\/div><div class="xsc"><div class="xsml"><\/div><div class="xsmc"><\/div><div class="xsmr"><\/div><\/div><div class="xsb"><div class="xsbl"><\/div><div class="xsbc"><\/div><div class="xsbr"><\/div><\/div><\/div>';return{pull:function(){var i=n.shift();return i||(i=Ext.get(Ext.DomHelper.insertHtml("beforeBegin",document.body.firstChild,t)),i.autoBoxAdjust=!1),i},push:function(t){n.push(t)}}}();Ext.BoxComponent=Ext.extend(Ext.Component,{initComponent:function(){Ext.BoxComponent.superclass.initComponent.call(this);this.addEvents("resize","move")},boxReady:!1,deferHeight:!1,setSize:function(n,t){var u;if(typeof n=="object"&&(t=n.height,n=n.width),!this.boxReady)return this.width=n,this.height=t,this;if(this.lastSize&&this.lastSize.width==n&&this.lastSize.height==t)return this;this.lastSize={width:n,height:t};var f=this.adjustSize(n,t),i=f.width,r=f.height;if(i!==undefined||r!==undefined){u=this.getResizeEl();this.deferHeight||i===undefined||r===undefined?this.deferHeight||r===undefined?i!==undefined&&u.setWidth(i):u.setHeight(r):u.setSize(i,r);this.onResize(i,r,n,t);this.fireEvent("resize",this,i,r,n,t)}return this},setWidth:function(n){return this.setSize(n)},setHeight:function(n){return this.setSize(undefined,n)},getSize:function(){return this.el.getSize()},getPosition:function(n){return n===!0?[this.el.getLeft(!0),this.el.getTop(!0)]:this.xy||this.el.getXY()},getBox:function(n){var t=this.el.getSize(),i;return n===!0?(t.x=this.el.getLeft(!0),t.y=this.el.getTop(!0)):(i=this.xy||this.el.getXY(),t.x=i[0],t.y=i[1]),t},updateBox:function(n){return this.setSize(n.width,n.height),this.setPagePosition(n.x,n.y),this},getResizeEl:function(){return this.resizeEl||this.el},getPositionEl:function(){return this.positionEl||this.el},setPosition:function(n,t){if(n&&typeof n[1]=="number"&&(t=n[1],n=n[0]),this.x=n,this.y=t,!this.boxReady)return this;var f=this.adjustPosition(n,t),i=f.x,r=f.y,u=this.getPositionEl();if(i!==undefined||r!==undefined){i!==undefined&&r!==undefined?u.setLeftTop(i,r):i!==undefined?u.setLeft(i):r!==undefined&&u.setTop(r);this.onPosition(i,r);this.fireEvent("move",this,i,r)}return this},setPagePosition:function(n,t){if((n&&typeof n[1]=="number"&&(t=n[1],n=n[0]),this.pageX=n,this.pageY=t,this.boxReady)&&n!==undefined&&t!==undefined){var i=this.el.translatePoints(n,t);return this.setPosition(i.left,i.top),this}},onRender:function(n,t){Ext.BoxComponent.superclass.onRender.call(this,n,t);this.resizeEl&&(this.resizeEl=Ext.get(this.resizeEl));this.positionEl&&(this.positionEl=Ext.get(this.positionEl))},afterRender:function(){Ext.BoxComponent.superclass.afterRender.call(this);this.boxReady=!0;this.setSize(this.width,this.height);this.x||this.y?this.setPosition(this.x,this.y):(this.pageX||this.pageY)&&this.setPagePosition(this.pageX,this.pageY)},syncSize:function(){return delete this.lastSize,this.setSize(this.autoWidth?undefined:this.el.getWidth(),this.autoHeight?undefined:this.el.getHeight()),this},onResize:function(){},onPosition:function(){},adjustSize:function(n,t){return this.autoWidth&&(n="auto"),this.autoHeight&&(t="auto"),{width:n,height:t}},adjustPosition:function(n,t){return{x:n,y:t}}});Ext.reg("box",Ext.BoxComponent);Ext.SplitBar=function(n,t,i,r,u){this.el=Ext.get(n,!0);this.el.dom.unselectable="on";this.resizingEl=Ext.get(t,!0);this.orientation=i||Ext.SplitBar.HORIZONTAL;this.minSize=0;this.maxSize=2e3;this.animate=!1;this.useShim=!1;this.shim=null;this.proxy=u?Ext.get(u).dom:Ext.SplitBar.createProxy(this.orientation);this.dd=new Ext.dd.DDProxy(this.el.dom.id,"XSplitBars",{dragElId:this.proxy.id});this.dd.b4StartDrag=this.onStartProxyDrag.createDelegate(this);this.dd.endDrag=this.onEndProxyDrag.createDelegate(this);this.dragSpecs={};this.adapter=new Ext.SplitBar.BasicLayoutAdapter;this.adapter.init(this);this.orientation==Ext.SplitBar.HORIZONTAL?(this.placement=r||(this.el.getX()>this.resizingEl.getX()?Ext.SplitBar.LEFT:Ext.SplitBar.RIGHT),this.el.addClass("x-splitbar-h")):(this.placement=r||(this.el.getY()>this.resizingEl.getY()?Ext.SplitBar.TOP:Ext.SplitBar.BOTTOM),this.el.addClass("x-splitbar-v"));this.addEvents("resize","moved","beforeresize","beforeapply");Ext.SplitBar.superclass.constructor.call(this)};Ext.extend(Ext.SplitBar,Ext.util.Observable,{onStartProxyDrag:function(n,t){var u,i,r;this.fireEvent("beforeresize",this);this.overlay=Ext.DomHelper.append(document.body,{cls:"x-drag-overlay",html:"&#160;"},!0);this.overlay.unselectable();this.overlay.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0));this.overlay.show();Ext.get(this.proxy).setDisplayed("block");u=this.adapter.getElementSize(this);this.activeMinSize=this.getMinimumSize();this.activeMaxSize=this.getMaximumSize();i=u-this.activeMinSize;r=Math.max(this.activeMaxSize-u,0);this.orientation==Ext.SplitBar.HORIZONTAL?(this.dd.resetConstraints(),this.dd.setXConstraint(this.placement==Ext.SplitBar.LEFT?i:r,this.placement==Ext.SplitBar.LEFT?r:i),this.dd.setYConstraint(0,0)):(this.dd.resetConstraints(),this.dd.setXConstraint(0,0),this.dd.setYConstraint(this.placement==Ext.SplitBar.TOP?i:r,this.placement==Ext.SplitBar.TOP?r:i));this.dragSpecs.startSize=u;this.dragSpecs.startPoint=[n,t];Ext.dd.DDProxy.prototype.b4StartDrag.call(this.dd,n,t)},onEndProxyDrag:function(n){var i,t;Ext.get(this.proxy).setDisplayed(!1);i=Ext.lib.Event.getXY(n);this.overlay&&(this.overlay.remove(),delete this.overlay);t=this.orientation==Ext.SplitBar.HORIZONTAL?this.dragSpecs.startSize+(this.placement==Ext.SplitBar.LEFT?i[0]-this.dragSpecs.startPoint[0]:this.dragSpecs.startPoint[0]-i[0]):this.dragSpecs.startSize+(this.placement==Ext.SplitBar.TOP?i[1]-this.dragSpecs.startPoint[1]:this.dragSpecs.startPoint[1]-i[1]);t=Math.min(Math.max(t,this.activeMinSize),this.activeMaxSize);t!=this.dragSpecs.startSize&&this.fireEvent("beforeapply",this,t)!==!1&&(this.adapter.setElementSize(this,t),this.fireEvent("moved",this,t),this.fireEvent("resize",this,t))},getAdapter:function(){return this.adapter},setAdapter:function(n){this.adapter=n;this.adapter.init(this)},getMinimumSize:function(){return this.minSize},setMinimumSize:function(n){this.minSize=n},getMaximumSize:function(){return this.maxSize},setMaximumSize:function(n){this.maxSize=n},setCurrentSize:function(n){var t=this.animate;this.animate=!1;this.adapter.setElementSize(this,n);this.animate=t},destroy:function(n){this.shim&&this.shim.remove();this.dd.unreg();Ext.removeNode(this.proxy);n&&this.el.remove()}});Ext.SplitBar.createProxy=function(n){var t=new Ext.Element(document.createElement("div")),i;return t.unselectable(),i="x-splitbar-proxy",t.addClass(i+" "+(n==Ext.SplitBar.HORIZONTAL?i+"-h":i+"-v")),document.body.appendChild(t.dom),t.dom};Ext.SplitBar.BasicLayoutAdapter=function(){};Ext.SplitBar.BasicLayoutAdapter.prototype={init:function(){},getElementSize:function(n){return n.orientation==Ext.SplitBar.HORIZONTAL?n.resizingEl.getWidth():n.resizingEl.getHeight()},setElementSize:function(n,t,i){n.orientation==Ext.SplitBar.HORIZONTAL?n.animate?n.resizingEl.setWidth(t,!0,.1,i,"easeOut"):(n.resizingEl.setWidth(t),i&&i(n,t)):n.animate?n.resizingEl.setHeight(t,!0,.1,i,"easeOut"):(n.resizingEl.setHeight(t),i&&i(n,t))}};Ext.SplitBar.AbsoluteLayoutAdapter=function(n){this.basic=new Ext.SplitBar.BasicLayoutAdapter;this.container=Ext.get(n)};Ext.SplitBar.AbsoluteLayoutAdapter.prototype={init:function(n){this.basic.init(n)},getElementSize:function(n){return this.basic.getElementSize(n)},setElementSize:function(n,t){this.basic.setElementSize(n,t,this.moveSplitter.createDelegate(this,[n]))},moveSplitter:function(n){var t=Ext.SplitBar;switch(n.placement){case t.LEFT:n.el.setX(n.resizingEl.getRight());break;case t.RIGHT:n.el.setStyle("right",this.container.getWidth()-n.resizingEl.getLeft()+"px");break;case t.TOP:n.el.setY(n.resizingEl.getBottom());break;case t.BOTTOM:n.el.setY(n.resizingEl.getTop()-n.el.getHeight())}}};Ext.SplitBar.VERTICAL=1;Ext.SplitBar.HORIZONTAL=2;Ext.SplitBar.LEFT=1;Ext.SplitBar.RIGHT=2;Ext.SplitBar.TOP=3;Ext.SplitBar.BOTTOM=4;Ext.Container=Ext.extend(Ext.BoxComponent,{autoDestroy:!0,defaultType:"panel",initComponent:function(){Ext.Container.superclass.initComponent.call(this);this.addEvents("afterlayout","beforeadd","beforeremove","add","remove");var n=this.items;n&&(delete this.items,n instanceof Array?this.add.apply(this,n):this.add(n))},initItems:function(){this.items||(this.items=new Ext.util.MixedCollection(!1,this.getComponentId),this.getLayout())},setLayout:function(n){this.layout&&this.layout!=n&&this.layout.setContainer(null);this.initItems();this.layout=n;n.setContainer(this)},render:function(){if(Ext.Container.superclass.render.apply(this,arguments),this.layout&&(typeof this.layout=="string"&&(this.layout=new Ext.Container.LAYOUTS[this.layout.toLowerCase()](this.layoutConfig)),this.setLayout(this.layout),this.activeItem!==undefined)){var n=this.activeItem;delete this.activeItem;this.layout.setActiveItem(n);return}if(this.ownerCt||this.doLayout(),this.monitorResize===!0)Ext.EventManager.onWindowResize(this.doLayout,this)},getLayoutTarget:function(){return this.el},getComponentId:function(n){return n.itemId||n.id},add:function(n){var r,u,i,t,f;if(this.items||this.initItems(),r=arguments,u=r.length,u>1){for(i=0;i<u;i++)this.add(r[i]);return}return t=this.lookupComponent(this.applyDefaults(n)),f=this.items.length,this.fireEvent("beforeadd",this,t,f)!==!1&&this.onBeforeAdd(t)!==!1&&(this.items.add(t),t.ownerCt=this,this.fireEvent("add",this,t,f)),t},insert:function(n,t){var u,f,r,i;if(this.items||this.initItems(),u=arguments,f=u.length,f>2){for(r=f-1;r>=1;--r)this.insert(n,u[r]);return}return i=this.lookupComponent(this.applyDefaults(t)),i.ownerCt==this&&this.items.indexOf(i)<n&&--n,this.fireEvent("beforeadd",this,i,n)!==!1&&this.onBeforeAdd(i)!==!1&&(this.items.insert(n,i),i.ownerCt=this,this.fireEvent("add",this,i,n)),i},applyDefaults:function(n){return this.defaults&&(typeof n=="string"?(n=Ext.ComponentMgr.get(n),Ext.apply(n,this.defaults)):n.events?Ext.apply(n,this.defaults):Ext.applyIf(n,this.defaults)),n},onBeforeAdd:function(n){n.ownerCt&&n.ownerCt.remove(n,!1);this.hideBorders===!0&&(n.border=n.border===!0)},remove:function(n,t){var i=this.getComponent(n);return i&&this.fireEvent("beforeremove",this,i)!==!1&&(this.items.remove(i),delete i.ownerCt,(t===!0||t!==!1&&this.autoDestroy)&&i.destroy(),this.layout&&this.layout.activeItem==i&&delete this.layout.activeItem,this.fireEvent("remove",this,i)),i},getComponent:function(n){return typeof n=="object"?n:this.items.get(n)},lookupComponent:function(n){return typeof n=="string"?Ext.ComponentMgr.get(n):n.events?n:this.createComponent(n)},createComponent:function(n){return Ext.ComponentMgr.create(n,this.defaultType)},doLayout:function(){var t,n,r,i;if(this.rendered&&this.layout&&this.layout.layout(),this.items)for(t=this.items.items,n=0,r=t.length;n<r;n++)i=t[n],i.doLayout&&i.doLayout()},getLayout:function(){if(!this.layout){var n=new Ext.layout.ContainerLayout(this.layoutConfig);this.setLayout(n)}return this.layout},onDestroy:function(){var t,n,i;if(this.items)for(t=this.items.items,n=0,i=t.length;n<i;n++)Ext.destroy(t[n]);this.monitorResize&&Ext.EventManager.removeResizeListener(this.doLayout,this);Ext.Container.superclass.onDestroy.call(this)},bubble:function(n,t,i){for(var r=this;r;){if(n.apply(t||r,i||[r])===!1)break;r=r.ownerCt}},cascade:function(n,t,i){var u,r,f;if(n.apply(t||this,i||[this])!==!1&&this.items)for(u=this.items.items,r=0,f=u.length;r<f;r++)u[r].cascade?u[r].cascade(n,t,i):n.apply(t||this,i||[u[r]])},findById:function(n){var t,i=this;return this.cascade(function(r){if(i!=r&&r.id===n)return t=r,!1}),t||null},findByType:function(n){return typeof n=="function"?this.findBy(function(t){return t.constructor===n}):this.findBy(function(t){return t.constructor.xtype===n})},find:function(n,t){return this.findBy(function(i){return i[n]===t})},findBy:function(n,t){var i=[],r=this;return this.cascade(function(u){r!=u&&n.call(t||u,u,r)===!0&&i.push(u)}),i}});Ext.Container.LAYOUTS={};Ext.reg("container",Ext.Container);Ext.layout.ContainerLayout=function(n){Ext.apply(this,n)};Ext.layout.ContainerLayout.prototype={monitorResize:!1,activeItem:null,layout:function(){var n=this.container.getLayoutTarget();this.onLayout(this.container,n);this.container.fireEvent("afterlayout",this.container,this)},onLayout:function(n,t){this.renderAll(n,t)},isValidParent:function(n,t){var i=n.getPositionEl?n.getPositionEl():n.getEl();return i.dom.parentNode==t.dom},renderAll:function(n,t){for(var i,u=n.items.items,r=0,f=u.length;r<f;r++)i=u[r],!i||i.rendered&&this.isValidParent(i,t)||this.renderItem(i,r,t)},renderItem:function(n,t,i){if(n&&!n.rendered){if(n.render(i,t),this.extraCls){var r=n.getPositionEl?n.getPositionEl():n;r.addClass(this.extraCls)}this.renderHidden&&n!=this.activeItem&&n.hide()}else n&&!this.isValidParent(n,i)&&(this.extraCls&&n.addClass(this.extraCls),typeof t=="number"&&(t=i.dom.childNodes[t]),i.dom.insertBefore(n.getEl().dom,t||null),this.renderHidden&&n!=this.activeItem&&n.hide())},onResize:function(){if(!this.container.collapsed){var n=this.container.bufferResize;n?(this.resizeTask||(this.resizeTask=new Ext.util.DelayedTask(this.layout,this),this.resizeBuffer=typeof n=="number"?n:100),this.resizeTask.delay(this.resizeBuffer)):this.layout()}},setContainer:function(n){if(this.monitorResize&&n!=this.container&&(this.container&&this.container.un("resize",this.onResize,this),n))n.on("resize",this.onResize,this);this.container=n},parseMargins:function(n){var t=n.split(" "),i=t.length;return i==1&&(t[1]=t[0],t[2]=t[0],t[3]=t[0]),i==2&&(t[2]=t[0],t[3]=t[1]),{top:parseInt(t[0],10)||0,right:parseInt(t[1],10)||0,bottom:parseInt(t[2],10)||0,left:parseInt(t[3],10)||0}}};Ext.Container.LAYOUTS.auto=Ext.layout.ContainerLayout;Ext.layout.FitLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,onLayout:function(n,t){Ext.layout.FitLayout.superclass.onLayout.call(this,n,t);this.container.collapsed||this.setItemSize(this.activeItem||n.items.itemAt(0),t.getStyleSize())},setItemSize:function(n,t){n&&t.height>0&&n.setSize(t)}});Ext.Container.LAYOUTS.fit=Ext.layout.FitLayout;Ext.layout.CardLayout=Ext.extend(Ext.layout.FitLayout,{deferredRender:!1,renderHidden:!0,setActiveItem:function(n){n=this.container.getComponent(n);this.activeItem!=n&&(this.activeItem&&this.activeItem.hide(),this.activeItem=n,n.show(),this.layout())},renderAll:function(n,t){this.deferredRender?this.renderItem(this.activeItem,undefined,t):Ext.layout.CardLayout.superclass.renderAll.call(this,n,t)}});Ext.Container.LAYOUTS.card=Ext.layout.CardLayout;Ext.layout.AnchorLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,getAnchorViewSize:function(n,t){return t.dom==document.body?t.getViewSize():t.getStyleSize()},onLayout:function(n,t){var u,e,o,y,f,i,r,s,h,c;Ext.layout.AnchorLayout.superclass.onLayout.call(this,n,t);var l=this.getAnchorViewSize(n,t),a=l.width,v=l.height;if(!(a<20)&&!(v<20))for(n.anchorSize?typeof n.anchorSize=="number"?u=n.anchorSize:(u=n.anchorSize.width,e=n.anchorSize.height):(u=n.initialConfig.width,e=n.initialConfig.height),o=n.items.items,y=o.length,f=0;f<y;f++)i=o[f],i.anchor&&(r=i.anchorSpec,r||(c=i.anchor.split(" "),i.anchorSpec=r={right:this.parseAnchor(c[0],i.initialConfig.width,u),bottom:this.parseAnchor(c[1],i.initialConfig.height,e)}),s=r.right?this.adjustWidthAnchor(r.right(a),i):undefined,h=r.bottom?this.adjustHeightAnchor(r.bottom(v),i):undefined,(s||h)&&i.setSize(s||undefined,h||undefined))},parseAnchor:function(n,t,i){var r,u,f;if(n&&n!="none"){if(/^(r|right|b|bottom)$/i.test(n))return u=i-t,function(n){if(n!==r)return r=n,n-u};if(n.indexOf("%")!=-1)return f=parseFloat(n.replace("%",""))*.01,function(n){if(n!==r)return r=n,Math.floor(n*f)};if(n=parseInt(n,10),!isNaN(n))return function(t){if(t!==r)return r=t,t+n}}return!1},adjustWidthAnchor:function(n){return n},adjustHeightAnchor:function(n){return n}});Ext.Container.LAYOUTS.anchor=Ext.layout.AnchorLayout;Ext.layout.ColumnLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,extraCls:"x-column",scrollOffset:0,isValidParent:function(n){return n.getEl().dom.parentNode==this.innerCt.dom},onLayout:function(n,t){var e=n.items.items,o=e.length,i,r,u;if(this.innerCt||(t.addClass("x-column-layout-ct"),this.innerCt=t.createChild({cls:"x-column-inner"}),this.innerCt.createChild({cls:"x-clear"})),this.renderAll(n,this.innerCt),u=t.getViewSize(),!(u.width<1)||!(u.height<1)){var s=u.width-t.getPadding("lr")-this.scrollOffset,h=u.height-t.getPadding("tb"),f=s;for(this.innerCt.setWidth(s),r=0;r<o;r++)i=e[r],i.columnWidth||(f-=i.getSize().width+i.getEl().getMargins("lr"));for(f=f<0?0:f,r=0;r<o;r++)i=e[r],i.columnWidth&&i.setSize(Math.floor(i.columnWidth*f)-i.getEl().getMargins("lr"))}}});Ext.Container.LAYOUTS.column=Ext.layout.ColumnLayout;Ext.layout.BorderLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,rendered:!1,onLayout:function(n,t){var e,k,u,o,h,g,r,s,i,it,f,w;if(!this.rendered){for(t.position(),t.addClass("x-border-layout-ct"),k=n.items.items,e=[],f=0,w=k.length;f<w;f++)u=k[f],o=u.region,u.collapsed&&e.push(u),u.collapsed=!1,u.rendered||(u.cls=u.cls?u.cls+" x-border-panel":"x-border-panel",u.render(t,f)),this[o]=o!="center"&&u.split?new Ext.layout.BorderLayout.SplitRegion(this,u.initialConfig,o):new Ext.layout.BorderLayout.Region(this,u.initialConfig,o),this[o].render(t,u);this.rendered=!0}if(h=t.getViewSize(),h.width<20||h.height<20){e&&(this.restoreCollapsed=e);return}this.restoreCollapsed&&(e=this.restoreCollapsed,delete this.restoreCollapsed);var b=h.width,nt=h.height,d=b,c=nt,l=0,tt=0,a=this.north,v=this.south,y=this.west,p=this.east,u=this.center;if(!u)throw"No center region defined in BorderLayout "+n.id;if(a&&a.isVisible()&&(r=a.getSize(),i=a.getMargins(),r.width=b-(i.left+i.right),r.x=i.left,r.y=i.top,l=r.height+r.y+i.bottom,c-=l,a.applyLayout(r)),v&&v.isVisible()&&(r=v.getSize(),i=v.getMargins(),r.width=b-(i.left+i.right),r.x=i.left,g=r.height+i.top+i.bottom,r.y=nt-g+i.top,c-=g,v.applyLayout(r)),y&&y.isVisible()&&(r=y.getSize(),i=y.getMargins(),r.height=c-(i.top+i.bottom),r.x=i.left,r.y=l+i.top,s=r.width+i.left+i.right,tt+=s,d-=s,y.applyLayout(r)),p&&p.isVisible()&&(r=p.getSize(),i=p.getMargins(),r.height=c-(i.top+i.bottom),s=r.width+i.left+i.right,r.x=b-s+i.left,r.y=l+i.top,d-=s,p.applyLayout(r)),i=u.getMargins(),it={x:tt+i.left,y:l+i.top,width:d-(i.left+i.right),height:c-(i.top+i.bottom)},u.applyLayout(it),e)for(f=0,w=e.length;f<w;f++)e[f].collapse(!1);Ext.isIE&&Ext.isStrict&&t.repaint()}});Ext.layout.BorderLayout.Region=function(n,t,i){Ext.apply(this,t);this.layout=n;this.position=i;this.state={};typeof this.margins=="string"&&(this.margins=this.layout.parseMargins(this.margins));this.margins=Ext.applyIf(this.margins||{},this.defaultMargins);this.collapsible&&(typeof this.cmargins=="string"&&(this.cmargins=this.layout.parseMargins(this.cmargins)),this.cmargins=this.collapseMode!="mini"||this.cmargins?Ext.applyIf(this.cmargins||{},i=="north"||i=="south"?this.defaultNSCMargins:this.defaultEWCMargins):{left:0,top:0,right:0,bottom:0})};Ext.layout.BorderLayout.Region.prototype={collapsible:!1,split:!1,floatable:!0,minWidth:50,minHeight:50,defaultMargins:{left:0,top:0,right:0,bottom:0},defaultNSCMargins:{left:5,top:5,right:5,bottom:5},defaultEWCMargins:{left:5,top:0,right:5,bottom:0},isCollapsed:!1,render:function(n,t){this.panel=t;t.el.enableDisplayMode();this.targetEl=n;this.el=t.el;var r=t.getState,i=this.position;if(t.getState=function(){return Ext.apply(r.call(t)||{},this.state)}.createDelegate(this),i!="center"){t.allowQueuedExpand=!1;t.on({beforecollapse:this.beforeCollapse,collapse:this.onCollapse,beforeexpand:this.beforeExpand,expand:this.onExpand,hide:this.onHide,show:this.onShow,scope:this});this.collapsible&&(t.collapseEl="el",t.slideAnchor=this.getSlideAnchor());t.tools&&t.tools.toggle&&(t.tools.toggle.addClass("x-tool-collapse-"+i),t.tools.toggle.addClassOnOver("x-tool-collapse-"+i+"-over"))}},getCollapsedEl:function(){var n,t;if(!this.collapsedEl)if(this.toolTemplate||(n=new Ext.Template('<div class="x-tool x-tool-{id}">&#160;<\/div>'),n.disableFormats=!0,n.compile(),Ext.layout.BorderLayout.Region.prototype.toolTemplate=n),this.collapsedEl=this.targetEl.createChild({cls:"x-layout-collapsed x-layout-collapsed-"+this.position}),this.collapsedEl.enableDisplayMode("block"),this.collapseMode=="mini"){this.collapsedEl.addClass("x-layout-cmini-"+this.position);this.miniCollapsedEl=this.collapsedEl.createChild({cls:"x-layout-mini x-layout-mini-"+this.position,html:"&#160;"});this.miniCollapsedEl.addClassOnOver("x-layout-mini-over");this.collapsedEl.addClassOnOver("x-layout-collapsed-over");this.collapsedEl.on("click",this.onExpandClick,this,{stopEvent:!0})}else{t=this.toolTemplate.append(this.collapsedEl.dom,{id:"expand-"+this.position},!0);t.addClassOnOver("x-tool-expand-"+this.position+"-over");t.on("click",this.onExpandClick,this,{stopEvent:!0});if(this.floatable!==!1){this.collapsedEl.addClassOnOver("x-layout-collapsed-over");this.collapsedEl.on("click",this.collapseClick,this)}}return this.collapsedEl},onExpandClick:function(){this.isSlid?(this.afterSlideIn(),this.panel.expand(!1)):this.panel.expand()},onCollapseClick:function(){this.panel.collapse()},beforeCollapse:function(n,t){this.lastAnim=t;this.splitEl&&this.splitEl.hide();this.getCollapsedEl().show();this.panel.el.setStyle("z-index",100);this.isCollapsed=!0;this.layout.layout()},onCollapse:function(){this.panel.el.setStyle("z-index",1);this.lastAnim===!1||this.panel.animCollapse===!1?this.getCollapsedEl().dom.style.visibility="visible":this.getCollapsedEl().slideIn(this.panel.slideAnchor,{duration:.2});this.state.collapsed=!0;this.panel.saveState()},beforeExpand:function(){var n=this.getCollapsedEl();this.el.show();this.position=="east"||this.position=="west"?this.panel.setSize(undefined,n.getHeight()):this.panel.setSize(n.getWidth(),undefined);n.hide();n.dom.style.visibility="hidden";this.panel.el.setStyle("z-index",100)},onExpand:function(){this.isCollapsed=!1;this.splitEl&&this.splitEl.show();this.layout.layout();this.panel.el.setStyle("z-index",1);this.state.collapsed=!1;this.panel.saveState()},collapseClick:function(n){this.isSlid?(n.stopPropagation(),this.slideIn()):(n.stopPropagation(),this.slideOut())},onHide:function(){this.isCollapsed?this.getCollapsedEl().hide():this.splitEl&&this.splitEl.hide()},onShow:function(){this.isCollapsed?this.getCollapsedEl().show():this.splitEl&&this.splitEl.show()},isVisible:function(){return!this.panel.hidden},getMargins:function(){return this.isCollapsed&&this.cmargins?this.cmargins:this.margins},getSize:function(){return this.isCollapsed?this.getCollapsedEl().getSize():this.panel.getSize()},setPanel:function(n){this.panel=n},getMinWidth:function(){return this.minWidth},getMinHeight:function(){return this.minHeight},applyLayoutCollapsed:function(n){var t=this.getCollapsedEl();t.setLeftTop(n.x,n.y);t.setSize(n.width,n.height)},applyLayout:function(n){this.isCollapsed?this.applyLayoutCollapsed(n):(this.panel.setPosition(n.x,n.y),this.panel.setSize(n.width,n.height))},beforeSlide:function(){this.panel.beforeEffect()},afterSlide:function(){this.panel.afterEffect()},initAutoHide:function(){if(this.autoHide!==!1){if(!this.autoHideHd){var n=new Ext.util.DelayedTask(this.slideIn,this);this.autoHideHd={mouseout:function(t){t.within(this.el,!0)||n.delay(500)},mouseover:function(){n.cancel()},scope:this}}this.el.on(this.autoHideHd)}},clearAutoHide:function(){this.autoHide!==!1&&(this.el.un("mouseout",this.autoHideHd.mouseout),this.el.un("mouseover",this.autoHideHd.mouseover))},clearMonitor:function(){Ext.getDoc().un("click",this.slideInIf,this)},slideOut:function(){if(!this.isSlid&&!this.el.hasActiveFx()){this.isSlid=!0;var n=this.panel.tools;if(n&&n.toggle&&n.toggle.hide(),this.el.show(),this.position=="east"||this.position=="west"?this.panel.setSize(undefined,this.collapsedEl.getHeight()):this.panel.setSize(this.collapsedEl.getWidth(),undefined),this.restoreLT=[this.el.dom.style.left,this.el.dom.style.top],this.el.alignTo(this.collapsedEl,this.getCollapseAnchor()),this.el.setStyle("z-index",102),this.animFloat!==!1)this.beforeSlide(),this.el.slideIn(this.getSlideAnchor(),{callback:function(){this.afterSlide();this.initAutoHide();Ext.getDoc().on("click",this.slideInIf,this)},scope:this,block:!0});else{this.initAutoHide();Ext.getDoc().on("click",this.slideInIf,this)}}},afterSlideIn:function(){this.clearAutoHide();this.isSlid=!1;this.clearMonitor();this.el.setStyle("z-index","");this.el.dom.style.left=this.restoreLT[0];this.el.dom.style.top=this.restoreLT[1];var n=this.panel.tools;n&&n.toggle&&n.toggle.show()},slideIn:function(n){if(!this.isSlid||this.el.hasActiveFx()){Ext.callback(n);return}this.isSlid=!1;this.animFloat!==!1?(this.beforeSlide(),this.el.slideOut(this.getSlideAnchor(),{callback:function(){this.el.hide();this.afterSlide();this.afterSlideIn();Ext.callback(n)},scope:this,block:!0})):(this.el.hide(),this.afterSlideIn())},slideInIf:function(n){n.within(this.el)||this.slideIn()},anchors:{west:"left",east:"right",north:"top",south:"bottom"},sanchors:{west:"l",east:"r",north:"t",south:"b"},canchors:{west:"tl-tr",east:"tr-tl",north:"tl-bl",south:"bl-tl"},getAnchor:function(){return this.anchors[this.position]},getCollapseAnchor:function(){return this.canchors[this.position]},getSlideAnchor:function(){return this.sanchors[this.position]},getAlignAdj:function(){var n=this.cmargins;switch(this.position){case"west":return[0,0];case"east":return[0,0];case"north":return[0,0];case"south":return[0,0]}},getExpandAdj:function(){var t=this.collapsedEl,n=this.cmargins;switch(this.position){case"west":return[-(n.right+t.getWidth()+n.left),0];case"east":return[n.right+t.getWidth()+n.left,0];case"north":return[0,-(n.top+n.bottom+t.getHeight())];case"south":return[0,n.top+n.bottom+t.getHeight()]}}};Ext.layout.BorderLayout.SplitRegion=function(n,t,i){Ext.layout.BorderLayout.SplitRegion.superclass.constructor.call(this,n,t,i);this.applyLayout=this.applyFns[i]};Ext.extend(Ext.layout.BorderLayout.SplitRegion,Ext.layout.BorderLayout.Region,{splitTip:"Drag to resize.",collapsibleSplitTip:"Drag to resize. Double click to hide.",useSplitTips:!1,splitSettings:{north:{orientation:Ext.SplitBar.VERTICAL,placement:Ext.SplitBar.TOP,maxFn:"getVMaxSize",minProp:"minHeight",maxProp:"maxHeight"},south:{orientation:Ext.SplitBar.VERTICAL,placement:Ext.SplitBar.BOTTOM,maxFn:"getVMaxSize",minProp:"minHeight",maxProp:"maxHeight"},east:{orientation:Ext.SplitBar.HORIZONTAL,placement:Ext.SplitBar.RIGHT,maxFn:"getHMaxSize",minProp:"minWidth",maxProp:"maxWidth"},west:{orientation:Ext.SplitBar.HORIZONTAL,placement:Ext.SplitBar.LEFT,maxFn:"getHMaxSize",minProp:"minWidth",maxProp:"maxWidth"}},applyFns:{west:function(n){var i,t,r;if(this.isCollapsed)return this.applyLayoutCollapsed(n);i=this.splitEl.dom;t=i.style;this.panel.setPosition(n.x,n.y);r=i.offsetWidth;t.left=n.x+n.width-r+"px";t.top=n.y+"px";t.height=Math.max(0,n.height)+"px";this.panel.setSize(n.width-r,n.height)},east:function(n){if(this.isCollapsed)return this.applyLayoutCollapsed(n);var i=this.splitEl.dom,t=i.style,r=i.offsetWidth;this.panel.setPosition(n.x+r,n.y);t.left=n.x+"px";t.top=n.y+"px";t.height=Math.max(0,n.height)+"px";this.panel.setSize(n.width-r,n.height)},north:function(n){if(this.isCollapsed)return this.applyLayoutCollapsed(n);var i=this.splitEl.dom,t=i.style,r=i.offsetHeight;this.panel.setPosition(n.x,n.y);t.left=n.x+"px";t.top=n.y+n.height-r+"px";t.width=Math.max(0,n.width)+"px";this.panel.setSize(n.width,n.height-r)},south:function(n){if(this.isCollapsed)return this.applyLayoutCollapsed(n);var i=this.splitEl.dom,t=i.style,r=i.offsetHeight;this.panel.setPosition(n.x,n.y+r);t.left=n.x+"px";t.top=n.y+"px";t.width=Math.max(0,n.width)+"px";this.panel.setSize(n.width,n.height-r)}},render:function(n,t){var r,i;if(Ext.layout.BorderLayout.SplitRegion.superclass.render.call(this,n,t),r=this.position,this.splitEl=n.createChild({cls:"x-layout-split x-layout-split-"+r,html:"&#160;"}),this.collapseMode=="mini"){this.miniSplitEl=this.splitEl.createChild({cls:"x-layout-mini x-layout-mini-"+r,html:"&#160;"});this.miniSplitEl.addClassOnOver("x-layout-mini-over");this.miniSplitEl.on("click",this.onCollapseClick,this,{stopEvent:!0})}i=this.splitSettings[r];this.split=new Ext.SplitBar(this.splitEl.dom,t.el,i.orientation);this.split.placement=i.placement;this.split.getMaximumSize=this[i.maxFn].createDelegate(this);this.split.minSize=this.minSize||this[i.minProp];this.split.on("beforeapply",this.onSplitMove,this);if(this.split.useShim=this.useShim===!0,this.maxSize=this.maxSize||this[i.maxProp],t.hidden&&this.splitEl.hide(),this.useSplitTips&&(this.splitEl.dom.title=this.collapsible?this.collapsibleSplitTip:this.splitTip),this.collapsible)this.splitEl.on("dblclick",this.onCollapseClick,this)},getSize:function(){if(this.isCollapsed)return this.collapsedEl.getSize();var n=this.panel.getSize();return this.position=="north"||this.position=="south"?n.height+=this.splitEl.dom.offsetHeight:n.width+=this.splitEl.dom.offsetWidth,n},getHMaxSize:function(){var t=this.maxSize||1e4,n=this.layout.center;return Math.min(t,this.el.getWidth()+n.el.getWidth()-n.getMinWidth())},getVMaxSize:function(){var t=this.maxSize||1e4,n=this.layout.center;return Math.min(t,this.el.getHeight()+n.el.getHeight()-n.getMinHeight())},onSplitMove:function(n,t){var i=this.panel.getSize();return this.lastSplitSize=t,this.position=="north"||this.position=="south"?(this.panel.setSize(i.width,t),this.state.height=t):(this.panel.setSize(t,i.height),this.state.width=t),this.layout.layout(),this.panel.saveState(),!1},getSplitBar:function(){return this.split}});Ext.Container.LAYOUTS.border=Ext.layout.BorderLayout;Ext.layout.FormLayout=Ext.extend(Ext.layout.AnchorLayout,{labelSeparator:":",getAnchorViewSize:function(n){return n.body.getStyleSize()},setContainer:function(n){var i,t;Ext.layout.FormLayout.superclass.setContainer.call(this,n);n.labelAlign&&n.addClass("x-form-label-"+n.labelAlign);n.hideLabels?(this.labelStyle="display:none",this.elementStyle="padding-left:0;",this.labelAdjust=0):(this.labelSeparator=n.labelSeparator||this.labelSeparator,n.labelWidth=n.labelWidth||100,typeof n.labelWidth=="number"&&(i=typeof n.labelPad=="number"?n.labelPad:5,this.labelAdjust=n.labelWidth+i,this.labelStyle="width:"+n.labelWidth+"px;",this.elementStyle="padding-left:"+(n.labelWidth+i)+"px"),n.labelAlign=="top"&&(this.labelStyle="width:auto;",this.labelAdjust=0,this.elementStyle="padding-left:0;"));this.fieldTpl||(t=new Ext.Template('<div class="x-form-item {5}" tabIndex="-1">','<label for="{0}" style="{2}" class="x-form-item-label">{1}{4}<\/label>','<div class="x-form-element" id="x-form-el-{0}" style="{3}">','<\/div><div class="{6}"><\/div>',"<\/div>"),t.disableFormats=!0,t.compile(),Ext.layout.FormLayout.prototype.fieldTpl=t)},renderItem:function(n,t,i){if(n&&!n.rendered&&n.isFormField&&n.inputType!="hidden"){var r=[n.id,n.fieldLabel,n.labelStyle||this.labelStyle||"",this.elementStyle||"",typeof n.labelSeparator=="undefined"?this.labelSeparator:n.labelSeparator,(n.itemCls||this.container.itemCls||"")+(n.hideLabel?" x-hide-label":""),n.clearCls||"x-form-clear-left"];typeof t=="number"&&(t=i.dom.childNodes[t]||null);t?this.fieldTpl.insertBefore(t,r):this.fieldTpl.append(i,r);n.render("x-form-el-"+n.id)}else Ext.layout.FormLayout.superclass.renderItem.apply(this,arguments)},adjustWidthAnchor:function(n,t){return n-(t.hideLabel?0:this.labelAdjust)},isValidParent:function(){return!0}});Ext.Container.LAYOUTS.form=Ext.layout.FormLayout;Ext.layout.Accordion=Ext.extend(Ext.layout.FitLayout,{fill:!0,autoWidth:!0,titleCollapse:!0,hideCollapseTool:!1,collapseFirst:!1,animate:!1,sequence:!1,activeOnTop:!1,renderItem:function(n){this.animate===!1&&(n.animCollapse=!1);n.collapsible=!0;this.autoWidth&&(n.autoWidth=!0);this.titleCollapse&&(n.titleCollapse=!0);this.hideCollapseTool&&(n.hideCollapseTool=!0);this.collapseFirst!==undefined&&(n.collapseFirst=this.collapseFirst);this.activeItem||n.collapsed?this.activeItem&&(n.collapsed=!0):this.activeItem=n;Ext.layout.Accordion.superclass.renderItem.apply(this,arguments);n.header.addClass("x-accordion-hd");n.on("beforeexpand",this.beforeExpand,this)},beforeExpand:function(n,t){var i=this.activeItem;if(i){if(this.sequence)return delete this.activeItem,i.collapse({callback:function(){n.expand(t||!0)},scope:this}),!1;i.collapse(this.animate)}this.activeItem=n;this.activeOnTop&&n.el.dom.parentNode.insertBefore(n.el.dom,n.el.dom.parentNode.firstChild);this.layout()},setItemSize:function(n,t){var u,f,i,e,r;if(this.fill&&n){for(u=this.container.items.items,f=0,i=0,e=u.length;i<e;i++)r=u[i],r!=n&&(f+=r.getSize().height-r.bwrap.getHeight());t.height-=f;n.setSize(t)}}});Ext.Container.LAYOUTS.accordion=Ext.layout.Accordion;Ext.layout.TableLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!1,setContainer:function(n){Ext.layout.TableLayout.superclass.setContainer.call(this,n);this.currentRow=0;this.currentColumn=0;this.spanCells=[]},onLayout:function(n,t){var i=n.items.items,r=i.length;this.table||(t.addClass("x-table-layout-ct"),this.table=t.createChild({tag:"table",cls:"x-table-layout",cellspacing:0,cn:{tag:"tbody"}},null,!0),this.renderAll(n,t))},getRow:function(n){var t=this.table.tBodies[0].childNodes[n];return t||(t=document.createElement("tr"),this.table.tBodies[0].appendChild(t)),t},getNextCell:function(n){var r=document.createElement("td"),e,t,u,o,s,f,i;if(this.columns?(t=this.currentColumn,t!==0&&t%this.columns==0?(this.currentRow++,t=n.colspan||1):t+=n.colspan||1,u=this.getNextNonSpan(t,this.currentRow),this.currentColumn=u[0],u[1]!=this.currentRow&&(this.currentRow=u[1],n.colspan&&(this.currentColumn+=n.colspan-1)),e=this.getRow(this.currentRow)):e=this.getRow(0),n.colspan&&(r.colSpan=n.colspan),r.className="x-table-layout-cell",n.rowspan)for(r.rowSpan=n.rowspan,o=this.currentRow,s=n.colspan||1,f=o+1;f<o+n.rowspan;f++)for(i=this.currentColumn-s+1;i<=this.currentColumn;i++)this.spanCells[i]||(this.spanCells[i]=[]),this.spanCells[i][f]=1;return e.appendChild(r),r},getNextNonSpan:function(n,t){for(var r=n<=this.columns?n:this.columns,u=t,i=r;i<=this.columns;i++)if(this.spanCells[i]&&this.spanCells[i][u]){if(++r>this.columns)return this.getNextNonSpan(1,++u)}else break;return[r,u]},renderItem:function(n){n&&!n.rendered&&n.render(this.getNextCell(n))},isValidParent:function(){return!0}});Ext.Container.LAYOUTS.table=Ext.layout.TableLayout;Ext.layout.AbsoluteLayout=Ext.extend(Ext.layout.AnchorLayout,{extraCls:"x-abs-layout-item",onLayout:function(n,t){t.position();Ext.layout.AbsoluteLayout.superclass.onLayout.call(this,n,t)}});Ext.Container.LAYOUTS.absolute=Ext.layout.AbsoluteLayout;Ext.Viewport=Ext.extend(Ext.Container,{initComponent:function(){Ext.Viewport.superclass.initComponent.call(this);document.getElementsByTagName("html")[0].className+=" x-viewport";this.el=Ext.getBody();this.el.setHeight=Ext.emptyFn;this.el.setWidth=Ext.emptyFn;this.el.setSize=Ext.emptyFn;this.el.dom.scroll="no";this.allowDomMove=!1;this.autoWidth=!0;this.autoHeight=!0;Ext.EventManager.onWindowResize(this.fireResize,this);this.renderTo=this.el},fireResize:function(n,t){this.fireEvent("resize",this,n,t,n,t)}});Ext.reg("viewport",Ext.Viewport);Ext.Panel=Ext.extend(Ext.Container,{baseCls:"x-panel",collapsedCls:"x-panel-collapsed",maskDisabled:!0,animCollapse:Ext.enableFx,headerAsText:!0,buttonAlign:"right",collapsed:!1,collapseFirst:!0,minButtonWidth:75,elements:"body",toolTarget:"header",collapseEl:"bwrap",slideAnchor:"t",deferHeight:!0,expandDefaults:{duration:.25},collapseDefaults:{duration:.25},initComponent:function(){var t,n,i;if(Ext.Panel.superclass.initComponent.call(this),this.addEvents("bodyresize","titlechange","collapse","expand","beforecollapse","beforeexpand","beforeclose","close","activate","deactivate"),this.tbar&&(this.elements+=",tbar",typeof this.tbar=="object"&&(this.topToolbar=this.tbar),delete this.tbar),this.bbar&&(this.elements+=",bbar",typeof this.bbar=="object"&&(this.bottomToolbar=this.bbar),delete this.bbar),this.header===!0?(this.elements+=",header",delete this.header):this.title&&this.header!==!1&&(this.elements+=",header"),this.footer===!0&&(this.elements+=",footer",delete this.footer),this.buttons)for(t=this.buttons,this.buttons=[],n=0,i=t.length;n<i;n++)t[n].render?this.buttons.push(t[n]):this.addButton(t[n]);if(this.autoLoad)this.on("render",this.doAutoLoad,this,{delay:10})},createElement:function(n,t){if(this[n]){t.appendChild(this[n].dom);return}if(n==="bwrap"||this.elements.indexOf(n)!=-1)if(this[n+"Cfg"])this[n]=Ext.fly(t).createChild(this[n+"Cfg"]);else{var i=document.createElement("div");i.className=this[n+"Cls"];this[n]=Ext.get(t.appendChild(i))}},onRender:function(n,t){var u,o,r,f,i,h,c,l,e,a,v,s;if(Ext.Panel.superclass.onRender.call(this,n,t),this.createClasses(),this.el?(this.el.addClass(this.baseCls),this.header=this.el.down("."+this.headerCls),this.bwrap=this.el.down("."+this.bwrapCls),u=this.bwrap?this.bwrap:this.el,this.tbar=u.down("."+this.tbarCls),this.body=u.down("."+this.bodyCls),this.bbar=u.down("."+this.bbarCls),this.footer=u.down("."+this.footerCls),this.fromMarkup=!0):this.el=n.createChild({id:this.id,cls:this.baseCls},t),o=this.el,r=o.dom,this.cls&&this.el.addClass(this.cls),this.buttons&&(this.elements+=",footer"),this.frame){o.insertHtml("afterBegin",String.format(Ext.Element.boxMarkup,this.baseCls));this.createElement("header",r.firstChild.firstChild.firstChild);this.createElement("bwrap",r);var i=this.bwrap.dom,y=r.childNodes[1],p=r.childNodes[2];i.appendChild(y);i.appendChild(p);f=i.firstChild.firstChild.firstChild;this.createElement("tbar",f);this.createElement("body",f);this.createElement("bbar",f);this.createElement("footer",i.lastChild.firstChild.firstChild);this.footer||(this.bwrap.dom.lastChild.className+=" x-panel-nofooter")}else this.createElement("header",r),this.createElement("bwrap",r),i=this.bwrap.dom,this.createElement("tbar",i),this.createElement("body",i),this.createElement("bbar",i),this.createElement("footer",i),this.header||(this.body.addClass(this.bodyCls+"-noheader"),this.tbar&&this.tbar.addClass(this.tbarCls+"-noheader"));if(this.border===!1&&(this.el.addClass(this.baseCls+"-noborder"),this.body.addClass(this.bodyCls+"-noborder"),this.header&&this.header.addClass(this.headerCls+"-noborder"),this.footer&&this.footer.addClass(this.footerCls+"-noborder"),this.tbar&&this.tbar.addClass(this.tbarCls+"-noborder"),this.bbar&&this.bbar.addClass(this.bbarCls+"-noborder")),this.bodyBorder===!1&&this.body.addClass(this.bodyCls+"-noborder"),this.bodyStyle&&this.body.applyStyles(this.bodyStyle),this.bwrap.enableDisplayMode("block"),this.header&&(this.header.unselectable(),this.headerAsText&&(this.header.dom.innerHTML='<span class="'+this.headerTextCls+'">'+this.header.dom.innerHTML+"<\/span>",this.iconCls&&this.setIconClass(this.iconCls))),this.floating&&this.makeFloating(this.floating),this.collapsible&&(this.tools=this.tools?this.tools.slice(0):[],this.hideCollapseTool||this.tools[this.collapseFirst?"unshift":"push"]({id:"toggle",handler:this.toggleCollapse,scope:this}),this.titleCollapse&&this.header)){this.header.on("click",this.toggleCollapse,this);this.header.setStyle("cursor","pointer")}if(this.tools?(h=this.tools,this.tools={},this.addTool.apply(this,h)):this.tools={},this.buttons&&this.buttons.length>0)for(c=this.footer.createChild({cls:"x-panel-btns-ct",cn:{cls:"x-panel-btns x-panel-btns-"+this.buttonAlign,html:'<table cellspacing="0"><tbody><tr><\/tr><\/tbody><\/table><div class="x-clear"><\/div>'}},null,!0),l=c.getElementsByTagName("tr")[0],e=0,a=this.buttons.length;e<a;e++)v=this.buttons[e],s=document.createElement("td"),s.className="x-panel-btn-td",v.render(l.appendChild(s));this.tbar&&this.topToolbar&&(this.topToolbar instanceof Array&&(this.topToolbar=new Ext.Toolbar(this.topToolbar)),this.topToolbar.render(this.tbar));this.bbar&&this.bottomToolbar&&(this.bottomToolbar instanceof Array&&(this.bottomToolbar=new Ext.Toolbar(this.bottomToolbar)),this.bottomToolbar.render(this.bbar))},setIconClass:function(n){var r=this.iconCls,t,i;this.iconCls=n;this.rendered&&this.header&&(this.frame?(this.header.addClass("x-panel-icon"),this.header.replaceClass(r,this.iconCls)):(t=this.header.dom,i=t.firstChild&&String(t.firstChild.tagName).toLowerCase()=="img"?t.firstChild:null,i?Ext.fly(i).replaceClass(r,this.iconCls):Ext.DomHelper.insertBefore(t.firstChild,{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-panel-inline-icon "+this.iconCls})))},makeFloating:function(n){this.floating=!0;this.el=new Ext.Layer(typeof n=="object"?n:{shadow:this.shadow!==undefined?this.shadow:"sides",shadowOffset:this.shadowOffset,constrain:!1,shim:this.shim===!1?!1:undefined},this.el)},getTopToolbar:function(){return this.topToolbar},getBottomToolbar:function(){return this.bottomToolbar},addButton:function(n,t,i){var r={handler:t,scope:i,minWidth:this.minButtonWidth,hideParent:!0},u;return typeof n=="string"?r.text=n:Ext.apply(r,n),u=new Ext.Button(r),this.buttons||(this.buttons=[]),this.buttons.push(u),u},addTool:function(){var i;if(this[this.toolTarget]){this.toolTemplate||(i=new Ext.Template('<div class="x-tool x-tool-{id}">&#160;<\/div>'),i.disableFormats=!0,i.compile(),Ext.Panel.prototype.toolTemplate=i);for(var r=0,u=arguments,e=u.length;r<e;r++){var n=u[r],f="x-tool-"+n.id+"-over",t=this.toolTemplate.insertFirst(this[this.toolTarget],n,!0);this.tools[n.id]=t;t.enableDisplayMode("block");t.on("click",this.createToolHandler(t,n,f,this));if(n.on)t.on(n.on);n.hidden&&t.hide();n.qtip&&(typeof n.qtip=="object"?Ext.QuickTips.register(Ext.apply({target:t.id},n.qtip)):t.dom.qtip=n.qtip);t.addClassOnOver(f)}}},onShow:function(){if(this.floating)return this.el.show();Ext.Panel.superclass.onShow.call(this)},onHide:function(){if(this.floating)return this.el.hide();Ext.Panel.superclass.onHide.call(this)},createToolHandler:function(n,t,i,r){return function(u){n.removeClass(i);u.stopEvent();t.handler&&t.handler.call(t.scope||n,u,n,r)}},afterRender:function(){if(this.fromMarkup&&this.height===undefined&&!this.autoHeight&&(this.height=this.el.getHeight()),!this.floating||this.hidden||this.initHidden||this.el.show(),this.title&&this.setTitle(this.title),this.setAutoScroll(),this.html&&(this.body.update(typeof this.html=="object"?Ext.DomHelper.markup(this.html):this.html),delete this.html),this.contentEl){var n=Ext.getDom(this.contentEl);Ext.fly(n).removeClass(["x-hidden","x-hide-display"]);this.body.dom.appendChild(n)}this.collapsed&&(this.collapsed=!1,this.collapse(!1));Ext.Panel.superclass.afterRender.call(this);this.initEvents()},setAutoScroll:function(){this.rendered&&this.autoScroll&&this.body.setOverflow("auto")},getKeyMap:function(){return this.keyMap||(this.keyMap=new Ext.KeyMap(this.el,this.keys)),this.keyMap},initEvents:function(){this.keys&&this.getKeyMap();this.draggable&&this.initDraggable()},initDraggable:function(){this.dd=new Ext.Panel.DD(this,typeof this.draggable=="boolean"?null:this.draggable)},beforeEffect:function(){this.floating&&this.el.beforeAction();this.el.addClass("x-panel-animated")},afterEffect:function(){this.syncShadow();this.el.removeClass("x-panel-animated")},createEffect:function(n,t,i){var r={scope:i,block:!0};return n===!0?(r.callback=t,r):(r.callback=n.callback?function(){t.call(i);Ext.callback(n.callback,n.scope)}:t,Ext.applyIf(r,n))},collapse:function(n){if(!this.collapsed&&!this.el.hasFxBlock()&&this.fireEvent("beforecollapse",this,n)!==!1){var t=n===!0||n!==!1&&this.animCollapse;this.beforeEffect();this.onCollapse(t,n);return this}},onCollapse:function(n,t){n?this[this.collapseEl].slideOut(this.slideAnchor,Ext.apply(this.createEffect(t||!0,this.afterCollapse,this),this.collapseDefaults)):(this[this.collapseEl].hide(),this.afterCollapse())},afterCollapse:function(){this.collapsed=!0;this.el.addClass(this.collapsedCls);this.afterEffect();this.fireEvent("collapse",this)},expand:function(n){if(this.collapsed&&!this.el.hasFxBlock()&&this.fireEvent("beforeexpand",this,n)!==!1){var t=n===!0||n!==!1&&this.animCollapse;this.el.removeClass(this.collapsedCls);this.beforeEffect();this.onExpand(t,n);return this}},onExpand:function(n,t){n?this[this.collapseEl].slideIn(this.slideAnchor,Ext.apply(this.createEffect(t||!0,this.afterExpand,this),this.expandDefaults)):(this[this.collapseEl].show(),this.afterExpand())},afterExpand:function(){this.collapsed=!1;this.afterEffect();this.fireEvent("expand",this)},toggleCollapse:function(n){return this[this.collapsed?"expand":"collapse"](n),this},onDisable:function(){this.rendered&&this.maskDisabled&&this.el.mask();Ext.Panel.superclass.onDisable.call(this)},onEnable:function(){this.rendered&&this.maskDisabled&&this.el.unmask();Ext.Panel.superclass.onEnable.call(this)},onResize:function(n,t){if(n!==undefined||t!==undefined){if(this.collapsed){if(this.queuedBodySize={width:n,height:t},!this.queuedExpand&&this.allowQueuedExpand!==!1){this.queuedExpand=!0;this.on("expand",function(){delete this.queuedExpand;this.onResize(this.queuedBodySize.width,this.queuedBodySize.height);this.doLayout()},this,{single:!0})}}else typeof n=="number"?this.body.setWidth(this.adjustBodyWidth(n-this.getFrameWidth())):n=="auto"&&this.body.setWidth(n),typeof t=="number"?this.body.setHeight(this.adjustBodyHeight(t-this.getFrameHeight())):t=="auto"&&this.body.setHeight(t);this.fireEvent("bodyresize",this,n,t)}this.syncShadow()},adjustBodyHeight:function(n){return n},adjustBodyWidth:function(n){return n},onPosition:function(){this.syncShadow()},onDestroy:function(){var n,t;if(this.tools)for(n in this.tools)Ext.destroy(this.tools[n]);if(this.buttons)for(t in this.buttons)Ext.destroy(this.buttons[t]);Ext.destroy(this.topToolbar,this.bottomToolbar);Ext.Panel.superclass.onDestroy.call(this)},getFrameWidth:function(){var n=this.el.getFrameWidth("lr"),t,i;return this.frame&&(t=this.bwrap.dom.firstChild,n+=Ext.fly(t).getFrameWidth("l")+Ext.fly(t.firstChild).getFrameWidth("r"),i=this.bwrap.dom.firstChild.firstChild.firstChild,n+=Ext.fly(i).getFrameWidth("lr")),n},getFrameHeight:function(){var n=this.el.getFrameWidth("tb"),t,i,r;return n+=(this.tbar?this.tbar.getHeight():0)+(this.bbar?this.bbar.getHeight():0),this.frame?(t=this.el.dom.firstChild,i=this.bwrap.dom.lastChild,n+=t.offsetHeight+i.offsetHeight,r=this.bwrap.dom.firstChild.firstChild.firstChild,n+=Ext.fly(r).getFrameWidth("tb")):n+=(this.header?this.header.getHeight():0)+(this.footer?this.footer.getHeight():0),n},getInnerWidth:function(){return this.getSize().width-this.getFrameWidth()},getInnerHeight:function(){return this.getSize().height-this.getFrameHeight()},syncShadow:function(){this.floating&&this.el.sync(!0)},getLayoutTarget:function(){return this.body},setTitle:function(n,t){return this.title=n,this.header&&this.headerAsText&&this.header.child("span").update(n),t&&this.setIconClass(t),this.fireEvent("titlechange",this,n),this},getUpdater:function(){return this.body.getUpdater()},load:function(){var n=this.body.getUpdater();return n.update.apply(n,arguments),this},beforeDestroy:function(){Ext.Element.uncache(this.header,this.tbar,this.bbar,this.footer,this.body)},createClasses:function(){this.headerCls=this.baseCls+"-header";this.headerTextCls=this.baseCls+"-header-text";this.bwrapCls=this.baseCls+"-bwrap";this.tbarCls=this.baseCls+"-tbar";this.bodyCls=this.baseCls+"-body";this.bbarCls=this.baseCls+"-bbar";this.footerCls=this.baseCls+"-footer"},createGhost:function(n,t,i){var r=document.createElement("div"),u;return r.className="x-panel-ghost "+(n?n:""),this.header&&r.appendChild(this.el.dom.firstChild.cloneNode(!0)),Ext.fly(r.appendChild(document.createElement("ul"))).setHeight(this.bwrap.getHeight()),r.style.width=this.el.dom.offsetWidth+"px",i?Ext.getDom(i).appendChild(r):this.container.dom.appendChild(r),t!==!1&&this.el.useShim!==!1?(u=new Ext.Layer({shadow:!1,useDisplay:!0,constrain:!1},r),u.show(),u):new Ext.Element(r)},doAutoLoad:function(){this.body.load(typeof this.autoLoad=="object"?this.autoLoad:{url:this.autoLoad})}});Ext.reg("panel",Ext.Panel);Ext.Window=Ext.extend(Ext.Panel,{baseCls:"x-window",resizable:!0,draggable:!0,closable:!0,constrain:!1,constrainHeader:!1,plain:!1,minimizable:!1,maximizable:!1,minHeight:100,minWidth:200,expandOnShow:!0,closeAction:"close",collapsible:!1,initHidden:!0,monitorResize:!0,elements:"header,body",frame:!0,floating:!0,initComponent:function(){Ext.Window.superclass.initComponent.call(this);this.addEvents("resize","maximize","minimize","restore")},getState:function(){return Ext.apply(Ext.Window.superclass.getState.call(this)||{},this.getBox())},onRender:function(n,t){Ext.Window.superclass.onRender.call(this,n,t);this.plain&&this.el.addClass("x-window-plain");this.focusEl=this.el.createChild({tag:"a",href:"#",cls:"x-dlg-focus",tabIndex:"-1",html:"&#160;"});this.focusEl.swallowEvent("click",!0);this.proxy=this.el.createProxy("x-window-proxy");this.proxy.enableDisplayMode("block");this.modal&&(this.mask=this.container.createChild({cls:"ext-el-mask"},this.el.dom),this.mask.enableDisplayMode("block"),this.mask.hide())},initEvents:function(){if(Ext.Window.superclass.initEvents.call(this),this.animateTarget&&this.setAnimateTarget(this.animateTarget),this.resizable){this.resizer=new Ext.Resizable(this.el,{minWidth:this.minWidth,minHeight:this.minHeight,handles:this.resizeHandles||"all",pinned:!0,resizeElement:this.resizerAction});this.resizer.window=this;this.resizer.on("beforeresize",this.beforeResize,this)}this.draggable&&this.header.addClass("x-window-draggable");this.initTools();this.el.on("mousedown",this.toFront,this);if(this.manager=this.manager||Ext.WindowMgr,this.manager.register(this),this.hidden=!0,this.maximized&&(this.maximized=!1,this.maximize()),this.closable){var n=this.getKeyMap();n.on(27,this.onEsc,this);n.disable()}},initDraggable:function(){this.dd=new Ext.Window.DD(this)},onEsc:function(){this[this.closeAction]()},beforeDestroy:function(){Ext.destroy(this.resizer,this.dd,this.proxy,this.mask);Ext.Window.superclass.beforeDestroy.call(this)},onDestroy:function(){this.manager&&this.manager.unregister(this);Ext.Window.superclass.onDestroy.call(this)},initTools:function(){if(this.minimizable&&this.addTool({id:"minimize",handler:this.minimize.createDelegate(this,[])}),this.maximizable){this.addTool({id:"maximize",handler:this.maximize.createDelegate(this,[])});this.addTool({id:"restore",handler:this.restore.createDelegate(this,[]),hidden:!0});this.header.on("dblclick",this.toggleMaximize,this)}this.closable&&this.addTool({id:"close",handler:this[this.closeAction].createDelegate(this,[])})},resizerAction:function(){var n=this.proxy.getBox();return this.proxy.hide(),this.window.handleResize(n),n},beforeResize:function(){this.resizer.minHeight=Math.max(this.minHeight,this.getFrameHeight()+40);this.resizer.minWidth=Math.max(this.minWidth,this.getFrameWidth()+40);this.resizeBox=this.el.getBox()},updateHandles:function(){Ext.isIE&&this.resizer&&(this.resizer.syncHandleHeight(),this.el.repaint())},handleResize:function(n){var t=this.resizeBox;t.x!=n.x||t.y!=n.y?this.updateBox(n):this.setSize(n);this.focus();this.updateHandles();this.saveState();this.fireEvent("resize",this,n.width,n.height)},focus:function(){var t=this.focusEl,n=this.defaultButton,i=typeof n;i!="undefined"&&(t=i=="number"?this.buttons[n]:i=="string"?Ext.getCmp(n):n);t.focus.defer(10,t)},setAnimateTarget:function(n){n=Ext.get(n);this.animateTarget=n},beforeShow:function(){if(delete this.el.lastXY,delete this.el.lastLT,this.x===undefined||this.y===undefined){var n=this.el.getAlignToXY(this.container,"c-c"),t=this.el.translatePoints(n[0],n[1]);this.x=this.x===undefined?t.left:this.x;this.y=this.y===undefined?t.top:this.y}this.el.setLeftTop(this.x,this.y);this.expandOnShow&&this.expand(!1);this.modal&&(Ext.getBody().addClass("x-body-masked"),this.mask.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0)),this.mask.show())},show:function(n,t,i){if(this.rendered||this.render(Ext.getBody()),this.hidden===!1){this.toFront();return}if(this.fireEvent("beforeshow",this)!==!1){if(t)this.on("show",t,i,{single:!0});this.hidden=!1;n!==undefined&&this.setAnimateTarget(n);this.beforeShow();this.animateTarget?this.animShow():this.afterShow()}},afterShow:function(){if(this.proxy.hide(),this.el.setStyle("display","block"),this.el.show(),this.maximized&&this.fitContainer(),Ext.isMac&&Ext.isGecko&&this.cascade(this.setAutoScroll),this.monitorResize||this.modal||this.constrain||this.constrainHeader)Ext.EventManager.onWindowResize(this.onWindowResize,this);this.doConstrain();this.layout&&this.doLayout();this.keyMap&&this.keyMap.enable();this.toFront();this.updateHandles();this.fireEvent("show",this)},animShow:function(){this.proxy.show();this.proxy.setBox(this.animateTarget.getBox());this.proxy.setOpacity(0);var n=this.getBox(!1);n.callback=this.afterShow;n.scope=this;n.duration=.25;n.easing="easeNone";n.opacity=.5;n.block=!0;this.el.setStyle("display","none");this.proxy.shift(n)},hide:function(n,t,i){if(!this.hidden&&this.fireEvent("beforehide",this)!==!1){if(t)this.on("hide",t,i,{single:!0});this.hidden=!0;n!==undefined&&this.setAnimateTarget(n);this.animateTarget?this.animHide():(this.el.hide(),this.afterHide())}},afterHide:function(){this.proxy.hide();(this.monitorResize||this.modal||this.constrain||this.constrainHeader)&&Ext.EventManager.removeResizeListener(this.onWindowResize,this);this.modal&&(this.mask.hide(),Ext.getBody().removeClass("x-body-masked"));this.keyMap&&this.keyMap.disable();this.fireEvent("hide",this)},animHide:function(){var t,n;this.proxy.setOpacity(.5);this.proxy.show();t=this.getBox(!1);this.proxy.setBox(t);this.el.hide();n=this.animateTarget.getBox();n.callback=this.afterHide;n.scope=this;n.duration=.25;n.easing="easeNone";n.block=!0;n.opacity=0;this.proxy.shift(n)},onWindowResize:function(){if(this.maximized&&this.fitContainer(),this.modal){this.mask.setSize("100%","100%");var n=this.mask.dom.offsetHeight;this.mask.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0))}this.doConstrain()},doConstrain:function(){var t,i,n;(this.constrain||this.constrainHeader)&&(this.constrain?t={right:this.el.shadowOffset,left:this.el.shadowOffset,bottom:this.el.shadowOffset}:(i=this.getSize(),t={right:-(i.width-100),bottom:-(i.height-25)}),n=this.el.getConstrainToXY(this.container,!0,t),n&&this.setPosition(n[0],n[1]))},ghost:function(n){var t=this.createGhost(n),i=this.getBox(!0);return t.setLeftTop(i.x,i.y),t.setWidth(i.width),this.el.hide(),this.activeGhost=t,t},unghost:function(n,t){n!==!1&&(this.el.show(),this.focus(),Ext.isMac&&Ext.isGecko&&this.cascade(this.setAutoScroll));t!==!1&&this.setPosition(this.activeGhost.getLeft(!0),this.activeGhost.getTop(!0));this.activeGhost.hide();this.activeGhost.remove();delete this.activeGhost},minimize:function(){this.fireEvent("minimize",this)},close:function(){this.fireEvent("beforeclose",this)!==!1&&this.hide(null,function(){this.fireEvent("close",this);this.destroy()},this)},maximize:function(){this.maximized||(this.expand(!1),this.restoreSize=this.getSize(),this.restorePos=this.getPosition(!0),this.tools.maximize.hide(),this.tools.restore.show(),this.maximized=!0,this.el.disableShadow(),this.dd&&this.dd.lock(),this.collapsible&&this.tools.toggle.hide(),this.el.addClass("x-window-maximized"),this.container.addClass("x-window-maximized-ct"),this.setPosition(0,0),this.fitContainer(),this.fireEvent("maximize",this))},restore:function(){this.maximized&&(this.el.removeClass("x-window-maximized"),this.tools.restore.hide(),this.tools.maximize.show(),this.setPosition(this.restorePos[0],this.restorePos[1]),this.setSize(this.restoreSize.width,this.restoreSize.height),delete this.restorePos,delete this.restoreSize,this.maximized=!1,this.el.enableShadow(!0),this.dd&&this.dd.unlock(),this.collapsible&&this.tools.toggle.show(),this.container.removeClass("x-window-maximized-ct"),this.doConstrain(),this.fireEvent("restore",this))},toggleMaximize:function(){this[this.maximized?"restore":"maximize"]()},fitContainer:function(){var n=this.container.getViewSize();this.setSize(n.width,n.height)},setZIndex:function(n){this.modal&&this.mask.setStyle("z-index",n);this.el.setZIndex(++n);n+=5;this.resizer&&this.resizer.proxy.setStyle("z-index",++n);this.lastZIndex=n},alignTo:function(n,t,i){var r=this.el.getAlignToXY(n,t,i);return this.setPagePosition(r[0],r[1]),this},anchorTo:function(n,t,i,r,u){var f=function(){this.alignTo(n,t,i)},e;Ext.EventManager.onWindowResize(f,this);if(e=typeof r,e!="undefined")Ext.EventManager.on(window,"scroll",f,this,{buffer:e=="number"?r:50});return f.call(this),this[u]=f,this},toFront:function(){return this.manager.bringToFront(this)&&this.focus(),this},setActive:function(n){n?(this.maximized||this.el.enableShadow(!0),this.fireEvent("activate",this)):(this.el.disableShadow(),this.fireEvent("deactivate",this))},toBack:function(){return this.manager.sendToBack(this),this},center:function(){var n=this.el.getAlignToXY(this.container,"c-c");return this.setPagePosition(n[0],n[1]),this}});Ext.reg("window",Ext.Window);Ext.Window.DD=function(n){this.win=n;Ext.Window.DD.superclass.constructor.call(this,n.el.id,"WindowDD-"+n.id);this.setHandleElId(n.header.id);this.scroll=!1};Ext.extend(Ext.Window.DD,Ext.dd.DD,{moveOnly:!0,headerOffsets:[100,25],startDrag:function(){var n=this.win,t,i;this.proxy=n.ghost();n.constrain!==!1?(t=n.el.shadowOffset,this.constrainTo(n.container,{right:t,left:t,bottom:t})):n.constrainHeader!==!1&&(i=this.proxy.getSize(),this.constrainTo(n.container,{right:-(i.width-this.headerOffsets[0]),bottom:-(i.height-this.headerOffsets[1])}))},b4Drag:Ext.emptyFn,onDrag:function(n){this.alignElWithMouse(this.proxy,n.getPageX(),n.getPageY())},endDrag:function(){this.win.unghost();this.win.saveState()}});Ext.WindowGroup=function(){var n={},t=[],i=null,e=function(n,t){return!n._lastAccess||n._lastAccess<t._lastAccess?-1:1},u=function(){var i=t,f=i.length,o,n,u;if(f>0)for(i.sort(e),o=i[0].manager.zseed,n=0;n<f;n++)u=i[n],u&&!u.hidden&&u.setZIndex(o+n*10);r()},f=function(n){n!=i&&(i&&i.setActive(!1),i=n,n&&n.setActive(!0))},r=function(){for(var n=t.length-1;n>=0;--n)if(!t[n].hidden){f(t[n]);return}f(null)};return{zseed:9e3,register:function(i){n[i.id]=i;t.push(i);i.on("hide",r)},unregister:function(i){delete n[i.id];i.un("hide",r);t.remove(i)},get:function(t){return typeof t=="object"?t:n[t]},bringToFront:function(n){return(n=this.get(n),n!=i)?(n._lastAccess=(new Date).getTime(),u(),!0):!1},sendToBack:function(n){return n=this.get(n),n._lastAccess=-(new Date).getTime(),u(),n},hideAll:function(){for(var t in n)n[t]&&typeof n[t]!="function"&&n[t].isVisible()&&n[t].hide()},getActive:function(){return i},getBy:function(n,i){for(var r,f=[],u=t.length-1;u>=0;--u)r=t[u],n.call(i||r,r)!==!1&&f.push(r);return f},each:function(t,i){for(var r in n)if(n[r]&&typeof n[r]!="function"&&t.call(i||n[r],n[r])===!1)return}}};Ext.WindowMgr=new Ext.WindowGroup;Ext.dd.PanelProxy=function(n,t){this.panel=n;this.id=this.panel.id+"-ddproxy";Ext.apply(this,t)};Ext.dd.PanelProxy.prototype={insertProxy:!0,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){this.ghost&&(this.proxy&&(this.proxy.remove(),delete this.proxy),this.panel.el.dom.style.display="",this.ghost.remove(),delete this.ghost)},show:function(){this.ghost||(this.ghost=this.panel.createGhost(undefined,undefined,Ext.getBody()),this.ghost.setXY(this.panel.el.getXY()),this.insertProxy&&(this.proxy=this.panel.el.insertSibling({cls:"x-panel-dd-spacer"}),this.proxy.setSize(this.panel.getSize())),this.panel.el.dom.style.display="none")},repair:function(n,t,i){this.hide();typeof t=="function"&&t.call(i||this)},moveProxy:function(n,t){this.proxy&&n.insertBefore(this.proxy.dom,t)}};Ext.Panel.DD=function(n,t){this.panel=n;this.dragData={panel:n};this.proxy=new Ext.dd.PanelProxy(n,t);Ext.Panel.DD.superclass.constructor.call(this,n.el,t);this.setHandleElId(n.header.id);n.header.setStyle("cursor","move");this.scroll=!1};Ext.extend(Ext.Panel.DD,Ext.dd.DragSource,{showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(){this.proxy.show()},b4MouseDown:function(n){var t=n.getPageX(),i=n.getPageY();this.autoOffset(t,i)},onInitDrag:function(n,t){this.onStartDrag(n,t);return!0},createFrame:Ext.emptyFn,getDragEl:function(){return this.proxy.ghost.dom},endDrag:function(){this.proxy.hide();this.panel.saveState()},autoOffset:function(n,t){n-=this.startPageX;t-=this.startPageY;this.setDelta(n,t)}});Ext.state.Provider=function(){this.addEvents("statechange");this.state={};Ext.state.Provider.superclass.constructor.call(this)};Ext.extend(Ext.state.Provider,Ext.util.Observable,{get:function(n,t){return typeof this.state[n]=="undefined"?t:this.state[n]},clear:function(n){delete this.state[n];this.fireEvent("statechange",this,n,null)},set:function(n,t){this.state[n]=t;this.fireEvent("statechange",this,n,t)},decodeValue:function(n){var f=/^(a|n|d|b|s|o)\:(.*)$/.exec(unescape(n)),s,i,r,u,t,e,o;if(f&&f[1]){s=f[1];i=f[2];switch(s){case"n":return parseFloat(i);case"d":return new Date(Date.parse(i));case"b":return i=="1";case"a":for(r=[],u=i.split("^"),t=0,e=u.length;t<e;t++)r.push(this.decodeValue(u[t]));return r;case"o":for(r={},u=i.split("^"),t=0,e=u.length;t<e;t++)o=u[t].split("="),r[o[0]]=this.decodeValue(o[1]);return r;default:return i}}},encodeValue:function(n){var i,r,f,t,u;if(typeof n=="number")i="n:"+n;else if(typeof n=="boolean")i="b:"+(n?"1":"0");else if(n instanceof Date)i="d:"+n.toGMTString();else if(n instanceof Array){for(t="",r=0,f=n.length;r<f;r++)t+=this.encodeValue(n[r]),r!=f-1&&(t+="^");i="a:"+t}else if(typeof n=="object"){t="";for(u in n)typeof n[u]!="function"&&n[u]!==undefined&&(t+=u+"="+this.encodeValue(n[u])+"^");i="o:"+t.substring(0,t.length-1)}else i="s:"+n;return escape(i)}});Ext.state.Manager=function(){var n=new Ext.state.Provider;return{setProvider:function(t){n=t},get:function(t,i){return n.get(t,i)},set:function(t,i){n.set(t,i)},clear:function(t){n.clear(t)},getProvider:function(){return n}}}();Ext.state.CookieProvider=function(n){Ext.state.CookieProvider.superclass.constructor.call(this);this.path="/";this.expires=new Date((new Date).getTime()+6048e5);this.domain=null;this.secure=!1;Ext.apply(this,n);this.state=this.readCookies()};Ext.extend(Ext.state.CookieProvider,Ext.state.Provider,{set:function(n,t){if(typeof t=="undefined"||t===null){this.clear(n);return}this.setCookie(n,t);Ext.state.CookieProvider.superclass.set.call(this,n,t)},clear:function(n){this.clearCookie(n);Ext.state.CookieProvider.superclass.clear.call(this,n)},readCookies:function(){for(var i={},u=document.cookie+";",f=/\s?(.*?)=(.*?);/g,t,n,r;(t=f.exec(u))!=null;)n=t[1],r=t[2],n&&n.substring(0,3)=="ys-"&&(i[n.substr(3)]=this.decodeValue(r));return i},setCookie:function(n,t){document.cookie="ys-"+n+"="+this.encodeValue(t)+(this.expires==null?"":"; expires="+this.expires.toGMTString())+(this.path==null?"":"; path="+this.path)+(this.domain==null?"":"; domain="+this.domain)+(this.secure==!0?"; secure":"")},clearCookie:function(n){document.cookie="ys-"+n+"=null; expires=Thu, 01-Jan-70 00:00:01 GMT"+(this.path==null?"":"; path="+this.path)+(this.domain==null?"":"; domain="+this.domain)+(this.secure==!0?"; secure":"")}});Ext.DataView=Ext.extend(Ext.BoxComponent,{selectedClass:"x-view-selected",emptyText:"",last:!1,initComponent:function(){Ext.DataView.superclass.initComponent.call(this);typeof this.tpl=="string"&&(this.tpl=new Ext.XTemplate(this.tpl));this.addEvents("beforeclick","click","containerclick","dblclick","contextmenu","selectionchange","beforeselect");this.all=new Ext.CompositeElementLite;this.selected=new Ext.CompositeElementLite},onRender:function(){this.el||(this.el=document.createElement("div"));Ext.DataView.superclass.onRender.apply(this,arguments)},afterRender:function(){Ext.DataView.superclass.afterRender.call(this);this.el.on({click:this.onClick,dblclick:this.onDblClick,contextmenu:this.onContextMenu,scope:this});if(this.overClass)this.el.on({mouseover:this.onMouseOver,mouseout:this.onMouseOut,scope:this});this.store&&this.setStore(this.store,!0)},refresh:function(){this.clearSelections(!1,!0);this.el.update("");var n=this.store.getRange();if(n.length<1){this.el.update(this.emptyText);this.all.clear();return}this.tpl.overwrite(this.el,this.collectData(n,0));this.all.fill(Ext.query(this.itemSelector,this.el.dom));this.updateIndexes(0)},prepareData:function(n){return n},collectData:function(n,t){for(var r=[],i=0,u=n.length;i<u;i++)r[r.length]=this.prepareData(n[i].data,t+i,n[i]);return r},bufferRender:function(n){var t=document.createElement("div");return this.tpl.overwrite(t,this.collectData(n)),Ext.query(this.itemSelector,t)},onUpdate:function(n,t){var i=this.store.indexOf(t),u=this.isSelected(i),f=this.all.elements[i],r=this.bufferRender([t],i)[0];this.all.replaceElement(i,r,!0);u&&(this.selected.replaceElement(f,r),this.all.item(i).addClass(this.selectedClass));this.updateIndexes(i,i)},onAdd:function(n,t,i){if(this.all.getCount()==0){this.refresh();return}var u=this.bufferRender(t,i),r;i<this.all.getCount()?(r=this.all.item(i).insertSibling(u,"before",!0),this.all.elements.splice(i,0,r)):(r=this.all.last().insertSibling(u,"after",!0),this.all.elements.push(r));this.updateIndexes(i)},onRemove:function(n,t,i){this.deselect(i);this.all.removeElement(i,!0);this.updateIndexes(i)},refreshNode:function(n){this.onUpdate(this.store,this.store.getAt(n))},updateIndexes:function(n,t){var r=this.all.elements,i;for(n=n||0,t=t||(t===0?0:r.length-1),i=n;i<=t;i++)r[i].viewIndex=i},setStore:function(n,t){if(!t&&this.store&&(this.store.un("beforeload",this.onBeforeLoad,this),this.store.un("datachanged",this.refresh,this),this.store.un("add",this.onAdd,this),this.store.un("remove",this.onRemove,this),this.store.un("update",this.onUpdate,this),this.store.un("clear",this.refresh,this)),n){n=Ext.StoreMgr.lookup(n);n.on("beforeload",this.onBeforeLoad,this);n.on("datachanged",this.refresh,this);n.on("add",this.onAdd,this);n.on("remove",this.onRemove,this);n.on("update",this.onUpdate,this);n.on("clear",this.refresh,this)}this.store=n;n&&this.refresh()},findItemFromChild:function(n){return Ext.fly(n).findParent(this.itemSelector,this.el)},onClick:function(n){var t=n.getTarget(this.itemSelector,this.el),i;t?(i=this.indexOf(t),this.onItemClick(t,i,n)!==!1&&this.fireEvent("click",this,i,t,n)):this.fireEvent("containerclick",this,n)!==!1&&this.clearSelections()},onContextMenu:function(n){var t=n.getTarget(this.itemSelector,this.el);t&&this.fireEvent("contextmenu",this,this.indexOf(t),t,n)},onDblClick:function(n){var t=n.getTarget(this.itemSelector,this.el);t&&this.fireEvent("dblclick",this,this.indexOf(t),t,n)},onMouseOver:function(n){var t=n.getTarget(this.itemSelector,this.el);t&&t!==this.lastItem&&(this.lastItem=t,Ext.fly(t).addClass(this.overClass))},onMouseOut:function(n){this.lastItem&&(n.within(this.lastItem,!0)||(Ext.fly(this.lastItem).removeClass(this.overClass),delete this.lastItem))},onItemClick:function(n,t,i){return this.fireEvent("beforeclick",this,t,n,i)===!1?!1:(this.multiSelect?(this.doMultiSelection(n,t,i),i.preventDefault()):this.singleSelect&&(this.doSingleSelection(n,t,i),i.preventDefault()),!0)},doSingleSelection:function(n,t,i){i.ctrlKey&&this.isSelected(t)?this.deselect(t):this.select(t,!1)},doMultiSelection:function(n,t,i){if(i.shiftKey&&this.last!==!1){var r=this.last;this.selectRange(r,t,i.ctrlKey);this.last=r}else(i.ctrlKey||this.simpleSelect)&&this.isSelected(t)?this.deselect(t):this.select(t,i.ctrlKey||i.shiftKey||this.simpleSelect)},getSelectionCount:function(){return this.selected.getCount()},getSelectedNodes:function(){return this.selected.elements},getSelectedIndexes:function(){for(var t=[],i=this.selected.elements,n=0,r=i.length;n<r;n++)t.push(i[n].viewIndex);return t},getSelectedRecords:function(){for(var n=[],i=this.selected.elements,t=0,r=i.length;t<r;t++)n[n.length]=this.store.getAt(i[t].viewIndex);return n},getRecords:function(n){for(var t=[],r=n,i=0,u=r.length;i<u;i++)t[t.length]=this.store.getAt(r[i].viewIndex);return t},getRecord:function(n){return this.store.getAt(n.viewIndex)},clearSelections:function(n,t){(this.multiSelect||this.singleSelect)&&(t||this.selected.removeClass(this.selectedClass),this.selected.clear(),this.last=!1,n||this.fireEvent("selectionchange",this,this.selected.elements))},isSelected:function(n){return this.selected.contains(this.getNode(n))},deselect:function(n){if(this.isSelected(n)){var n=this.getNode(n);this.selected.removeElement(n);this.last==n.viewIndex&&(this.last=!1);Ext.fly(n).removeClass(this.selectedClass);this.fireEvent("selectionchange",this,this.selected.elements)}},select:function(n,t,i){var u,f,r;if(n instanceof Array)for(t||this.clearSelections(!0),u=0,f=n.length;u<f;u++)this.select(n[u],!0,!0);else r=this.getNode(n),t||this.clearSelections(!0),r&&!this.isSelected(r)&&this.fireEvent("beforeselect",this,r,this.selected.elements)!==!1&&(Ext.fly(r).addClass(this.selectedClass),this.selected.add(r),this.last=r.viewIndex,i||this.fireEvent("selectionchange",this,this.selected.elements))},selectRange:function(n,t,i){i||this.clearSelections(!0);this.select(this.getNodes(n,t),!0)},getNode:function(n){return typeof n=="string"?document.getElementById(n):typeof n=="number"?this.all.elements[n]:n},getNodes:function(n,t){var u=this.all.elements,r,i;if(n=n||0,t=typeof t=="undefined"?u.length-1:t,r=[],n<=t)for(i=n;i<=t;i++)r.push(u[i]);else for(i=n;i>=t;i--)r.push(u[i]);return r},indexOf:function(n){return(n=this.getNode(n),typeof n.viewIndex=="number")?n.viewIndex:this.all.indexOf(n)},onBeforeLoad:function(){this.loadingText&&(this.clearSelections(!1,!0),this.el.update('<div class="loading-indicator">'+this.loadingText+"<\/div>"),this.all.clear())}});Ext.reg("dataview",Ext.DataView);Ext.ColorPalette=function(n){if(Ext.ColorPalette.superclass.constructor.call(this,n),this.addEvents("select"),this.handler)this.on("select",this.handler,this.scope,!0)};Ext.extend(Ext.ColorPalette,Ext.Component,{itemCls:"x-color-palette",value:null,clickEvent:"click",ctype:"Ext.ColorPalette",allowReselect:!1,colors:["000000","993300","333300","003300","003366","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","969696","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFCC","CCFFFF","99CCFF","CC99FF","FFFFFF"],onRender:function(n,t){var r=new Ext.XTemplate('<tpl for="."><a href="#" class="color-{.}" hidefocus="on"><em><span style="background:#{.}" unselectable="on">&#160;<\/span><\/em><\/a><\/tpl>'),i=document.createElement("div");i.className=this.itemCls;r.overwrite(i,this.colors);n.dom.insertBefore(i,t);this.el=Ext.get(i);this.el.on(this.clickEvent,this.handleClick,this,{delegate:"a"});if(this.clickEvent!="click")this.el.on("click",Ext.emptyFn,this,{delegate:"a",preventDefault:!0})},afterRender:function(){if(Ext.ColorPalette.superclass.afterRender.call(this),this.value){var n=this.value;this.value=null;this.select(n)}},handleClick:function(n,t){if(n.preventDefault(),!this.disabled){var i=t.className.match(/(?:^|\s)color-(.{6})(?:\s|$)/)[1];this.select(i.toUpperCase())}},select:function(n){if(n=n.replace("#",""),n!=this.value||this.allowReselect){var t=this.el;this.value&&t.child("a.color-"+this.value).removeClass("x-color-palette-sel");t.child("a.color-"+n).addClass("x-color-palette-sel");this.value=n;this.fireEvent("select",this,n)}}});Ext.reg("colorpalette",Ext.ColorPalette);Ext.DatePicker=Ext.extend(Ext.Component,{todayText:"Today",okText:"&#160;OK&#160;",cancelText:"Cancel",todayTip:"{0} (Spacebar)",minDate:null,maxDate:null,minText:"This date is before the minimum date",maxText:"This date is after the maximum date",format:"m/d/y",disabledDays:null,disabledDaysText:"",disabledDatesRE:null,disabledDatesText:"",constrainToViewport:!0,monthNames:Date.monthNames,dayNames:Date.dayNames,nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",startDay:0,initComponent:function(){if(Ext.DatePicker.superclass.initComponent.call(this),this.value=this.value?this.value.clearTime():(new Date).clearTime(),this.addEvents("select"),this.handler)this.on("select",this.handler,this.scope||this);this.initDisabledDays()},initDisabledDays:function(){var t,i,n;if(!this.disabledDatesRE&&this.disabledDates){for(t=this.disabledDates,i="(?:",n=0;n<t.length;n++)i+=t[n],n!=t.length-1&&(i+="|");this.disabledDatesRE=new RegExp(i+")")}},setValue:function(n){var t=this.value;this.value=n.clearTime(!0);this.el&&this.update(this.value)},getValue:function(){return this.value},focus:function(){this.el&&this.update(this.activeDate)},onRender:function(n,t){for(var f,u,s,e,i=['<table cellspacing="0">','<tr><td class="x-date-left"><a href="#" title="',this.prevText,'">&#160;<\/a><\/td><td class="x-date-middle" align="center"><\/td><td class="x-date-right"><a href="#" title="',this.nextText,'">&#160;<\/a><\/td><\/tr>','<tr><td colspan="3"><table class="x-date-inner" cellspacing="0"><thead><tr>'],o=this.dayNames,r=0;r<7;r++)f=this.startDay+r,f>6&&(f=f-7),i.push("<th><span>",o[f].substr(0,1),"<\/span><\/th>");for(i[i.length]="<\/tr><\/thead><tbody><tr>",r=0;r<42;r++)r%7==0&&r!=0&&(i[i.length]="<\/tr><tr>"),i[i.length]='<td><a href="#" hidefocus="on" class="x-date-date" tabIndex="1"><em><span><\/span><\/em><\/a><\/td>';i[i.length]='<\/tr><\/tbody><\/table><\/td><\/tr><tr><td colspan="3" class="x-date-bottom" align="center"><\/td><\/tr><\/table><div class="x-date-mp"><\/div>';u=document.createElement("div");u.className="x-date-picker";u.innerHTML=i.join("");n.dom.insertBefore(u,t);this.el=Ext.get(u);this.eventEl=Ext.get(u.firstChild);new Ext.util.ClickRepeater(this.el.child("td.x-date-left a"),{handler:this.showPrevMonth,scope:this,preventDefault:!0,stopDefault:!0});new Ext.util.ClickRepeater(this.el.child("td.x-date-right a"),{handler:this.showNextMonth,scope:this,preventDefault:!0,stopDefault:!0});this.eventEl.on("mousewheel",this.handleMouseWheel,this);this.monthPicker=this.el.down("div.x-date-mp");this.monthPicker.enableDisplayMode("block");s=new Ext.KeyNav(this.eventEl,{left:function(n){n.ctrlKey?this.showPrevMonth():this.update(this.activeDate.add("d",-1))},right:function(n){n.ctrlKey?this.showNextMonth():this.update(this.activeDate.add("d",1))},up:function(n){n.ctrlKey?this.showNextYear():this.update(this.activeDate.add("d",-7))},down:function(n){n.ctrlKey?this.showPrevYear():this.update(this.activeDate.add("d",7))},pageUp:function(){this.showNextMonth()},pageDown:function(){this.showPrevMonth()},enter:function(n){return n.stopPropagation(),!0},scope:this});this.eventEl.on("click",this.handleDateClick,this,{delegate:"a.x-date-date"});this.eventEl.addKeyListener(Ext.EventObject.SPACE,this.selectToday,this);this.el.unselectable();this.cells=this.el.select("table.x-date-inner tbody td");this.textNodes=this.el.query("table.x-date-inner tbody span");this.mbtn=new Ext.Button({text:"&#160;",tooltip:this.monthYearText,renderTo:this.el.child("td.x-date-middle",!0)});this.mbtn.on("click",this.showMonthPicker,this);this.mbtn.el.child(this.mbtn.menuClassTarget).addClass("x-btn-with-menu");e=(new Date).dateFormat(this.format);this.todayBtn=new Ext.Button({renderTo:this.el.child("td.x-date-bottom",!0),text:String.format(this.todayText,e),tooltip:String.format(this.todayTip,e),handler:this.selectToday,scope:this});Ext.isIE&&this.el.repaint();this.update(this.value)},createMonthPicker:function(){var t,n;if(!this.monthPicker.dom.firstChild){for(t=['<table border="0" cellspacing="0">'],n=0;n<6;n++)t.push('<tr><td class="x-date-mp-month"><a href="#">',this.monthNames[n].substr(0,3),"<\/a><\/td>",'<td class="x-date-mp-month x-date-mp-sep"><a href="#">',this.monthNames[n+6].substr(0,3),"<\/a><\/td>",n==0?'<td class="x-date-mp-ybtn" align="center"><a class="x-date-mp-prev"><\/a><\/td><td class="x-date-mp-ybtn" align="center"><a class="x-date-mp-next"><\/a><\/td><\/tr>':'<td class="x-date-mp-year"><a href="#"><\/a><\/td><td class="x-date-mp-year"><a href="#"><\/a><\/td><\/tr>');t.push('<tr class="x-date-mp-btns"><td colspan="4"><button type="button" class="x-date-mp-ok">',this.okText,'<\/button><button type="button" class="x-date-mp-cancel">',this.cancelText,"<\/button><\/td><\/tr>","<\/table>");this.monthPicker.update(t.join(""));this.monthPicker.on("click",this.onMonthClick,this);this.monthPicker.on("dblclick",this.onMonthDblClick,this);this.mpMonths=this.monthPicker.select("td.x-date-mp-month");this.mpYears=this.monthPicker.select("td.x-date-mp-year");this.mpMonths.each(function(n,t,i){i+=1;n.dom.xmonth=i%2==0?5+Math.round(i*.5):Math.round((i-1)*.5)})}},showMonthPicker:function(){this.createMonthPicker();var n=this.el.getSize();this.monthPicker.setSize(n);this.monthPicker.child("table").setSize(n);this.mpSelMonth=(this.activeDate||this.value).getMonth();this.updateMPMonth(this.mpSelMonth);this.mpSelYear=(this.activeDate||this.value).getFullYear();this.updateMPYear(this.mpSelYear);this.monthPicker.slideIn("t",{duration:.2})},updateMPYear:function(n){var u,t,r,i;for(this.mpyear=n,u=this.mpYears.elements,t=1;t<=10;t++)r=u[t-1],t%2==0?(i=n+Math.round(t*.5),r.firstChild.innerHTML=i,r.xyear=i):(i=n-(5-Math.round(t*.5)),r.firstChild.innerHTML=i,r.xyear=i),this.mpYears.item(t-1)[i==this.mpSelYear?"addClass":"removeClass"]("x-date-mp-sel")},updateMPMonth:function(n){this.mpMonths.each(function(t){t[t.dom.xmonth==n?"addClass":"removeClass"]("x-date-mp-sel")})},selectMPMonth:function(){},onMonthClick:function(n,t){n.stopEvent();var i=new Ext.Element(t),r;i.is("button.x-date-mp-cancel")?this.hideMonthPicker():i.is("button.x-date-mp-ok")?(this.update(new Date(this.mpSelYear,this.mpSelMonth,(this.activeDate||this.value).getDate())),this.hideMonthPicker()):(r=i.up("td.x-date-mp-month",2))?(this.mpMonths.removeClass("x-date-mp-sel"),r.addClass("x-date-mp-sel"),this.mpSelMonth=r.dom.xmonth):(r=i.up("td.x-date-mp-year",2))?(this.mpYears.removeClass("x-date-mp-sel"),r.addClass("x-date-mp-sel"),this.mpSelYear=r.dom.xyear):i.is("a.x-date-mp-prev")?this.updateMPYear(this.mpyear-10):i.is("a.x-date-mp-next")&&this.updateMPYear(this.mpyear+10)},onMonthDblClick:function(n,t){n.stopEvent();var r=new Ext.Element(t),i;(i=r.up("td.x-date-mp-month",2))?(this.update(new Date(this.mpSelYear,i.dom.xmonth,(this.activeDate||this.value).getDate())),this.hideMonthPicker()):(i=r.up("td.x-date-mp-year",2))&&(this.update(new Date(i.dom.xyear,this.mpSelMonth,(this.activeDate||this.value).getDate())),this.hideMonthPicker())},hideMonthPicker:function(n){this.monthPicker&&(n===!0?this.monthPicker.hide():this.monthPicker.slideOut("t",{duration:.2}))},showPrevMonth:function(){this.update(this.activeDate.add("mo",-1))},showNextMonth:function(){this.update(this.activeDate.add("mo",1))},showPrevYear:function(){this.update(this.activeDate.add("y",-1))},showNextYear:function(){this.update(this.activeDate.add("y",1))},handleMouseWheel:function(n){var t=n.getWheelDelta();t>0?(this.showPrevMonth(),n.stopEvent()):t<0&&(this.showNextMonth(),n.stopEvent())},handleDateClick:function(n,t){n.stopEvent();t.dateValue&&!Ext.fly(t.parentNode).hasClass("x-date-disabled")&&(this.setValue(new Date(t.dateValue)),this.fireEvent("select",this,this.value))},selectToday:function(){this.setValue((new Date).clearTime());this.fireEvent("select",this,this.value)},update:function(n){var o=this.activeDate,l,b,f,e;if(this.activeDate=n,o&&this.el&&(l=n.getTime(),o.getMonth()==n.getMonth()&&o.getFullYear()==n.getFullYear())){this.cells.removeClass("x-date-selected");this.cells.each(function(n){if(n.dom.firstChild.dateValue==l)return n.addClass("x-date-selected"),setTimeout(function(){try{n.dom.firstChild.focus()}catch(t){}},50),!1});return}var a=n.getDaysInMonth(),k=n.getFirstDateOfMonth(),r=k.getDay()-this.startDay;r<=this.startDay&&(r+=7);var s=n.add("mo",-1),v=s.getDaysInMonth()-r,u=this.cells.elements,h=this.textNodes;a+=r;for(var i=new Date(s.getFullYear(),s.getMonth(),v).clearTime(),d=(new Date).clearTime().getTime(),g=n.clearTime().getTime(),nt=this.minDate?this.minDate.clearTime():Number.NEGATIVE_INFINITY,tt=this.maxDate?this.maxDate.clearTime():Number.POSITIVE_INFINITY,y=this.disabledDatesRE,it=this.disabledDatesText,p=this.disabledDays?this.disabledDays.join(""):!1,rt=this.disabledDaysText,w=this.format,c=function(n,t){var r,u;if(t.title="",r=i.getTime(),t.firstChild.dateValue=r,r==d&&(t.className+=" x-date-today",t.title=n.todayText),r==g&&(t.className+=" x-date-selected",setTimeout(function(){try{t.firstChild.focus()}catch(n){}},50)),r<nt){t.className=" x-date-disabled";t.title=n.minText;return}if(r>tt){t.className=" x-date-disabled";t.title=n.maxText;return}p&&p.indexOf(i.getDay())!=-1&&(t.title=rt,t.className=" x-date-disabled");y&&w&&(u=i.dateFormat(w),y.test(u)&&(t.title=it.replace("%0",u),t.className=" x-date-disabled"))},t=0;t<r;t++)h[t].innerHTML=++v,i.setDate(i.getDate()+1),u[t].className="x-date-prevday",c(this,u[t]);for(;t<a;t++)intDay=t-r+1,h[t].innerHTML=intDay,i.setDate(i.getDate()+1),u[t].className="x-date-active",c(this,u[t]);for(b=0;t<42;t++)h[t].innerHTML=++b,i.setDate(i.getDate()+1),u[t].className="x-date-nextday",c(this,u[t]);this.mbtn.setText(this.monthNames[n.getMonth()]+" "+n.getFullYear());this.internalRender||(f=this.el.dom.firstChild,e=f.offsetWidth,this.el.setWidth(e+this.el.getBorderWidth("lr")),Ext.fly(f).setWidth(e),this.internalRender=!0,Ext.isOpera&&!this.secondPass&&(f.rows[0].cells[1].style.width=e-(f.rows[0].cells[0].offsetWidth+f.rows[0].cells[2].offsetWidth)+"px",this.secondPass=!0,this.update.defer(10,this,[n])))},beforeDestroy:function(){this.mbtn.destroy();this.todayBtn.destroy()}});Ext.reg("datepicker",Ext.DatePicker);Ext.TabPanel=Ext.extend(Ext.Panel,{monitorResize:!0,deferredRender:!0,tabWidth:120,minTabWidth:30,resizeTabs:!1,enableTabScroll:!1,scrollIncrement:0,scrollRepeatInterval:400,scrollDuration:.35,animScroll:!0,tabPosition:"top",baseCls:"x-tab-panel",autoTabs:!1,autoTabSelector:"div.x-tab",activeTab:null,tabMargin:2,plain:!1,wheelIncrement:20,idDelimiter:"__",itemCls:"x-tab-item",elements:"body",headerAsText:!1,frame:!1,hideBorders:!0,initComponent:function(){this.frame=!1;Ext.TabPanel.superclass.initComponent.call(this);this.addEvents("beforetabchange","tabchange","contextmenu");this.setLayout(new Ext.layout.CardLayout({deferredRender:this.deferredRender}));this.tabPosition=="top"?(this.elements+=",header",this.stripTarget="header"):(this.elements+=",footer",this.stripTarget="footer");this.stack||(this.stack=Ext.TabPanel.AccessStack());this.initItems()},render:function(){if(Ext.TabPanel.superclass.render.apply(this,arguments),this.activeTab!==undefined){var n=this.activeTab;delete this.activeTab;this.setActiveTab(n)}},onRender:function(n,t){var r,u,i;Ext.TabPanel.superclass.onRender.call(this,n,t);this.plain&&(r=this.tabPosition=="top"?"header":"footer",this[r].addClass("x-tab-panel-"+r+"-plain"));u=this[this.stripTarget];this.stripWrap=u.createChild({cls:"x-tab-strip-wrap",cn:{tag:"ul",cls:"x-tab-strip x-tab-strip-"+this.tabPosition}});this.stripSpacer=u.createChild({cls:"x-tab-strip-spacer"});this.strip=new Ext.Element(this.stripWrap.dom.firstChild);this.edge=this.strip.createChild({tag:"li",cls:"x-tab-edge"});this.strip.createChild({cls:"x-clear"});this.body.addClass("x-tab-panel-body-"+this.tabPosition);this.itemTpl||(i=new Ext.Template('<li class="{cls}" id="{id}"><a class="x-tab-strip-close" onclick="return false;"><\/a>','<a class="x-tab-right" href="#" onclick="return false;"><em class="x-tab-left">','<span class="x-tab-strip-inner"><span class="x-tab-strip-text {iconCls}">{text}<\/span><\/span>',"<\/em><\/a><\/li>"),i.disableFormats=!0,i.compile(),Ext.TabPanel.prototype.itemTpl=i);this.items.each(this.initTab,this)},afterRender:function(){Ext.TabPanel.superclass.afterRender.call(this);this.autoTabs&&this.readTabs(!1)},initEvents:function(){Ext.TabPanel.superclass.initEvents.call(this);this.on("add",this.onAdd,this);this.on("remove",this.onRemove,this);this.strip.on("mousedown",this.onStripMouseDown,this);this.strip.on("click",this.onStripClick,this);this.strip.on("contextmenu",this.onStripContextMenu,this);if(this.enableTabScroll)this.strip.on("mousewheel",this.onWheel,this)},findTargets:function(n){var t=null,i=n.getTarget("li",this.strip);return i&&(t=this.getComponent(i.id.split(this.idDelimiter)[1]),t.disabled)?{close:null,item:null,el:null}:{close:n.getTarget(".x-tab-strip-close",this.strip),item:t,el:i}},onStripMouseDown:function(n){if(n.preventDefault(),n.button==0){var t=this.findTargets(n);if(t.close){this.remove(t.item);return}t.item&&t.item!=this.activeTab&&this.setActiveTab(t.item)}},onStripClick:function(n){var t=this.findTargets(n);!t.close&&t.item&&t.item!=this.activeTab&&this.setActiveTab(t.item)},onStripContextMenu:function(n){n.preventDefault();var t=this.findTargets(n);t.item&&this.fireEvent("contextmenu",this,t.item,n)},readTabs:function(n){var r,t,u,i,f;for(n===!0&&this.items.each(function(n){this.remove(n)},this),r=this.el.query(this.autoTabSelector),t=0,u=r.length;t<u;t++)i=r[t],f=i.getAttribute("title"),i.removeAttribute("title"),this.add({title:f,el:i})},initTab:function(n,t){var f=this.strip.dom.childNodes[t],i=n.closable?"x-tab-strip-closable":"",r,u;n.disabled&&(i+=" x-item-disabled");n.iconCls&&(i+=" x-tab-with-icon");r={id:this.id+this.idDelimiter+n.getItemId(),text:n.title,cls:i,iconCls:n.iconCls||""};u=f?this.itemTpl.insertBefore(f,r):this.itemTpl.append(this.strip,r);Ext.fly(u).addClassOnOver("x-tab-strip-over");n.tabTip&&(Ext.fly(u).child("span.x-tab-strip-text",!0).qtip=n.tabTip);n.on("disable",this.onItemDisabled,this);n.on("enable",this.onItemEnabled,this);n.on("titlechange",this.onItemTitleChanged,this);n.on("beforeshow",this.onBeforeShowItem,this)},onAdd:function(n,t,i){this.initTab(t,i);this.items.getCount()==1&&this.syncSize();this.delegateUpdates()},onBeforeAdd:function(n){var i=n.events?this.items.containsKey(n.getItemId())?n:null:this.items.get(n),t;if(i)return this.setActiveTab(n),!1;Ext.TabPanel.superclass.onBeforeAdd.apply(this,arguments);t=n.elements;n.elements=t?t.replace(",header",""):t;n.border=n.border===!0},onRemove:function(n,t){if(Ext.removeNode(this.getTabEl(t)),this.stack.remove(t),t==this.activeTab){var i=this.stack.next();i?this.setActiveTab(i):this.setActiveTab(0)}this.delegateUpdates()},onBeforeShowItem:function(n){if(n!=this.activeTab)return this.setActiveTab(n),!1},onItemDisabled:function(n){var t=this.getTabEl(n);t&&Ext.fly(t).addClass("x-item-disabled");this.stack.remove(n)},onItemEnabled:function(n){var t=this.getTabEl(n);t&&Ext.fly(t).removeClass("x-item-disabled")},onItemTitleChanged:function(n){var t=this.getTabEl(n);t&&(Ext.fly(t).child("span.x-tab-strip-text",!0).innerHTML=n.title)},getTabEl:function(n){var t=typeof n=="number"?this.items.items[n].getItemId():n.getItemId();return document.getElementById(this.id+this.idDelimiter+t)},onResize:function(){Ext.TabPanel.superclass.onResize.apply(this,arguments);this.delegateUpdates()},beginUpdate:function(){this.suspendUpdates=!0},endUpdate:function(){this.suspendUpdates=!1;this.delegateUpdates()},hideTabStripItem:function(n){n=this.getComponent(n);var t=this.getTabEl(n);t&&(t.style.display="none",this.delegateUpdates())},unhideTabStripItem:function(n){n=this.getComponent(n);var t=this.getTabEl(n);t&&(t.style.display="",this.delegateUpdates())},delegateUpdates:function(){this.suspendUpdates||(this.resizeTabs&&this.rendered&&this.autoSizeTabs(),this.enableTabScroll&&this.rendered&&this.autoScrollTabs())},autoSizeTabs:function(){var r=this.items.length,u=this.tabPosition!="bottom"?"header":"footer",l=this[u].dom.offsetWidth,f=this[u].dom.clientWidth,t,i,n,e;if(this.resizeTabs&&!(r<1)&&f)for(t=Math.max(Math.min(Math.floor((f-4)/r)-this.tabMargin,this.tabWidth),this.minTabWidth),this.lastTabWidth=t,i=this.stripWrap.dom.getElementsByTagName("li"),n=0,e=i.length-1;n<e;n++){var o=i[n],s=o.childNodes[1].firstChild.firstChild,h=o.offsetWidth,c=s.offsetWidth;s.style.width=t-(h-c)+"px"}},adjustBodyWidth:function(n){return this.header&&this.header.setWidth(n),this.footer&&this.footer.setWidth(n),n},setActiveTab:function(n){var t,i;if(n=this.getComponent(n),n&&this.fireEvent("beforetabchange",this,n,this.activeTab)!==!1){if(!this.rendered){this.activeTab=n;return}this.activeTab!=n&&(this.activeTab&&(t=this.getTabEl(this.activeTab),t&&Ext.fly(t).removeClass("x-tab-strip-active"),this.activeTab.fireEvent("deactivate",this.activeTab)),i=this.getTabEl(n),Ext.fly(i).addClass("x-tab-strip-active"),this.activeTab=n,this.stack.add(n),this.layout.setActiveItem(n),this.layoutOnTabChange&&n.doLayout&&n.doLayout(),this.scrolling&&this.scrollToTab(n,this.animScroll),n.fireEvent("activate",n),this.fireEvent("tabchange",this,n))}},getActiveTab:function(){return this.activeTab||null},getItem:function(n){return this.getComponent(n)},autoScrollTabs:function(){var u=this.items.length,e=this.header.dom.offsetWidth,n=this.header.dom.clientWidth,t=this.stripWrap,f=t.dom.offsetWidth,r=this.getScrollPos(),i=this.edge.getOffsetsTo(this.stripWrap)[0]+r;!this.enableTabScroll||u<1||f<20||(i<=n?(t.dom.scrollLeft=0,t.setWidth(n),this.scrolling&&(this.scrolling=!1,this.header.removeClass("x-tab-scrolling"),this.scrollLeft.hide(),this.scrollRight.hide())):(this.scrolling||this.header.addClass("x-tab-scrolling"),n-=t.getMargins("lr"),t.setWidth(n>20?n:20),this.scrolling||(this.scrollLeft?(this.scrollLeft.show(),this.scrollRight.show()):this.createScrollers()),this.scrolling=!0,r>i-n?t.dom.scrollLeft=i-n:this.scrollToTab(this.activeTab,!1),this.updateScrollButtons()))},createScrollers:function(){var i=this.stripWrap.dom.offsetHeight,t=this.header.insertFirst({cls:"x-tab-scroller-left"}),n;t.setHeight(i);t.addClassOnOver("x-tab-scroller-left-over");this.leftRepeater=new Ext.util.ClickRepeater(t,{interval:this.scrollRepeatInterval,handler:this.onScrollLeft,scope:this});this.scrollLeft=t;n=this.header.insertFirst({cls:"x-tab-scroller-right"});n.setHeight(i);n.addClassOnOver("x-tab-scroller-right-over");this.rightRepeater=new Ext.util.ClickRepeater(n,{interval:this.scrollRepeatInterval,handler:this.onScrollRight,scope:this});this.scrollRight=n},getScrollWidth:function(){return this.edge.getOffsetsTo(this.stripWrap)[0]+this.getScrollPos()},getScrollPos:function(){return parseInt(this.stripWrap.dom.scrollLeft,10)||0},getScrollArea:function(){return parseInt(this.stripWrap.dom.clientWidth,10)||0},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},getScrollIncrement:function(){return this.scrollIncrement||(this.resizeTabs?this.lastTabWidth+2:100)},scrollToTab:function(n,t){if(n){var u=this.getTabEl(n),i=this.getScrollPos(),f=this.getScrollArea(),r=Ext.fly(u).getOffsetsTo(this.stripWrap)[0]+i,e=r+u.offsetWidth;r<i?this.scrollTo(r,t):e>i+f&&this.scrollTo(e-f,t)}},scrollTo:function(n,t){this.stripWrap.scrollTo("left",n,t?this.getScrollAnim():!1);t||this.updateScrollButtons()},onWheel:function(n){var r=n.getWheelDelta()*this.wheelIncrement*-1;n.stopEvent();var t=this.getScrollPos(),u=t+r,f=this.getScrollWidth()-this.getScrollArea(),i=Math.max(0,Math.min(f,u));i!=t&&this.scrollTo(i,!1)},onScrollRight:function(){var i=this.getScrollWidth()-this.getScrollArea(),n=this.getScrollPos(),t=Math.min(i,n+this.getScrollIncrement());t!=n&&this.scrollTo(t,this.animScroll)},onScrollLeft:function(){var n=this.getScrollPos(),t=Math.max(0,n-this.getScrollIncrement());t!=n&&this.scrollTo(t,this.animScroll)},updateScrollButtons:function(){var n=this.getScrollPos();this.scrollLeft[n==0?"addClass":"removeClass"]("x-tab-scroller-left-disabled");this.scrollRight[n>=this.getScrollWidth()-this.getScrollArea()?"addClass":"removeClass"]("x-tab-scroller-right-disabled")}});Ext.reg("tabpanel",Ext.TabPanel);Ext.TabPanel.prototype.activate=Ext.TabPanel.prototype.setActiveTab;Ext.TabPanel.AccessStack=function(){var n=[];return{add:function(t){n.push(t);n.length>10&&n.shift()},remove:function(t){for(var r=[],i=0,u=n.length;i<u;i++)n[i]!=t&&r.push(n[i]);n=r},next:function(){return n.pop()}}};Ext.Button=Ext.extend(Ext.Component,{hidden:!1,disabled:!1,pressed:!1,enableToggle:!1,menuAlign:"tl-bl?",type:"button",menuClassTarget:"tr",clickEvent:"click",handleMouseEvents:!0,tooltipType:"qtip",buttonSelector:"button:first",initComponent:function(){Ext.Button.superclass.initComponent.call(this);this.addEvents("click","toggle","mouseover","mouseout","menushow","menuhide","menutriggerover","menutriggerout");this.menu&&(this.menu=Ext.menu.MenuMgr.get(this.menu));typeof this.toggleGroup=="string"&&(this.enableToggle=!0)},onRender:function(n,t){var r,u,i;this.template||(Ext.Button.buttonTemplate||(Ext.Button.buttonTemplate=new Ext.Template('<table border="0" cellpadding="0" cellspacing="0" class="x-btn-wrap"><tbody><tr>','<td class="x-btn-left"><i>&#160;<\/i><\/td><td class="x-btn-center"><em unselectable="on"><button class="x-btn-text" type="{1}">{0}<\/button><\/em><\/td><td class="x-btn-right"><i>&#160;<\/i><\/td>',"<\/tr><\/tbody><\/table>")),this.template=Ext.Button.buttonTemplate);u=[this.text||"&#160;",this.type];r=t?this.template.insertBefore(t,u,!0):this.template.append(n,u,!0);i=r.child(this.buttonSelector);i.on("focus",this.onFocus,this);i.on("blur",this.onBlur,this);this.initButtonEl(r,i);this.menu&&this.el.child(this.menuClassTarget).addClass("x-btn-with-menu");Ext.ButtonToggleMgr.register(this)},initButtonEl:function(n,t){if(this.el=n,n.addClass("x-btn"),this.icon&&t.setStyle("background-image","url("+this.icon+")"),this.iconCls&&(t.addClass(this.iconCls),this.cls||n.addClass(this.text?"x-btn-text-icon":"x-btn-icon")),this.tabIndex!==undefined&&(t.dom.tabIndex=this.tabIndex),this.tooltip&&(typeof this.tooltip=="object"?Ext.QuickTips.register(Ext.apply({target:t.id},this.tooltip)):t.dom[this.tooltipType]=this.tooltip),this.pressed&&this.el.addClass("x-btn-pressed"),this.handleMouseEvents){n.on("mouseover",this.onMouseOver,this);n.on("mousedown",this.onMouseDown,this)}if(this.menu){this.menu.on("show",this.onMenuShow,this);this.menu.on("hide",this.onMenuHide,this)}if(this.id&&(this.el.dom.id=this.el.id=this.id),this.repeat){var i=new Ext.util.ClickRepeater(n,typeof this.repeat=="object"?this.repeat:{});i.on("click",this.onClick,this)}n.on(this.clickEvent,this.onClick,this)},afterRender:function(){Ext.Button.superclass.afterRender.call(this);Ext.isIE6?this.autoWidth.defer(1,this):this.autoWidth()},setIconClass:function(n){this.el&&this.el.child(this.buttonSelector).replaceClass(this.iconCls,n);this.iconCls=n},beforeDestroy:function(){if(this.rendered){var n=this.el.child(this.buttonSelector);n&&n.removeAllListeners()}this.menu&&Ext.destroy(this.menu)},onDestroy:function(){this.rendered&&Ext.ButtonToggleMgr.unregister(this)},autoWidth:function(){if(this.el){if(this.el.setWidth("auto"),Ext.isIE7&&Ext.isStrict){var n=this.el.child(this.buttonSelector);n&&n.getWidth()>20&&(n.clip(),n.setWidth(Ext.util.TextMetrics.measure(n,this.text).width+n.getFrameWidth("lr")))}this.minWidth&&this.el.getWidth()<this.minWidth&&this.el.setWidth(this.minWidth)}},setHandler:function(n,t){this.handler=n;this.scope=t},setText:function(n){this.text=n;this.el&&this.el.child("td.x-btn-center "+this.buttonSelector).update(n);this.autoWidth()},getText:function(){return this.text},toggle:function(n){n=n===undefined?!this.pressed:n;n!=this.pressed&&(n?(this.el.addClass("x-btn-pressed"),this.pressed=!0,this.fireEvent("toggle",this,!0)):(this.el.removeClass("x-btn-pressed"),this.pressed=!1,this.fireEvent("toggle",this,!1)),this.toggleHandler&&this.toggleHandler.call(this.scope||this,this,n))},focus:function(){this.el.child(this.buttonSelector).focus()},onDisable:function(){this.el&&(Ext.isIE6&&this.text||this.el.addClass(this.disabledClass),this.el.dom.disabled=!0);this.disabled=!0},onEnable:function(){this.el&&(Ext.isIE6&&this.text||this.el.removeClass(this.disabledClass),this.el.dom.disabled=!1);this.disabled=!1},showMenu:function(){return this.menu&&this.menu.show(this.el,this.menuAlign),this},hideMenu:function(){return this.menu&&this.menu.hide(),this},hasVisibleMenu:function(){return this.menu&&this.menu.isVisible()},onClick:function(n){(n&&n.preventDefault(),n.button==0)&&(this.disabled||(this.enableToggle&&(this.allowDepress!==!1||!this.pressed)&&this.toggle(),!this.menu||this.menu.isVisible()||this.ignoreNextClick||this.showMenu(),this.fireEvent("click",this,n),this.handler&&this.handler.call(this.scope||this,this,n)))},isMenuTriggerOver:function(n,t){return this.menu&&!t},isMenuTriggerOut:function(n,t){return this.menu&&!t},onMouseOver:function(n){if(!this.disabled){var t=n.within(this.el,!0);if(!t){this.el.addClass("x-btn-over");Ext.getDoc().on("mouseover",this.monitorMouseOver,this);this.fireEvent("mouseover",this,n)}this.isMenuTriggerOver(n,t)&&this.fireEvent("menutriggerover",this,this.menu,n)}},monitorMouseOver:function(n){if(n.target!=this.el.dom&&!n.within(this.el)){Ext.getDoc().un("mouseover",this.monitorMouseOver,this);this.onMouseOut(n)}},onMouseOut:function(n){var t=n.within(this.el)&&n.target!=this.el.dom;this.el.removeClass("x-btn-over");this.fireEvent("mouseout",this,n);this.isMenuTriggerOut(n,t)&&this.fireEvent("menutriggerout",this,this.menu,n)},onFocus:function(){this.disabled||this.el.addClass("x-btn-focus")},onBlur:function(){this.el.removeClass("x-btn-focus")},getClickEl:function(){return this.el},onMouseDown:function(n){if(!this.disabled&&n.button==0){this.getClickEl(n).addClass("x-btn-click");Ext.getDoc().on("mouseup",this.onMouseUp,this)}},onMouseUp:function(n){n.button==0&&(this.getClickEl(n,!0).removeClass("x-btn-click"),Ext.getDoc().un("mouseup",this.onMouseUp,this))},onMenuShow:function(){this.ignoreNextClick=0;this.el.addClass("x-btn-menu-active");this.fireEvent("menushow",this,this.menu)},onMenuHide:function(){this.el.removeClass("x-btn-menu-active");this.ignoreNextClick=this.restoreClick.defer(250,this);this.fireEvent("menuhide",this,this.menu)},restoreClick:function(){this.ignoreNextClick=0}});Ext.reg("button",Ext.Button);Ext.ButtonToggleMgr=function(){function t(t,i){var u,r,f;if(i)for(u=n[t.toggleGroup],r=0,f=u.length;r<f;r++)u[r]!=t&&u[r].toggle(!1)}var n={};return{register:function(i){if(i.toggleGroup){var r=n[i.toggleGroup];r||(r=n[i.toggleGroup]=[]);r.push(i);i.on("toggle",t)}},unregister:function(i){if(i.toggleGroup){var r=n[i.toggleGroup];r&&(r.remove(i),i.un("toggle",t))}}}}();Ext.SplitButton=Ext.extend(Ext.Button,{arrowSelector:"button:last",initComponent:function(){Ext.SplitButton.superclass.initComponent.call(this);this.addEvents("arrowclick")},onRender:function(n,t){var r=new Ext.Template('<table cellspacing="0" class="x-btn-menu-wrap x-btn"><tr><td>','<table cellspacing="0" class="x-btn-wrap x-btn-menu-text-wrap"><tbody>','<tr><td class="x-btn-left"><i>&#160;<\/i><\/td><td class="x-btn-center"><button class="x-btn-text" type="{1}">{0}<\/button><\/td><\/tr>',"<\/tbody><\/table><\/td><td>",'<table cellspacing="0" class="x-btn-wrap x-btn-menu-arrow-wrap"><tbody>','<tr><td class="x-btn-center"><button class="x-btn-menu-arrow-el" type="button">&#160;<\/button><\/td><td class="x-btn-right"><i>&#160;<\/i><\/td><\/tr>',"<\/tbody><\/table><\/td><\/tr><\/table>"),i,u=[this.text||"&#160;",this.type],f;i=t?r.insertBefore(t,u,!0):r.append(n,u,!0);f=i.child(this.buttonSelector);this.initButtonEl(i,f);this.arrowBtnTable=i.child("table:last");this.arrowTooltip&&(i.child(this.arrowSelector).dom[this.tooltipType]=this.arrowTooltip)},autoWidth:function(){var t,i,n;this.el&&(t=this.el.child("table:first"),i=this.el.child("table:last"),this.el.setWidth("auto"),t.setWidth("auto"),Ext.isIE7&&Ext.isStrict&&(n=this.el.child(this.buttonSelector),n&&n.getWidth()>20&&(n.clip(),n.setWidth(Ext.util.TextMetrics.measure(n,this.text).width+n.getFrameWidth("lr")))),this.minWidth&&t.getWidth()+i.getWidth()<this.minWidth&&t.setWidth(this.minWidth-i.getWidth()),this.el.setWidth(t.getWidth()+i.getWidth()))},setArrowHandler:function(n,t){this.arrowHandler=n;this.scope=t},onClick:function(n){n.preventDefault();this.disabled||(n.getTarget(".x-btn-menu-arrow-wrap")?(!this.menu||this.menu.isVisible()||this.ignoreNextClick||this.showMenu(),this.fireEvent("arrowclick",this,n),this.arrowHandler&&this.arrowHandler.call(this.scope||this,this,n)):(this.enableToggle&&this.toggle(),this.fireEvent("click",this,n),this.handler&&this.handler.call(this.scope||this,this,n)))},getClickEl:function(n,t){return t?this.lastClickEl:this.lastClickEl=n.getTarget("table",10,!0)},onDisable:function(){this.el&&(Ext.isIE6||this.el.addClass("x-item-disabled"),this.el.child(this.buttonSelector).dom.disabled=!0,this.el.child(this.arrowSelector).dom.disabled=!0);this.disabled=!0},onEnable:function(){this.el&&(Ext.isIE6||this.el.removeClass("x-item-disabled"),this.el.child(this.buttonSelector).dom.disabled=!1,this.el.child(this.arrowSelector).dom.disabled=!1);this.disabled=!1},isMenuTriggerOver:function(n){return this.menu&&n.within(this.arrowBtnTable)&&!n.within(this.arrowBtnTable,!0)},isMenuTriggerOut:function(n){return this.menu&&!n.within(this.arrowBtnTable)},onDestroy:function(){Ext.destroy(this.arrowBtnTable);Ext.SplitButton.superclass.onDestroy.call(this)}});Ext.MenuButton=Ext.SplitButton;Ext.reg("splitbutton",Ext.SplitButton);Ext.CycleButton=Ext.extend(Ext.SplitButton,{getItemText:function(n){if(n&&this.showText===!0){var t="";return this.prependText&&(t+=this.prependText),t+n.text}return undefined},setActiveItem:function(n,t){if(n){if(this.rendered){var i=this.getItemText(n);i&&this.setText(i);this.setIconClass(n.iconCls)}else this.text=this.getItemText(n),this.iconCls=n.iconCls;this.activeItem=n;t||this.fireEvent("change",this,n)}},getActiveItem:function(){return this.activeItem},initComponent:function(){var i,t,r,n;if(this.addEvents("change"),this.changeHandler){this.on("change",this.changeHandler,this.scope||this);delete this.changeHandler}for(this.itemCount=this.items.length,this.menu={cls:"x-cycle-menu",items:[]},t=0,r=this.itemCount;t<r;t++)n=this.items[t],n.group=n.group||this.id,n.itemIndex=t,n.checkHandler=this.checkHandler,n.scope=this,n.checked=n.checked||!1,this.menu.items.push(n),n.checked&&(i=n);this.setActiveItem(i,!0);Ext.CycleButton.superclass.initComponent.call(this);this.on("click",this.toggleSelected,this)},checkHandler:function(n,t){t&&this.setActiveItem(n)},toggleSelected:function(){var i,t,n;for(this.menu.render(),n=1;n<this.itemCount;n++)if(i=(this.activeItem.itemIndex+n)%this.itemCount,t=this.menu.items.itemAt(i),!t.disabled){t.setChecked(!0);break}}});Ext.reg("cycle",Ext.CycleButton);Ext.Toolbar=function(n){n instanceof Array&&(n={buttons:n});Ext.Toolbar.superclass.constructor.call(this,n)},function(){var n=Ext.Toolbar;Ext.extend(n,Ext.BoxComponent,{trackMenus:!0,initComponent:function(){n.superclass.initComponent.call(this);this.items&&(this.buttons=this.items);this.items=new Ext.util.MixedCollection(!1,function(n){return n.itemId||n.id||Ext.id()})},autoCreate:{cls:"x-toolbar x-small-editor",html:'<table cellspacing="0"><tr><\/tr><\/table>'},onRender:function(n,t){this.el=n.createChild(Ext.apply({id:this.id},this.autoCreate),t);this.tr=this.el.child("tr",!0)},afterRender:function(){n.superclass.afterRender.call(this);this.buttons&&(this.add.apply(this,this.buttons),delete this.buttons)},add:function(){for(var n,i=arguments,r=i.length,t=0;t<r;t++)n=i[t],n.isFormField?this.addField(n):n.render?this.addItem(n):typeof n=="string"?n=="separator"||n=="-"?this.addSeparator():n==" "?this.addSpacer():n=="->"?this.addFill():this.addText(n):n.tagName?this.addElement(n):typeof n=="object"&&(n.xtype?this.addField(Ext.ComponentMgr.create(n,"button")):this.addButton(n))},addSeparator:function(){return this.addItem(new n.Separator)},addSpacer:function(){return this.addItem(new n.Spacer)},addFill:function(){return this.addItem(new n.Fill)},addElement:function(t){return this.addItem(new n.Item(t))},addItem:function(n){var t=this.nextBlock();return this.initMenuTracking(n),n.render(t),this.items.add(n),n},addButton:function(t){var u,r,f,i,e;if(t instanceof Array){for(u=[],r=0,f=t.length;r<f;r++)u.push(this.addButton(t[r]));return u}return i=t,t instanceof n.Button||(i=t.split?new n.SplitButton(t):new n.Button(t)),e=this.nextBlock(),this.initMenuTracking(i),i.render(e),this.items.add(i),i},initMenuTracking:function(n){if(this.trackMenus&&n.menu)n.on({menutriggerover:this.onButtonTriggerOver,menushow:this.onButtonMenuShow,menuhide:this.onButtonMenuHide,scope:this})},addText:function(t){return this.addItem(new n.TextItem(t))},insertButton:function(t,i){var u,r,e,f;if(i instanceof Array){for(u=[],r=0,e=i.length;r<e;r++)u.push(this.insertButton(t+r,i[r]));return u}return i instanceof n.Button||(i=new n.Button(i)),f=document.createElement("td"),this.tr.insertBefore(f,this.tr.childNodes[t]),this.initMenuTracking(i),i.render(f),this.items.insert(t,i),i},addDom:function(t){var r=this.nextBlock(),i;return Ext.DomHelper.overwrite(r,t),i=new n.Item(r.firstChild),i.render(r),this.items.add(i),i},addField:function(t){var r=this.nextBlock(),i;return t.render(r),i=new n.Item(r.firstChild),i.render(r),this.items.add(i),i},nextBlock:function(){var n=document.createElement("td");return this.tr.appendChild(n),n},onDestroy:function(){Ext.Toolbar.superclass.onDestroy.call(this);this.rendered&&(this.items&&Ext.destroy.apply(Ext,this.items.items),Ext.Element.uncache(this.tr))},onDisable:function(){this.items.each(function(n){n.disable&&n.disable()})},onEnable:function(){this.items.each(function(n){n.enable&&n.enable()})},onButtonTriggerOver:function(n){this.activeMenuBtn&&this.activeMenuBtn!=n&&(this.activeMenuBtn.hideMenu(),n.showMenu(),this.activeMenuBtn=n)},onButtonMenuShow:function(n){this.activeMenuBtn=n},onButtonMenuHide:function(){delete this.activeMenuBtn}});Ext.reg("toolbar",Ext.Toolbar);n.Item=function(n){this.el=Ext.getDom(n);this.id=Ext.id(this.el);this.hidden=!1};n.Item.prototype={getEl:function(){return this.el},render:function(n){this.td=n;n.appendChild(this.el)},destroy:function(){this.td&&this.td.parentNode&&this.td.parentNode.removeChild(this.td)},show:function(){this.hidden=!1;this.td.style.display=""},hide:function(){this.hidden=!0;this.td.style.display="none"},setVisible:function(n){n?this.show():this.hide()},focus:function(){Ext.fly(this.el).focus()},disable:function(){Ext.fly(this.td).addClass("x-item-disabled");this.disabled=!0;this.el.disabled=!0},enable:function(){Ext.fly(this.td).removeClass("x-item-disabled");this.disabled=!1;this.el.disabled=!1}};Ext.reg("tbitem",n.Item);n.Separator=function(){var t=document.createElement("span");t.className="ytb-sep";n.Separator.superclass.constructor.call(this,t)};Ext.extend(n.Separator,n.Item,{enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn});Ext.reg("tbseparator",n.Separator);n.Spacer=function(){var t=document.createElement("div");t.className="ytb-spacer";n.Spacer.superclass.constructor.call(this,t)};Ext.extend(n.Spacer,n.Item,{enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn});Ext.reg("tbspacer",n.Spacer);n.Fill=Ext.extend(n.Spacer,{render:function(t){t.style.width="100%";n.Fill.superclass.render.call(this,t)}});Ext.reg("tbfill",n.Fill);n.TextItem=function(t){var i=document.createElement("span");i.className="ytb-text";i.innerHTML=t.text?t.text:t;n.TextItem.superclass.constructor.call(this,i)};Ext.extend(n.TextItem,n.Item,{enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn});Ext.reg("tbtext",n.TextItem);n.Button=Ext.extend(Ext.Button,{hideParent:!0,onDestroy:function(){n.Button.superclass.onDestroy.call(this);this.container&&this.container.remove()}});Ext.reg("tbbutton",n.Button);n.SplitButton=Ext.extend(Ext.SplitButton,{hideParent:!0,onDestroy:function(){n.SplitButton.superclass.onDestroy.call(this);this.container&&this.container.remove()}});Ext.reg("tbsplit",n.SplitButton);n.MenuButton=n.SplitButton}();Ext.PagingToolbar=Ext.extend(Ext.Toolbar,{pageSize:20,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",paramNames:{start:"start",limit:"limit"},initComponent:function(){Ext.PagingToolbar.superclass.initComponent.call(this);this.cursor=0;this.bind(this.store)},onRender:function(n,t){Ext.PagingToolbar.superclass.onRender.call(this,n,t);this.first=this.addButton({tooltip:this.firstText,iconCls:"x-tbar-page-first",disabled:!0,handler:this.onClick.createDelegate(this,["first"])});this.prev=this.addButton({tooltip:this.prevText,iconCls:"x-tbar-page-prev",disabled:!0,handler:this.onClick.createDelegate(this,["prev"])});this.addSeparator();this.add(this.beforePageText);this.field=Ext.get(this.addDom({tag:"input",type:"text",size:"3",value:"1",cls:"x-tbar-page-number"}).el);this.field.on("keydown",this.onPagingKeydown,this);this.field.on("focus",function(){this.dom.select()});this.afterTextEl=this.addText(String.format(this.afterPageText,1));this.field.setHeight(18);this.addSeparator();this.next=this.addButton({tooltip:this.nextText,iconCls:"x-tbar-page-next",disabled:!0,handler:this.onClick.createDelegate(this,["next"])});this.last=this.addButton({tooltip:this.lastText,iconCls:"x-tbar-page-last",disabled:!0,handler:this.onClick.createDelegate(this,["last"])});this.addSeparator();this.loading=this.addButton({tooltip:this.refreshText,iconCls:"x-tbar-loading",handler:this.onClick.createDelegate(this,["refresh"])});this.displayInfo&&(this.displayEl=Ext.fly(this.el.dom).createChild({cls:"x-paging-info"}));this.dsLoaded&&this.onLoad.apply(this,this.dsLoaded)},updateInfo:function(){if(this.displayEl){var n=this.store.getCount(),t=n==0?this.emptyMsg:String.format(this.displayMsg,this.cursor+1,this.cursor+n,this.store.getTotalCount());this.displayEl.update(t)}},onLoad:function(n,t,i){if(!this.rendered){this.dsLoaded=[n,t,i];return}this.cursor=i.params?i.params[this.paramNames.start]:0;var u=this.getPageData(),r=u.activePage,f=u.pages;this.afterTextEl.el.innerHTML=String.format(this.afterPageText,u.pages);this.field.dom.value=r;this.first.setDisabled(r==1);this.prev.setDisabled(r==1);this.next.setDisabled(r==f);this.last.setDisabled(r==f);this.loading.enable();this.updateInfo()},getPageData:function(){var n=this.store.getTotalCount();return{total:n,activePage:Math.ceil((this.cursor+this.pageSize)/this.pageSize),pages:n<this.pageSize?1:Math.ceil(n/this.pageSize)}},onLoadError:function(){this.rendered&&this.loading.enable()},readPage:function(n){var t=this.field.dom.value,i;return!t||isNaN(i=parseInt(t,10))?(this.field.dom.value=n.activePage,!1):i},onPagingKeydown:function(n){var i=n.getKey(),r=this.getPageData(),t,u;i==n.RETURN?(n.stopEvent(),(t=this.readPage(r))&&(t=Math.min(Math.max(1,t),r.pages)-1,this.doLoad(t*this.pageSize))):i==n.HOME||i==n.END?(n.stopEvent(),t=i==n.HOME?1:r.pages,this.field.dom.value=t):(i==n.UP||i==n.PAGEUP||i==n.DOWN||i==n.PAGEDOWN)&&(n.stopEvent(),(t=this.readPage(r))&&(u=n.shiftKey?10:1,(i==n.DOWN||i==n.PAGEDOWN)&&(u*=-1),t+=u,t>=1&t<=r.pages&&(this.field.dom.value=t)))},beforeLoad:function(){this.rendered&&this.loading&&this.loading.disable()},doLoad:function(n){var t={},i=this.paramNames;t[i.start]=n;t[i.limit]=this.pageSize;this.store.load({params:t})},onClick:function(n){var r=this.store;switch(n){case"first":this.doLoad(0);break;case"prev":this.doLoad(Math.max(0,this.cursor-this.pageSize));break;case"next":this.doLoad(this.cursor+this.pageSize);break;case"last":var t=r.getTotalCount(),i=t%this.pageSize,u=i?t-i:t-this.pageSize;this.doLoad(u);break;case"refresh":this.doLoad(this.cursor)}},unbind:function(n){n=Ext.StoreMgr.lookup(n);n.un("beforeload",this.beforeLoad,this);n.un("load",this.onLoad,this);n.un("loadexception",this.onLoadError,this);this.store=undefined},bind:function(n){n=Ext.StoreMgr.lookup(n);n.on("beforeload",this.beforeLoad,this);n.on("load",this.onLoad,this);n.on("loadexception",this.onLoadError,this);this.store=n}});Ext.reg("paging",Ext.PagingToolbar);Ext.Resizable=function(n,t){var o,s,i,h,r,l,c;for(this.el=Ext.get(n),t&&t.wrap&&(t.resizeChild=this.el,this.el=this.el.wrap(typeof t.wrap=="object"?t.wrap:{cls:"xresizable-wrap"}),this.el.id=this.el.dom.id=t.resizeChild.id+"-rzwrap",this.el.setStyle("overflow","hidden"),this.el.setPositioning(t.resizeChild.getPositioning()),t.resizeChild.clearPositioning(),t.width&&t.height||(o=t.resizeChild.getSize(),this.el.setSize(o.width,o.height)),t.pinned&&!t.adjustments&&(t.adjustments="auto")),this.proxy=this.el.createProxy({tag:"div",cls:"x-resizable-proxy",id:this.el.id+"-rzproxy"}),this.proxy.unselectable(),this.proxy.enableDisplayMode("block"),Ext.apply(this,t),this.pinned&&(this.disableTrackOver=!0,this.el.addClass("x-resizable-pinned")),s=this.el.getStyle("position"),s!="absolute"&&s!="fixed"&&this.el.setStyle("position","relative"),this.handles||(this.handles="s,e,se",this.multiDirectional&&(this.handles+=",n,w")),this.handles=="all"&&(this.handles="n s e w ne nw se sw"),i=this.handles.split(/\s*?[,;]\s*?| /),h=Ext.Resizable.positions,r=0,l=i.length;r<l;r++)i[r]&&h[i[r]]&&(c=h[i[r]],this[c]=new Ext.Resizable.Handle(this,c,this.disableTrackOver,this.transparent));if(this.corner=this.southeast,(this.handles.indexOf("n")!=-1||this.handles.indexOf("w")!=-1)&&(this.updateBox=!0),this.activeHandle=null,this.resizeChild&&(this.resizeChild=typeof this.resizeChild=="boolean"?Ext.get(this.el.dom.firstChild,!0):Ext.get(this.resizeChild,!0)),this.adjustments=="auto"){var e=this.resizeChild,u=this.west,a=this.east,f=this.north,i=this.south;e&&(u||f)&&(e.position("relative"),e.setLeft(u?u.el.getWidth():0),e.setTop(f?f.el.getHeight():0));this.adjustments=[(a?-a.el.getWidth():0)+(u?-u.el.getWidth():0),(f?-f.el.getHeight():0)+(i?-i.el.getHeight():0)-1]}this.draggable&&(this.dd=this.dynamic?this.el.initDD(null):this.el.initDDProxy(null,{dragElId:this.proxy.id}),this.dd.setHandleElId(this.resizeChild?this.resizeChild.id:this.el.id));this.addEvents("beforeresize","resize");this.width!==null&&this.height!==null?this.resizeTo(this.width,this.height):this.updateChildSize();Ext.isIE&&(this.el.dom.style.zoom=1);Ext.Resizable.superclass.constructor.call(this)};Ext.extend(Ext.Resizable,Ext.util.Observable,{resizeChild:!1,adjustments:[0,0],minWidth:5,minHeight:5,maxWidth:1e4,maxHeight:1e4,enabled:!0,animate:!1,duration:.35,dynamic:!1,handles:!1,multiDirectional:!1,disableTrackOver:!1,easing:"easeOutStrong",widthIncrement:0,heightIncrement:0,pinned:!1,width:null,height:null,preserveRatio:!1,transparent:!1,minX:0,minY:0,draggable:!1,resizeTo:function(n,t){this.el.setSize(n,t);this.updateChildSize();this.fireEvent("resize",this,n,t,null)},startSizing:function(n,t){if(this.fireEvent("beforeresize",this,n),this.enabled){if(!this.overlay){this.overlay=this.el.createProxy({tag:"div",cls:"x-resizable-overlay",html:"&#160;"},Ext.getBody());this.overlay.unselectable();this.overlay.enableDisplayMode("block");this.overlay.on("mousemove",this.onMouseMove,this);this.overlay.on("mouseup",this.onMouseUp,this)}if(this.overlay.setStyle("cursor",t.el.getStyle("cursor")),this.resizing=!0,this.startBox=this.el.getBox(),this.startPoint=n.getXY(),this.offsets=[this.startBox.x+this.startBox.width-this.startPoint[0],this.startBox.y+this.startBox.height-this.startPoint[1]],this.overlay.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0)),this.overlay.show(),this.constrainTo){var i=Ext.get(this.constrainTo);this.resizeRegion=i.getRegion().adjust(i.getFrameWidth("t"),i.getFrameWidth("l"),-i.getFrameWidth("b"),-i.getFrameWidth("r"))}this.proxy.setStyle("visibility","hidden");this.proxy.show();this.proxy.setBox(this.startBox);this.dynamic||this.proxy.setStyle("visibility","visible")}},onMouseDown:function(n,t){this.enabled&&(t.stopEvent(),this.activeHandle=n,this.startSizing(t,n))},onMouseUp:function(n){var t=this.resizeElement();this.resizing=!1;this.handleOut();this.overlay.hide();this.proxy.hide();this.fireEvent("resize",this,t.width,t.height,n)},updateChildSize:function(){var i;if(this.resizeChild){var n=this.el,r=this.resizeChild,t=this.adjustments;n.dom.offsetWidth&&(i=n.getSize(!0),r.setSize(i.width+t[0],i.height+t[1]));Ext.isIE&&setTimeout(function(){if(n.dom.offsetWidth){var i=n.getSize(!0);r.setSize(i.width+t[0],i.height+t[1])}},10)}},snap:function(n,t,i){if(!t||!n)return n;var u=n,r=n%t;return r>0&&(u=r>t/2?n+(t-r):n-r),Math.max(i,u)},resizeElement:function(){var n=this.proxy.getBox();return this.updateBox?this.el.setBox(n,!1,this.animate,this.duration,null,this.easing):this.el.setSize(n.width,n.height,this.animate,this.duration,null,this.easing),this.updateChildSize(),this.dynamic||this.proxy.hide(),n},constrain:function(n,t,i,r){return n-t<i?t=n-i:n-t>r&&(t=r-n),t},onMouseMove:function(n){var y,p,v,w;if(this.enabled)try{if(this.resizeRegion&&!this.resizeRegion.contains(n.getPoint()))return;var k=this.curSize||this.startBox,o=this.startBox.x,h=this.startBox.y,tt=o,it=h,t=k.width,i=k.height,f=t,e=i,c=this.minWidth,s=this.minHeight,a=this.maxWidth,l=this.maxHeight,g=this.widthIncrement,nt=this.heightIncrement,d=n.getXY(),r=-(this.startPoint[0]-Math.max(this.minX,d[0])),u=-(this.startPoint[1]-Math.max(this.minY,d[1])),b=this.activeHandle.position;switch(b){case"east":t+=r;t=Math.min(Math.max(c,t),a);break;case"south":i+=u;i=Math.min(Math.max(s,i),l);break;case"southeast":t+=r;i+=u;t=Math.min(Math.max(c,t),a);i=Math.min(Math.max(s,i),l);break;case"north":u=this.constrain(i,u,s,l);h+=u;i-=u;break;case"west":r=this.constrain(t,r,c,a);o+=r;t-=r;break;case"northeast":t+=r;t=Math.min(Math.max(c,t),a);u=this.constrain(i,u,s,l);h+=u;i-=u;break;case"northwest":r=this.constrain(t,r,c,a);u=this.constrain(i,u,s,l);h+=u;i-=u;o+=r;t-=r;break;case"southwest":r=this.constrain(t,r,c,a);i+=u;i=Math.min(Math.max(s,i),l);o+=r;t-=r}if(y=this.snap(t,g,c),p=this.snap(i,nt,s),y!=t||p!=i){switch(b){case"northeast":h-=p-i;break;case"north":h-=p-i;break;case"southwest":o-=y-t;break;case"west":o-=y-t;break;case"northwest":o-=y-t;h-=p-i}t=y;i=p}if(this.preserveRatio)switch(b){case"southeast":case"east":i=e*(t/f);i=Math.min(Math.max(s,i),l);t=f*(i/e);break;case"south":t=f*(i/e);t=Math.min(Math.max(c,t),a);i=e*(t/f);break;case"northeast":t=f*(i/e);t=Math.min(Math.max(c,t),a);i=e*(t/f);break;case"north":v=t;t=f*(i/e);t=Math.min(Math.max(c,t),a);i=e*(t/f);o+=(v-t)/2;break;case"southwest":i=e*(t/f);i=Math.min(Math.max(s,i),l);v=t;t=f*(i/e);o+=v-t;break;case"west":w=i;i=e*(t/f);i=Math.min(Math.max(s,i),l);h+=(w-i)/2;v=t;t=f*(i/e);o+=v-t;break;case"northwest":v=t;w=i;i=e*(t/f);i=Math.min(Math.max(s,i),l);t=f*(i/e);h+=w-i;o+=v-t}this.proxy.setBounds(o,h,t,i);this.dynamic&&this.resizeElement()}catch(n){}},handleOver:function(){this.enabled&&this.el.addClass("x-resizable-over")},handleOut:function(){this.resizing||this.el.removeClass("x-resizable-over")},getEl:function(){return this.el},getResizeChild:function(){return this.resizeChild},destroy:function(n){var t,i,r;this.proxy.remove();this.overlay&&(this.overlay.removeAllListeners(),this.overlay.remove());t=Ext.Resizable.positions;for(i in t)typeof t[i]!="function"&&this[t[i]]&&(r=this[t[i]],r.el.removeAllListeners(),r.el.remove());n&&(this.el.update(""),this.el.remove())},syncHandleHeight:function(){var n=this.el.getHeight(!0);this.west&&this.west.el.setHeight(n);this.east&&this.east.el.setHeight(n)}});Ext.Resizable.positions={n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"};Ext.Resizable.Handle=function(n,t,i,r){if(!this.tpl){var u=Ext.DomHelper.createTemplate({tag:"div",cls:"x-resizable-handle x-resizable-handle-{0}"});u.compile();Ext.Resizable.Handle.prototype.tpl=u}this.position=t;this.rz=n;this.el=this.tpl.append(n.el.dom,[this.position],!0);this.el.unselectable();r&&this.el.setOpacity(0);this.el.on("mousedown",this.onMouseDown,this);if(!i){this.el.on("mouseover",this.onMouseOver,this);this.el.on("mouseout",this.onMouseOut,this)}};Ext.Resizable.Handle.prototype={afterResize:function(){},onMouseDown:function(n){this.rz.onMouseDown(this,n)},onMouseOver:function(n){this.rz.handleOver(this,n)},onMouseOut:function(n){this.rz.handleOut(this,n)}};Ext.Editor=function(n,t){this.field=n;Ext.Editor.superclass.constructor.call(this,t)};Ext.extend(Ext.Editor,Ext.Component,{value:"",alignment:"c-c?",shadow:"frame",constrain:!1,swallowKeys:!0,completeOnEnter:!1,cancelOnEsc:!1,updateEl:!1,initComponent:function(){Ext.Editor.superclass.initComponent.call(this);this.addEvents("beforestartedit","startedit","beforecomplete","complete","specialkey")},onRender:function(n){this.el=new Ext.Layer({shadow:this.shadow,cls:"x-editor",parentEl:n,shim:this.shim,shadowOffset:4,id:this.id,constrain:this.constrain});this.el.setStyle("overflow",Ext.isGecko?"auto":"hidden");this.field.msgTarget!="title"&&(this.field.msgTarget="qtip");this.field.render(this.el);Ext.isGecko&&this.field.el.dom.setAttribute("autocomplete","off");this.field.on("specialkey",this.onSpecialKey,this);this.swallowKeys&&this.field.el.swallowEvent(["keydown","keypress"]);this.field.show();this.field.on("blur",this.onBlur,this);if(this.field.grow)this.field.on("autosize",this.el.sync,this.el,{delay:1})},onSpecialKey:function(n,t){this.completeOnEnter&&t.getKey()==t.ENTER?(t.stopEvent(),this.completeEdit()):this.cancelOnEsc&&t.getKey()==t.ESC?this.cancelEdit():this.fireEvent("specialkey",n,t)},startEdit:function(n,t){var r,i;if(this.editing&&this.completeEdit(),this.boundEl=Ext.get(n),r=t!==undefined?t:this.boundEl.dom.innerHTML,this.rendered||this.render(this.parentEl||document.body),this.fireEvent("beforestartedit",this,this.boundEl,r)!==!1){if(this.startValue=r,this.field.setValue(r),this.autoSize){i=this.boundEl.getSize();switch(this.autoSize){case"width":this.setSize(i.width,"");break;case"height":this.setSize("",i.height);break;default:this.setSize(i.width,i.height)}}this.el.alignTo(this.boundEl,this.alignment);this.editing=!0;this.show()}},setSize:function(n,t){this.field.setSize(n,t);this.el&&this.el.sync()},realign:function(){this.el.alignTo(this.boundEl,this.alignment)},completeEdit:function(n){if(this.editing){var t=this.getValue();if(this.revertInvalid===!1||this.field.isValid()||(t=this.startValue,this.cancelEdit(!0)),String(t)===String(this.startValue)&&this.ignoreNoChange){this.editing=!1;this.hide();return}this.fireEvent("beforecomplete",this,t,this.startValue)!==!1&&(this.editing=!1,this.updateEl&&this.boundEl&&this.boundEl.update(t),n!==!0&&this.hide(),this.fireEvent("complete",this,t,this.startValue))}},onShow:function(){this.el.show();this.hideEl!==!1&&this.boundEl.hide();this.field.show();Ext.isIE&&!this.fixIEFocus?(this.fixIEFocus=!0,this.deferredFocus.defer(50,this)):this.field.focus();this.fireEvent("startedit",this.boundEl,this.startValue)},deferredFocus:function(){this.editing&&this.field.focus()},cancelEdit:function(n){this.editing&&(this.setValue(this.startValue),n!==!0&&this.hide())},onBlur:function(){this.allowBlur!==!0&&this.editing&&this.completeEdit()},onHide:function(){if(this.editing){this.completeEdit();return}this.field.blur();this.field.collapse&&this.field.collapse();this.el.hide();this.hideEl!==!1&&this.boundEl.show()},setValue:function(n){this.field.setValue(n)},getValue:function(){return this.field.getValue()},beforeDestroy:function(){this.field.destroy();this.field=null}});Ext.reg("editor",Ext.Editor);Ext.MessageBox=function(){var t,n,a,h,l,u,f,e,o,i,s,v,c="",r=function(i){t.hide();Ext.callback(n.fn,n.scope||window,[i,s.dom.value],1)},y=function(){n&&n.cls&&t.el.removeClass(n.cls);e.reset()},w=function(i,r,u){n&&n.closable!==!1&&t.hide();u&&u.stopEvent()},p=function(n){var u=0,r;if(!n)return i.ok.hide(),i.cancel.hide(),i.yes.hide(),i.no.hide(),u;t.footer.dom.style.display="";for(r in i)typeof i[r]!="function"&&(n[r]?(i[r].show(),i[r].setText(typeof n[r]=="string"?n[r]:Ext.MessageBox.buttonText[r]),u+=i[r].el.getWidth()+15):i[r].hide());return u};return{getDialog:function(s){var c,v;return t||(t=new Ext.Window({autoCreate:!0,title:s,resizable:!1,constrain:!0,constrainHeader:!0,minimizable:!1,maximizable:!1,stateful:!1,modal:!0,shim:!0,buttonAlign:"center",width:400,height:100,minHeight:80,plain:!0,footer:!0,closable:!0,close:function(){n&&n.buttons&&n.buttons.no&&!n.buttons.cancel?r("no"):r("cancel")}}),i={},c=this.buttonText,i.ok=t.addButton(c.ok,r.createCallback("ok")),i.yes=t.addButton(c.yes,r.createCallback("yes")),i.no=t.addButton(c.no,r.createCallback("no")),i.cancel=t.addButton(c.cancel,r.createCallback("cancel")),i.ok.hideMode=i.yes.hideMode=i.no.hideMode=i.cancel.hideMode="offsets",t.render(document.body),t.getEl().addClass("x-window-dlg"),a=t.mask,h=t.body.createChild({html:'<div class="ext-mb-icon"><\/div><div class="ext-mb-content"><span class="ext-mb-text"><\/span><br /><input type="text" class="ext-mb-input" /><textarea class="ext-mb-textarea"><\/textarea><\/div>'}),o=Ext.get(h.dom.firstChild),v=h.dom.childNodes[1],l=Ext.get(v.firstChild),u=Ext.get(v.childNodes[2]),u.enableDisplayMode(),u.addKeyListener([10,13],function(){t.isVisible()&&n&&n.buttons&&(n.buttons.ok?r("ok"):n.buttons.yes&&r("yes"))}),f=Ext.get(v.childNodes[3]),f.enableDisplayMode(),e=new Ext.ProgressBar({renderTo:h}),h.createChild({cls:"x-clear"})),t},updateText:function(i){var u;t.isVisible()||n.width||t.setSize(this.maxWidth,100);l.update(i||"&#160;");var r=c!=""?o.getWidth()+o.getMargins("lr"):0,a=l.getWidth()+l.getMargins("lr"),f=t.getFrameWidth("lr"),h=t.body.getFrameWidth("lr");return Ext.isIE&&r>0&&(r+=3),u=Math.max(Math.min(n.width||r+a+f+h,this.maxWidth),Math.max(n.minWidth||this.minWidth,v||0)),n.prompt===!0&&s.setWidth(u-r-f-h),(n.progress===!0||n.wait===!0)&&e.setSize(u-r-f-h),t.setSize(u,"auto").center(),this},updateProgress:function(n,t,i){return e.updateProgress(n,t),i&&this.updateText(i),this},isVisible:function(){return t&&t.isVisible()},hide:function(){return this.isVisible()&&(t.hide(),y()),this},show:function(r){var o,l,h,c;this.isVisible()&&this.hide();n=r;o=this.getDialog(n.title||"&#160;");o.setTitle(n.title||"&#160;");l=n.closable!==!1&&n.progress!==!0&&n.wait!==!0;o.tools.close.setDisplayed(l);s=u;n.prompt=n.prompt||(n.multiline?!0:!1);n.prompt?n.multiline?(u.hide(),f.show(),f.setHeight(typeof n.multiline=="number"?n.multiline:this.defaultTextHeight),s=f):(u.show(),f.hide()):(u.hide(),f.hide());s.dom.value=n.value||"";n.prompt?o.focusEl=s:(h=n.buttons,c=null,h&&h.ok?c=i.ok:h&&h.yes&&(c=i.yes),c&&(o.focusEl=c));this.setIcon(n.icon);v=p(n.buttons);e.setVisible(n.progress===!0||n.wait===!0);this.updateProgress(0,n.progressText);this.updateText(n.msg);n.cls&&o.el.addClass(n.cls);o.proxyDrag=n.proxyDrag===!0;o.modal=n.modal!==!1;o.mask=n.modal!==!1?a:!1;o.isVisible()||(document.body.appendChild(t.el.dom),o.setAnimateTarget(n.animEl),o.show(n.animEl));o.on("show",function(){l===!0?o.keyMap.enable():o.keyMap.disable()});return n.wait===!0&&e.wait(n.waitConfig),this},setIcon:function(n){return n&&n!=""?(o.removeClass("x-hidden"),o.replaceClass(c,n),c=n):(o.replaceClass(c,"x-hidden"),c=""),this},progress:function(n,t,i){return this.show({title:n,msg:t,buttons:!1,progress:!0,closable:!1,minWidth:this.minProgressWidth,progressText:i}),this},wait:function(n,t,i){return this.show({title:t,msg:n,buttons:!1,closable:!1,wait:!0,modal:!0,minWidth:this.minProgressWidth,waitConfig:i}),this},alert:function(n,t,i,r){return this.show({title:n,msg:t,buttons:this.OK,fn:i,scope:r}),this},confirm:function(n,t,i,r){return this.show({title:n,msg:t,buttons:this.YESNO,fn:i,scope:r,icon:this.QUESTION}),this},prompt:function(n,t,i,r,u){return this.show({title:n,msg:t,buttons:this.OKCANCEL,fn:i,minWidth:250,scope:r,prompt:!0,multiline:u}),this},OK:{ok:!0},CANCEL:{cancel:!0},OKCANCEL:{ok:!0,cancel:!0},YESNO:{yes:!0,no:!0},YESNOCANCEL:{yes:!0,no:!0,cancel:!0},INFO:"ext-mb-info",WARNING:"ext-mb-warning",QUESTION:"ext-mb-question",ERROR:"ext-mb-error",defaultTextHeight:75,maxWidth:600,minWidth:100,minProgressWidth:250,buttonText:{ok:"OK",cancel:"Cancel",yes:"Yes",no:"No"}}}();Ext.Msg=Ext.MessageBox;Ext.Tip=Ext.extend(Ext.Panel,{minWidth:40,maxWidth:300,shadow:"sides",defaultAlign:"tl-bl?",autoRender:!0,quickShowInterval:250,frame:!0,hidden:!0,baseCls:"x-tip",floating:{shadow:!0,shim:!0,useDisplay:!0,constrain:!1},autoHeight:!0,initComponent:function(){Ext.Tip.superclass.initComponent.call(this);this.closable&&!this.title&&(this.elements+=",header")},afterRender:function(){Ext.Tip.superclass.afterRender.call(this);this.closable&&this.addTool({id:"close",handler:this.hide,scope:this})},showAt:function(n){if(Ext.Tip.superclass.show.call(this),this.measureWidth!==!1&&(!this.initialConfig||typeof this.initialConfig.width!="number")){var t=this.body.getTextWidth();this.title&&(t=Math.max(t,this.header.child("span").getTextWidth(this.title)));t+=this.getFrameWidth()+(this.closable?20:0)+this.body.getPadding("lr");this.setWidth(t.constrain(this.minWidth,this.maxWidth))}this.constrainPosition&&(n=this.el.adjustForConstraints(n));this.setPagePosition(n[0],n[1])},showBy:function(n,t){this.rendered||this.render(Ext.getBody());this.showAt(this.el.getAlignToXY(n,t||this.defaultAlign))},initDraggable:function(){this.dd=new Ext.Tip.DD(this,typeof this.draggable=="boolean"?null:this.draggable);this.header.addClass("x-tip-draggable")}});Ext.Tip.DD=function(n,t){Ext.apply(this,t);this.tip=n;Ext.Tip.DD.superclass.constructor.call(this,n.el.id,"WindowDD-"+n.id);this.setHandleElId(n.header.id);this.scroll=!1};Ext.extend(Ext.Tip.DD,Ext.dd.DD,{moveOnly:!0,scroll:!1,headerOffsets:[100,25],startDrag:function(){this.tip.el.disableShadow()},endDrag:function(){this.tip.el.enableShadow(!0)}});Ext.ToolTip=Ext.extend(Ext.Tip,{showDelay:500,hideDelay:200,dismissDelay:5e3,mouseOffset:[15,18],trackMouse:!1,constrainPosition:!0,initComponent:function(){Ext.ToolTip.superclass.initComponent.call(this);this.lastActive=new Date;this.initTarget()},initTarget:function(){if(this.target){this.target=Ext.get(this.target);this.target.on("mouseover",this.onTargetOver,this);this.target.on("mouseout",this.onTargetOut,this);this.target.on("mousemove",this.onMouseMove,this)}},onMouseMove:function(n){this.targetXY=n.getXY();!this.hidden&&this.trackMouse&&this.setPagePosition(this.getTargetXY())},getTargetXY:function(){return[this.targetXY[0]+this.mouseOffset[0],this.targetXY[1]+this.mouseOffset[1]]},onTargetOver:function(n){this.disabled||n.within(this.target.dom,!0)||(this.clearTimer("hide"),this.targetXY=n.getXY(),this.delayShow())},delayShow:function(){this.hidden&&!this.showTimer?this.lastActive.getElapsed()<this.quickShowInterval?this.show():this.showTimer=this.show.defer(this.showDelay,this):this.hidden||this.autoHide===!1||this.show()},onTargetOut:function(n){this.disabled||n.within(this.target.dom,!0)||(this.clearTimer("show"),this.autoHide!==!1&&this.delayHide())},delayHide:function(){this.hidden||this.hideTimer||(this.hideTimer=this.hide.defer(this.hideDelay,this))},hide:function(){this.clearTimer("dismiss");this.lastActive=new Date;Ext.ToolTip.superclass.hide.call(this)},show:function(){this.showAt(this.getTargetXY())},showAt:function(n){this.lastActive=new Date;this.clearTimers();Ext.ToolTip.superclass.showAt.call(this,n);this.dismissDelay&&this.autoHide!==!1&&(this.dismissTimer=this.hide.defer(this.dismissDelay,this))},clearTimer:function(n){n=n+"Timer";clearTimeout(this[n]);delete this[n]},clearTimers:function(){this.clearTimer("show");this.clearTimer("dismiss");this.clearTimer("hide")},onShow:function(){Ext.ToolTip.superclass.onShow.call(this);Ext.getDoc().on("mousedown",this.onDocMouseDown,this)},onHide:function(){Ext.ToolTip.superclass.onHide.call(this);Ext.getDoc().un("mousedown",this.onDocMouseDown,this)},onDocMouseDown:function(n){this.autoHide===!1||n.within(this.el.dom)||(this.disable(),this.enable.defer(100,this))},onDisable:function(){this.clearTimers();this.hide()},adjustPosition:function(n,t){var i=this.targetXY[1],r=this.getSize().height;return this.constrainPosition&&t<=i&&t+r>=i&&(t=i-r-5),{x:n,y:t}},onDestroy:function(){Ext.ToolTip.superclass.onDestroy.call(this);this.target&&(this.target.un("mouseover",this.onTargetOver,this),this.target.un("mouseout",this.onTargetOut,this),this.target.un("mousemove",this.onMouseMove,this))}});Ext.QuickTip=Ext.extend(Ext.ToolTip,{interceptTitles:!1,tagConfig:{namespace:"ext",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign"},initComponent:function(){this.target=this.target||Ext.getDoc();this.targets=this.targets||{};Ext.QuickTip.superclass.initComponent.call(this)},register:function(n){for(var i,t,r,e,f=n instanceof Array?n:arguments,u=0,o=f.length;u<o;u++)if(i=f[u],t=i.target,t)if(t instanceof Array)for(r=0,e=t.length;r<e;r++)this.targets[Ext.id(t[r])]=i;else this.targets[Ext.id(t)]=i},unregister:function(n){delete this.targets[Ext.id(n)]},onTargetOver:function(n){var t,e;if(!this.disabled&&(this.targetXY=n.getXY(),t=n.getTarget(),t&&t.nodeType===1&&t!=document&&t!=document.body)){if(this.activeTarget&&t==this.activeTarget.el){this.clearTimer("hide");this.show();return}if(t&&this.targets[t.id]){this.activeTarget=this.targets[t.id];this.activeTarget.el=t;this.delayShow();return}var f,r=Ext.fly(t),i=this.tagConfig,u=i.namespace;this.interceptTitles&&t.title?(f=t.title,t.qtip=f,t.removeAttribute("title"),n.preventDefault()):f=t.qtip||r.getAttributeNS(u,i.attribute);f&&(e=r.getAttributeNS(u,i.hide),this.activeTarget={el:t,text:f,width:r.getAttributeNS(u,i.width),autoHide:e!="user"&&e!=="false",title:r.getAttributeNS(u,i.title),cls:r.getAttributeNS(u,i.cls),align:r.getAttributeNS(u,i.align)},this.delayShow())}},onTargetOut:function(){this.clearTimer("show");this.autoHide!==!1&&this.delayHide()},showAt:function(n){var t=this.activeTarget;t&&(this.rendered||(this.render(Ext.getBody()),this.activeTarget=t),t.width?(this.setWidth(t.width),this.body.setWidth(this.adjustBodyWidth(t.width-this.getFrameWidth())),this.measureWidth=!1):this.measureWidth=!0,this.setTitle(t.title||""),this.body.update(t.text),this.autoHide=t.autoHide,this.dismissDelay=t.dismissDelay||this.dismissDelay,this.lastCls&&(this.el.removeClass(this.lastCls),delete this.lastCls),t.cls&&(this.el.addClass(t.cls),this.lastCls=t.cls),t.align?(n=this.el.getAlignToXY(t.el,t.align),this.constrainPosition=!1):this.constrainPosition=!0);Ext.QuickTip.superclass.showAt.call(this,n)},hide:function(){delete this.activeTarget;Ext.QuickTip.superclass.hide.call(this)}});Ext.QuickTips=function(){var n,t=[];return{init:function(){n||(n=new Ext.QuickTip({elements:"header,body"}))},enable:function(){n&&(t.pop(),t.length<1&&n.enable())},disable:function(){n&&n.disable();t.push(1)},isEnabled:function(){return n&&!n.disabled},getQuickTip:function(){return n},register:function(){n.register.apply(n,arguments)},unregister:function(){n.unregister.apply(n,arguments)},tips:function(){n.register.apply(n,arguments)}}}();Ext.tree.TreePanel=Ext.extend(Ext.Panel,{rootVisible:!0,animate:Ext.enableFx,lines:!0,enableDD:!1,hlDrop:Ext.enableFx,pathSeparator:"/",initComponent:function(){if(Ext.tree.TreePanel.superclass.initComponent.call(this),this.eventModel||(this.eventModel=new Ext.tree.TreeEventModel(this)),this.nodeHash={},this.root&&this.setRootNode(this.root),this.addEvents("append","remove","movenode","insert","beforeappend","beforeremove","beforemovenode","beforeinsert","beforeload","load","textchange","beforeexpandnode","beforecollapsenode","expandnode","disabledchange","collapsenode","beforeclick","click","checkchange","dblclick","contextmenu","beforechildrenrendered","startdrag","enddrag","dragdrop","beforenodedrop","nodedrop","nodedragover"),this.singleExpand)this.on("beforeexpandnode",this.restrictExpand,this)},proxyNodeEvent:function(n,t,i,r,u,f,e){return(n=="collapse"||n=="expand"||n=="beforecollapse"||n=="beforeexpand"||n=="move"||n=="beforemove")&&(n=n+"node"),this.fireEvent(n,t,i,r,u,f,e)},getRootNode:function(){return this.root},setRootNode:function(n){if(this.root=n,n.ownerTree=this,n.isRoot=!0,this.registerNode(n),!this.rootVisible){var t=n.attributes.uiProvider;n.ui=t?new t(n):new Ext.tree.RootTreeNodeUI(n)}return n},getNodeById:function(n){return this.nodeHash[n]},registerNode:function(n){this.nodeHash[n.id]=n},unregisterNode:function(n){delete this.nodeHash[n.id]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"},restrictExpand:function(n){var t=n.parentNode;t&&(t.expandedChild&&t.expandedChild.parentNode==t&&t.expandedChild.collapse(),t.expandedChild=n)},getChecked:function(n,t){t=t||this.root;var i=[],r=function(){this.attributes.checked&&i.push(n?n=="id"?this.id:this.attributes[n]:this)};return t.cascade(r),i},getEl:function(){return this.el},getLoader:function(){return this.loader},expandAll:function(){this.root.expand(!0)},collapseAll:function(){this.root.collapse(!0)},getSelectionModel:function(){return this.selModel||(this.selModel=new Ext.tree.DefaultSelectionModel),this.selModel},expandPath:function(n,t,i){var u,r,f,e;if(t=t||"id",u=n.split(this.pathSeparator),r=this.root,r.attributes[t]!=u[1]){i&&i(!1,null);return}f=1;e=function(){if(++f==u.length){i&&i(!0,r);return}var n=r.findChild(t,u[f]);if(!n){i&&i(!1,r);return}r=n;n.expand(!1,!1,e)};r.expand(!1,!1,e)},selectPath:function(n,t,i){var r,u,f;t=t||"id";r=n.split(this.pathSeparator);u=r.pop();r.length>0?(f=function(n,r){if(n&&r){var f=r.findChild(t,u);f?(f.select(),i&&i(!0,f)):i&&i(!1,f)}else i&&i(!1,f)},this.expandPath(r.join(this.pathSeparator),t,f)):(this.root.select(),i&&i(!0,this.root))},getTreeEl:function(){return this.body},onRender:function(n,t){Ext.tree.TreePanel.superclass.onRender.call(this,n,t);this.el.addClass("x-tree");this.innerCt=this.body.createChild({tag:"ul",cls:"x-tree-root-ct "+(this.lines?"x-tree-lines":"x-tree-no-lines")})},initEvents:function(){Ext.tree.TreePanel.superclass.initEvents.call(this);this.containerScroll&&Ext.dd.ScrollManager.register(this.body);(this.enableDD||this.enableDrop)&&!this.dropZone&&(this.dropZone=new Ext.tree.TreeDropZone(this,this.dropConfig||{ddGroup:this.ddGroup||"TreeDD",appendOnly:this.ddAppendOnly===!0}));(this.enableDD||this.enableDrag)&&!this.dragZone&&(this.dragZone=new Ext.tree.TreeDragZone(this,this.dragConfig||{ddGroup:this.ddGroup||"TreeDD",scroll:this.ddScroll}));this.getSelectionModel().init(this)},afterRender:function(){Ext.tree.TreePanel.superclass.afterRender.call(this);this.root.render();this.rootVisible||this.root.renderChildren()},onDestroy:function(){this.rendered&&(this.body.removeAllListeners(),Ext.dd.ScrollManager.unregister(this.body),this.dropZone&&this.dropZone.unreg(),this.dragZone&&this.dragZone.unreg());this.root.destroy();this.nodeHash=null;Ext.tree.TreePanel.superclass.onDestroy.call(this)}});Ext.reg("treepanel",Ext.tree.TreePanel);Ext.tree.TreeEventModel=function(n){this.tree=n;this.tree.on("render",this.initEvents,this)};Ext.tree.TreeEventModel.prototype={initEvents:function(){var n=this.tree.getTreeEl();n.on("click",this.delegateClick,this);n.on("mouseover",this.delegateOver,this);n.on("mouseout",this.delegateOut,this);n.on("dblclick",this.delegateDblClick,this);n.on("contextmenu",this.delegateContextMenu,this)},getNode:function(n){var i,t;return(i=n.getTarget(".x-tree-node-el",10))&&(t=Ext.fly(i,"_treeEvents").getAttributeNS("ext","tree-node-id"),t)?this.tree.getNodeById(t):null},getNodeTarget:function(n){var t=n.getTarget(".x-tree-node-icon",1);return t||(t=n.getTarget(".x-tree-node-el",6)),t},delegateOut:function(n,t){if(this.beforeEvent(n)&&(t=this.getNodeTarget(n),t&&!n.within(t,!0)))this.onNodeOut(n,this.getNode(n))},delegateOver:function(n,t){if(this.beforeEvent(n)&&(t=this.getNodeTarget(n),t))this.onNodeOver(n,this.getNode(n))},delegateClick:function(n){if(this.beforeEvent(n))if(n.getTarget("input[type=checkbox]",1))this.onCheckboxClick(n,this.getNode(n));else if(n.getTarget(".x-tree-ec-icon",1))this.onIconClick(n,this.getNode(n));else if(this.getNodeTarget(n))this.onNodeClick(n,this.getNode(n))},delegateDblClick:function(n){if(this.beforeEvent(n)&&this.getNodeTarget(n))this.onNodeDblClick(n,this.getNode(n))},delegateContextMenu:function(n){if(this.beforeEvent(n)&&this.getNodeTarget(n))this.onNodeContextMenu(n,this.getNode(n))},onNodeClick:function(n,t){t.ui.onClick(n)},onNodeOver:function(n,t){t.ui.onOver(n)},onNodeOut:function(n,t){t.ui.onOut(n)},onIconClick:function(n,t){t.ui.ecClick(n)},onCheckboxClick:function(n,t){t.ui.onCheckChange(n)},onNodeDblClick:function(n,t){t.ui.onDblClick(n)},onNodeContextMenu:function(n,t){t.ui.onContextMenu(n)},beforeEvent:function(n){return this.disabled?(n.stopEvent(),!1):!0},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1}};Ext.tree.DefaultSelectionModel=function(n){this.selNode=null;this.addEvents("selectionchange","beforeselect");Ext.apply(this,n);Ext.tree.DefaultSelectionModel.superclass.constructor.call(this)};Ext.extend(Ext.tree.DefaultSelectionModel,Ext.util.Observable,{init:function(n){this.tree=n;n.getTreeEl().on("keydown",this.onKeyDown,this);n.on("click",this.onNodeClick,this)},onNodeClick:function(n){this.select(n)},select:function(n){var t=this.selNode;if(t!=n&&this.fireEvent("beforeselect",this,n,t)!==!1){if(t)t.ui.onSelectedChange(!1);this.selNode=n;n.ui.onSelectedChange(!0);this.fireEvent("selectionchange",this,n,t)}return n},unselect:function(n){this.selNode==n&&this.clearSelections()},clearSelections:function(){var n=this.selNode;if(n){n.ui.onSelectedChange(!1);this.selNode=null;this.fireEvent("selectionchange",this,null)}return n},getSelectedNode:function(){return this.selNode},isSelected:function(n){return this.selNode==n},selectPrevious:function(){var i=this.selNode||this.lastSelNode,t,n;if(!i)return null;if(t=i.previousSibling,t){if(!t.isExpanded()||t.childNodes.length<1)return this.select(t);for(n=t.lastChild;n&&n.isExpanded()&&n.childNodes.length>0;)n=n.lastChild;return this.select(n)}return i.parentNode&&(this.tree.rootVisible||!i.parentNode.isRoot)?this.select(i.parentNode):null},selectNext:function(){var n=this.selNode||this.lastSelNode,t;return n?n.firstChild&&n.isExpanded()?this.select(n.firstChild):n.nextSibling?this.select(n.nextSibling):n.parentNode?(t=null,n.parentNode.bubble(function(){if(this.nextSibling)return t=this.getOwnerTree().selModel.select(this.nextSibling),!1}),t):null:null},onKeyDown:function(n){var t=this.selNode||this.lastSelNode,r=this,i;if(t){i=n.getKey();switch(i){case n.DOWN:n.stopEvent();this.selectNext();break;case n.UP:n.stopEvent();this.selectPrevious();break;case n.RIGHT:n.preventDefault();t.hasChildNodes()&&(t.isExpanded()?t.firstChild&&this.select(t.firstChild,n):t.expand());break;case n.LEFT:n.preventDefault();t.hasChildNodes()&&t.isExpanded()?t.collapse():t.parentNode&&(this.tree.rootVisible||t.parentNode!=this.tree.getRootNode())&&this.select(t.parentNode,n)}}}});Ext.tree.MultiSelectionModel=function(n){this.selNodes=[];this.selMap={};this.addEvents("selectionchange");Ext.apply(this,n);Ext.tree.MultiSelectionModel.superclass.constructor.call(this)};Ext.extend(Ext.tree.MultiSelectionModel,Ext.util.Observable,{init:function(n){this.tree=n;n.getTreeEl().on("keydown",this.onKeyDown,this);n.on("click",this.onNodeClick,this)},onNodeClick:function(n,t){this.select(n,t,t.ctrlKey)},select:function(n,t,i){if(i!==!0&&this.clearSelections(!0),this.isSelected(n))return this.lastSelNode=n,n;this.selNodes.push(n);this.selMap[n.id]=n;this.lastSelNode=n;n.ui.onSelectedChange(!0);return this.fireEvent("selectionchange",this,this.selNodes),n},unselect:function(n){if(this.selMap[n.id]){n.ui.onSelectedChange(!1);var i=this.selNodes,t=i.indexOf(n);t!=-1&&this.selNodes.splice(t,1);delete this.selMap[n.id];this.fireEvent("selectionchange",this,this.selNodes)}},clearSelections:function(n){var i=this.selNodes,t,r;if(i.length>0){for(t=0,r=i.length;t<r;t++)i[t].ui.onSelectedChange(!1);this.selNodes=[];this.selMap={};n!==!0&&this.fireEvent("selectionchange",this,this.selNodes)}},isSelected:function(n){return this.selMap[n.id]?!0:!1},getSelectedNodes:function(){return this.selNodes},onKeyDown:Ext.tree.DefaultSelectionModel.prototype.onKeyDown,selectNext:Ext.tree.DefaultSelectionModel.prototype.selectNext,selectPrevious:Ext.tree.DefaultSelectionModel.prototype.selectPrevious});Ext.tree.TreeNode=function(n){n=n||{};typeof n=="string"&&(n={text:n});this.childrenRendered=!1;this.rendered=!1;Ext.tree.TreeNode.superclass.constructor.call(this,n);this.expanded=n.expanded===!0;this.isTarget=n.isTarget!==!1;this.draggable=n.draggable!==!1&&n.allowDrag!==!1;this.allowChildren=n.allowChildren!==!1&&n.allowDrop!==!1;this.text=n.text;this.disabled=n.disabled===!0;this.addEvents("textchange","beforeexpand","beforecollapse","expand","disabledchange","collapse","beforeclick","click","checkchange","dblclick","contextmenu","beforechildrenrendered");var t=this.attributes.uiProvider||this.defaultUI||Ext.tree.TreeNodeUI;this.ui=new t(this)};Ext.extend(Ext.tree.TreeNode,Ext.data.Node,{preventHScroll:!0,isExpanded:function(){return this.expanded},getUI:function(){return this.ui},setFirstChild:function(n){var t=this.firstChild;Ext.tree.TreeNode.superclass.setFirstChild.call(this,n);this.childrenRendered&&t&&n!=t&&t.renderIndent(!0,!0);this.rendered&&this.renderIndent(!0,!0)},setLastChild:function(n){var t=this.lastChild;Ext.tree.TreeNode.superclass.setLastChild.call(this,n);this.childrenRendered&&t&&n!=t&&t.renderIndent(!0,!0);this.rendered&&this.renderIndent(!0,!0)},appendChild:function(){var n=Ext.tree.TreeNode.superclass.appendChild.apply(this,arguments);return n&&this.childrenRendered&&n.render(),this.ui.updateExpandIcon(),n},removeChild:function(n){return this.ownerTree.getSelectionModel().unselect(n),Ext.tree.TreeNode.superclass.removeChild.apply(this,arguments),this.childrenRendered&&n.ui.remove(),this.childNodes.length<1?this.collapse(!1,!1):this.ui.updateExpandIcon(),this.firstChild||this.isHiddenRoot()||(this.childrenRendered=!1),n},insertBefore:function(n,t){var i=Ext.tree.TreeNode.superclass.insertBefore.apply(this,arguments);return i&&t&&this.childrenRendered&&n.render(),this.ui.updateExpandIcon(),i},setText:function(n){var t=this.text;if(this.text=n,this.attributes.text=n,this.rendered)this.ui.onTextChange(this,n,t);this.fireEvent("textchange",this,n,t)},select:function(){this.getOwnerTree().getSelectionModel().select(this)},unselect:function(){this.getOwnerTree().getSelectionModel().unselect(this)},isSelected:function(){return this.getOwnerTree().getSelectionModel().isSelected(this)},expand:function(n,t,i){if(this.expanded)typeof i=="function"&&i(this);else{if(this.fireEvent("beforeexpand",this,n,t)===!1)return;if(this.childrenRendered||this.renderChildren(),this.expanded=!0,!this.isHiddenRoot()&&this.getOwnerTree().animate&&t!==!1||t){this.ui.animExpand(function(){this.fireEvent("expand",this);typeof i=="function"&&i(this);n===!0&&this.expandChildNodes(!0)}.createDelegate(this));return}this.ui.expand();this.fireEvent("expand",this);typeof i=="function"&&i(this)}n===!0&&this.expandChildNodes(!0)},isHiddenRoot:function(){return this.isRoot&&!this.getOwnerTree().rootVisible},collapse:function(n,t){var r,i,u;if(this.expanded&&!this.isHiddenRoot()){if(this.fireEvent("beforecollapse",this,n,t)===!1)return;if(this.expanded=!1,this.getOwnerTree().animate&&t!==!1||t){this.ui.animCollapse(function(){this.fireEvent("collapse",this);n===!0&&this.collapseChildNodes(!0)}.createDelegate(this));return}this.ui.collapse();this.fireEvent("collapse",this)}if(n===!0)for(r=this.childNodes,i=0,u=r.length;i<u;i++)r[i].collapse(!0,!1)},delayedExpand:function(n){this.expandProcId||(this.expandProcId=this.expand.defer(n,this))},cancelExpand:function(){this.expandProcId&&clearTimeout(this.expandProcId);this.expandProcId=!1},toggle:function(){this.expanded?this.collapse():this.expand()},ensureVisible:function(n){var t=this.getOwnerTree();t.expandPath(this.parentNode.getPath(),!1,function(){var i=t.getNodeById(this.id);t.getTreeEl().scrollChildIntoView(i.ui.anchor);Ext.callback(n)}.createDelegate(this))},expandChildNodes:function(n){for(var i=this.childNodes,t=0,r=i.length;t<r;t++)i[t].expand(n)},collapseChildNodes:function(n){for(var i=this.childNodes,t=0,r=i.length;t<r;t++)i[t].collapse(n)},disable:function(){if(this.disabled=!0,this.unselect(),this.rendered&&this.ui.onDisableChange)this.ui.onDisableChange(this,!0);this.fireEvent("disabledchange",this,!0)},enable:function(){if(this.disabled=!1,this.rendered&&this.ui.onDisableChange)this.ui.onDisableChange(this,!1);this.fireEvent("disabledchange",this,!1)},renderChildren:function(n){var i,t,r;for(n!==!1&&this.fireEvent("beforechildrenrendered",this),i=this.childNodes,t=0,r=i.length;t<r;t++)i[t].render(!0);this.childrenRendered=!0},sort:function(){var t,n,i;if(Ext.tree.TreeNode.superclass.sort.apply(this,arguments),this.childrenRendered)for(t=this.childNodes,n=0,i=t.length;n<i;n++)t[n].render(!0)},render:function(n){this.ui.render(n);this.rendered||(this.getOwnerTree().registerNode(this),this.rendered=!0,this.expanded&&(this.expanded=!1,this.expand(!1,!1)))},renderIndent:function(n,t){var r,i,u;if(t&&(this.ui.childIndent=null),this.ui.renderIndent(),n===!0&&this.childrenRendered)for(r=this.childNodes,i=0,u=r.length;i<u;i++)r[i].renderIndent(!0,t)},beginUpdate:function(){this.childrenRendered=!1},endUpdate:function(){this.expanded&&this.renderChildren()},destroy:function(){for(var n=0,t=this.childNodes.length;n<t;n++)this.childNodes[n].destroy();this.childNodes=null;this.ui.destroy&&this.ui.destroy()}});Ext.tree.AsyncTreeNode=function(){this.loaded=!1;this.loading=!1;Ext.tree.AsyncTreeNode.superclass.constructor.apply(this,arguments);this.addEvents("beforeload","load")};Ext.extend(Ext.tree.AsyncTreeNode,Ext.tree.TreeNode,{expand:function(n,t,i){var u,f,r;if(this.loading){f=function(){this.loading||(clearInterval(u),this.expand(n,t,i))}.createDelegate(this);u=setInterval(f,200);return}if(!this.loaded){if(this.fireEvent("beforeload",this)===!1)return;if(this.loading=!0,this.ui.beforeLoad(this),r=this.loader||this.attributes.loader||this.getOwnerTree().getLoader(),r){r.load(this,this.loadComplete.createDelegate(this,[n,t,i]));return}}Ext.tree.AsyncTreeNode.superclass.expand.call(this,n,t,i)},isLoading:function(){return this.loading},loadComplete:function(n,t,i){this.loading=!1;this.loaded=!0;this.ui.afterLoad(this);this.fireEvent("load",this);this.expand(n,t,i)},isLoaded:function(){return this.loaded},hasChildNodes:function(){return this.isLeaf()||this.loaded?Ext.tree.AsyncTreeNode.superclass.hasChildNodes.call(this):!0},reload:function(n){for(this.collapse(!1,!1);this.firstChild;)this.removeChild(this.firstChild);this.childrenRendered=!1;this.loaded=!1;this.isHiddenRoot()&&(this.expanded=!1);this.expand(!1,!1,n)}});Ext.tree.TreeNodeUI=function(n){this.node=n;this.rendered=!1;this.animating=!1;this.wasLeaf=!0;this.ecc="x-tree-ec-icon x-tree-elbow";this.emptyIcon=Ext.BLANK_IMAGE_URL};Ext.tree.TreeNodeUI.prototype={removeChild:function(n){this.rendered&&this.ctNode.removeChild(n.ui.getEl())},beforeLoad:function(){this.addClass("x-tree-node-loading")},afterLoad:function(){this.removeClass("x-tree-node-loading")},onTextChange:function(n,t){this.rendered&&(this.textNode.innerHTML=t)},onDisableChange:function(n,t){this.disabled=t;this.checkbox&&(this.checkbox.disabled=t);t?this.addClass("x-tree-node-disabled"):this.removeClass("x-tree-node-disabled")},onSelectedChange:function(n){n?(this.focus(),this.addClass("x-tree-selected")):this.removeClass("x-tree-selected")},onMove:function(n,t,i,r,u,f){var e,o;if(this.childIndent=null,this.rendered){if(e=r.ui.getContainer(),!e){this.holder=document.createElement("div");this.holder.appendChild(this.wrap);return}o=f?f.ui.getEl():null;o?e.insertBefore(this.wrap,o):e.appendChild(this.wrap);this.node.renderIndent(!0)}},addClass:function(n){this.elNode&&Ext.fly(this.elNode).addClass(n)},removeClass:function(n){this.elNode&&Ext.fly(this.elNode).removeClass(n)},remove:function(){this.rendered&&(this.holder=document.createElement("div"),this.holder.appendChild(this.wrap))},fireEvent:function(){return this.node.fireEvent.apply(this.node,arguments)},initEvents:function(){this.node.on("move",this.onMove,this);this.node.disabled&&(this.addClass("x-tree-node-disabled"),this.checkbox&&(this.checkbox.disabled=!0));this.node.hidden&&this.hide();var n=this.node.getOwnerTree(),t=n.enableDD||n.enableDrag||n.enableDrop;t&&(!this.node.isRoot||n.rootVisible)&&Ext.dd.Registry.register(this.elNode,{node:this.node,handles:this.getDDHandles(),isHandle:!1})},getDDHandles:function(){return[this.iconNode,this.textNode,this.elNode]},hide:function(){this.node.hidden=!0;this.wrap&&(this.wrap.style.display="none")},show:function(){this.node.hidden=!1;this.wrap&&(this.wrap.style.display="")},onContextMenu:function(n){(this.node.hasListener("contextmenu")||this.node.getOwnerTree().hasListener("contextmenu"))&&(n.preventDefault(),this.focus(),this.fireEvent("contextmenu",this.node,n))},onClick:function(n){if(this.dropping){n.stopEvent();return}if(this.fireEvent("beforeclick",this.node,n)!==!1){var t=n.getTarget("a");if(!this.disabled&&this.node.attributes.href&&t){this.fireEvent("click",this.node,n);return}if(t&&n.ctrlKey&&n.stopEvent(),n.preventDefault(),this.disabled)return;this.node.attributes.singleClickExpand&&!this.animating&&this.node.hasChildNodes()&&this.node.toggle();this.fireEvent("click",this.node,n)}else n.stopEvent()},onDblClick:function(n){(n.preventDefault(),this.disabled)||(this.checkbox&&this.toggleCheck(),!this.animating&&this.node.hasChildNodes()&&this.node.toggle(),this.fireEvent("dblclick",this.node,n))},onOver:function(){this.addClass("x-tree-node-over")},onOut:function(){this.removeClass("x-tree-node-over")},onCheckChange:function(){var n=this.checkbox.checked;this.node.attributes.checked=n;this.fireEvent("checkchange",this.node,n)},ecClick:function(){!this.animating&&(this.node.hasChildNodes()||this.node.attributes.expandable)&&this.node.toggle()},startDrop:function(){this.dropping=!0},endDrop:function(){setTimeout(function(){this.dropping=!1}.createDelegate(this),50)},expand:function(){this.updateExpandIcon();this.ctNode.style.display=""},focus:function(){if(this.node.preventHScroll){if(!Ext.isIE)try{var n=this.node.getOwnerTree().getTreeEl().dom,t=n.scrollLeft;this.anchor.focus();n.scrollLeft=t}catch(i){}}else try{this.anchor.focus()}catch(i){}},toggleCheck:function(n){var t=this.checkbox;t&&(t.checked=n===undefined?!t.checked:n)},blur:function(){try{this.anchor.blur()}catch(n){}},animExpand:function(n){var t=Ext.get(this.ctNode);if(t.stopFx(),!this.node.hasChildNodes()){this.updateExpandIcon();this.ctNode.style.display="";Ext.callback(n);return}this.animating=!0;this.updateExpandIcon();t.slideIn("t",{callback:function(){this.animating=!1;Ext.callback(n)},scope:this,duration:this.node.ownerTree.duration||.25})},highlight:function(){var n=this.node.getOwnerTree();Ext.fly(this.wrap).highlight(n.hlColor||"C3DAF9",{endColor:n.hlBaseColor})},collapse:function(){this.updateExpandIcon();this.ctNode.style.display="none"},animCollapse:function(n){var t=Ext.get(this.ctNode);t.enableDisplayMode("block");t.stopFx();this.animating=!0;this.updateExpandIcon();t.slideOut("t",{callback:function(){this.animating=!1;Ext.callback(n)},scope:this,duration:this.node.ownerTree.duration||.25})},getContainer:function(){return this.ctNode},getEl:function(){return this.wrap},appendDDGhost:function(n){n.appendChild(this.elNode.cloneNode(!0))},getDDRepairXY:function(){return Ext.lib.Dom.getXY(this.iconNode)},onRender:function(){this.render()},render:function(n){var i=this.node,t=i.attributes,r=i.parentNode?i.parentNode.ui.getContainer():i.ownerTree.innerCt.dom;this.rendered?n===!0&&r.appendChild(this.wrap):(this.rendered=!0,this.renderElements(i,t,r,n),t.qtip?this.textNode.setAttributeNS?(this.textNode.setAttributeNS("ext","qtip",t.qtip),t.qtipTitle&&this.textNode.setAttributeNS("ext","qtitle",t.qtipTitle)):(this.textNode.setAttribute("ext:qtip",t.qtip),t.qtipTitle&&this.textNode.setAttribute("ext:qtitle",t.qtipTitle)):t.qtipCfg&&(t.qtipCfg.target=Ext.id(this.textNode),Ext.QuickTips.register(t.qtipCfg)),this.initEvents(),this.node.expanded||this.updateExpandIcon(!0))},renderElements:function(n,t,i,r){var u,f;this.indentMarkup=n.parentNode?n.parentNode.ui.getChildIndent():"";var e=typeof t.checked=="boolean",h=t.href?t.href:Ext.isGecko?"":"#",o=['<li class="x-tree-node"><div ext:tree-node-id="',n.id,'" class="x-tree-node-el x-tree-node-leaf x-unselectable ',t.cls,'" unselectable="on">','<span class="x-tree-node-indent">',this.indentMarkup,"<\/span>",'<img src="',this.emptyIcon,'" class="x-tree-ec-icon x-tree-elbow" />','<img src="',t.icon||this.emptyIcon,'" class="x-tree-node-icon',t.icon?" x-tree-node-inline-icon":"",t.iconCls?" "+t.iconCls:"",'" unselectable="on" />',e?'<input class="x-tree-node-cb" type="checkbox" '+(t.checked?'checked="checked" />':"/>"):"",'<a hidefocus="on" class="x-tree-node-anchor" href="',h,'" tabIndex="1" ',t.hrefTarget?' target="'+t.hrefTarget+'"':"",'><span unselectable="on">',n.text,"<\/span><\/a><\/div>",'<ul class="x-tree-node-ct" style="display:none;"><\/ul>',"<\/li>"].join(""),s;this.wrap=r!==!0&&n.nextSibling&&(s=n.nextSibling.ui.getEl())?Ext.DomHelper.insertHtml("beforeBegin",s,o):Ext.DomHelper.insertHtml("beforeEnd",i,o);this.elNode=this.wrap.childNodes[0];this.ctNode=this.wrap.childNodes[1];u=this.elNode.childNodes;this.indentNode=u[0];this.ecNode=u[1];this.iconNode=u[2];f=3;e&&(this.checkbox=u[3],f++);this.anchor=u[f];this.textNode=u[f].firstChild},getAnchor:function(){return this.anchor},getTextEl:function(){return this.textNode},getIconEl:function(){return this.iconNode},isChecked:function(){return this.checkbox?this.checkbox.checked:!1},updateExpandIcon:function(){var r;if(this.rendered){var i=this.node,n,t,u=i.isLast()?"x-tree-elbow-end":"x-tree-elbow",f=i.hasChildNodes();f||i.attributes.expandable?(i.expanded?(u+="-minus",n="x-tree-node-collapsed",t="x-tree-node-expanded"):(u+="-plus",n="x-tree-node-expanded",t="x-tree-node-collapsed"),this.wasLeaf&&(this.removeClass("x-tree-node-leaf"),this.wasLeaf=!1),(this.c1!=n||this.c2!=t)&&(Ext.fly(this.elNode).replaceClass(n,t),this.c1=n,this.c2=t)):this.wasLeaf||(Ext.fly(this.elNode).replaceClass("x-tree-node-expanded","x-tree-node-leaf"),delete this.c1,delete this.c2,this.wasLeaf=!0);r="x-tree-ec-icon "+u;this.ecc!=r&&(this.ecNode.className=r,this.ecc=r)}},getChildIndent:function(){if(!this.childIndent){for(var t=[],n=this.node;n;)(!n.isRoot||n.isRoot&&n.ownerTree.rootVisible)&&(n.isLast()?t.unshift('<img src="'+this.emptyIcon+'" class="x-tree-icon" />'):t.unshift('<img src="'+this.emptyIcon+'" class="x-tree-elbow-line" />')),n=n.parentNode;this.childIndent=t.join("")}return this.childIndent},renderIndent:function(){if(this.rendered){var n="",t=this.node.parentNode;t&&(n=t.ui.getChildIndent());this.indentMarkup!=n&&(this.indentNode.innerHTML=n,this.indentMarkup=n);this.updateExpandIcon()}},destroy:function(){this.elNode&&Ext.dd.Registry.unregister(this.elNode.id);delete this.elNode;delete this.ctNode;delete this.indentNode;delete this.ecNode;delete this.iconNode;delete this.checkbox;delete this.anchor;delete this.textNode;Ext.removeNode(this.ctNode)}};Ext.tree.RootTreeNodeUI=Ext.extend(Ext.tree.TreeNodeUI,{render:function(){if(!this.rendered){var n=this.node.ownerTree.innerCt.dom;this.node.expanded=!0;n.innerHTML='<div class="x-tree-root-node"><\/div>';this.wrap=this.ctNode=n.firstChild}},collapse:Ext.emptyFn,expand:Ext.emptyFn});Ext.tree.TreeLoader=function(n){this.baseParams={};this.requestMethod="POST";Ext.apply(this,n);this.addEvents("beforeload","load","loadexception");Ext.tree.TreeLoader.superclass.constructor.call(this)};Ext.extend(Ext.tree.TreeLoader,Ext.util.Observable,{uiProviders:{},clearOnLoad:!0,load:function(n,t){if(this.clearOnLoad)while(n.firstChild)n.removeChild(n.firstChild);this.doPreload(n)?typeof t=="function"&&t():(this.dataUrl||this.url)&&this.requestData(n,t)},doPreload:function(n){var i,t,r,u;if(n.attributes.children){if(n.childNodes.length<1){for(i=n.attributes.children,n.beginUpdate(),t=0,r=i.length;t<r;t++)u=n.appendChild(this.createNode(i[t])),this.preloadChildren&&this.doPreload(u);n.endUpdate()}return!0}return!1},getParams:function(n){var t=[],i=this.baseParams;for(var r in i)typeof i[r]!="function"&&t.push(encodeURIComponent(r),"=",encodeURIComponent(i[r]),"&");return t.push("node=",encodeURIComponent(n.id)),t.join("")},requestData:function(n,t){this.fireEvent("beforeload",this,n,t)!==!1?this.transId=Ext.Ajax.request({method:this.requestMethod,url:this.dataUrl||this.url,success:this.handleResponse,failure:this.handleFailure,scope:this,argument:{callback:t,node:n},params:this.getParams(n)}):typeof t=="function"&&t()},isLoading:function(){return this.transId?!0:!1},abort:function(){this.isLoading()&&Ext.Ajax.abort(this.transId)},createNode:function(n){return this.baseAttrs&&Ext.applyIf(n,this.baseAttrs),this.applyLoader!==!1&&(n.loader=this),typeof n.uiProvider=="string"&&(n.uiProvider=this.uiProviders[n.uiProvider]||eval(n.uiProvider)),n.leaf?new Ext.tree.TreeNode(n):new Ext.tree.AsyncTreeNode(n)},processResponse:function(n,t,i){var o=n.responseText,u,r,e,f;try{for(u=eval("("+o+")"),t.beginUpdate(),r=0,e=u.length;r<e;r++)f=this.createNode(u[r]),f&&t.appendChild(f);t.endUpdate();typeof i=="function"&&i(this,t)}catch(s){this.handleFailure(n)}},handleResponse:function(n){this.transId=!1;var t=n.argument;this.processResponse(n,t.node,t.callback);this.fireEvent("load",this,t.node,n)},handleFailure:function(n){this.transId=!1;var t=n.argument;this.fireEvent("loadexception",this,t.node,n);typeof t.callback=="function"&&t.callback(this,t.node)}});Ext.tree.TreeFilter=function(n,t){this.tree=n;this.filtered={};Ext.apply(this,t)};Ext.tree.TreeFilter.prototype={clearBlank:!1,reverse:!1,autoClear:!1,remove:!1,filter:function(n,t,i){var r,u;if(t=t||"text",typeof n=="string"){if(u=n.length,u==0&&this.clearBlank){this.clear();return}n=n.toLowerCase();r=function(i){return i.attributes[t].substr(0,u).toLowerCase()==n}}else if(n.exec)r=function(i){return n.test(i.attributes[t])};else throw"Illegal filter type, must be string or regex";this.filterBy(r,null,i)},filterBy:function(n,t,i){var f,r;i=i||this.tree.root;this.autoClear&&this.clear();var u=this.filtered,e=this.reverse,o=function(r){if(r==i)return!0;if(u[r.id])return!1;var f=n.call(t||r,r);return!f||e?(u[r.id]=r,r.ui.hide(),!1):!0};if(i.cascade(o),this.remove)for(f in u)typeof f!="function"&&(r=u[f],r&&r.parentNode&&r.parentNode.removeChild(r))},clear:function(){var r=this.tree,i=this.filtered,n,t;for(n in i)typeof n!="function"&&(t=i[n],t&&t.ui.show());this.filtered={}}};Ext.tree.TreeSorter=function(n,t){Ext.apply(this,t);n.on("beforechildrenrendered",this.doSort,this);n.on("append",this.updateSort,this);n.on("insert",this.updateSort,this);n.on("textchange",this.updateSortParent,this);var f=this.dir&&this.dir.toLowerCase()=="desc",i=this.property||"text",r=this.sortType,o=this.folderSort,e=this.caseSensitive===!0,u=this.leafAttr||"leaf";this.sortFn=function(n,t){if(o){if(n.attributes[u]&&!t.attributes[u])return 1;if(!n.attributes[u]&&t.attributes[u])return-1}var s=r?r(n):e?n.attributes[i]:n.attributes[i].toUpperCase(),h=r?r(t):e?t.attributes[i]:t.attributes[i].toUpperCase();return s<h?f?1:-1:s>h?f?-1:1:0}};Ext.tree.TreeSorter.prototype={doSort:function(n){n.sort(this.sortFn)},compareNodes:function(n,t){return n.text.toUpperCase()>t.text.toUpperCase()?1:-1},updateSort:function(n,t){t.childrenRendered&&this.doSort.defer(1,this,[t])},updateSortParent:function(n){var t=n.parentNode;t&&t.childrenRendered&&this.doSort.defer(1,this,[t])}};Ext.dd.DropZone&&(Ext.tree.TreeDropZone=function(n,t){this.allowParentInsert=!1;this.allowContainerDrop=!1;this.appendOnly=!1;Ext.tree.TreeDropZone.superclass.constructor.call(this,n.innerCt,t);this.tree=n;this.dragOverData={};this.lastInsertClass="x-tree-no-status"},Ext.extend(Ext.tree.TreeDropZone,Ext.dd.DropZone,{ddGroup:"TreeDD",expandDelay:1e3,expandNode:function(n){n.hasChildNodes()&&!n.isExpanded()&&n.expand(!1,null,this.triggerCacheRefresh.createDelegate(this))},queueExpand:function(n){this.expandProcId=this.expandNode.defer(this.expandDelay,this,[n])},cancelExpand:function(){this.expandProcId&&(clearTimeout(this.expandProcId),this.expandProcId=!1)},isValidDropPoint:function(n,t,i,r,u){var e,o,f,s;return!n||!u?!1:(e=n.node,o=u.node,!(e&&e.isTarget&&t))?!1:t=="append"&&e.allowChildren===!1?!1:(t=="above"||t=="below")&&e.parentNode&&e.parentNode.allowChildren===!1?!1:o&&(e==o||o.contains(e))?!1:(f=this.dragOverData,f.tree=this.tree,f.target=e,f.data=u,f.point=t,f.source=i,f.rawEvent=r,f.dropNode=o,f.cancel=!1,s=this.tree.fireEvent("nodedragover",f),f.cancel===!1&&s!==!1)},getDropPoint:function(n,t){var i=t.node,o,s;if(i.isRoot)return i.allowChildren!==!1?"append":!1;var h=t.ddel,r=Ext.lib.Dom.getY(h),f=r+h.offsetHeight,u=Ext.lib.Event.getPageY(n),e=i.allowChildren===!1||i.isLeaf();return this.appendOnly||i.parentNode.allowChildren===!1?e?!1:"append":(o=!1,this.allowParentInsert||(o=i.hasChildNodes()&&i.isExpanded()),s=(f-r)/(e?2:3),u>=r&&u<r+s?"above":!o&&(e||u>=f-s&&u<=f)?"below":"append")},onNodeEnter:function(){this.cancelExpand()},onNodeOver:function(n,t,i,r){var u=this.getDropPoint(i,n,t),o=n.node,e,s,f;return this.expandProcId||u!="append"||!o.hasChildNodes()||n.node.isExpanded()?u!="append"&&this.cancelExpand():this.queueExpand(o),e=this.dropNotAllowed,this.isValidDropPoint(n,u,t,i,r)&&u&&(s=n.ddel,u=="above"?(e=n.node.isFirst()?"x-tree-drop-ok-above":"x-tree-drop-ok-between",f="x-tree-drag-insert-above"):u=="below"?(e=n.node.isLast()?"x-tree-drop-ok-below":"x-tree-drop-ok-between",f="x-tree-drag-insert-below"):(e="x-tree-drop-ok-append",f="x-tree-drag-append"),this.lastInsertClass!=f&&(Ext.fly(s).replaceClass(this.lastInsertClass,f),this.lastInsertClass=f)),e},onNodeOut:function(n){this.cancelExpand();this.removeDropIndicators(n)},onNodeDrop:function(n,t,i,r){var e=this.getDropPoint(i,n,t),u=n.node;if(u.ui.startDrop(),!this.isValidDropPoint(n,e,t,i,r))return u.ui.endDrop(),!1;var o=r.node||(t.getTreeNode?t.getTreeNode(r,u,e,i):null),f={tree:this.tree,target:u,data:r,point:e,source:t,rawEvent:i,dropNode:o,cancel:!o},s=this.tree.fireEvent("beforenodedrop",f);return s===!1||f.cancel===!0||!f.dropNode?(u.ui.endDrop(),!1):(u=f.target,e!="append"||u.isExpanded()?this.completeDrop(f):u.expand(!1,null,function(){this.completeDrop(f)}.createDelegate(this)),!0)},completeDrop:function(n){var r=n.dropNode,f=n.point,t=n.target,i,u,e;for(r instanceof Array||(r=[r]),u=0,e=r.length;u<e;u++)i=r[u],f=="above"?t.parentNode.insertBefore(i,t):f=="below"?t.parentNode.insertBefore(i,t.nextSibling):t.appendChild(i);i.ui.focus();this.tree.hlDrop&&i.ui.highlight();t.ui.endDrop();this.tree.fireEvent("nodedrop",n)},afterNodeMoved:function(n,t,i,r,u){this.tree.hlDrop&&(u.ui.focus(),u.ui.highlight());this.tree.fireEvent("nodedrop",this.tree,r,t,n,i)},getTree:function(){return this.tree},removeDropIndicators:function(n){if(n&&n.ddel){var t=n.ddel;Ext.fly(t).removeClass(["x-tree-drag-insert-above","x-tree-drag-insert-below","x-tree-drag-append"]);this.lastInsertClass="_noclass"}},beforeDragDrop:function(){return this.cancelExpand(),!0},afterRepair:function(n){n&&Ext.enableFx&&n.node.ui.highlight();this.hideProxy()}}));Ext.dd.DragZone&&(Ext.tree.TreeDragZone=function(n,t){Ext.tree.TreeDragZone.superclass.constructor.call(this,n.getTreeEl(),t);this.tree=n},Ext.extend(Ext.tree.TreeDragZone,Ext.dd.DragZone,{ddGroup:"TreeDD",onBeforeDrag:function(n){var t=n.node;return t&&t.draggable&&!t.disabled},onInitDrag:function(n){var t=this.dragData;this.tree.getSelectionModel().select(t.node);this.tree.eventModel.disable();this.proxy.update("");t.node.ui.appendDDGhost(this.proxy.ghost.dom);this.tree.fireEvent("startdrag",this.tree,t.node,n)},getRepairXY:function(n,t){return t.node.ui.getDDRepairXY()},onEndDrag:function(n,t){this.tree.eventModel.enable.defer(100,this.tree.eventModel);this.tree.fireEvent("enddrag",this.tree,n.node,t)},onValidDrop:function(n,t){this.tree.fireEvent("dragdrop",this.tree,this.dragData.node,n,t);this.hideProxy()},beforeInvalidDrop:function(){var n=this.tree.getSelectionModel();n.clearSelections();n.select(this.dragData.node)}}));Ext.tree.TreeEditor=function(n,t){t=t||{};var i=t.events?t:new Ext.form.TextField(t);if(Ext.tree.TreeEditor.superclass.constructor.call(this,i),this.tree=n,n.rendered)this.initEditor(n);else n.on("render",this.initEditor,this)};Ext.extend(Ext.tree.TreeEditor,Ext.Editor,{alignment:"l-l",autoSize:!1,hideEl:!1,cls:"x-small-editor x-tree-editor",shim:!1,shadow:"frame",maxWidth:250,editDelay:350,initEditor:function(n){n.on("beforeclick",this.beforeNodeClick,this);this.on("complete",this.updateNode,this);this.on("beforestartedit",this.fitToTree,this);this.on("startedit",this.bindScroll,this,{delay:10});this.on("specialkey",this.onSpecialKey,this)},fitToTree:function(n,t){var i=this.tree.getTreeEl().dom,r=t.dom,u;i.scrollLeft>r.offsetLeft&&(i.scrollLeft=r.offsetLeft);u=Math.min(this.maxWidth,(i.clientWidth>20?i.clientWidth:i.offsetWidth)-Math.max(0,r.offsetLeft-i.scrollLeft)-5);this.setSize(u,"")},triggerEdit:function(n){this.completeEdit();this.editNode=n;this.startEdit(n.ui.textNode,n.text)},bindScroll:function(){this.tree.getTreeEl().on("scroll",this.cancelEdit,this)},beforeNodeClick:function(n,t){var i=this.lastClick?this.lastClick.getElapsed():0;return this.lastClick=new Date,i>this.editDelay&&this.tree.getSelectionModel().isSelected(n)?(t.stopEvent(),this.triggerEdit(n),!1):void 0},updateNode:function(n,t){this.tree.getTreeEl().un("scroll",this.cancelEdit,this);this.editNode.setText(t)},onHide:function(){Ext.tree.TreeEditor.superclass.onHide.call(this);this.editNode&&this.editNode.ui.focus()},onSpecialKey:function(n,t){var i=t.getKey();i==t.ESC?(t.stopEvent(),this.cancelEdit()):i!=t.ENTER||t.hasModifier()||(t.stopEvent(),this.completeEdit())}});Ext.menu.Menu=function(n){n instanceof Array&&(n={items:n});Ext.apply(this,n);this.id=this.id||Ext.id();this.addEvents("beforeshow","beforehide","show","hide","click","mouseover","mouseout","itemclick");Ext.menu.MenuMgr.register(this);Ext.menu.Menu.superclass.constructor.call(this);var t=this.items;this.items=new Ext.util.MixedCollection;t&&this.add.apply(this,t)};Ext.extend(Ext.menu.Menu,Ext.util.Observable,{minWidth:120,shadow:"sides",subMenuAlign:"tl-tr?",defaultAlign:"tl-bl?",allowOtherMenus:!1,hidden:!0,createEl:function(){return new Ext.Layer({cls:"x-menu",shadow:this.shadow,constrain:!1,parentEl:this.parentEl||document.body,zindex:15e3})},render:function(){var t,n;if(!this.el){t=this.el=this.createEl();this.keyNav=new Ext.menu.MenuNav(this);this.plain&&t.addClass("x-menu-plain");this.cls&&t.addClass(this.cls);this.focusEl=t.createChild({tag:"a",cls:"x-menu-focus",href:"#",onclick:"return false;",tabIndex:"-1"});n=t.createChild({tag:"ul",cls:"x-menu-list"});n.on("click",this.onClick,this);n.on("mouseover",this.onMouseOver,this);n.on("mouseout",this.onMouseOut,this);this.items.each(function(t){var i=document.createElement("li");i.className="x-menu-list-item";n.dom.appendChild(i);t.render(i,this)},this);this.ul=n;this.autoWidth()}},autoWidth:function(){var n=this.el,i=this.ul,t,r;n&&(t=this.width,t?n.setWidth(t):Ext.isIE&&(n.setWidth(this.minWidth),r=n.dom.offsetWidth,n.setWidth(i.getWidth()+n.getFrameWidth("lr"))))},delayAutoWidth:function(){this.el&&(this.awTask||(this.awTask=new Ext.util.DelayedTask(this.autoWidth,this)),this.awTask.delay(20))},findTargetItem:function(n){var t=n.getTarget(".x-menu-list-item",this.ul,!0);if(t&&t.menuItemId)return this.items.get(t.menuItemId)},onClick:function(n){var t;if(t=this.findTargetItem(n)){t.onClick(n);this.fireEvent("click",this,t,n)}},setActiveItem:function(n,t){n!=this.activeItem?(this.activeItem&&this.activeItem.deactivate(),this.activeItem=n,n.activate(t)):t&&n.expandMenu()},tryActivate:function(n,t){for(var i,u=this.items,r=n,f=u.length;r>=0&&r<f;r+=t)if(i=u.get(r),!i.disabled&&i.canActivate)return this.setActiveItem(i,!1),i;return!1},onMouseOver:function(n){var t;(t=this.findTargetItem(n))&&t.canActivate&&!t.disabled&&this.setActiveItem(t,!0);this.fireEvent("mouseover",this,n,t)},onMouseOut:function(n){var t;(t=this.findTargetItem(n))&&t==this.activeItem&&t.shouldDeactivate(n)&&(this.activeItem.deactivate(),delete this.activeItem);this.fireEvent("mouseout",this,n,t)},isVisible:function(){return this.el&&!this.hidden},show:function(n,t,i){this.parentMenu=i;this.el||this.render();this.fireEvent("beforeshow",this);this.showAt(this.el.getAlignToXY(n,t||this.defaultAlign),i,!1)},showAt:function(n,t,i){this.parentMenu=t;this.el||this.render();i!==!1&&(this.fireEvent("beforeshow",this),n=this.el.adjustForConstraints(n));this.el.setXY(n);this.el.show();this.hidden=!1;this.focus();this.fireEvent("show",this)},focus:function(){this.hidden||this.doFocus.defer(50,this)},doFocus:function(){this.hidden||this.focusEl.focus()},hide:function(n){this.el&&this.isVisible()&&(this.fireEvent("beforehide",this),this.activeItem&&(this.activeItem.deactivate(),this.activeItem=null),this.el.hide(),this.hidden=!0,this.fireEvent("hide",this));n===!0&&this.parentMenu&&this.parentMenu.hide(!0)},add:function(){for(var n,r=arguments,u=r.length,t,i=0;i<u;i++)n=r[i],n.render?t=this.addItem(n):typeof n=="string"?t=n=="separator"||n=="-"?this.addSeparator():this.addText(n):n.tagName||n.el?t=this.addElement(n):typeof n=="object"&&(Ext.applyIf(n,this.defaults),t=this.addMenuItem(n));return t},getEl:function(){return this.el||this.render(),this.el},addSeparator:function(){return this.addItem(new Ext.menu.Separator)},addElement:function(n){return this.addItem(new Ext.menu.BaseItem(n))},addItem:function(n){if(this.items.add(n),this.ul){var t=document.createElement("li");t.className="x-menu-list-item";this.ul.dom.appendChild(t);n.render(t,this);this.delayAutoWidth()}return n},addMenuItem:function(n){return n instanceof Ext.menu.Item||(n=typeof n.checked=="boolean"?new Ext.menu.CheckItem(n):new Ext.menu.Item(n)),this.addItem(n)},addText:function(n){return this.addItem(new Ext.menu.TextItem(n))},insert:function(n,t){if(this.items.insert(n,t),this.ul){var i=document.createElement("li");i.className="x-menu-list-item";this.ul.dom.insertBefore(i,this.ul.dom.childNodes[n]);t.render(i,this);this.delayAutoWidth()}return t},remove:function(n){this.items.removeKey(n.id);n.destroy()},removeAll:function(){for(var n;n=this.items.first();)this.remove(n)},destroy:function(){this.beforeDestroy();Ext.menu.MenuMgr.unregister(this);this.keyNav&&this.keyNav.disable();this.removeAll();this.ul&&this.ul.removeAllListeners();this.el&&this.el.destroy()},beforeDestroy:Ext.emptyFn});Ext.menu.MenuNav=function(n){Ext.menu.MenuNav.superclass.constructor.call(this,n.el);this.scope=this.menu=n};Ext.extend(Ext.menu.MenuNav,Ext.KeyNav,{doRelay:function(n,t){var i=n.getKey();return!this.menu.activeItem&&n.isNavKeyPress()&&i!=n.SPACE&&i!=n.RETURN?(this.menu.tryActivate(0,1),!1):t.call(this.scope||this,n,this.menu)},up:function(n,t){t.tryActivate(t.items.indexOf(t.activeItem)-1,-1)||t.tryActivate(t.items.length-1,-1)},down:function(n,t){t.tryActivate(t.items.indexOf(t.activeItem)+1,1)||t.tryActivate(0,1)},right:function(n,t){t.activeItem&&t.activeItem.expandMenu(!0)},left:function(n,t){t.hide();t.parentMenu&&t.parentMenu.activeItem&&t.parentMenu.activeItem.activate()},enter:function(n,t){if(t.activeItem){n.stopPropagation();t.activeItem.onClick(n);return t.fireEvent("click",this,t.activeItem),!0}}});Ext.menu.MenuMgr=function(){function a(){i={};t=new Ext.util.MixedCollection;Ext.getDoc().addKeyListener(27,function(){t.length>0&&r()})}function r(){if(t&&t.length>0){var n=t.clone();n.each(function(n){n.hide()})}}function e(n){t.remove(n);t.length<1&&(Ext.getDoc().un("mousedown",c),u=!1)}function o(n){var i=t.last();if(f=new Date,t.add(n),!u){Ext.getDoc().on("mousedown",c);u=!0}n.parentMenu?(n.getEl().setZIndex(parseInt(n.parentMenu.getEl().getStyle("z-index"),10)+3),n.parentMenu.activeChild=n):i&&i.isVisible()&&n.getEl().setZIndex(parseInt(i.getEl().getStyle("z-index"),10)+3)}function s(n){n.activeChild&&n.activeChild.hide();n.autoHideTimer&&(clearTimeout(n.autoHideTimer),delete n.autoHideTimer)}function h(n){var t=n.parentMenu;t||n.allowOtherMenus?t&&t.activeChild&&t.activeChild.hide():r()}function c(n){f.getElapsed()>50&&t.length>0&&!n.getTarget(".x-menu")&&r()}function l(t,i){var u,r,f;if(i)for(u=n[t.group],r=0,f=u.length;r<f;r++)u[r]!=t&&u[r].setChecked(!1)}var i,t,n={},u=!1,f=new Date;return{hideAll:function(){r()},register:function(t){i||a();i[t.id]=t;t.on("beforehide",s);t.on("hide",e);t.on("beforeshow",h);t.on("show",o);var r=t.group;if(r&&t.events.checkchange){n[r]||(n[r]=[]);n[r].push(t);t.on("checkchange",onCheck)}},get:function(n){return typeof n=="string"?i?i[n]:null:n.events?n:typeof n.length=="number"?new Ext.menu.Menu({items:n}):new Ext.menu.Menu(n)},unregister:function(t){delete i[t.id];t.un("beforehide",s);t.un("hide",e);t.un("beforeshow",h);t.un("show",o);var r=t.group;r&&t.events.checkchange&&(n[r].remove(t),t.un("checkchange",onCheck))},registerCheckable:function(t){var i=t.group;if(i){n[i]||(n[i]=[]);n[i].push(t);t.on("beforecheckchange",l)}},unregisterCheckable:function(t){var i=t.group;i&&(n[i].remove(t),t.un("beforecheckchange",l))},getCheckedItem:function(t){var r=n[t],i,u;if(r)for(i=0,u=r.length;i<u;i++)if(r[i].checked)return r[i];return null},setCheckedItem:function(t,i){var u=n[t],r,f;if(u)for(r=0,f=u.length;r<f;r++)u[r].id==i&&u[r].setChecked(!0);return null}}}();Ext.menu.BaseItem=function(n){if(Ext.menu.BaseItem.superclass.constructor.call(this,n),this.addEvents("click","activate","deactivate"),this.handler)this.on("click",this.handler,this.scope)};Ext.extend(Ext.menu.BaseItem,Ext.Component,{canActivate:!1,activeClass:"x-menu-item-active",hideOnClick:!0,hideDelay:100,ctype:"Ext.menu.BaseItem",actionMode:"container",render:function(n,t){this.parentMenu=t;Ext.menu.BaseItem.superclass.render.call(this,n);this.container.menuItemId=this.id},onRender:function(n){this.el=Ext.get(this.el);n.dom.appendChild(this.el.dom)},setHandler:function(n,t){this.handler&&this.un("click",this.handler,this.scope);this.on("click",this.handler=n,this.scope=t)},onClick:function(n){this.disabled||this.fireEvent("click",this,n)===!1||this.parentMenu.fireEvent("itemclick",this,n)===!1?n.stopEvent():this.handleClick(n)},activate:function(){if(this.disabled)return!1;var n=this.container;return n.addClass(this.activeClass),this.region=n.getRegion().adjust(2,2,-2,-2),this.fireEvent("activate",this),!0},deactivate:function(){this.container.removeClass(this.activeClass);this.fireEvent("deactivate",this)},shouldDeactivate:function(n){return!this.region||!this.region.contains(n.getPoint())},handleClick:function(){this.hideOnClick&&this.parentMenu.hide.defer(this.hideDelay,this.parentMenu,[!0])},expandMenu:function(){},hideMenu:function(){}});Ext.menu.TextItem=function(n){this.text=n;Ext.menu.TextItem.superclass.constructor.call(this)};Ext.extend(Ext.menu.TextItem,Ext.menu.BaseItem,{hideOnClick:!1,itemCls:"x-menu-text",onRender:function(){var n=document.createElement("span");n.className=this.itemCls;n.innerHTML=this.text;this.el=n;Ext.menu.TextItem.superclass.onRender.apply(this,arguments)}});Ext.menu.Separator=function(n){Ext.menu.Separator.superclass.constructor.call(this,n)};Ext.extend(Ext.menu.Separator,Ext.menu.BaseItem,{itemCls:"x-menu-sep",hideOnClick:!1,onRender:function(n){var t=document.createElement("span");t.className=this.itemCls;t.innerHTML="&#160;";this.el=t;n.addClass("x-menu-sep-li");Ext.menu.Separator.superclass.onRender.apply(this,arguments)}});Ext.menu.Item=function(n){Ext.menu.Item.superclass.constructor.call(this,n);this.menu&&(this.menu=Ext.menu.MenuMgr.get(this.menu))};Ext.extend(Ext.menu.Item,Ext.menu.BaseItem,{itemCls:"x-menu-item",canActivate:!0,showDelay:200,hideDelay:200,ctype:"Ext.menu.Item",onRender:function(n,t){var i=document.createElement("a");i.hideFocus=!0;i.unselectable="on";i.href=this.href||"#";this.hrefTarget&&(i.target=this.hrefTarget);i.className=this.itemCls+(this.menu?" x-menu-item-arrow":"")+(this.cls?" "+this.cls:"");i.innerHTML=String.format('<img src="{0}" class="x-menu-item-icon {2}" />{1}',this.icon||Ext.BLANK_IMAGE_URL,this.itemText||this.text,this.iconCls||"");this.el=i;Ext.menu.Item.superclass.onRender.call(this,n,t)},setText:function(n){this.text=n;this.rendered&&(this.el.update(String.format('<img src="{0}" class="x-menu-item-icon {2}">{1}',this.icon||Ext.BLANK_IMAGE_URL,this.text,this.iconCls||"")),this.parentMenu.autoWidth())},setIconClass:function(n){var t=this.iconCls;this.iconCls=n;this.rendered&&this.el.child("img.x-menu-item-icon").replaceClass(t,this.iconCls)},handleClick:function(n){this.href||n.stopEvent();Ext.menu.Item.superclass.handleClick.apply(this,arguments)},activate:function(n){return Ext.menu.Item.superclass.activate.apply(this,arguments)&&(this.focus(),n&&this.expandMenu()),!0},shouldDeactivate:function(n){return Ext.menu.Item.superclass.shouldDeactivate.call(this,n)?this.menu&&this.menu.isVisible()?!this.menu.getEl().getRegion().contains(n.getPoint()):!0:!1},deactivate:function(){Ext.menu.Item.superclass.deactivate.apply(this,arguments);this.hideMenu()},expandMenu:function(n){!this.disabled&&this.menu&&(clearTimeout(this.hideTimer),delete this.hideTimer,this.menu.isVisible()||this.showTimer?this.menu.isVisible()&&n&&this.menu.tryActivate(0,1):this.showTimer=this.deferExpand.defer(this.showDelay,this,[n]))},deferExpand:function(n){delete this.showTimer;this.menu.show(this.container,this.parentMenu.subMenuAlign||"tl-tr?",this.parentMenu);n&&this.menu.tryActivate(0,1)},hideMenu:function(){clearTimeout(this.showTimer);delete this.showTimer;!this.hideTimer&&this.menu&&this.menu.isVisible()&&(this.hideTimer=this.deferHide.defer(this.hideDelay,this))},deferHide:function(){delete this.hideTimer;this.menu.hide()}});Ext.menu.CheckItem=function(n){if(Ext.menu.CheckItem.superclass.constructor.call(this,n),this.addEvents("beforecheckchange","checkchange"),this.checkHandler)this.on("checkchange",this.checkHandler,this.scope);Ext.menu.MenuMgr.registerCheckable(this)};Ext.extend(Ext.menu.CheckItem,Ext.menu.Item,{itemCls:"x-menu-item x-menu-check-item",groupClass:"x-menu-group-item",checked:!1,ctype:"Ext.menu.CheckItem",onRender:function(){Ext.menu.CheckItem.superclass.onRender.apply(this,arguments);this.group&&this.el.addClass(this.groupClass);this.checked&&(this.checked=!1,this.setChecked(!0,!0))},destroy:function(){Ext.menu.MenuMgr.unregisterCheckable(this);Ext.menu.CheckItem.superclass.destroy.apply(this,arguments)},setChecked:function(n,t){this.checked!=n&&this.fireEvent("beforecheckchange",this,n)!==!1&&(this.container&&this.container[n?"addClass":"removeClass"]("x-menu-item-checked"),this.checked=n,t!==!0&&this.fireEvent("checkchange",this,n))},handleClick:function(){this.disabled||this.checked&&this.group||this.setChecked(!this.checked);Ext.menu.CheckItem.superclass.handleClick.apply(this,arguments)}});Ext.menu.Adapter=function(n,t){Ext.menu.Adapter.superclass.constructor.call(this,t);this.component=n};Ext.extend(Ext.menu.Adapter,Ext.menu.BaseItem,{canActivate:!0,onRender:function(n){this.component.render(n);this.el=this.component.getEl()},activate:function(){return this.disabled?!1:(this.component.focus(),this.fireEvent("activate",this),!0)},deactivate:function(){this.fireEvent("deactivate",this)},disable:function(){this.component.disable();Ext.menu.Adapter.superclass.disable.call(this)},enable:function(){this.component.enable();Ext.menu.Adapter.superclass.enable.call(this)}});Ext.menu.DateItem=function(n){Ext.menu.DateItem.superclass.constructor.call(this,new Ext.DatePicker(n),n);this.picker=this.component;this.addEvents("select");this.picker.on("render",function(n){n.getEl().swallowEvent("click");n.container.addClass("x-menu-date-item")});this.picker.on("select",this.onSelect,this)};Ext.extend(Ext.menu.DateItem,Ext.menu.Adapter,{onSelect:function(n,t){this.fireEvent("select",this,t,n);Ext.menu.DateItem.superclass.handleClick.call(this)}});Ext.menu.ColorItem=function(n){if(Ext.menu.ColorItem.superclass.constructor.call(this,new Ext.ColorPalette(n),n),this.palette=this.component,this.relayEvents(this.palette,["select"]),this.selectHandler)this.on("select",this.selectHandler,this.scope)};Ext.extend(Ext.menu.ColorItem,Ext.menu.Adapter);Ext.menu.DateMenu=function(n){Ext.menu.DateMenu.superclass.constructor.call(this,n);this.plain=!0;var t=new Ext.menu.DateItem(n);this.add(t);this.picker=t.picker;this.relayEvents(t,["select"]);this.on("beforeshow",function(){this.picker&&this.picker.hideMonthPicker(!0)},this)};Ext.extend(Ext.menu.DateMenu,Ext.menu.Menu,{cls:"x-date-menu",beforeDestroy:function(){this.picker.destroy()}});Ext.menu.ColorMenu=function(n){Ext.menu.ColorMenu.superclass.constructor.call(this,n);this.plain=!0;var t=new Ext.menu.ColorItem(n);this.add(t);this.palette=t.palette;this.relayEvents(t,["select"])};Ext.extend(Ext.menu.ColorMenu,Ext.menu.Menu);Ext.form.Field=Ext.extend(Ext.BoxComponent,{invalidClass:"x-form-invalid",invalidText:"The value in this field is invalid",focusClass:"x-form-focus",validationEvent:"keyup",validateOnBlur:!0,validationDelay:250,defaultAutoCreate:{tag:"input",type:"text",size:"20",autocomplete:"off"},fieldClass:"x-form-field",msgTarget:"qtip",msgFx:"normal",readOnly:!1,disabled:!1,isFormField:!0,hasFocus:!1,initComponent:function(){Ext.form.Field.superclass.initComponent.call(this);this.addEvents("focus","blur","specialkey","change","invalid","valid")},getName:function(){return this.rendered&&this.el.dom.name?this.el.dom.name:this.hiddenName||""},onRender:function(n,t){var i,r;Ext.form.Field.superclass.onRender.call(this,n,t);this.el||(i=this.getAutoCreate(),i.name||(i.name=this.name||this.id),this.inputType&&(i.type=this.inputType),this.el=n.createChild(i,t));r=this.el.dom.type;r&&(r=="password"&&(r="text"),this.el.addClass("x-form-"+r));this.readOnly&&(this.el.dom.readOnly=!0);this.tabIndex!==undefined&&this.el.dom.setAttribute("tabIndex",this.tabIndex);this.el.addClass([this.fieldClass,this.cls]);this.initValue()},initValue:function(){this.value!==undefined?this.setValue(this.value):this.el.dom.value.length>0&&this.setValue(this.el.dom.value)},isDirty:function(){return this.disabled?!1:String(this.getValue())!==String(this.originalValue)},afterRender:function(){Ext.form.Field.superclass.afterRender.call(this);this.initEvents()},fireKey:function(n){n.isSpecialKey()&&this.fireEvent("specialkey",this,n)},reset:function(){this.setValue(this.originalValue);this.clearInvalid()},initEvents:function(){this.el.on(Ext.isIE?"keydown":"keypress",this.fireKey,this);this.el.on("focus",this.onFocus,this);this.el.on("blur",this.onBlur,this);this.originalValue=this.getValue()},onFocus:function(){!Ext.isOpera&&this.focusClass&&this.el.addClass(this.focusClass);this.hasFocus||(this.hasFocus=!0,this.startValue=this.getValue(),this.fireEvent("focus",this))},beforeBlur:Ext.emptyFn,onBlur:function(){this.beforeBlur();!Ext.isOpera&&this.focusClass&&this.el.removeClass(this.focusClass);this.hasFocus=!1;this.validationEvent!==!1&&this.validateOnBlur&&this.validationEvent!="blur"&&this.validate();var n=this.getValue();String(n)!==String(this.startValue)&&this.fireEvent("change",this,n,this.startValue);this.fireEvent("blur",this)},isValid:function(n){var t,i;return this.disabled?!0:(t=this.preventMark,this.preventMark=n===!0,i=this.validateValue(this.processValue(this.getRawValue())),this.preventMark=t,i)},validate:function(){return this.disabled||this.validateValue(this.processValue(this.getRawValue()))?(this.clearInvalid(),!0):!1},processValue:function(n){return n},validateValue:function(){return!0},markInvalid:function(n){var t,i;if(this.rendered&&!this.preventMark){this.el.addClass(this.invalidClass);n=n||this.invalidText;switch(this.msgTarget){case"qtip":this.el.dom.qtip=n;this.el.dom.qclass="x-form-invalid-tip";Ext.QuickTips&&Ext.QuickTips.enable();break;case"title":this.el.dom.title=n;break;case"under":this.errorEl||(t=this.el.findParent(".x-form-element",5,!0),this.errorEl=t.createChild({cls:"x-form-invalid-msg"}),this.errorEl.setWidth(t.getWidth(!0)-20));this.errorEl.update(n);Ext.form.Field.msgFx[this.msgFx].show(this.errorEl,this);break;case"side":this.errorIcon||(t=this.el.findParent(".x-form-element",5,!0),this.errorIcon=t.createChild({cls:"x-form-invalid-icon"}));this.alignErrorIcon();this.errorIcon.dom.qtip=n;this.errorIcon.dom.qclass="x-form-invalid-tip";this.errorIcon.show();this.on("resize",this.alignErrorIcon,this);break;default:i=Ext.getDom(this.msgTarget);i.innerHTML=n;i.style.display=this.msgDisplay}this.fireEvent("invalid",this,n)}},alignErrorIcon:function(){this.errorIcon.alignTo(this.el,"tl-tr",[2,0])},clearInvalid:function(){if(this.rendered&&!this.preventMark){this.el.removeClass(this.invalidClass);switch(this.msgTarget){case"qtip":this.el.dom.qtip="";break;case"title":this.el.dom.title="";break;case"under":this.errorEl&&Ext.form.Field.msgFx[this.msgFx].hide(this.errorEl,this);break;case"side":this.errorIcon&&(this.errorIcon.dom.qtip="",this.errorIcon.hide(),this.un("resize",this.alignErrorIcon,this));break;default:var n=Ext.getDom(this.msgTarget);n.innerHTML="";n.style.display="none"}this.fireEvent("valid",this)}},getRawValue:function(){var n=this.rendered?this.el.getValue():Ext.value(this.value,"");return n===this.emptyText&&(n=""),n},getValue:function(){if(!this.rendered)return this.value;var n=this.el.getValue();return(n===this.emptyText||n===undefined)&&(n=""),n},setRawValue:function(n){return this.el.dom.value=n===null||n===undefined?"":n},setValue:function(n){this.value=n;this.rendered&&(this.el.dom.value=n===null||n===undefined?"":n,this.validate())},adjustSize:function(n,t){var i=Ext.form.Field.superclass.adjustSize.call(this,n,t);return i.width=this.adjustWidth(this.el.dom.tagName,i.width),i},adjustWidth:function(n,t){if(n=n.toLowerCase(),typeof t=="number"&&!Ext.isSafari)if(Ext.isIE&&(n=="input"||n=="textarea")){if(n=="input"&&!Ext.isStrict)return t-3;if(n=="input"&&Ext.isStrict)return t-(Ext.isIE6?4:1);if(n="textarea"&&Ext.isStrict)return t-2}else if(Ext.isOpera&&Ext.isStrict){if(n=="input")return t+2;if(n="textarea")return t-2}return t}});Ext.form.Field.msgFx={normal:{show:function(n){n.setDisplayed("block")},hide:function(n){n.setDisplayed(!1).update("")}},slide:{show:function(n){n.slideIn("t",{stopFx:!0})},hide:function(n){n.slideOut("t",{stopFx:!0,useDisplay:!0})}},slideRight:{show:function(n,t){n.fixDisplay();n.alignTo(t.el,"tl-tr");n.slideIn("l",{stopFx:!0})},hide:function(n){n.slideOut("l",{stopFx:!0,useDisplay:!0})}}};Ext.reg("field",Ext.form.Field);Ext.form.TextField=Ext.extend(Ext.form.Field,{grow:!1,growMin:30,growMax:800,vtype:null,maskRe:null,disableKeyFilter:!1,allowBlank:!0,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",selectOnFocus:!1,blankText:"This field is required",validator:null,regex:null,regexText:"",emptyText:null,emptyClass:"x-form-empty-field",initComponent:function(){Ext.form.TextField.superclass.initComponent.call(this);this.addEvents("autosize")},initEvents:function(){if(Ext.form.TextField.superclass.initEvents.call(this),this.validationEvent=="keyup"){this.validationTask=new Ext.util.DelayedTask(this.validate,this);this.el.on("keyup",this.filterValidation,this)}else if(this.validationEvent!==!1)this.el.on(this.validationEvent,this.validate,this,{buffer:this.validationDelay});if(this.selectOnFocus||this.emptyText){this.on("focus",this.preFocus,this);if(this.emptyText){this.on("blur",this.postBlur,this);this.applyEmptyText()}}if(this.maskRe||this.vtype&&this.disableKeyFilter!==!0&&(this.maskRe=Ext.form.VTypes[this.vtype+"Mask"]))this.el.on("keypress",this.filterKeys,this);if(this.grow){this.el.on("keyup",this.onKeyUp,this,{buffer:50});this.el.on("click",this.autoSize,this)}},processValue:function(n){if(this.stripCharsRe){var t=n.replace(this.stripCharsRe,"");if(t!==n)return this.setRawValue(t),t}return n},filterValidation:function(n){n.isNavKeyPress()||this.validationTask.delay(this.validationDelay)},onKeyUp:function(n){n.isNavKeyPress()||this.autoSize()},reset:function(){Ext.form.TextField.superclass.reset.call(this);this.applyEmptyText()},applyEmptyText:function(){this.rendered&&this.emptyText&&this.getRawValue().length<1&&(this.setRawValue(this.emptyText),this.el.addClass(this.emptyClass))},preFocus:function(){this.emptyText&&(this.el.dom.value==this.emptyText&&this.setRawValue(""),this.el.removeClass(this.emptyClass));this.selectOnFocus&&this.el.dom.select()},postBlur:function(){this.applyEmptyText()},filterKeys:function(n){var i=n.getKey(),r,t;(Ext.isIE||!n.isNavKeyPress()&&i!=n.BACKSPACE&&(i!=n.DELETE||n.button!=-1))&&((r=n.getCharCode(),t=String.fromCharCode(r),Ext.isIE&&(n.isSpecialKey()||!t))||this.maskRe.test(t)||n.stopEvent())},setValue:function(n){this.emptyText&&this.el&&n!==undefined&&n!==null&&n!==""&&this.el.removeClass(this.emptyClass);Ext.form.TextField.superclass.setValue.apply(this,arguments);this.applyEmptyText();this.autoSize()},validateValue:function(n){var t,i;return n.length<1||n===this.emptyText?this.allowBlank?(this.clearInvalid(),!0):(this.markInvalid(this.blankText),!1):n.length<this.minLength?(this.markInvalid(String.format(this.minLengthText,this.minLength)),!1):n.length>this.maxLength?(this.markInvalid(String.format(this.maxLengthText,this.maxLength)),!1):this.vtype&&(t=Ext.form.VTypes,!t[this.vtype](n,this))?(this.markInvalid(this.vtypeText||t[this.vtype+"Text"]),!1):typeof this.validator=="function"&&(i=this.validator(n),i!==!0)?(this.markInvalid(i),!1):this.regex&&!this.regex.test(n)?(this.markInvalid(this.regexText),!1):!0},selectText:function(n,t){var u=this.getRawValue(),i,r;u.length>0&&(n=n===undefined?0:n,t=t===undefined?u.length:t,i=this.el.dom,i.setSelectionRange?i.setSelectionRange(n,t):i.createTextRange&&(r=i.createTextRange(),r.moveStart("character",n),r.moveEnd("character",t-u.length),r.select()))},autoSize:function(){var i;if(this.grow&&this.rendered){this.metrics||(this.metrics=Ext.util.TextMetrics.createInstance(this.el));var r=this.el,n=r.dom.value,t=document.createElement("div");t.appendChild(document.createTextNode(n));n=t.innerHTML;t=null;n+="&#160;";i=Math.min(this.growMax,Math.max(this.metrics.getWidth(n)+10,this.growMin));this.el.setWidth(i);this.fireEvent("autosize",this,i)}}});Ext.reg("textfield",Ext.form.TextField);Ext.form.TriggerField=Ext.extend(Ext.form.TextField,{defaultAutoCreate:{tag:"input",type:"text",size:"16",autocomplete:"off"},hideTrigger:!1,autoSize:Ext.emptyFn,monitorTab:!0,deferHeight:!0,mimicing:!1,onResize:function(n,t){Ext.form.TriggerField.superclass.onResize.call(this,n,t);typeof n=="number"&&this.el.setWidth(this.adjustWidth("input",n-this.trigger.getWidth()));this.wrap.setWidth(this.el.getWidth()+this.trigger.getWidth())},adjustSize:Ext.BoxComponent.prototype.adjustSize,getResizeEl:function(){return this.wrap},getPositionEl:function(){return this.wrap},alignErrorIcon:function(){this.errorIcon.alignTo(this.wrap,"tl-tr",[2,0])},onRender:function(n,t){Ext.form.TriggerField.superclass.onRender.call(this,n,t);this.wrap=this.el.wrap({cls:"x-form-field-wrap"});this.trigger=this.wrap.createChild(this.triggerConfig||{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-form-trigger "+this.triggerClass});this.hideTrigger&&this.trigger.setDisplayed(!1);this.initTrigger();this.width||this.wrap.setWidth(this.el.getWidth()+this.trigger.getWidth())},initTrigger:function(){this.trigger.on("click",this.onTriggerClick,this,{preventDefault:!0});this.trigger.addClassOnOver("x-form-trigger-over");this.trigger.addClassOnClick("x-form-trigger-click")},onDestroy:function(){this.trigger&&(this.trigger.removeAllListeners(),this.trigger.remove());this.wrap&&this.wrap.remove();Ext.form.TriggerField.superclass.onDestroy.call(this)},onFocus:function(){if(Ext.form.TriggerField.superclass.onFocus.call(this),!this.mimicing){this.wrap.addClass("x-trigger-wrap-focus");this.mimicing=!0;Ext.get(Ext.isIE?document.body:document).on("mousedown",this.mimicBlur,this,{delay:10});if(this.monitorTab)this.el.on("keydown",this.checkTab,this)}},checkTab:function(n){n.getKey()==n.TAB&&this.triggerBlur()},onBlur:function(){},mimicBlur:function(n){!this.wrap.contains(n.target)&&this.validateBlur(n)&&this.triggerBlur()},triggerBlur:function(){this.mimicing=!1;Ext.get(Ext.isIE?document.body:document).un("mousedown",this.mimicBlur);this.monitorTab&&this.el.un("keydown",this.checkTab,this);this.beforeBlur();this.wrap.removeClass("x-trigger-wrap-focus");Ext.form.TriggerField.superclass.onBlur.call(this)},beforeBlur:Ext.emptyFn,validateBlur:function(){return!0},onDisable:function(){Ext.form.TriggerField.superclass.onDisable.call(this);this.wrap&&this.wrap.addClass("x-item-disabled")},onEnable:function(){Ext.form.TriggerField.superclass.onEnable.call(this);this.wrap&&this.wrap.removeClass("x-item-disabled")},onShow:function(){this.wrap&&(this.wrap.dom.style.display="",this.wrap.dom.style.visibility="visible")},onHide:function(){this.wrap.dom.style.display="none"},onTriggerClick:Ext.emptyFn});Ext.form.TwinTriggerField=Ext.extend(Ext.form.TriggerField,{initComponent:function(){Ext.form.TwinTriggerField.superclass.initComponent.call(this);this.triggerConfig={tag:"span",cls:"x-form-twin-triggers",cn:[{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-form-trigger "+this.trigger1Class},{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-form-trigger "+this.trigger2Class}]}},getTrigger:function(n){return this.triggers[n]},initTrigger:function(){var t=this.trigger.select(".x-form-trigger",!0),n;this.wrap.setStyle("overflow","hidden");n=this;t.each(function(t,i,r){t.hide=function(){var t=n.wrap.getWidth();this.dom.style.display="none";n.el.setWidth(t-n.trigger.getWidth())};t.show=function(){var t=n.wrap.getWidth();this.dom.style.display="";n.el.setWidth(t-n.trigger.getWidth())};var u="Trigger"+(r+1);this["hide"+u]&&(t.dom.style.display="none");t.on("click",this["on"+u+"Click"],this,{preventDefault:!0});t.addClassOnOver("x-form-trigger-over");t.addClassOnClick("x-form-trigger-click")},this);this.triggers=t.elements},onTrigger1Click:Ext.emptyFn,onTrigger2Click:Ext.emptyFn});Ext.reg("trigger",Ext.form.TriggerField);Ext.form.TextArea=Ext.extend(Ext.form.TextField,{growMin:60,growMax:1e3,growAppend:"&#160;\n&#160;",growPad:0,enterIsSpecial:!1,preventScrollbars:!1,onRender:function(n,t){this.el||(this.defaultAutoCreate={tag:"textarea",style:"width:100px;height:60px;",autocomplete:"off"});Ext.form.TextArea.superclass.onRender.call(this,n,t);this.grow&&(this.textSizeEl=Ext.DomHelper.append(document.body,{tag:"pre",cls:"x-form-grow-sizer"}),this.preventScrollbars&&this.el.setStyle("overflow","hidden"),this.el.setHeight(this.growMin))},onDestroy:function(){this.textSizeEl&&Ext.removeNode(this.textSizeEl);Ext.form.TextArea.superclass.onDestroy.call(this)},fireKey:function(n){n.isSpecialKey()&&(this.enterIsSpecial||n.getKey()!=n.ENTER||n.hasModifier())&&this.fireEvent("specialkey",this,n)},onKeyUp:function(n){n.isNavKeyPress()&&n.getKey()!=n.ENTER||this.autoSize()},autoSize:function(){var i;if(this.grow&&this.textSizeEl){var r=this.el,n=r.dom.value,t=this.textSizeEl;t.innerHTML="";t.appendChild(document.createTextNode(n));n=t.innerHTML;Ext.fly(t).setWidth(this.el.getWidth());n.length<1?n="&#160;&#160;":(Ext.isIE&&(n=n.replace(/\n/g,"<p>&#160;<\/p>")),n+=this.growAppend);t.innerHTML=n;i=Math.min(this.growMax,Math.max(t.offsetHeight,this.growMin)+this.growPad);i!=this.lastHeight&&(this.lastHeight=i,this.el.setHeight(i),this.fireEvent("autosize",this,i))}}});Ext.reg("textarea",Ext.form.TextArea);Ext.form.NumberField=Ext.extend(Ext.form.TextField,{fieldClass:"x-form-field x-form-num-field",allowDecimals:!0,decimalSeparator:".",decimalPrecision:2,allowNegative:!0,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",baseChars:"0123456789",initEvents:function(){var n,t;Ext.form.NumberField.superclass.initEvents.call(this);n=this.baseChars+"";this.allowDecimals&&(n+=this.decimalSeparator);this.allowNegative&&(n+="-");this.stripCharsRe=new RegExp("[^"+n+"]","gi");t=function(t){var i=t.getKey(),r;(Ext.isIE||!t.isSpecialKey()&&i!=t.BACKSPACE&&i!=t.DELETE)&&(r=t.getCharCode(),n.indexOf(String.fromCharCode(r))===-1&&t.stopEvent())};this.el.on("keypress",t,this)},validateValue:function(n){if(!Ext.form.NumberField.superclass.validateValue.call(this,n))return!1;if(n.length<1)return!0;if(n=String(n).replace(this.decimalSeparator,"."),isNaN(n))return this.markInvalid(String.format(this.nanText,n)),!1;var t=this.parseValue(n);return t<this.minValue?(this.markInvalid(String.format(this.minText,this.minValue)),!1):t>this.maxValue?(this.markInvalid(String.format(this.maxText,this.maxValue)),!1):!0},getValue:function(){return this.fixPrecision(this.parseValue(Ext.form.NumberField.superclass.getValue.call(this)))},setValue:function(n){n=parseFloat(n);n=isNaN(n)?"":String(n).replace(".",this.decimalSeparator);Ext.form.NumberField.superclass.setValue.call(this,n)},parseValue:function(n){return n=parseFloat(String(n).replace(this.decimalSeparator,".")),isNaN(n)?"":n},fixPrecision:function(n){var t=isNaN(n);return!this.allowDecimals||this.decimalPrecision==-1||t||!n?t?"":n:parseFloat(parseFloat(n).toFixed(this.decimalPrecision))},beforeBlur:function(){var n=this.parseValue(this.getRawValue());n&&this.setValue(this.fixPrecision(n))}});Ext.reg("numberfield",Ext.form.NumberField);Ext.form.DateField=Ext.extend(Ext.form.TriggerField,{format:"m/d/y",altFormats:"m/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d",disabledDays:null,disabledDaysText:"Disabled",disabledDates:null,disabledDatesText:"Disabled",minValue:null,maxValue:null,minText:"The date in this field must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",triggerClass:"x-form-date-trigger",defaultAutoCreate:{tag:"input",type:"text",size:"10",autocomplete:"off"},initComponent:function(){var t,i,n;if(Ext.form.DateField.superclass.initComponent.call(this),typeof this.minValue=="string"&&(this.minValue=this.parseDate(this.minValue)),typeof this.maxValue=="string"&&(this.maxValue=this.parseDate(this.maxValue)),this.ddMatch=null,this.disabledDates){for(t=this.disabledDates,i="(?:",n=0;n<t.length;n++)i+=t[n],n!=t.length-1&&(i+="|");this.ddMatch=new RegExp(i+")")}},validateValue:function(n){var u,i,f,t,r;if(n=this.formatDate(n),!Ext.form.DateField.superclass.validateValue.call(this,n))return!1;if(n.length<1)return!0;if(u=n,n=this.parseDate(n),!n)return this.markInvalid(String.format(this.invalidText,u,this.format)),!1;if(i=n.getTime(),this.minValue&&i<this.minValue.getTime())return this.markInvalid(String.format(this.minText,this.formatDate(this.minValue))),!1;if(this.maxValue&&i>this.maxValue.getTime())return this.markInvalid(String.format(this.maxText,this.formatDate(this.maxValue))),!1;if(this.disabledDays)for(f=n.getDay(),t=0;t<this.disabledDays.length;t++)if(f===this.disabledDays[t])return this.markInvalid(this.disabledDaysText),!1;return(r=this.formatDate(n),this.ddMatch&&this.ddMatch.test(r))?(this.markInvalid(String.format(this.disabledDatesText,r)),!1):!0},validateBlur:function(){return!this.menu||!this.menu.isVisible()},getValue:function(){return this.parseDate(Ext.form.DateField.superclass.getValue.call(this))||""},setValue:function(n){Ext.form.DateField.superclass.setValue.call(this,this.formatDate(this.parseDate(n)))},parseDate:function(n){var t,i,r;if(!n||n instanceof Date)return n;if(t=Date.parseDate(n,this.format),!t&&this.altFormats)for(this.altFormatsArray||(this.altFormatsArray=this.altFormats.split("|")),i=0,r=this.altFormatsArray.length;i<r&&!t;i++)t=Date.parseDate(n,this.altFormatsArray[i]);return t},onDestroy:function(){this.menu&&this.menu.destroy();this.wrap&&this.wrap.remove();Ext.form.DateField.superclass.onDestroy.call(this)},formatDate:function(n){return!n||!(n instanceof Date)?n:n.dateFormat(this.format)},menuListeners:{select:function(n,t){this.setValue(t)},show:function(){this.onFocus()},hide:function(){this.focus.defer(10,this);var n=this.menuListeners;this.menu.un("select",n.select,this);this.menu.un("show",n.show,this);this.menu.un("hide",n.hide,this)}},onTriggerClick:function(){if(!this.disabled){this.menu==null&&(this.menu=new Ext.menu.DateMenu);Ext.apply(this.menu.picker,{minDate:this.minValue,maxDate:this.maxValue,disabledDatesRE:this.ddMatch,disabledDatesText:this.disabledDatesText,disabledDays:this.disabledDays,disabledDaysText:this.disabledDaysText,format:this.format,minText:String.format(this.minText,this.formatDate(this.minValue)),maxText:String.format(this.maxText,this.formatDate(this.maxValue))});this.menu.on(Ext.apply({},this.menuListeners,{scope:this}));this.menu.picker.setValue(this.getValue()||new Date);this.menu.show(this.el,"tl-bl?")}},beforeBlur:function(){var n=this.parseDate(this.getRawValue());n&&this.setValue(n)}});Ext.reg("datefield",Ext.form.DateField);Ext.form.ComboBox=Ext.extend(Ext.form.TriggerField,{defaultAutoCreate:{tag:"input",type:"text",size:"24",autocomplete:"off"},listClass:"",selectedClass:"x-combo-selected",triggerClass:"x-form-arrow-trigger",shadow:"sides",listAlign:"tl-bl?",maxHeight:300,triggerAction:"query",minChars:4,typeAhead:!1,queryDelay:500,pageSize:0,selectOnFocus:!1,queryParam:"query",loadingText:"Loading...",resizable:!1,handleHeight:8,editable:!0,allQuery:"",mode:"remote",minListWidth:70,forceSelection:!1,typeAheadDelay:250,lazyInit:!0,initComponent:function(){var n,r,u,i,e,t,f;if(Ext.form.ComboBox.superclass.initComponent.call(this),this.addEvents("expand","collapse","beforeselect","select","beforequery"),this.transform){if(this.allowDomMove=!1,n=Ext.getDom(this.transform),this.hiddenName||(this.hiddenName=n.name),!this.store){for(this.mode="local",r=[],u=n.options,i=0,e=u.length;i<e;i++)t=u[i],f=(Ext.isIE?t.getAttributeNode("value").specified:t.hasAttribute("value"))?t.value:t.text,t.selected&&(this.value=f),r.push([f,t.text]);this.store=new Ext.data.SimpleStore({id:0,fields:["value","text"],data:r});this.valueField="value";this.displayField="text"}n.name=Ext.id();this.lazyRender?Ext.removeNode(n):(this.target=!0,this.el=Ext.DomHelper.insertBefore(n,this.autoCreate||this.defaultAutoCreate),Ext.removeNode(n),this.render(this.el.parentNode))}this.selectedIndex=-1;this.mode=="local"&&(this.initialConfig.queryDelay===undefined&&(this.queryDelay=10),this.initialConfig.minChars===undefined&&(this.minChars=0))},onRender:function(n,t){if(Ext.form.ComboBox.superclass.onRender.call(this,n,t),this.hiddenName&&(this.hiddenField=this.el.insertSibling({tag:"input",type:"hidden",name:this.hiddenName,id:this.hiddenId||this.hiddenName},"before",!0),this.hiddenField.value=this.hiddenValue!==undefined?this.hiddenValue:this.value!==undefined?this.value:"",this.el.dom.removeAttribute("name")),Ext.isGecko&&this.el.dom.setAttribute("autocomplete","off"),this.lazyInit)this.on("focus",this.initList,this,{single:!0});else this.initList();this.editable||(this.editable=!0,this.setEditable(!1))},initList:function(){var n,t;if(!this.list){n="x-combo-list";this.list=new Ext.Layer({shadow:this.shadow,cls:[n,this.listClass].join(" "),constrain:!1});t=this.listWidth||Math.max(this.wrap.getWidth(),this.minListWidth);this.list.setWidth(t);this.list.swallowEvent("mousewheel");this.assetHeight=0;this.title&&(this.header=this.list.createChild({cls:n+"-hd",html:this.title}),this.assetHeight+=this.header.getHeight());this.innerList=this.list.createChild({cls:n+"-inner"});this.innerList.on("mouseover",this.onViewOver,this);this.innerList.on("mousemove",this.onViewMove,this);this.innerList.setWidth(t-this.list.getFrameWidth("lr"));this.pageSize&&(this.footer=this.list.createChild({cls:n+"-ft"}),this.pageTb=new Ext.PagingToolbar({store:this.store,pageSize:this.pageSize,renderTo:this.footer}),this.assetHeight+=this.footer.getHeight());this.tpl||(this.tpl='<tpl for="."><div class="'+n+'-item">{'+this.displayField+"}<\/div><\/tpl>");this.view=new Ext.DataView({applyTo:this.innerList,tpl:this.tpl,singleSelect:!0,selectedClass:this.selectedClass,itemSelector:this.itemSelector||"."+n+"-item"});this.view.on("click",this.onViewClick,this);if(this.bindStore(this.store,!0),this.resizable){this.resizer=new Ext.Resizable(this.list,{pinned:!0,handles:"se"});this.resizer.on("resize",function(n,t,i){this.maxHeight=i-this.handleHeight-this.list.getFrameWidth("tb")-this.assetHeight;this.listWidth=t;this.innerList.setWidth(t-this.list.getFrameWidth("lr"));this.restrictHeight()},this);this[this.pageSize?"footer":"innerList"].setStyle("margin-bottom",this.handleHeight+"px")}}},bindStore:function(n,t){if(this.store&&!t&&(this.store.un("beforeload",this.onBeforeLoad,this),this.store.un("load",this.onLoad,this),this.store.un("loadexception",this.collapse,this),n||(this.store=null,this.view&&this.view.setStore(null))),n){this.store=Ext.StoreMgr.lookup(n);this.store.on("beforeload",this.onBeforeLoad,this);this.store.on("load",this.onLoad,this);this.store.on("loadexception",this.collapse,this);this.view&&this.view.setStore(n)}},initEvents:function(){if(Ext.form.ComboBox.superclass.initEvents.call(this),this.keyNav=new Ext.KeyNav(this.el,{up:function(){this.inKeyMode=!0;this.selectPrev()},down:function(){this.isExpanded()?(this.inKeyMode=!0,this.selectNext()):this.onTriggerClick()},enter:function(){this.onViewClick();this.delayedCheck=!0;this.unsetDelayCheck.defer(10,this)},esc:function(){this.collapse()},tab:function(){this.onViewClick(!1);return!0},scope:this,doRelay:function(n,t,i){return i=="down"||this.scope.isExpanded()?Ext.KeyNav.prototype.doRelay.apply(this,arguments):!0},forceKeyDown:!0}),this.queryDelay=Math.max(this.queryDelay||10,this.mode=="local"?10:250),this.dqTask=new Ext.util.DelayedTask(this.initQuery,this),this.typeAhead&&(this.taTask=new Ext.util.DelayedTask(this.onTypeAhead,this)),this.editable!==!1)this.el.on("keyup",this.onKeyUp,this);if(this.forceSelection)this.on("blur",this.doForce,this)},onDestroy:function(){this.view&&(this.view.el.removeAllListeners(),this.view.el.remove(),this.view.purgeListeners());this.list&&this.list.destroy();this.bindStore(null);Ext.form.ComboBox.superclass.onDestroy.call(this)},unsetDelayCheck:function(){delete this.delayedCheck},fireKey:function(n){!n.isNavKeyPress()||this.isExpanded()||this.delayedCheck||this.fireEvent("specialkey",this,n)},onResize:function(n){if(Ext.form.ComboBox.superclass.onResize.apply(this,arguments),this.list&&this.listWidth===undefined){var t=Math.max(n,this.minListWidth);this.list.setWidth(t);this.innerList.setWidth(t-this.list.getFrameWidth("lr"))}},onEnable:function(){Ext.form.ComboBox.superclass.onEnable.apply(this,arguments);this.hiddenField&&(this.hiddenField.disabled=!1)},onDisable:function(){Ext.form.ComboBox.superclass.onDisable.apply(this,arguments);this.hiddenField&&(this.hiddenField.disabled=!0)},setEditable:function(n){if(n!=this.editable)if(this.editable=n,n)this.el.dom.setAttribute("readOnly",!1),this.el.un("mousedown",this.onTriggerClick,this),this.el.removeClass("x-combo-noedit");else{this.el.dom.setAttribute("readOnly",!0);this.el.on("mousedown",this.onTriggerClick,this);this.el.addClass("x-combo-noedit")}},onBeforeLoad:function(){this.hasFocus&&(this.innerList.update(this.loadingText?'<div class="loading-indicator">'+this.loadingText+"<\/div>":""),this.restrictHeight(),this.selectedIndex=-1)},onLoad:function(){this.hasFocus&&(this.store.getCount()>0?(this.expand(),this.restrictHeight(),this.lastQuery==this.allQuery?(this.editable&&this.el.dom.select(),this.selectByValue(this.value,!0)||this.select(0,!0)):(this.selectNext(),this.typeAhead&&this.lastKey!=Ext.EventObject.BACKSPACE&&this.lastKey!=Ext.EventObject.DELETE&&this.taTask.delay(this.typeAheadDelay))):this.onEmptyResults())},onTypeAhead:function(){if(this.store.getCount()>0){var i=this.store.getAt(0),n=i.data[this.displayField],r=n.length,t=this.getRawValue().length;t!=r&&(this.setRawValue(n),this.selectText(t,n.length))}},onSelect:function(n,t){this.fireEvent("beforeselect",this,n,t)!==!1&&(this.setValue(n.data[this.valueField||this.displayField]),this.collapse(),this.fireEvent("select",this,n,t))},getValue:function(){return this.valueField?typeof this.value!="undefined"?this.value:"":Ext.form.ComboBox.superclass.getValue.call(this)},clearValue:function(){this.hiddenField&&(this.hiddenField.value="");this.setRawValue("");this.lastSelectionText="";this.applyEmptyText();this.value=""},setValue:function(n){var t=n,i;this.valueField&&(i=this.findRecord(this.valueField,n),i?t=i.data[this.displayField]:this.valueNotFoundText!==undefined&&(t=this.valueNotFoundText));this.lastSelectionText=t;this.hiddenField&&(this.hiddenField.value=n);Ext.form.ComboBox.superclass.setValue.call(this,t);this.value=n},findRecord:function(n,t){var i;return this.store.getCount()>0&&this.store.each(function(r){if(r.data[n]==t)return i=r,!1}),i},onViewMove:function(){this.inKeyMode=!1},onViewOver:function(n,t){var i,r;this.inKeyMode||(i=this.view.findItemFromChild(t),i&&(r=this.view.indexOf(i),this.select(r,!1)))},onViewClick:function(n){var t=this.view.getSelectedIndexes()[0],i=this.store.getAt(t);if(i)this.onSelect(i,t);n!==!1&&this.el.focus()},restrictHeight:function(){this.innerList.dom.style.height="";var n=this.innerList.dom,t=this.list.getFrameWidth("tb"),i=Math.max(n.clientHeight,n.offsetHeight,n.scrollHeight);this.innerList.setHeight(i<this.maxHeight?"auto":this.maxHeight);this.list.beginUpdate();this.list.setHeight(this.innerList.getHeight()+t+(this.resizable?this.handleHeight:0)+this.assetHeight);this.list.alignTo(this.el,this.listAlign);this.list.endUpdate()},onEmptyResults:function(){this.collapse()},isExpanded:function(){return this.list&&this.list.isVisible()},selectByValue:function(n,t){if(n!==undefined&&n!==null){var i=this.findRecord(this.valueField||this.displayField,n);if(i)return this.select(this.store.indexOf(i),t),!0}return!1},select:function(n,t){if(this.selectedIndex=n,this.view.select(n),t!==!1){var i=this.view.getNode(n);i&&this.innerList.scrollChildIntoView(i,!1)}},selectNext:function(){var n=this.store.getCount();n>0&&(this.selectedIndex==-1?this.select(0):this.selectedIndex<n-1&&this.select(this.selectedIndex+1))},selectPrev:function(){var n=this.store.getCount();n>0&&(this.selectedIndex==-1?this.select(0):this.selectedIndex!=0&&this.select(this.selectedIndex-1))},onKeyUp:function(n){this.editable===!1||n.isSpecialKey()||(this.lastKey=n.getKey(),this.dqTask.delay(this.queryDelay))},validateBlur:function(){return!this.list||!this.list.isVisible()},initQuery:function(){this.doQuery(this.getRawValue())},doForce:function(){this.el.dom.value.length>0&&(this.el.dom.value=this.lastSelectionText===undefined?"":this.lastSelectionText,this.applyEmptyText())},doQuery:function(n,t){(n===undefined||n===null)&&(n="");var i={query:n,forceAll:t,combo:this,cancel:!1};if(this.fireEvent("beforequery",i)===!1||i.cancel)return!1;n=i.query;t=i.forceAll;(t===!0||n.length>=this.minChars)&&(this.lastQuery!==n?(this.lastQuery=n,this.mode=="local"?(this.selectedIndex=-1,t?this.store.clearFilter():this.store.filter(this.displayField,n),this.onLoad()):(this.store.baseParams[this.queryParam]=n,this.store.load({params:this.getParams(n)}),this.expand())):(this.selectedIndex=-1,this.onLoad()))},getParams:function(){var n={};return this.pageSize&&(n.start=0,n.limit=this.pageSize),n},collapse:function(){this.isExpanded()&&(this.list.hide(),Ext.getDoc().un("mousewheel",this.collapseIf,this),Ext.getDoc().un("mousedown",this.collapseIf,this),this.fireEvent("collapse",this))},collapseIf:function(n){n.within(this.wrap)||n.within(this.list)||this.collapse()},expand:function(){if(!this.isExpanded()&&this.hasFocus){this.list.alignTo(this.wrap,this.listAlign);this.list.show();this.innerList.setOverflow("auto");Ext.getDoc().on("mousewheel",this.collapseIf,this);Ext.getDoc().on("mousedown",this.collapseIf,this);this.fireEvent("expand",this)}},onTriggerClick:function(){if(!this.disabled)if(this.isExpanded())this.collapse(),this.el.focus();else{this.onFocus({});this.triggerAction=="all"?this.doQuery(this.allQuery,!0):this.doQuery(this.getRawValue());this.el.focus()}}});Ext.reg("combo",Ext.form.ComboBox);Ext.form.Checkbox=Ext.extend(Ext.form.Field,{focusClass:undefined,fieldClass:"x-form-field",checked:!1,defaultAutoCreate:{tag:"input",type:"checkbox",autocomplete:"off"},initComponent:function(){Ext.form.Checkbox.superclass.initComponent.call(this);this.addEvents("check")},onResize:function(){Ext.form.Checkbox.superclass.onResize.apply(this,arguments);this.boxLabel||this.el.alignTo(this.wrap,"c-c")},initEvents:function(){Ext.form.Checkbox.superclass.initEvents.call(this);this.el.on("click",this.onClick,this);this.el.on("change",this.onClick,this)},getResizeEl:function(){return this.wrap},getPositionEl:function(){return this.wrap},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,onRender:function(n,t){Ext.form.Checkbox.superclass.onRender.call(this,n,t);this.inputValue!==undefined&&(this.el.dom.value=this.inputValue);this.wrap=this.el.wrap({cls:"x-form-check-wrap"});this.boxLabel&&this.wrap.createChild({tag:"label",htmlFor:this.el.id,cls:"x-form-cb-label",html:this.boxLabel});this.checked?this.setValue(!0):this.checked=this.el.dom.checked},onDestroy:function(){this.wrap&&this.wrap.remove();Ext.form.Checkbox.superclass.onDestroy.call(this)},initValue:Ext.emptyFn,getValue:function(){return this.rendered?this.el.dom.checked:!1},onClick:function(){this.el.dom.checked!=this.checked&&this.setValue(this.el.dom.checked)},setValue:function(n){this.checked=n===!0||n==="true"||n=="1"||String(n).toLowerCase()=="on";this.el&&this.el.dom&&(this.el.dom.checked=this.checked,this.el.dom.defaultChecked=this.checked);this.fireEvent("check",this,this.checked)}});Ext.reg("checkbox",Ext.form.Checkbox);Ext.form.Radio=Ext.extend(Ext.form.Checkbox,{inputType:"radio",markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,getGroupValue:function(){var n=this.el.up("form")||Ext.getBody();return n.child("input[name="+this.el.dom.name+"]:checked",!0).value},onClick:function(){if(this.el.dom.checked!=this.checked){var n=this.el.up("form")||Ext.getBody(),t=n.select("input[name="+this.el.dom.name+"]");t.each(function(n){n.dom.id==this.id?this.setValue(!0):Ext.getCmp(n.dom.id).setValue(!1)},this)}}});Ext.reg("radio",Ext.form.Radio);Ext.form.Hidden=Ext.extend(Ext.form.Field,{inputType:"hidden",onRender:function(){Ext.form.Hidden.superclass.onRender.apply(this,arguments)},initEvents:function(){this.originalValue=this.getValue()},setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn});Ext.reg("hidden",Ext.form.Hidden);Ext.form.BasicForm=function(n,t){Ext.apply(this,t);this.items=new Ext.util.MixedCollection(!1,function(n){return n.id||(n.id=Ext.id())});this.addEvents("beforeaction","actionfailed","actioncomplete");n&&this.initEl(n);Ext.form.BasicForm.superclass.constructor.call(this)};Ext.extend(Ext.form.BasicForm,Ext.util.Observable,{timeout:30,activeAction:null,trackResetOnLoad:!1,initEl:function(n){this.el=Ext.get(n);this.id=this.el.id||Ext.id();this.el.on("submit",this.onSubmit,this);this.el.addClass("x-form")},getEl:function(){return this.el},onSubmit:function(n){n.stopEvent()},destroy:function(){this.items.each(function(n){Ext.destroy(n)});this.el&&(this.el.removeAllListeners(),this.el.remove());this.purgeListeners()},isValid:function(){var n=!0;return this.items.each(function(t){t.validate()||(n=!1)}),n},isDirty:function(){var n=!1;return this.items.each(function(t){if(t.isDirty())return n=!0,!1}),n},doAction:function(n,t){return typeof n=="string"&&(n=new Ext.form.Action.ACTION_TYPES[n](this,t)),this.fireEvent("beforeaction",this,n)!==!1&&(this.beforeAction(n),n.run.defer(100,n)),this},submit:function(n){return this.doAction("submit",n),this},load:function(n){return this.doAction("load",n),this},updateRecord:function(n){n.beginEdit();var t=n.fields;return t.each(function(t){var i=this.findField(t.name);i&&n.set(t.name,i.getValue())},this),n.endEdit(),this},loadRecord:function(n){return this.setValues(n.data),this},beforeAction:function(n){var t=n.options;t.waitMsg&&(this.waitMsgTarget===!0?this.el.mask(t.waitMsg,"x-mask-loading"):this.waitMsgTarget?(this.waitMsgTarget=Ext.get(this.waitMsgTarget),this.waitMsgTarget.mask(t.waitMsg,"x-mask-loading")):Ext.MessageBox.wait(t.waitMsg,t.waitTitle||this.waitTitle||"Please Wait..."))},afterAction:function(n,t){this.activeAction=null;var i=n.options;i.waitMsg&&(this.waitMsgTarget===!0?this.el.unmask():this.waitMsgTarget?this.waitMsgTarget.unmask():(Ext.MessageBox.updateProgress(1),Ext.MessageBox.hide()));t?(i.reset&&this.reset(),Ext.callback(i.success,i.scope,[this,n]),this.fireEvent("actioncomplete",this,n)):(Ext.callback(i.failure,i.scope,[this,n]),this.fireEvent("actionfailed",this,n))},findField:function(n){var t=this.items.get(n);return t||this.items.each(function(i){if(i.isFormField&&(i.dataIndex==n||i.id==n||i.getName()==n))return t=i,!1}),t||null},markInvalid:function(n){var t,f,r,u,e,i;if(n instanceof Array)for(t=0,f=n.length;t<f;t++)r=n[t],u=this.findField(r.id),u&&u.markInvalid(r.msg);else for(i in n)typeof n[i]!="function"&&(e=this.findField(i))&&e.markInvalid(n[i]);return this},setValues:function(n){var i,e,f,t,r,u;if(n instanceof Array)for(i=0,e=n.length;i<e;i++)f=n[i],t=this.findField(f.id),t&&(t.setValue(f.value),this.trackResetOnLoad&&(t.originalValue=t.getValue()));else for(u in n)typeof n[u]!="function"&&(r=this.findField(u))&&(r.setValue(n[u]),this.trackResetOnLoad&&(r.originalValue=r.getValue()));return this},getValues:function(n){var t=Ext.lib.Ajax.serializeForm(this.el.dom);return n===!0?t:Ext.urlDecode(t)},clearInvalid:function(){return this.items.each(function(n){n.clearInvalid()}),this},reset:function(){return this.items.each(function(n){n.reset()}),this},add:function(){return this.items.addAll(Array.prototype.slice.call(arguments,0)),this},remove:function(n){return this.items.remove(n),this},render:function(){return this.items.each(function(n){n.isFormField&&!n.rendered&&document.getElementById(n.id)&&n.applyToMarkup(n.id)}),this},applyToFields:function(n){return this.items.each(function(t){Ext.apply(t,n)}),this},applyIfToFields:function(n){return this.items.each(function(t){Ext.applyIf(t,n)}),this}});Ext.BasicForm=Ext.form.BasicForm;Ext.FormPanel=Ext.extend(Ext.Panel,{buttonAlign:"center",minButtonWidth:75,labelAlign:"left",monitorValid:!1,monitorPoll:200,layout:"form",initComponent:function(){this.form=this.createForm();Ext.FormPanel.superclass.initComponent.call(this);this.addEvents("clientvalidation");this.relayEvents(this.form,["beforeaction","actionfailed","actioncomplete"])},createForm:function(){return delete this.initialConfig.listeners,new Ext.form.BasicForm(null,this.initialConfig)},initFields:function(){var t=this.form,i=this,n=function(r){r.doLayout&&r!=i?(Ext.applyIf(r,{labelAlign:r.ownerCt.labelAlign,labelWidth:r.ownerCt.labelWidth,itemCls:r.ownerCt.itemCls}),r.items&&r.items.each(n)):r.isFormField&&t.add(r)};this.items.each(n)},getLayoutTarget:function(){return this.form.el},getForm:function(){return this.form},onRender:function(n,t){this.initFields();Ext.FormPanel.superclass.onRender.call(this,n,t);var i={tag:"form",method:this.method||"POST",id:this.formId||Ext.id()};this.fileUpload&&(i.enctype="multipart/form-data");this.form.initEl(this.body.createChild(i))},beforeDestroy:function(){Ext.FormPanel.superclass.beforeDestroy.call(this);Ext.destroy(this.form)},initEvents:function(){Ext.FormPanel.superclass.initEvents.call(this);this.items.on("remove",this.onRemove,this);this.items.on("add",this.onAdd,this);this.monitorValid&&this.startMonitoring()},onAdd:function(n,t){t.isFormField&&this.form.add(t)},onRemove:function(n){n.isFormField&&(Ext.destroy(n.container.up(".x-form-item")),this.form.remove(n))},startMonitoring:function(){this.bound||(this.bound=!0,Ext.TaskMgr.start({run:this.bindHandler,interval:this.monitorPoll||200,scope:this}))},stopMonitoring:function(){this.bound=!1},load:function(){this.form.load.apply(this.form,arguments)},onDisable:function(){Ext.FormPanel.superclass.onDisable.call(this);this.form&&this.form.items.each(function(){this.disable()})},onEnable:function(){Ext.FormPanel.superclass.onEnable.call(this);this.form&&this.form.items.each(function(){this.enable()})},bindHandler:function(){var n,t,r,i;if(!this.bound)return!1;if(n=!0,this.form.items.each(function(t){if(!t.isValid(!0))return n=!1,!1}),this.buttons)for(t=0,r=this.buttons.length;t<r;t++)i=this.buttons[t],i.formBind===!0&&i.disabled===n&&i.setDisabled(!n);this.fireEvent("clientvalidation",this,n)}});Ext.reg("form",Ext.FormPanel);Ext.form.FormPanel=Ext.FormPanel;Ext.form.FieldSet=Ext.extend(Ext.Panel,{baseCls:"x-fieldset",layout:"form",onRender:function(n,t){if(this.el||(this.el=document.createElement("fieldset"),this.el.id=this.id,this.el.appendChild(document.createElement("legend")).className="x-fieldset-header"),Ext.form.FieldSet.superclass.onRender.call(this,n,t),this.checkboxToggle){var i=typeof this.checkboxToggle=="object"?this.checkboxToggle:{tag:"input",type:"checkbox",name:this.checkboxName||this.id+"-checkbox"};this.checkbox=this.header.insertFirst(i);this.checkbox.dom.checked=!this.collapsed;this.checkbox.on("click",this.onCheckClick,this)}},onCollapse:function(){this.checkbox&&(this.checkbox.dom.checked=!1);this.afterCollapse()},onExpand:function(){this.checkbox&&(this.checkbox.dom.checked=!0);this.afterExpand()},onCheckClick:function(){this[this.checkbox.dom.checked?"expand":"collapse"]()}});Ext.reg("fieldset",Ext.form.FieldSet);Ext.form.HtmlEditor=Ext.extend(Ext.form.Field,{enableFormat:!0,enableFontSize:!0,enableColors:!0,enableAlignments:!0,enableLists:!0,enableSourceEdit:!0,enableLinks:!0,enableFont:!0,createLinkText:"Please enter the URL for the link:",defaultLinkValue:"http://",fontFamilies:["Arial","Courier New","Tahoma","Times New Roman","Verdana"],defaultFont:"tahoma",validationEvent:!1,deferHeight:!0,initialized:!1,activated:!1,sourceEditMode:!1,onFocus:Ext.emptyFn,iframePad:3,hideMode:"offsets",defaultAutoCreate:{tag:"textarea",style:"width:500px;height:300px;",autocomplete:"off"},initComponent:function(){this.addEvents("initialize","activate","beforesync","beforepush","sync","push","editmodechange")},createFontOptions:function(){for(var r=[],u=this.fontFamilies,n,t,i=0,f=u.length;i<f;i++)n=u[i],t=n.toLowerCase(),r.push('<option value="',t,'" style="font-family:',n,';"',this.defaultFont==t?' selected="true">':">",n,"<\/option>");return r.join("")},createToolbar:function(n){function t(t,i,r){return{itemId:t,cls:"x-btn-icon x-edit-"+t,enableToggle:i!==!1,scope:n,handler:r||n.relayBtnCmd,clickEvent:"mousedown",tooltip:n.buttonTips[t]||undefined,tabIndex:-1}}var i=new Ext.Toolbar({renderTo:this.wrap.dom.firstChild});i.el.on("click",function(n){n.preventDefault()});if(this.enableFont&&!Ext.isSafari){this.fontSelect=i.el.createChild({tag:"select",cls:"x-font-select",html:this.createFontOptions()});this.fontSelect.on("change",function(){var n=this.fontSelect.dom.value;this.relayCmd("fontname",n);this.deferFocus()},this);i.add(this.fontSelect.dom,"-")}this.enableFormat&&i.add(t("bold"),t("italic"),t("underline"));this.enableFontSize&&i.add("-",t("increasefontsize",!1,this.adjustFont),t("decreasefontsize",!1,this.adjustFont));this.enableColors&&i.add("-",{itemId:"forecolor",cls:"x-btn-icon x-edit-forecolor",clickEvent:"mousedown",tooltip:n.buttonTips.forecolor||undefined,tabIndex:-1,menu:new Ext.menu.ColorMenu({allowReselect:!0,focus:Ext.emptyFn,value:"000000",plain:!0,selectHandler:function(n,t){this.execCmd("forecolor",Ext.isSafari||Ext.isIE?"#"+t:t);this.deferFocus()},scope:this,clickEvent:"mousedown"})},{itemId:"backcolor",cls:"x-btn-icon x-edit-backcolor",clickEvent:"mousedown",tooltip:n.buttonTips.backcolor||undefined,tabIndex:-1,menu:new Ext.menu.ColorMenu({focus:Ext.emptyFn,value:"FFFFFF",plain:!0,allowReselect:!0,selectHandler:function(n,t){Ext.isGecko?(this.execCmd("useCSS",!1),this.execCmd("hilitecolor",t),this.execCmd("useCSS",!0),this.deferFocus()):(this.execCmd(Ext.isOpera?"hilitecolor":"backcolor",Ext.isSafari||Ext.isIE?"#"+t:t),this.deferFocus())},scope:this,clickEvent:"mousedown"})});this.enableAlignments&&i.add("-",t("justifyleft"),t("justifycenter"),t("justifyright"));Ext.isSafari||(this.enableLinks&&i.add("-",t("createlink",!1,this.createLink)),this.enableLists&&i.add("-",t("insertorderedlist"),t("insertunorderedlist")),this.enableSourceEdit&&i.add("-",t("sourceedit",!0,function(n){this.toggleSourceEdit(n.pressed)})));this.tb=i},getDocMarkup:function(){return'<html><head><style type="text/css">body{border:0;margin:0;padding:3px;height:98%;cursor:text;}<\/style><\/head><body><\/body><\/html>'},getEditorBody:function(){return this.doc.body||this.doc.documentElement},onRender:function(n,t){var i,r;Ext.form.HtmlEditor.superclass.onRender.call(this,n,t);this.el.dom.style.border="0 none";this.el.dom.setAttribute("tabIndex",-1);this.el.addClass("x-hidden");Ext.isIE&&this.el.applyStyles("margin-top:-1px;margin-bottom:-1px;");this.wrap=this.el.wrap({cls:"x-html-editor-wrap",cn:{cls:"x-html-editor-tb"}});this.createToolbar(this);this.tb.items.each(function(n){n.itemId!="sourceedit"&&n.disable()});i=document.createElement("iframe");i.name=Ext.id();i.frameBorder="no";i.src=Ext.SSL_SECURE_URL||"javascript:false";this.wrap.dom.appendChild(i);this.iframe=i;Ext.isIE?(i.contentWindow.document.designMode="on",this.doc=i.contentWindow.document,this.win=i.contentWindow):(this.doc=i.contentDocument||window.frames[i.name].document,this.win=window.frames[i.name],this.doc.designMode="on");this.doc.open();this.doc.write(this.getDocMarkup());this.doc.close();r={run:function(){(this.doc.body||this.doc.readyState=="complete")&&(Ext.TaskMgr.stop(r),this.doc.designMode="on",this.initEditor.defer(10,this))},interval:10,duration:1e4,scope:this};Ext.TaskMgr.start(r);this.width||this.setSize(this.el.getSize())},onResize:function(n,t){var r,i;Ext.form.HtmlEditor.superclass.onResize.apply(this,arguments);this.el&&this.iframe&&(typeof n=="number"&&(r=n-this.wrap.getFrameWidth("lr"),this.el.setWidth(this.adjustWidth("textarea",r)),this.iframe.style.width=r+"px"),typeof t=="number"&&(i=t-this.wrap.getFrameWidth("tb")-this.tb.el.getHeight(),this.el.setHeight(this.adjustWidth("textarea",i)),this.iframe.style.height=i+"px",this.doc&&(this.getEditorBody().style.height=i-this.iframePad*2+"px")))},toggleSourceEdit:function(n){var t,i;if(n===undefined&&(n=!this.sourceEditMode),this.sourceEditMode=n===!0,t=this.tb.items.get("sourceedit"),t.pressed!==this.sourceEditMode){t.toggle(this.sourceEditMode);return}this.sourceEditMode?(this.tb.items.each(function(n){n.itemId!="sourceedit"&&n.disable()}),this.syncValue(),this.iframe.className="x-hidden",this.el.removeClass("x-hidden"),this.el.dom.removeAttribute("tabIndex"),this.el.focus()):(this.initialized&&this.tb.items.each(function(n){n.enable()}),this.pushValue(),this.iframe.className="",this.el.addClass("x-hidden"),this.el.dom.setAttribute("tabIndex",-1),this.deferFocus());i=this.lastSize;i&&(delete this.lastSize,this.setSize(i));this.fireEvent("editmodechange",this,this.sourceEditMode)},createLink:function(){var n=prompt(this.createLinkText,this.defaultLinkValue);n&&n!="http://"&&this.relayCmd("createlink",n)},adjustSize:Ext.BoxComponent.prototype.adjustSize,getResizeEl:function(){return this.wrap},getPositionEl:function(){return this.wrap},initEvents:function(){this.originalValue=this.getValue()},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,setValue:function(n){Ext.form.HtmlEditor.superclass.setValue.call(this,n);this.pushValue()},cleanHtml:function(n){return n=String(n),n.length>5&&Ext.isSafari&&(n=n.replace(/\sclass="(?:Apple-style-span|khtml-block-placeholder)"/gi,"")),n=="&nbsp;"&&(n=""),n},syncValue:function(){var i,n,r,t;this.initialized&&(i=this.getEditorBody(),n=i.innerHTML,Ext.isSafari&&(r=i.getAttribute("style"),t=r.match(/text-align:(.*?);/i),t&&t[1]&&(n='<div style="'+t[0]+'">'+n+"<\/div>")),n=this.cleanHtml(n),this.fireEvent("beforesync",this,n)!==!1&&(this.el.dom.value=n,this.fireEvent("sync",this,n)))},pushValue:function(){if(this.initialized){var n=this.el.dom.value;!this.activated&&n.length<1&&(n="&nbsp;");this.fireEvent("beforepush",this,n)!==!1&&(this.getEditorBody().innerHTML=n,this.fireEvent("push",this,n))}},deferFocus:function(){this.focus.defer(10,this)},focus:function(){this.win&&!this.sourceEditMode?this.win.focus():this.el.focus()},initEditor:function(){var n=this.getEditorBody(),t=this.el.getStyles("font-size","font-family","background-image","background-repeat");t["background-attachment"]="fixed";n.bgProperties="fixed";Ext.DomHelper.applyStyles(n,t);Ext.EventManager.on(this.doc,{mousedown:this.onEditorEvent,dblclick:this.onEditorEvent,click:this.onEditorEvent,keyup:this.onEditorEvent,buffer:100,scope:this});if(Ext.isGecko)Ext.EventManager.on(this.doc,"keypress",this.applyCommand,this);if(Ext.isIE||Ext.isSafari||Ext.isOpera)Ext.EventManager.on(this.doc,"keydown",this.fixKeys,this);this.initialized=!0;this.fireEvent("initialize",this);this.pushValue()},onDestroy:function(){this.rendered&&(this.tb.items.each(function(n){n.menu&&(n.menu.removeAll(),n.menu.el&&n.menu.el.destroy());n.destroy()}),this.wrap.dom.innerHTML="",this.wrap.remove())},onFirstFocus:function(){var n,t;if(this.activated=!0,this.tb.items.each(function(n){n.enable()}),Ext.isGecko){this.win.focus();n=this.win.getSelection();n.focusNode&&n.focusNode.nodeType==3||(t=n.getRangeAt(0),t.selectNodeContents(this.getEditorBody()),t.collapse(!0),this.deferFocus());try{this.execCmd("useCSS",!0);this.execCmd("styleWithCSS",!1)}catch(i){}}this.fireEvent("activate",this)},adjustFont:function(n){var i=n.itemId=="increasefontsize"?1:-1,t;Ext.isSafari&&(i*=2);t=parseInt(this.doc.queryCommandValue("FontSize")||3,10);t=Math.max(1,t+i);this.execCmd("FontSize",t+(Ext.isSafari?"px":0))},onEditorEvent:function(){this.updateToolbar()},updateToolbar:function(){var n,t,i;if(!this.activated){this.onFirstFocus();return}n=this.tb.items.map;t=this.doc;this.enableFont&&!Ext.isSafari&&(i=(this.doc.queryCommandValue("FontName")||this.defaultFont).toLowerCase(),i!=this.fontSelect.dom.value&&(this.fontSelect.dom.value=i));this.enableFormat&&(n.bold.toggle(t.queryCommandState("bold")),n.italic.toggle(t.queryCommandState("italic")),n.underline.toggle(t.queryCommandState("underline")));this.enableAlignments&&(n.justifyleft.toggle(t.queryCommandState("justifyleft")),n.justifycenter.toggle(t.queryCommandState("justifycenter")),n.justifyright.toggle(t.queryCommandState("justifyright")));!Ext.isSafari&&this.enableLists&&(n.insertorderedlist.toggle(t.queryCommandState("insertorderedlist")),n.insertunorderedlist.toggle(t.queryCommandState("insertunorderedlist")));Ext.menu.MenuMgr.hideAll();this.syncValue()},relayBtnCmd:function(n){this.relayCmd(n.itemId)},relayCmd:function(n,t){this.win.focus();this.execCmd(n,t);this.updateToolbar();this.deferFocus()},execCmd:function(n,t){this.doc.execCommand(n,!1,t===undefined?null:t);this.syncValue()},applyCommand:function(n){if(n.ctrlKey){var i=n.getCharCode(),t;if(i>0){i=String.fromCharCode(i);switch(i){case"b":t="bold";break;case"i":t="italic";break;case"u":t="underline"}t&&(this.win.focus(),this.execCmd(t),this.deferFocus(),n.preventDefault())}}},insertAtCursor:function(n){if(this.activated)if(Ext.isIE){this.win.focus();var t=this.doc.selection.createRange();t&&(t.collapse(!0),t.pasteHTML(n),this.syncValue(),this.deferFocus())}else Ext.isGecko||Ext.isOpera?(this.win.focus(),this.execCmd("InsertHTML",n),this.deferFocus()):Ext.isSafari&&(this.execCmd("InsertText",n),this.deferFocus())},fixKeys:function(){return Ext.isIE?function(n){var r=n.getKey(),t,i;r==n.TAB?(n.stopEvent(),t=this.doc.selection.createRange(),t&&(t.collapse(!0),t.pasteHTML("&nbsp;&nbsp;&nbsp;&nbsp;"),this.deferFocus())):r==n.ENTER&&(t=this.doc.selection.createRange(),t&&(i=t.parentElement(),i&&i.tagName.toLowerCase()=="li"||(n.stopEvent(),t.pasteHTML("<br />"),t.collapse(!1),t.select())))}:Ext.isOpera?function(n){var t=n.getKey();t==n.TAB&&(n.stopEvent(),this.win.focus(),this.execCmd("InsertHTML","&nbsp;&nbsp;&nbsp;&nbsp;"),this.deferFocus())}:Ext.isSafari?function(n){var t=n.getKey();t==n.TAB&&(n.stopEvent(),this.execCmd("InsertText","\t"),this.deferFocus())}:void 0}(),getToolbar:function(){return this.tb},buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:"x-html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:"x-html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:"x-html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:"x-html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:"x-html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:"x-html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:"x-html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:"x-html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:"x-html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:"x-html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:"x-html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:"x-html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:"x-html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:"x-html-editor-tip"}}});Ext.reg("htmleditor",Ext.form.HtmlEditor);Ext.form.TimeField=Ext.extend(Ext.form.ComboBox,{minValue:null,maxValue:null,minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"g:i A",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H",increment:15,mode:"local",triggerAction:"all",typeAhead:!1,initComponent:function(){var n,t,i;if(Ext.form.TimeField.superclass.initComponent.call(this),typeof this.minValue=="string"&&(this.minValue=this.parseDate(this.minValue)),typeof this.maxValue=="string"&&(this.maxValue=this.parseDate(this.maxValue)),!this.store){for(n=this.parseDate(this.minValue),n||(n=(new Date).clearTime()),t=this.parseDate(this.maxValue),t||(t=(new Date).clearTime().add("mi",1439)),i=[];n<=t;)i.push([n.dateFormat(this.format)]),n=n.add("mi",this.increment);this.store=new Ext.data.SimpleStore({fields:["text"],data:i});this.displayField="text"}},getValue:function(){var n=Ext.form.TimeField.superclass.getValue.call(this);return this.formatDate(this.parseDate(n))||""},setValue:function(n){Ext.form.TimeField.superclass.setValue.call(this,this.formatDate(this.parseDate(n)))},validateValue:Ext.form.DateField.prototype.validateValue,parseDate:Ext.form.DateField.prototype.parseDate,formatDate:Ext.form.DateField.prototype.formatDate,beforeBlur:function(){var n=this.parseDate(this.getRawValue());n&&this.setValue(n.dateFormat(this.format))}});Ext.reg("timefield",Ext.form.TimeField);Ext.form.Action=function(n,t){this.form=n;this.options=t||{}};Ext.form.Action.CLIENT_INVALID="client";Ext.form.Action.SERVER_INVALID="server";Ext.form.Action.CONNECT_FAILURE="connect";Ext.form.Action.LOAD_FAILURE="load";Ext.form.Action.prototype={type:"default",run:function(){},success:function(){},handleResponse:function(){},failure:function(n){this.response=n;this.failureType=Ext.form.Action.CONNECT_FAILURE;this.form.afterAction(this,!1)},processResponse:function(n){return(this.response=n,!n.responseText)?!0:(this.result=this.handleResponse(n),this.result)},getUrl:function(n){var t=this.options.url||this.form.url||this.form.el.dom.action,i;return n&&(i=this.getParams(),i&&(t+=(t.indexOf("?")!=-1?"&":"?")+i)),t},getMethod:function(){return(this.options.method||this.form.method||this.form.el.dom.method||"POST").toUpperCase()},getParams:function(){var t=this.form.baseParams,n=this.options.params;return n?typeof n=="object"?n=Ext.urlEncode(Ext.applyIf(n,t)):typeof n=="string"&&t&&(n+="&"+Ext.urlEncode(t)):t&&(n=Ext.urlEncode(t)),n},createCallback:function(n){var n=n||{};return{success:this.success,failure:this.failure,scope:this,timeout:n.timeout*1e3||this.form.timeout*1e3,upload:this.form.fileUpload?this.success:undefined}}};Ext.form.Action.Submit=function(n,t){Ext.form.Action.Submit.superclass.constructor.call(this,n,t)};Ext.extend(Ext.form.Action.Submit,Ext.form.Action,{type:"submit",run:function(){var n=this.options,t=this.getMethod(),i=t=="POST";n.clientValidation===!1||this.form.isValid()?Ext.Ajax.request(Ext.apply(this.createCallback(n),{form:this.form.el.dom,url:this.getUrl(!i),method:t,params:i?this.getParams():null,isUpload:this.form.fileUpload})):n.clientValidation!==!1&&(this.failureType=Ext.form.Action.CLIENT_INVALID,this.form.afterAction(this,!1))},success:function(n){var t=this.processResponse(n);if(t===!0||t.success){this.form.afterAction(this,!0);return}t.errors&&(this.form.markInvalid(t.errors),this.failureType=Ext.form.Action.SERVER_INVALID);this.form.afterAction(this,!1)},handleResponse:function(n){var t,i,r,u,f;if(this.form.errorReader){if(t=this.form.errorReader.read(n),i=[],t.records)for(r=0,u=t.records.length;r<u;r++)f=t.records[r],i[r]=f.data;return i.length<1&&(i=null),{success:t.success,errors:i}}return Ext.decode(n.responseText)}});Ext.form.Action.Load=function(n,t){Ext.form.Action.Load.superclass.constructor.call(this,n,t);this.reader=this.form.reader};Ext.extend(Ext.form.Action.Load,Ext.form.Action,{type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(this.options),{method:this.getMethod(),url:this.getUrl(!1),params:this.getParams()}))},success:function(n){var t=this.processResponse(n);if(t===!0||!t.success||!t.data){this.failureType=Ext.form.Action.LOAD_FAILURE;this.form.afterAction(this,!1);return}this.form.clearInvalid();this.form.setValues(t.data);this.form.afterAction(this,!0)},handleResponse:function(n){if(this.form.reader){var t=this.form.reader.read(n),i=t.records&&t.records[0]?t.records[0].data:null;return{success:t.success,data:i}}return Ext.decode(n.responseText)}});Ext.form.Action.ACTION_TYPES={load:Ext.form.Action.Load,submit:Ext.form.Action.Submit};Ext.form.VTypes=function(){var n=/^[a-zA-Z_]+$/,t=/^[a-zA-Z0-9_]+$/,i=/^([\w]+)(.[\w]+)*@([\w-]+\.){1,5}([A-Za-z]){2,4}$/,r=/(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;return{email:function(n){return i.test(n)},emailText:'This field should be an e-mail address in the format "user@domain.com"',emailMask:/[a-z0-9_\.\-@]/i,url:function(n){return r.test(n)},urlText:'This field should be a URL in the format "http://www.domain.com"',alpha:function(t){return n.test(t)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(n){return t.test(n)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}}();Ext.grid.GridPanel=Ext.extend(Ext.Panel,{ddText:"{0} selected row{1}",minColumnWidth:25,monitorWindowResize:!0,maxRowsToMeasure:0,trackMouseOver:!0,enableDragDrop:!1,enableColumnMove:!0,enableColumnHide:!0,enableHdMenu:!0,stripeRows:!1,autoExpandColumn:!1,autoExpandMin:50,autoExpandMax:1e3,view:null,loadMask:!1,rendered:!1,viewReady:!1,stateEvents:["columnmove","columnresize","sortchange"],initComponent:function(){Ext.grid.GridPanel.superclass.initComponent.call(this);this.autoScroll=!1;this.columns&&this.columns instanceof Array&&(this.colModel=new Ext.grid.ColumnModel(this.columns),delete this.columns);this.ds&&(this.store=this.ds,delete this.ds);this.cm&&(this.colModel=this.cm,delete this.cm);this.sm&&(this.selModel=this.sm,delete this.sm);this.store=Ext.StoreMgr.lookup(this.store);this.addEvents("click","dblclick","contextmenu","mousedown","mouseup","mouseover","mouseout","keypress","keydown","cellmousedown","rowmousedown","headermousedown","cellclick","celldblclick","rowclick","rowdblclick","headerclick","headerdblclick","rowcontextmenu","cellcontextmenu","headercontextmenu","bodyscroll","columnresize","columnmove","sortchange")},onRender:function(){var n,t;Ext.grid.GridPanel.superclass.onRender.apply(this,arguments);n=this.body;this.el.addClass("x-grid-panel");t=this.getView();t.init(this);n.on("mousedown",this.onMouseDown,this);n.on("click",this.onClick,this);n.on("dblclick",this.onDblClick,this);n.on("contextmenu",this.onContextMenu,this);n.on("keydown",this.onKeyDown,this);this.relayEvents(n,["mousedown","mouseup","mouseover","mouseout","keypress"]);this.getSelectionModel().init(this);this.view.render()},initEvents:function(){Ext.grid.GridPanel.superclass.initEvents.call(this);this.loadMask&&(this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({store:this.store},this.loadMask)))},initStateEvents:function(){Ext.grid.GridPanel.superclass.initStateEvents.call(this);this.colModel.on("hiddenchange",this.saveState,this,{delay:100})},applyState:function(n){var u=this.colModel,f=n.columns,t,o,i,r,e;if(f)for(t=0,o=f.length;t<o;t++)i=f[t],r=u.getColumnById(i.id),r&&(r.hidden=i.hidden,r.width=i.width,e=u.getIndexById(i.id),e!=t&&u.moveColumn(e,t));n.sort&&this.store[this.store.remoteSort?"setDefaultSort":"sort"](n.sort.field,n.sort.direction)},getState:function(){for(var r,n={columns:[]},t=0,i;i=this.colModel.config[t];t++)n.columns[t]={id:i.id,width:i.width},i.hidden&&(n.columns[t].hidden=!0);return r=this.store.getSortState(),r&&(n.sort=r),n},afterRender:function(){Ext.grid.GridPanel.superclass.afterRender.call(this);this.view.layout();this.viewReady=!0},reconfigure:function(n,t){this.loadMask&&(this.loadMask.destroy(),this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({store:n},this.initialConfig.loadMask)));this.view.bind(n,t);this.store=n;this.colModel=t;this.rendered&&this.view.refresh(!0)},onKeyDown:function(n){this.fireEvent("keydown",n)},onDestroy:function(){if(this.rendered){this.loadMask&&this.loadMask.destroy();var n=this.body;n.removeAllListeners();this.view.destroy();n.update("")}this.colModel.purgeListeners();Ext.grid.GridPanel.superclass.onDestroy.call(this)},processEvent:function(n,t){var i,f;this.fireEvent(n,t);var r=t.getTarget(),u=this.view,e=u.findHeaderIndex(r);e!==!1?this.fireEvent("header"+n,this,e,t):(i=u.findRowIndex(r),f=u.findCellIndex(r),i!==!1&&(this.fireEvent("row"+n,this,i,t),f!==!1&&this.fireEvent("cell"+n,this,i,f,t)))},onClick:function(n){this.processEvent("click",n)},onMouseDown:function(n){this.processEvent("mousedown",n)},onContextMenu:function(n){this.processEvent("contextmenu",n)},onDblClick:function(n){this.processEvent("dblclick",n)},walkCells:function(n,t,i,r,u){var e=this.colModel,o=e.getColumnCount(),s=this.store,h=s.getCount(),f=!0;if(i<0)for(t<0&&(n--,f=!1);n>=0;){for(f||(t=o-1),f=!1;t>=0;){if(r.call(u||this,n,t,e)===!0)return[n,t];t--}n--}else for(t>=o&&(n++,f=!1);n<h;){for(f||(t=0),f=!1;t<o;){if(r.call(u||this,n,t,e)===!0)return[n,t];t++}n++}return null},getSelections:function(){return this.selModel.getSelections()},onResize:function(){Ext.grid.GridPanel.superclass.onResize.apply(this,arguments);this.viewReady&&this.view.layout()},getGridEl:function(){return this.body},stopEditing:function(){},getSelectionModel:function(){return this.selModel||(this.selModel=new Ext.grid.RowSelectionModel(this.disableSelection?{selectRow:Ext.emptyFn}:null)),this.selModel},getStore:function(){return this.store},getColumnModel:function(){return this.colModel},getView:function(){return this.view||(this.view=new Ext.grid.GridView(this.viewConfig)),this.view},getDragDropText:function(){var n=this.selModel.getCount();return String.format(this.ddText,n,n==1?"":"s")}});Ext.reg("grid",Ext.grid.GridPanel);Ext.grid.GridView=function(n){Ext.apply(this,n);this.addEvents("beforerowremoved","beforerowsinserted","beforerefresh","rowremoved","rowsinserted","rowupdated","refresh");Ext.grid.GridView.superclass.constructor.call(this)};Ext.extend(Ext.grid.GridView,Ext.util.Observable,{scrollOffset:19,autoFill:!1,forceFit:!1,sortClasses:["sort-asc","sort-desc"],sortAscText:"Sort Ascending",sortDescText:"Sort Descending",columnsText:"Columns",borderWidth:2,initTemplates:function(){var n=this.templates||{},i,t;n.master||(n.master=new Ext.Template('<div class="x-grid3" hidefocus="true">','<div class="x-grid3-viewport">','<div class="x-grid3-header"><div class="x-grid3-header-inner"><div class="x-grid3-header-offset">{header}<\/div><\/div><div class="x-clear"><\/div><\/div>','<div class="x-grid3-scroller"><div class="x-grid3-body">{body}<\/div><a href="#" class="x-grid3-focus" tabIndex="-1"><\/a><\/div>',"<\/div>",'<div class="x-grid3-resize-marker">&#160;<\/div>','<div class="x-grid3-resize-proxy">&#160;<\/div>',"<\/div>"));n.header||(n.header=new Ext.Template('<table border="0" cellspacing="0" cellpadding="0" style="{tstyle}">','<thead><tr class="x-grid3-hd-row">{cells}<\/tr><\/thead>',"<\/table>"));n.hcell||(n.hcell=new Ext.Template('<td class="x-grid3-hd x-grid3-cell x-grid3-td-{id}" style="{style}"><div {tooltip} {attr} class="x-grid3-hd-inner x-grid3-hd-{id}" unselectable="on" style="{istyle}">',this.grid.enableHdMenu?'<a class="x-grid3-hd-btn" href="#"><\/a>':"",'{value}<img class="x-grid3-sort-icon" src="',Ext.BLANK_IMAGE_URL,'" />',"<\/div><\/td>"));n.body||(n.body=new Ext.Template("{rows}"));n.row||(n.row=new Ext.Template('<div class="x-grid3-row {alt}" style="{tstyle}"><table class="x-grid3-row-table" border="0" cellspacing="0" cellpadding="0" style="{tstyle}">',"<tbody><tr>{cells}<\/tr>",this.enableRowBody?'<tr class="x-grid3-row-body-tr" style="{bodyStyle}"><td colspan="{cols}" class="x-grid3-body-cell" tabIndex="0" hidefocus="on"><div class="x-grid3-row-body">{body}<\/div><\/td><\/tr>':"","<\/tbody><\/table><\/div>"));n.cell||(n.cell=new Ext.Template('<td class="x-grid3-col x-grid3-cell x-grid3-td-{id} {css}" style="{style}" tabIndex="0" {cellAttr}>','<div class="x-grid3-cell-inner x-grid3-col-{id}" unselectable="on" {attr}>{value}<\/div>',"<\/td>"));for(i in n)t=n[i],t&&typeof t.compile=="function"&&!t.compiled&&(t.disableFormats=!0,t.compile());this.templates=n;this.tdClass="x-grid3-cell";this.cellSelector="td.x-grid3-cell";this.hdCls="x-grid3-hd";this.rowSelector="div.x-grid3-row";this.colRe=new RegExp("x-grid3-td-([^\\s]+)","")},fly:function(n){return this._flyweight||(this._flyweight=new Ext.Element.Flyweight(document.body)),this._flyweight.dom=n,this._flyweight},getEditorParent:function(){return this.scroller.dom},initElements:function(){var n=Ext.Element,i=this.grid.getGridEl().dom.firstChild,t=i.childNodes;this.el=new n(i);this.mainWrap=new n(t[0]);this.mainHd=new n(this.mainWrap.dom.firstChild);this.innerHd=this.mainHd.dom.firstChild;this.scroller=new n(this.mainWrap.dom.childNodes[1]);this.forceFit&&this.scroller.setStyle("overflow-x","hidden");this.mainBody=new n(this.scroller.dom.firstChild);this.focusEl=new n(this.scroller.dom.childNodes[1]);this.focusEl.swallowEvent("click",!0);this.resizeMarker=new n(t[1]);this.resizeProxy=new n(t[2])},getRows:function(){return this.hasRows()?this.mainBody.dom.childNodes:[]},findCell:function(n){return n?this.fly(n).findParent(this.cellSelector,3):!1},findCellIndex:function(n,t){var i=this.findCell(n);return i&&(!t||this.fly(i).hasClass(t))?this.getCellIndex(i):!1},getCellIndex:function(n){if(n){var t=n.className.match(this.colRe);if(t&&t[1])return this.cm.getIndexById(t[1])}return!1},findHeaderCell:function(n){var t=this.findCell(n);return t&&this.fly(t).hasClass(this.hdCls)?t:null},findHeaderIndex:function(n){return this.findCellIndex(n,this.hdCls)},findRow:function(n){return n?this.fly(n).findParent(this.rowSelector,10):!1},findRowIndex:function(n){var t=this.findRow(n);return t?t.rowIndex:!1},getRow:function(n){return this.getRows()[n]},getCell:function(n,t){return this.getRow(n).getElementsByTagName("td")[t]},getHeaderCell:function(n){return this.mainHd.dom.getElementsByTagName("td")[n]},addRowClass:function(n,t){var i=this.getRow(n);i&&this.fly(i).addClass(t)},removeRowClass:function(n,t){var i=this.getRow(n);i&&this.fly(i).removeClass(t)},removeRow:function(n){Ext.removeNode(this.getRow(n))},removeRows:function(n,t){for(var r=this.mainBody.dom,i=n;i<=t;i++)Ext.removeNode(r.childNodes[n])},getScrollState:function(){var n=this.scroller.dom;return{left:n.scrollLeft,top:n.scrollTop}},restoreScroll:function(n){var t=this.scroller.dom;t.scrollLeft=n.left;t.scrollTop=n.top},scrollToTop:function(){this.scroller.dom.scrollTop=0;this.scroller.dom.scrollLeft=0},syncScroll:function(){this.syncHeaderScroll();var n=this.scroller.dom;this.grid.fireEvent("bodyscroll",n.scrollLeft,n.scrollTop)},syncHeaderScroll:function(){var n=this.scroller.dom;this.innerHd.scrollLeft=n.scrollLeft;this.innerHd.scrollLeft=n.scrollLeft},updateSortIcon:function(n,t){var i=this.sortClasses,r=this.mainHd.select("td").removeClass(i);r.item(n).addClass(i[t=="DESC"?1:0])},updateAllColumnWidths:function(){for(var e,t,o,s,i,r=this.getTotalWidth(),f=this.cm.getColumnCount(),u=[],n=0;n<f;n++)u[n]=this.getColumnWidth(n);for(this.innerHd.firstChild.firstChild.style.width=r,n=0;n<f;n++)e=this.getHeaderCell(n),e.style.width=u[n];for(t=this.getRows(),n=0,o=t.length;n<o;n++)for(t[n].style.width=r,t[n].firstChild.style.width=r,s=t[n].firstChild.rows[0],i=0;i<f;i++)s.childNodes[i].style.width=u[i];this.onAllColumnWidthsUpdated(u,r)},updateColumnWidth:function(n){var u=this.getColumnWidth(n),r=this.getTotalWidth(),f,i,t,e;for(this.innerHd.firstChild.firstChild.style.width=r,f=this.getHeaderCell(n),f.style.width=u,i=this.getRows(),t=0,e=i.length;t<e;t++)i[t].style.width=r,i[t].firstChild.style.width=r,i[t].firstChild.rows[0].childNodes[n].style.width=u;this.onColumnWidthUpdated(n,u,r)},updateColumnHidden:function(n,t){var u=this.getTotalWidth(),f,e,r,i,o;for(this.innerHd.firstChild.firstChild.style.width=u,f=t?"none":"",e=this.getHeaderCell(n),e.style.display=f,r=this.getRows(),i=0,o=r.length;i<o;i++)r[i].style.width=u,r[i].firstChild.style.width=u,r[i].firstChild.rows[0].childNodes[n].style.display=f;this.onColumnHiddenUpdated(n,t,u);delete this.lastViewWidth;this.layout()},doRender:function(n,t,i,r,u,f){for(var y,s,l,w=this.templates,b=w.cell,k=w.row,d=u-1,g="width:"+this.getTotalWidth()+";",p=[],a,h,e={},c={tstyle:g},o,v=0,nt=t.length;v<nt;v++){for(o=t[v],a=[],y=v+r,s=0;s<u;s++)h=n[s],e.id=h.id,e.css=s==0?"x-grid3-cell-first ":s==d?"x-grid3-cell-last ":"",e.attr=e.cellAttr="",e.value=h.renderer(o.data[h.name],e,o,y,s,i),e.style=h.style,(e.value==undefined||e.value==="")&&(e.value="&#160;"),o.dirty&&typeof o.modified[h.name]!="undefined"&&(e.css+=" x-grid3-dirty-cell"),a[a.length]=b.apply(e);l=[];f&&(y+1)%2==0&&(l[0]="x-grid3-row-alt");o.dirty&&(l[1]=" x-grid3-dirty-row");c.cols=u;this.getRowClass&&(l[2]=this.getRowClass(o,y,c,i));c.alt=l.join(" ");c.cells=a.join("");p[p.length]=k.apply(c)}return p.join("")},processRows:function(n,t){var u,e,i,o,r,f,s;if(!(this.ds.getCount()<1))for(t=t||!this.grid.stripeRows,n=n||0,u=this.getRows(),e=" x-grid3-row-alt ",i=n,o=u.length;i<o;i++)if(r=u[i],r.rowIndex=i,!t){if(f=(i+1)%2==0,s=(" "+r.className+" ").indexOf(e)!=-1,f==s)continue;f?r.className+=" x-grid3-row-alt":r.className=r.className.replace("x-grid3-row-alt","")}},renderUI:function(){var t=this.renderHeaders(),i=this.templates.body.apply({rows:""}),r=this.templates.master.apply({body:i,header:t}),n=this.grid,u;n.getGridEl().dom.innerHTML=r;this.initElements();this.mainBody.dom.innerHTML=this.renderRows();this.processRows(0,!0);Ext.fly(this.innerHd).on("click",this.handleHdDown,this);this.mainHd.on("mouseover",this.handleHdOver,this);this.mainHd.on("mouseout",this.handleHdOut,this);this.mainHd.on("mousemove",this.handleHdMove,this);this.scroller.on("scroll",this.syncScroll,this);if(n.enableColumnResize!==!1&&(this.splitone=new Ext.grid.GridView.SplitDragZone(n,this.mainHd.dom)),n.enableColumnMove&&(this.columnDrag=new Ext.grid.GridView.ColumnDragZone(n,this.innerHd),this.columnDrop=new Ext.grid.HeaderDropZone(n,this.mainHd.dom)),n.enableHdMenu!==!1){if(n.enableColumnHide!==!1){this.colMenu=new Ext.menu.Menu({id:n.id+"-hcols-menu"});this.colMenu.on("beforeshow",this.beforeColMenuShow,this);this.colMenu.on("itemclick",this.handleHdMenuClick,this)}this.hmenu=new Ext.menu.Menu({id:n.id+"-hctx"});this.hmenu.add({id:"asc",text:this.sortAscText,cls:"xg-hmenu-sort-asc"},{id:"desc",text:this.sortDescText,cls:"xg-hmenu-sort-desc"});n.enableColumnHide!==!1&&this.hmenu.add("-",{id:"columns",text:this.columnsText,menu:this.colMenu,iconCls:"x-cols-icon"});this.hmenu.on("itemclick",this.handleHdMenuClick,this)}(n.enableDragDrop||n.enableDrag)&&(u=new Ext.grid.GridDragZone(n,{ddGroup:n.ddGroup||"GridDD"}));this.updateHeaderSortState()},layout:function(){var u,r;if(this.mainBody){var i=this.grid,f=i.getGridEl(),e=this.cm,o=i.autoExpandColumn,s=this,t=f.getSize(!0),n=t.width;if(!(n<20)&&!(t.height<20)){i.autoHeight?this.scroller.dom.style.overflow="visible":(this.el.setSize(t.width,t.height),u=this.mainHd.getHeight(),r=t.height-u,this.scroller.setSize(n,r),this.innerHd&&(this.innerHd.style.width=n+"px"));this.forceFit?this.lastViewWidth!=n&&(this.fitColumns(!1,!1),this.lastViewWidth=n):(this.autoExpand(),this.syncHeaderScroll());this.onLayout(n,r)}}},onLayout:function(){},onColumnWidthUpdated:function(){},onAllColumnWidthsUpdated:function(){},onColumnHiddenUpdated:function(){},updateColumnText:function(){},afterMove:function(){},init:function(n){this.grid=n;this.initTemplates();this.initData(n.store,n.colModel);this.initUI(n)},getColumnId:function(n){return this.cm.getColumnId(n)},renderHeaders:function(){for(var i=this.cm,u=this.templates,f=u.hcell,r=[],n={},t=0,e=i.getColumnCount();t<e;t++)n.id=i.getColumnId(t),n.value=i.getColumnHeader(t)||"",n.style=this.getColumnStyle(t,!0),n.tooltip=this.getColumnTooltip(t),i.config[t].align=="right"?n.istyle="padding-right:16px":delete n.istyle,r[r.length]=f.apply(n);return u.header.apply({cells:r.join(""),tstyle:"width:"+this.getTotalWidth()+";"})},getColumnTooltip:function(n){var t=this.cm.getColumnTooltip(n);return t?Ext.QuickTips.isEnabled()?'ext:qtip="'+t+'"':'title="'+t+'"':""},beforeUpdate:function(){this.grid.stopEditing()},updateHeaders:function(){this.innerHd.firstChild.innerHTML=this.renderHeaders()},focusRow:function(n){this.focusCell(n,0,!1)},focusCell:function(n,t,i){var r=this.ensureVisible(n,t,i);this.focusEl.setXY(r);Ext.isGecko?this.focusEl.focus():this.focusEl.focus.defer(1,this.focusEl)},ensureVisible:function(n,t,i){var u,f;if((typeof n!="number"&&(n=n.rowIndex),this.ds)&&!(n<0)&&!(n>=this.ds.getCount())){if(t=t!==undefined?t:0,u=this.getRow(n),!(i===!1&&t===0)){while(this.cm.isHidden(t))t++;f=this.getCell(n,t)}if(u){for(var r=this.scroller.dom,e=0,o=u,s=this.el.dom;o&&o!=s;)e+=o.offsetTop,o=o.offsetParent;e-=this.mainHd.dom.offsetHeight;var c=e+u.offsetHeight,l=r.clientHeight,s=parseInt(r.scrollTop,10),y=s+l;if(e<s?r.scrollTop=e:c>y&&(r.scrollTop=c-l),i!==!1){var h=parseInt(f.offsetLeft,10),a=h+f.offsetWidth,v=parseInt(r.scrollLeft,10),p=v+r.clientWidth;h<v?r.scrollLeft=h:a>p&&(r.scrollLeft=a-r.clientWidth)}return f?Ext.fly(f).getXY():[r.scrollLeft,Ext.fly(u).getY()]}}},insertRows:function(n,t,i,r){if(t===0&&i==n.getCount()-1)this.refresh();else{r||this.fireEvent("beforerowsinserted",this,t,i);var u=this.renderRows(t,i),f=this.getRow(t);f?Ext.DomHelper.insertHtml("beforeBegin",f,u):Ext.DomHelper.insertHtml("beforeEnd",this.mainBody.dom,u);r||(this.fireEvent("rowsinserted",this,t,i),this.processRows(t))}},deleteRows:function(n,t,i){n.getRowCount()<1?this.refresh():(this.fireEvent("beforerowsdeleted",this,t,i),this.removeRows(t,i),this.processRows(t),this.fireEvent("rowsdeleted",this,t,i))},getColumnStyle:function(n,t){var i=t?"":this.cm.config[n].css||"",r;return i+="width:"+this.getColumnWidth(n)+";",this.cm.isHidden(n)&&(i+="display:none;"),r=this.cm.config[n].align,r&&(i+="text-align:"+r+";"),i},getColumnWidth:function(n){var t=this.cm.getColumnWidth(n);return typeof t=="number"?(Ext.isBorderBox?t:t-this.borderWidth>0?t-this.borderWidth:0)+"px":t},getTotalWidth:function(){return this.cm.getTotalWidth()+"px"},fitColumns:function(n,t,i){var r=this.cm,u,h=r.getTotalWidth(!1),e=this.grid.getGridEl().getWidth(!0)-this.scrollOffset,a,c,s,p,l;if(!(e<20)){if(a=e-h,a===0)return!1;c=r.getColumnCount(!0);s=c-(typeof i=="number"?1:0);s===0&&(s=1,i=undefined);var w=r.getColumnCount(),o=[],v=0,y=0,f;for(u=0;u<w;u++)r.isHidden(u)||r.isFixed(u)||u===i||(f=r.getColumnWidth(u),o.push(u),v=u,o.push(f),y+=f);for(p=(e-r.getTotalWidth())/y;o.length;)f=o.pop(),u=o.pop(),r.setColumnWidth(u,Math.max(this.grid.minColumnWidth,Math.floor(f+f*p)),!0);return(h=r.getTotalWidth(!1))>e&&(l=s!=c?i:v,r.setColumnWidth(l,Math.max(1,r.getColumnWidth(l)-(h-e)),!0)),n!==!0&&this.updateAllColumnWidths(),!0}},autoExpand:function(n){var t=this.grid,i=this.cm,r,u;if(!this.userResized&&t.autoExpandColumn&&(r=i.getTotalWidth(!1),u=this.grid.getGridEl().getWidth(!0)-this.scrollOffset,r!=u)){var f=i.getIndexById(t.autoExpandColumn),o=i.getColumnWidth(f),e=Math.min(Math.max(u-r+o,t.autoExpandMin),t.autoExpandMax);e!=o&&(i.setColumnWidth(f,e,!0),n!==!0&&this.updateColumnWidth(f,e))}},getColumnData:function(){for(var i,r=[],t=this.cm,u=t.getColumnCount(),n=0;n<u;n++)i=t.getDataIndex(n),r[n]={name:typeof i=="undefined"?this.ds.fields.get(n).name:i,renderer:t.getRenderer(n),id:t.getColumnId(n),style:this.getColumnStyle(n)};return r},renderRows:function(n,t){var r=this.grid,e=r.colModel,i=r.store,o=r.stripeRows,s=e.getColumnCount(),u,f;return i.getCount()<1?"":(u=this.getColumnData(),n=n||0,t=typeof t=="undefined"?i.getCount()-1:t,f=i.getRange(n,t),this.doRender(u,f,i,n,s,o))},renderBody:function(){var n=this.renderRows();return this.templates.body.apply({rows:n})},refreshRow:function(n){var i=this.ds,t,r;typeof n=="number"?(t=n,n=i.getAt(t)):t=i.indexOf(n);r=[];this.insertRows(i,t,t,!0);this.getRow(t).rowIndex=t;this.onRemove(i,n,t+1,!0);this.fireEvent("rowupdated",this,t,n)},refresh:function(n){this.fireEvent("beforerefresh",this);this.grid.stopEditing();var t=this.renderBody();this.mainBody.update(t);n===!0&&(this.updateHeaders(),this.updateHeaderSortState());this.processRows(0,!0);this.layout();this.applyEmptyText();this.fireEvent("refresh",this)},applyEmptyText:function(){this.emptyText&&!this.hasRows()&&this.mainBody.update('<div class="x-grid-empty">'+this.emptyText+"<\/div>")},updateHeaderSortState:function(){var n=this.ds.getSortState(),t,i;n&&(this.sortState&&this.sortState.field==n.field&&this.sortState.direction==n.direction||this.grid.fireEvent("sortchange",this.grid,n),this.sortState=n,t=this.cm.findColumnIndex(n.field),t!=-1&&(i=n.direction,this.updateSortIcon(t,i)))},destroy:function(){var n,t,i;if(this.colMenu&&(this.colMenu.removeAll(),Ext.menu.MenuMgr.unregister(this.colMenu),this.colMenu.getEl().remove(),delete this.colMenu),this.hmenu&&(this.hmenu.removeAll(),Ext.menu.MenuMgr.unregister(this.hmenu),this.hmenu.getEl().remove(),delete this.hmenu),this.grid.enableColumnMove&&(n=Ext.dd.DDM.ids["gridHeader"+this.grid.getGridEl().id],n)){for(t in n)!n[t].config.isTarget&&n[t].dragElId?(i=n[t].dragElId,n[t].unreg(),Ext.get(i).remove()):n[t].config.isTarget&&(n[t].proxyTop.remove(),n[t].proxyBottom.remove(),n[t].unreg()),Ext.dd.DDM.locationCache[t]&&delete Ext.dd.DDM.locationCache[t];delete Ext.dd.DDM.ids["gridHeader"+this.grid.getGridEl().id]}Ext.destroy(this.resizeMarker,this.resizeProxy);this.initData(null,null);Ext.EventManager.removeResizeListener(this.onWindowResize,this)},onDenyColumnHide:function(){},render:function(){var n=this.cm,t=n.getColumnCount();if(this.grid.monitorWindowResize===!0)Ext.EventManager.onWindowResize(this.onWindowResize,this,!0);this.autoFill?this.fitColumns(!0,!0):this.forceFit?this.fitColumns(!0,!1):this.grid.autoExpandColumn&&this.autoExpand(!0);this.renderUI()},onWindowResize:function(){this.grid.monitorWindowResize&&!this.grid.autoHeight&&this.layout()},initData:function(n,t){if(this.ds&&(this.ds.un("load",this.onLoad,this),this.ds.un("datachanged",this.onDataChange,this),this.ds.un("add",this.onAdd,this),this.ds.un("remove",this.onRemove,this),this.ds.un("update",this.onUpdate,this),this.ds.un("clear",this.onClear,this)),n){n.on("load",this.onLoad,this);n.on("datachanged",this.onDataChange,this);n.on("add",this.onAdd,this);n.on("remove",this.onRemove,this);n.on("update",this.onUpdate,this);n.on("clear",this.onClear,this)}if(this.ds=n,this.cm&&(this.cm.un("configchange",this.onColConfigChange,this),this.cm.un("widthchange",this.onColWidthChange,this),this.cm.un("headerchange",this.onHeaderChange,this),this.cm.un("hiddenchange",this.onHiddenChange,this),this.cm.un("columnmoved",this.onColumnMove,this),this.cm.un("columnlockchange",this.onColumnLock,this)),t){t.on("configchange",this.onColConfigChange,this);t.on("widthchange",this.onColWidthChange,this);t.on("headerchange",this.onHeaderChange,this);t.on("hiddenchange",this.onHiddenChange,this);t.on("columnmoved",this.onColumnMove,this);t.on("columnlockchange",this.onColumnLock,this)}this.cm=t},onDataChange:function(){this.refresh();this.updateHeaderSortState()},onClear:function(){this.refresh()},onUpdate:function(n,t){this.refreshRow(t)},onAdd:function(n,t,i){this.insertRows(n,i,i+(t.length-1))},onRemove:function(n,t,i,r){r!==!0&&this.fireEvent("beforerowremoved",this,i,t);this.removeRow(i);r!==!0&&(this.processRows(i),this.applyEmptyText(),this.fireEvent("rowremoved",this,i,t))},onLoad:function(){this.scrollToTop()},onColWidthChange:function(n,t,i){this.updateColumnWidth(t,i)},onHeaderChange:function(){this.updateHeaders()},onHiddenChange:function(n,t,i){this.updateColumnHidden(t,i)},onColumnMove:function(n,t,i){this.indexMap=null;var r=this.getScrollState();this.refresh(!0);this.restoreScroll(r);this.afterMove(i)},onColConfigChange:function(){delete this.lastViewWidth;this.indexMap=null;this.refresh(!0)},initUI:function(n){n.on("headerclick",this.onHeaderClick,this);if(n.trackMouseOver){n.on("mouseover",this.onRowOver,this);n.on("mouseout",this.onRowOut,this)}},initEvents:function(){},onHeaderClick:function(n,t){!this.headersDisabled&&this.cm.isSortable(t)&&(n.stopEditing(),n.store.sort(this.cm.getDataIndex(t)))},onRowOver:function(n,t){var i;(i=this.findRowIndex(t))!==!1&&this.addRowClass(i,"x-grid3-row-over")},onRowOut:function(n,t){var i;(i=this.findRowIndex(t))!==!1&&i!==this.findRowIndex(n.getRelatedTarget())&&this.removeRowClass(i,"x-grid3-row-over")},handleWheel:function(n){n.stopPropagation()},onRowSelect:function(n){this.addRowClass(n,"x-grid3-row-selected")},onRowDeselect:function(n){this.removeRowClass(n,"x-grid3-row-selected")},onCellSelect:function(n,t){var i=this.getCell(n,t);i&&this.fly(i).addClass("x-grid3-cell-selected")},onCellDeselect:function(n,t){var i=this.getCell(n,t);i&&this.fly(i).removeClass("x-grid3-cell-selected")},onColumnSplitterMoved:function(n,t){this.userResized=!0;var i=this.grid.colModel;i.setColumnWidth(n,t,!0);this.forceFit?(this.fitColumns(!0,!1,n),this.updateAllColumnWidths()):this.updateColumnWidth(n,t);this.grid.fireEvent("columnresize",n,t)},handleHdMenuClick:function(n){var t=this.hdCtxIndex,i=this.cm,r=this.ds;switch(n.id){case"asc":r.sort(i.getDataIndex(t),"ASC");break;case"desc":r.sort(i.getDataIndex(t),"DESC");break;default:if(t=i.getIndexById(n.id.substr(4)),t!=-1){if(n.checked&&i.getColumnsBy(this.isHideableColumn,this).length<=1)return this.onDenyColumnHide(),!1;i.setHidden(t,n.checked)}}return!0},isHideableColumn:function(n){return!n.hidden&&!n.fixed},beforeColMenuShow:function(){var t=this.cm,i=t.getColumnCount(),n;for(this.colMenu.removeAll(),n=0;n<i;n++)t.config[n].fixed!==!0&&t.config[n].hideable!==!1&&this.colMenu.add(new Ext.menu.CheckItem({id:"col-"+t.getColumnId(n),text:t.getColumnHeader(n),checked:!t.isHidden(n),hideOnClick:!1,disabled:t.config[n].hideable===!1}))},handleHdDown:function(n,t){var i,r,u,f;if(Ext.fly(t).hasClass("x-grid3-hd-btn")){n.stopEvent();i=this.findHeaderCell(t);Ext.fly(i).addClass("x-grid3-hd-menu-open");r=this.getCellIndex(i);this.hdCtxIndex=r;u=this.hmenu.items;f=this.cm;u.get("asc").setDisabled(!f.isSortable(r));u.get("desc").setDisabled(!f.isSortable(r));this.hmenu.on("hide",function(){Ext.fly(i).removeClass("x-grid3-hd-menu-open")},this,{single:!0});this.hmenu.show(t,"tl-bl?")}},handleHdOver:function(n,t){var i=this.findHeaderCell(t),r;i&&!this.headersDisabled&&(this.activeHd=i,this.activeHdIndex=this.getCellIndex(i),r=this.fly(i),this.activeHdRegion=r.getRegion(),this.cm.isSortable(this.activeHdIndex)&&!this.cm.isFixed(this.activeHdIndex)&&(r.addClass("x-grid3-hd-over"),this.activeHdBtn=r.child(".x-grid3-hd-btn"),this.activeHdBtn&&(this.activeHdBtn.dom.style.height=i.firstChild.offsetHeight-1+"px")))},handleHdMove:function(n){if(this.activeHd&&!this.headersDisabled){var t=this.splitHandleWidth||5,i=this.activeHdRegion,r=n.getPageX(),u=this.activeHd.style;u.cursor=r-i.left<=t&&this.cm.isResizable(this.activeHdIndex-1)?Ext.isSafari?"e-resize":"col-resize":i.right-r<=(this.activeHdBtn?2:t)&&this.cm.isResizable(this.activeHdIndex)?Ext.isSafari?"w-resize":"col-resize":""}},handleHdOut:function(n,t){var i=this.findHeaderCell(t);!i||Ext.isIE&&n.within(i,!0)||(this.activeHd=null,this.fly(i).removeClass("x-grid3-hd-over"),i.style.cursor="")},hasRows:function(){var n=this.mainBody.dom.firstChild;return n&&n.className!="x-grid-empty"},bind:function(n,t){this.initData(n,t)}});Ext.grid.GridView.SplitDragZone=function(n,t){this.grid=n;this.view=n.getView();this.marker=this.view.resizeMarker;this.proxy=this.view.resizeProxy;Ext.grid.GridView.SplitDragZone.superclass.constructor.call(this,t,"gridSplitters"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:!1});this.scroll=!1;this.hw=this.view.splitHandleWidth||5};Ext.extend(Ext.grid.GridView.SplitDragZone,Ext.dd.DDProxy,{b4StartDrag:function(n,t){var i,u,r;this.view.headersDisabled=!0;i=this.view.mainWrap.getHeight();this.marker.setHeight(i);this.marker.show();this.marker.alignTo(this.view.getHeaderCell(this.cellIndex),"tl-tl",[-2,0]);this.proxy.setHeight(i);u=this.cm.getColumnWidth(this.cellIndex);r=Math.max(u-this.grid.minColumnWidth,0);this.resetConstraints();this.setXConstraint(r,1e3);this.setYConstraint(0,0);this.minX=n-r;this.maxX=n+1e3;this.startPos=n;Ext.dd.DDProxy.prototype.b4StartDrag.call(this,n,t)},handleMouseDown:function(n){var i=this.view.findHeaderCell(n.getTarget()),r;if(i){var u=this.view.fly(i).getXY(),f=u[0],h=u[1],e=n.getXY(),o=e[0],c=e[1],s=i.offsetWidth,t=!1;if(o-f<=this.hw?t=-1:f+s-o<=this.hw&&(t=0),t!==!1){if(this.cm=this.grid.colModel,r=this.view.getCellIndex(i),t==-1){if(r+t<0)return;while(this.cm.isHidden(r+t))if(--t,r+t<0)return}this.cellIndex=r+t;this.split=i.dom;this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)&&Ext.grid.GridView.SplitDragZone.superclass.handleMouseDown.apply(this,arguments)}else this.view.columnDrag&&this.view.columnDrag.callHandleMouseDown(n)}},endDrag:function(n){this.marker.hide();var t=this.view,i=Math.max(this.minX,n.getPageX()),r=i-this.startPos;t.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+r);setTimeout(function(){t.headersDisabled=!1},50)},autoOffset:function(){this.setDelta(0,0)}});Ext.grid.GroupingView=Ext.extend(Ext.grid.GridView,{hideGroupedColumn:!1,showGroupName:!0,startCollapsed:!1,enableGrouping:!0,enableGroupingMenu:!0,enableNoGroups:!0,emptyGroupText:"(None)",ignoreAdd:!1,groupTextTpl:"{text}",gidSeed:1e3,initTemplates:function(){Ext.grid.GroupingView.superclass.initTemplates.call(this);this.state={};var n=this.grid.getSelectionModel();n.on(n.selectRow?"beforerowselect":"beforecellselect",this.onBeforeRowSelect,this);this.startGroup||(this.startGroup=new Ext.XTemplate('<div id="{groupId}" class="x-grid-group {cls}">','<div id="{groupId}-hd" class="x-grid-group-hd" style="{style}"><div>',this.groupTextTpl,"<\/div><\/div>",'<div id="{groupId}-bd" class="x-grid-group-body">'));this.startGroup.compile();this.endGroup="<\/div><\/div>"},findGroup:function(n){return Ext.fly(n).up(".x-grid-group",this.mainBody.dom)},getGroups:function(){return this.hasRows()?this.mainBody.dom.childNodes:[]},onAdd:function(){if(this.enableGrouping&&!this.ignoreAdd){var n=this.getScrollState();this.refresh();this.restoreScroll(n)}else this.enableGrouping||Ext.grid.GroupingView.superclass.onAdd.apply(this,arguments)},onRemove:function(n,t){Ext.grid.GroupingView.superclass.onRemove.apply(this,arguments);var i=document.getElementById(t._groupId);i&&i.childNodes[1].childNodes.length<1&&Ext.removeNode(i);this.applyEmptyText()},refreshRow:function(){this.ds.getCount()==1?this.refresh():(this.isUpdating=!0,Ext.grid.GroupingView.superclass.refreshRow.apply(this,arguments),this.isUpdating=!1)},beforeMenuShow:function(){var t=this.getGroupField(),i=this.hmenu.items.get("groupBy"),n;i&&i.setDisabled(this.cm.config[this.hdCtxIndex].groupable===!1);n=this.hmenu.items.get("showGroups");n&&(!t||n.setDisabled(this.cm.config[this.hdCtxIndex].groupable===!1),n.setChecked(!!t))},renderUI:function(){Ext.grid.GroupingView.superclass.renderUI.call(this);this.mainBody.on("mousedown",this.interceptMouse,this);if(this.enableGroupingMenu&&this.hmenu){this.hmenu.add("-",{id:"groupBy",text:this.groupByText,handler:this.onGroupByClick,scope:this,iconCls:"x-group-by-icon"});this.enableNoGroups&&this.hmenu.add({id:"showGroups",text:this.showGroupsText,checked:!0,checkHandler:this.onShowGroupsClick,scope:this});this.hmenu.on("beforeshow",this.beforeMenuShow,this)}},onGroupByClick:function(){this.grid.store.groupBy(this.cm.getDataIndex(this.hdCtxIndex));this.beforeMenuShow()},onShowGroupsClick:function(n,t){t?this.onGroupByClick():this.grid.store.clearGrouping()},toggleGroup:function(n,t){this.grid.stopEditing();n=Ext.getDom(n);var i=Ext.fly(n);t=t!==undefined?t:i.hasClass("x-grid-group-collapsed");this.state[i.dom.id]=t;i[t?"removeClass":"addClass"]("x-grid-group-collapsed")},toggleAllGroups:function(n){for(var i=this.getGroups(),t=0,r=i.length;t<r;t++)this.toggleGroup(i[t],n)},expandAllGroups:function(){this.toggleAllGroups(!0)},collapseAllGroups:function(){this.toggleAllGroups(!1)},interceptMouse:function(n){var t=n.getTarget(".x-grid-group-hd",this.mainBody);t&&(n.stopEvent(),this.toggleGroup(t.parentNode))},getGroup:function(n,t,i,r,u,f){var e=i?i(n,{},t,r,u,f):String(n);return e===""&&(e=this.cm.config[u].emptyGroupText||this.emptyGroupText),e},getGroupField:function(){return this.grid.store.getGroupState()},renderRows:function(){var n=this.getGroupField(),t=!!n,i,r;return this.hideGroupedColumn&&(i=this.cm.findColumnIndex(n),t||this.lastGroupField===undefined?t&&this.lastGroupField===undefined?(this.lastGroupField=n,this.cm.setHidden(i,!0)):t&&this.lastGroupField!==undefined&&n!==this.lastGroupField&&(this.mainBody.update(""),r=this.cm.findColumnIndex(this.lastGroupField),this.cm.setHidden(r,!1),this.lastGroupField=n,this.cm.setHidden(i,!0)):(this.mainBody.update(""),this.cm.setHidden(this.cm.findColumnIndex(this.lastGroupField),!1),delete this.lastGroupField)),Ext.grid.GroupingView.superclass.renderRows.apply(this,arguments)},doRender:function(n,t,i,r,u,f){var h,p,d,g,s,o;if(t.length<1)return"";if(h=this.getGroupField(),p=this.cm.findColumnIndex(h),this.enableGrouping=!!h,!this.enableGrouping||this.isUpdating)return Ext.grid.GroupingView.superclass.doRender.apply(this,arguments);for(var nt="width:"+this.getTotalWidth()+";",tt=this.grid.getGridEl().id,v=this.cm.config[p],it=v.groupRenderer||v.renderer,rt=this.showGroupName?(v.groupName||v.header)+": ":"",w=[],c,l,e=0,y=t.length;e<y;e++){var b=r+e,a=t[e],k=a.data[h],o=this.getGroup(k,a,it,b,p,i);c&&c.group==o?c.rs.push(a):(l=tt+"-gp-"+h+"-"+Ext.util.Format.htmlEncode(o),d=typeof this.state[l]!="undefined"?!this.state[l]:this.startCollapsed,g=d?"x-grid-group-collapsed":"",c={group:o,gvalue:k,text:rt+o,groupId:l,startRow:b,rs:[a],cls:g,style:nt},w.push(c));a._groupId=l}for(s=[],e=0,y=w.length;e<y;e++)o=w[e],this.doGroupStart(s,o,n,i,u),s[s.length]=Ext.grid.GroupingView.superclass.doRender.call(this,n,o.rs,i,o.startRow,u,f),this.doGroupEnd(s,o,n,i,u);return s.join("")},getGroupId:function(n){var u=this.grid.getGridEl().id,t=this.getGroupField(),i=this.cm.findColumnIndex(t),r=this.cm.config[i],f=r.groupRenderer||r.renderer,e=this.getGroup(n,{data:{}},f,0,i,this.ds);return u+"-gp-"+t+"-"+Ext.util.Format.htmlEncode(n)},doGroupStart:function(n,t){n[n.length]=this.startGroup.apply(t)},doGroupEnd:function(n){n[n.length]=this.endGroup},getRows:function(){var n,r,u,t,f,i,e;if(!this.enableGrouping)return Ext.grid.GroupingView.superclass.getRows.call(this);for(n=[],u=this.getGroups(),t=0,f=u.length;t<f;t++)for(r=u[t].childNodes[1].childNodes,i=0,e=r.length;i<e;i++)n[n.length]=r[i];return n},updateGroupWidths:function(){var i,t,n,r;if(this.enableGrouping&&this.hasRows())for(i=Math.max(this.cm.getTotalWidth(),this.el.dom.offsetWidth-this.scrollOffset)+"px",t=this.getGroups(),n=0,r=t.length;n<r;n++)t[n].firstChild.style.width=i},onColumnWidthUpdated:function(){this.updateGroupWidths()},onAllColumnWidthsUpdated:function(){this.updateGroupWidths()},onColumnHiddenUpdated:function(){this.updateGroupWidths()},onLayout:function(){this.updateGroupWidths()},onBeforeRowSelect:function(n,t){var i,r;this.enableGrouping&&(i=this.getRow(t),i&&!i.offsetParent&&(r=this.findGroup(i),this.toggleGroup(r,!0)))},groupByText:"Group By This Field",showGroupsText:"Show in Groups"});Ext.grid.GroupingView.GROUP_ID=1e3;Ext.grid.HeaderDragZone=function(n,t,i){this.grid=n;this.view=n.getView();this.ddGroup="gridHeader"+this.grid.getGridEl().id;Ext.grid.HeaderDragZone.superclass.constructor.call(this,t);i&&(this.setHandleElId(Ext.id(t)),this.setOuterHandleElId(Ext.id(i)));this.scroll=!1};Ext.extend(Ext.grid.HeaderDragZone,Ext.dd.DragZone,{maxDragWidth:120,getDragData:function(n){var i=Ext.lib.Event.getTarget(n),t=this.view.findHeaderCell(i);return t?{ddel:t.firstChild,header:t}:!1},onInitDrag:function(){this.view.headersDisabled=!0;var n=this.dragData.ddel.cloneNode(!0);return n.id=Ext.id(),n.style.width=Math.min(this.dragData.header.offsetWidth,this.maxDragWidth)+"px",this.proxy.update(n),!0},afterValidDrop:function(){var n=this.view;setTimeout(function(){n.headersDisabled=!1},50)},afterInvalidDrop:function(){var n=this.view;setTimeout(function(){n.headersDisabled=!1},50)}});Ext.grid.HeaderDropZone=function(n){this.grid=n;this.view=n.getView();this.proxyTop=Ext.DomHelper.append(document.body,{cls:"col-move-top",html:"&#160;"},!0);this.proxyBottom=Ext.DomHelper.append(document.body,{cls:"col-move-bottom",html:"&#160;"},!0);this.proxyTop.hide=this.proxyBottom.hide=function(){this.setLeftTop(-100,-100);this.setStyle("visibility","hidden")};this.ddGroup="gridHeader"+this.grid.getGridEl().id;Ext.grid.HeaderDropZone.superclass.constructor.call(this,n.getGridEl().dom)};Ext.extend(Ext.grid.HeaderDropZone,Ext.dd.DropZone,{proxyOffsets:[-4,-9],fly:Ext.Element.fly,getTargetFromEvent:function(n){var i=Ext.lib.Event.getTarget(n),t=this.view.findCellIndex(i);if(t!==!1)return this.view.getHeaderCell(t)},nextVisible:function(n){var t=this.view,i=this.grid.colModel;for(n=n.nextSibling;n;){if(!i.isHidden(t.getCellIndex(n)))return n;n=n.nextSibling}return null},prevVisible:function(n){var t=this.view,i=this.grid.colModel;for(n=n.prevSibling;n;){if(!i.isHidden(t.getCellIndex(n)))return n;n=n.prevSibling}return null},positionIndicator:function(n,t,i){var c=Ext.lib.Event.getPageX(i),u=Ext.lib.Dom.getRegion(t.firstChild),f,e,s=u.top+this.proxyOffsets[1],o,r,h;return(u.right-c<=(u.right-u.left)/2?(f=u.right+this.view.borderWidth,e="after"):(f=u.left,e="before"),o=this.view.getCellIndex(n),r=this.view.getCellIndex(t),this.grid.colModel.isFixed(r))?!1:(h=this.grid.colModel.isLocked(r),e=="after"&&r++,o<r&&r--,o==r&&h==this.grid.colModel.isLocked(o))?!1:(f+=this.proxyOffsets[0],this.proxyTop.setLeftTop(f,s),this.proxyTop.show(),this.bottomOffset||(this.bottomOffset=this.view.mainHd.getHeight()),this.proxyBottom.setLeftTop(f,s+this.proxyTop.dom.offsetHeight+this.bottomOffset),this.proxyBottom.show(),e)},onNodeEnter:function(n,t,i,r){r.header!=n&&this.positionIndicator(r.header,n,i)},onNodeOver:function(n,t,i,r){var u=!1;return r.header!=n&&(u=this.positionIndicator(r.header,n,i)),u||(this.proxyTop.hide(),this.proxyBottom.hide()),u?this.dropAllowed:this.dropNotAllowed},onNodeOut:function(){this.proxyTop.hide();this.proxyBottom.hide()},onNodeDrop:function(n,t,i,r){var s=r.header;if(s!=n){var e=this.grid.colModel,c=Ext.lib.Event.getPageX(i),o=Ext.lib.Dom.getRegion(n.firstChild),l=o.right-c<=(o.right-o.left)/2?"after":"before",f=this.view.getCellIndex(s),u=this.view.getCellIndex(n),h=e.isLocked(u);return(l=="after"&&u++,f<u&&u--,f==u&&h==e.isLocked(f))?!1:(e.setLocked(f,h,!0),e.moveColumn(f,u),this.grid.fireEvent("columnmove",f,u),!0)}return!1}});Ext.grid.GridView.ColumnDragZone=function(n,t){Ext.grid.GridView.ColumnDragZone.superclass.constructor.call(this,n,t,null);this.proxy.el.addClass("x-grid3-col-dd")};Ext.extend(Ext.grid.GridView.ColumnDragZone,Ext.grid.HeaderDragZone,{handleMouseDown:function(){},callHandleMouseDown:function(n){Ext.grid.GridView.ColumnDragZone.superclass.handleMouseDown.call(this,n)}});Ext.grid.SplitDragZone=function(n,t,i){this.grid=n;this.view=n.getView();this.proxy=this.view.resizeProxy;Ext.grid.SplitDragZone.superclass.constructor.call(this,t,"gridSplitters"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:!1});this.setHandleElId(Ext.id(t));this.setOuterHandleElId(Ext.id(i));this.scroll=!1};Ext.extend(Ext.grid.SplitDragZone,Ext.dd.DDProxy,{fly:Ext.Element.fly,b4StartDrag:function(n,t){this.view.headersDisabled=!0;this.proxy.setHeight(this.view.mainWrap.getHeight());var r=this.cm.getColumnWidth(this.cellIndex),i=Math.max(r-this.grid.minColumnWidth,0);this.resetConstraints();this.setXConstraint(i,1e3);this.setYConstraint(0,0);this.minX=n-i;this.maxX=n+1e3;this.startPos=n;Ext.dd.DDProxy.prototype.b4StartDrag.call(this,n,t)},handleMouseDown:function(n){ev=Ext.EventObject.setEvent(n);var t=this.fly(ev.getTarget());t.hasClass("x-grid-split")&&(this.cellIndex=this.view.getCellIndex(t.dom),this.split=t.dom,this.cm=this.grid.colModel,this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)&&Ext.grid.SplitDragZone.superclass.handleMouseDown.apply(this,arguments))},endDrag:function(n){this.view.headersDisabled=!1;var t=Math.max(this.minX,Ext.lib.Event.getPageX(n)),i=t-this.startPos;this.view.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+i)},autoOffset:function(){this.setDelta(0,0)}});Ext.grid.GridDragZone=function(n,t){this.view=n.getView();Ext.grid.GridDragZone.superclass.constructor.call(this,this.view.mainBody.dom,t);this.view.lockedBody&&(this.setHandleElId(Ext.id(this.view.mainBody.dom)),this.setOuterHandleElId(Ext.id(this.view.lockedBody.dom)));this.scroll=!1;this.grid=n;this.ddel=document.createElement("div");this.ddel.className="x-grid-dd-wrap"};Ext.extend(Ext.grid.GridDragZone,Ext.dd.DragZone,{ddGroup:"GridDD",getDragData:function(n){var r=Ext.lib.Event.getTarget(n),t=this.view.findRowIndex(r),i;return t!==!1?(i=this.grid.selModel,(!i.isSelected(t)||n.hasModifier())&&i.handleMouseDown(this.grid,t,n),{grid:this.grid,ddel:this.ddel,rowIndex:t,selections:i.getSelections()}):!1},onInitDrag:function(){var n=this.dragData;this.ddel.innerHTML=this.grid.getDragDropText();this.proxy.update(this.ddel)},afterRepair:function(){this.dragging=!1},getRepairXY:function(){return!1},onEndDrag:function(){},onValidDrop:function(){this.hideProxy()},beforeInvalidDrop:function(){}});Ext.grid.ColumnModel=function(n){this.setConfig(n,!0);this.defaultWidth=100;this.defaultSortable=!1;this.addEvents("widthchange","headerchange","hiddenchange","columnmoved","columnlockchange","configchange");Ext.grid.ColumnModel.superclass.constructor.call(this)};Ext.extend(Ext.grid.ColumnModel,Ext.util.Observable,{getColumnId:function(n){return this.config[n].id},setConfig:function(n,t){var r,u,i;if(!t)for(delete this.totalWidth,r=0,u=this.config.length;r<u;r++)i=this.config[r],i.editor&&i.editor.destroy();for(this.config=n,this.lookup={},r=0,u=n.length;r<u;r++)i=n[r],typeof i.renderer=="string"&&(i.renderer=Ext.util.Format[i.renderer]),typeof i.id=="undefined"&&(i.id=r),i.editor&&i.editor.isFormField&&(i.editor=new Ext.grid.GridEditor(i.editor)),this.lookup[i.id]=i;t||this.fireEvent("configchange",this)},getColumnById:function(n){return this.lookup[n]},getIndexById:function(n){for(var t=0,i=this.config.length;t<i;t++)if(this.config[t].id==n)return t;return-1},moveColumn:function(n,t){var i=this.config[n];this.config.splice(n,1);this.config.splice(t,0,i);this.dataMap=null;this.fireEvent("columnmoved",this,n,t)},isLocked:function(n){return this.config[n].locked===!0},setLocked:function(n,t,i){this.isLocked(n)!=t&&(this.config[n].locked=t,i||this.fireEvent("columnlockchange",this,n,t))},getTotalLockedWidth:function(){for(var n=0;n<this.config.length;n++)this.isLocked(n)&&!this.isHidden(n)&&(this.totalWidth+=this.getColumnWidth(n));return 0},getLockedCount:function(){for(var n=0,t=this.config.length;n<t;n++)if(!this.isLocked(n))return n},getColumnCount:function(n){var i,t,r;if(n===!0){for(i=0,t=0,r=this.config.length;t<r;t++)this.isHidden(t)||i++;return i}return this.config.length},getColumnsBy:function(n,t){for(var u,r=[],i=0,f=this.config.length;i<f;i++)u=this.config[i],n.call(t||this,u,i)===!0&&(r[r.length]=u);return r},isSortable:function(n){return typeof this.config[n].sortable=="undefined"?this.defaultSortable:this.config[n].sortable},getRenderer:function(n){return this.config[n].renderer?this.config[n].renderer:Ext.grid.ColumnModel.defaultRenderer},setRenderer:function(n,t){this.config[n].renderer=t},getColumnWidth:function(n){return this.config[n].width||this.defaultWidth},setColumnWidth:function(n,t,i){this.config[n].width=t;this.totalWidth=null;i||this.fireEvent("widthchange",this,n,t)},getTotalWidth:function(n){if(!this.totalWidth){this.totalWidth=0;for(var t=0,i=this.config.length;t<i;t++)(n||!this.isHidden(t))&&(this.totalWidth+=this.getColumnWidth(t))}return this.totalWidth},getColumnHeader:function(n){return this.config[n].header},setColumnHeader:function(n,t){this.config[n].header=t;this.fireEvent("headerchange",this,n,t)},getColumnTooltip:function(n){return this.config[n].tooltip},setColumnTooltip:function(n,t){this.config[n].tooltip=t},getDataIndex:function(n){return this.config[n].dataIndex},setDataIndex:function(n,t){this.config[n].dataIndex=t},findColumnIndex:function(n){for(var i=this.config,t=0,r=i.length;t<r;t++)if(i[t].dataIndex==n)return t;return-1},isCellEditable:function(n){return this.config[n].editable||typeof this.config[n].editable=="undefined"&&this.config[n].editor?!0:!1},getCellEditor:function(n){return this.config[n].editor},setEditable:function(n,t){this.config[n].editable=t},isHidden:function(n){return this.config[n].hidden},isFixed:function(n){return this.config[n].fixed},isResizable:function(n){return n>=0&&this.config[n].resizable!==!1&&this.config[n].fixed!==!0},setHidden:function(n,t){var i=this.config[n];i.hidden!==t&&(i.hidden=t,this.totalWidth=null,this.fireEvent("hiddenchange",this,n,t))},setEditor:function(n,t){this.config[n].editor=t}});Ext.grid.ColumnModel.defaultRenderer=function(n){return typeof n=="string"&&n.length<1?"&#160;":n};Ext.grid.DefaultColumnModel=Ext.grid.ColumnModel;Ext.grid.AbstractSelectionModel=function(){this.locked=!1;Ext.grid.AbstractSelectionModel.superclass.constructor.call(this)};Ext.extend(Ext.grid.AbstractSelectionModel,Ext.util.Observable,{init:function(n){this.grid=n;this.initEvents()},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},isLocked:function(){return this.locked}});Ext.grid.RowSelectionModel=function(n){Ext.apply(this,n);this.selections=new Ext.util.MixedCollection(!1,function(n){return n.id});this.last=!1;this.lastActive=!1;this.addEvents("selectionchange","beforerowselect","rowselect","rowdeselect");Ext.grid.RowSelectionModel.superclass.constructor.call(this)};Ext.extend(Ext.grid.RowSelectionModel,Ext.grid.AbstractSelectionModel,{singleSelect:!1,initEvents:function(){if(this.grid.enableDragDrop||this.grid.enableDrag)this.grid.on("rowclick",function(n,t,i){i.button!==0||i.shiftKey||i.ctrlKey||(this.selectRow(t,!1),n.view.focusRow(t))},this);else this.grid.on("rowmousedown",this.handleMouseDown,this);this.rowNav=new Ext.KeyNav(this.grid.getGridEl(),{up:function(n){if(n.shiftKey)if(this.last!==!1&&this.lastActive!==!1){var t=this.last;this.selectRange(this.last,this.lastActive-1);this.grid.getView().focusRow(this.lastActive);t!==!1&&(this.last=t)}else this.selectFirstRow();else this.selectPrevious(n.shiftKey)},down:function(n){if(n.shiftKey)if(this.last!==!1&&this.lastActive!==!1){var t=this.last;this.selectRange(this.last,this.lastActive+1);this.grid.getView().focusRow(this.lastActive);t!==!1&&(this.last=t)}else this.selectFirstRow();else this.selectNext(n.shiftKey)},scope:this});var n=this.grid.view;n.on("refresh",this.onRefresh,this);n.on("rowupdated",this.onRowUpdated,this);n.on("rowremoved",this.onRemove,this)},onRefresh:function(){var f=this.grid.store,i,t=this.getSelections(),n,r,u;for(this.clearSelections(!0),n=0,r=t.length;n<r;n++)u=t[n],(i=f.indexOfId(u.id))!=-1&&this.selectRow(i,!0);t.length!=this.selections.getCount()&&this.fireEvent("selectionchange",this)},onRemove:function(n,t,i){this.selections.remove(i)!==!1&&this.fireEvent("selectionchange",this)},onRowUpdated:function(n,t,i){if(this.isSelected(i))n.onRowSelect(t)},selectRecords:function(n,t){var r,i,u;for(t||this.clearSelections(),r=this.grid.store,i=0,u=n.length;i<u;i++)this.selectRow(r.indexOf(n[i]),!0)},getCount:function(){return this.selections.length},selectFirstRow:function(){this.selectRow(0)},selectLastRow:function(n){this.selectRow(this.grid.store.getCount()-1,n)},selectNext:function(n){return this.hasNext()?(this.selectRow(this.last+1,n),this.grid.getView().focusRow(this.last),!0):!1},selectPrevious:function(n){return this.hasPrevious()?(this.selectRow(this.last-1,n),this.grid.getView().focusRow(this.last),!0):!1},hasNext:function(){return this.last!==!1&&this.last+1<this.grid.store.getCount()},hasPrevious:function(){return!!this.last},getSelections:function(){return[].concat(this.selections.items)},getSelected:function(){return this.selections.itemAt(0)},each:function(n,t){for(var r=this.getSelections(),i=0,u=r.length;i<u;i++)if(n.call(t||this,r[i],i)===!1)return!1;return!0},clearSelections:function(n){if(!this.locked){if(n!==!0){var i=this.grid.store,t=this.selections;t.each(function(n){this.deselectRow(i.indexOfId(n.id))},this);t.clear()}else this.selections.clear();this.last=!1}},selectAll:function(){if(!this.locked){this.selections.clear();for(var n=0,t=this.grid.store.getCount();n<t;n++)this.selectRow(n,!0)}},hasSelection:function(){return this.selections.length>0},isSelected:function(n){var t=typeof n=="number"?this.grid.store.getAt(n):n;return t&&this.selections.key(t.id)?!0:!1},isIdSelected:function(n){return this.selections.key(n)?!0:!1},handleMouseDown:function(n,t,i){var r,u,f;i.button!==0||this.isLocked()||(r=this.grid.getView(),i.shiftKey&&this.last!==!1?(u=this.last,this.selectRange(u,t,i.ctrlKey),this.last=u,r.focusRow(t)):(f=this.isSelected(t),i.ctrlKey&&f?this.deselectRow(t):(!f||this.getCount()>1)&&(this.selectRow(t,i.ctrlKey||i.shiftKey),r.focusRow(t))))},selectRows:function(n,t){t||this.clearSelections();for(var i=0,r=n.length;i<r;i++)this.selectRow(n[i],!0)},selectRange:function(n,t,i){var r;if(!this.locked)if(i||this.clearSelections(),n<=t)for(r=n;r<=t;r++)this.selectRow(r,!0);else for(r=n;r>=t;r--)this.selectRow(r,!0)},deselectRange:function(n,t,i){if(!this.locked)for(var r=n;r<=t;r++)this.deselectRow(r,i)},selectRow:function(n,t,i){if(!this.locked&&!(n<0)&&!(n>=this.grid.store.getCount())){var r=this.grid.store.getAt(n);if(r&&this.fireEvent("beforerowselect",this,n,t,r)!==!1){if((!t||this.singleSelect)&&this.clearSelections(),this.selections.add(r),this.last=this.lastActive=n,!i)this.grid.getView().onRowSelect(n);this.fireEvent("rowselect",this,n,r);this.fireEvent("selectionchange",this)}}},deselectRow:function(n,t){if(!this.locked){this.last==n&&(this.last=!1);this.lastActive==n&&(this.lastActive=!1);var i=this.grid.store.getAt(n);if(i){if(this.selections.remove(i),!t)this.grid.getView().onRowDeselect(n);this.fireEvent("rowdeselect",this,n,i);this.fireEvent("selectionchange",this)}}},restoreLast:function(){this._last&&(this.last=this._last)},acceptsNav:function(n,t,i){return!i.isHidden(t)&&i.isCellEditable(t,n)},onEditorKey:function(n,t){var f=t.getKey(),u,r=this.grid,i=r.activeEditor,e=t.shiftKey;f==t.TAB?(t.stopEvent(),i.completeEdit(),u=e?r.walkCells(i.row,i.col-1,-1,this.acceptsNav,this):r.walkCells(i.row,i.col+1,1,this.acceptsNav,this)):f==t.ENTER?(t.stopEvent(),i.completeEdit(),u=e?r.walkCells(i.row-1,i.col,-1,this.acceptsNav,this):r.walkCells(i.row+1,i.col,1,this.acceptsNav,this)):f==t.ESC&&i.cancelEdit();u&&r.startEditing(u[0],u[1])}});Ext.grid.CellSelectionModel=function(n){Ext.apply(this,n);this.selection=null;this.addEvents("beforecellselect","cellselect","selectionchange");Ext.grid.CellSelectionModel.superclass.constructor.call(this)};Ext.extend(Ext.grid.CellSelectionModel,Ext.grid.AbstractSelectionModel,{initEvents:function(){this.grid.on("cellmousedown",this.handleMouseDown,this);this.grid.getGridEl().on(Ext.isIE?"keydown":"keypress",this.handleKeyDown,this);var n=this.grid.view;n.on("refresh",this.onViewChange,this);n.on("rowupdated",this.onRowUpdated,this);n.on("beforerowremoved",this.clearSelections,this);n.on("beforerowsinserted",this.clearSelections,this);if(this.grid.isEditor)this.grid.on("beforeedit",this.beforeEdit,this)},beforeEdit:function(n){this.select(n.row,n.column,!1,!0,n.record)},onRowUpdated:function(n,t,i){if(this.selection&&this.selection.record==i)n.onCellSelect(t,this.selection.cell[1])},onViewChange:function(){this.clearSelections(!0)},getSelectedCell:function(){return this.selection?this.selection.cell:null},clearSelections:function(n){var t=this.selection;if(t){if(n!==!0)this.grid.view.onCellDeselect(t.cell[0],t.cell[1]);this.selection=null;this.fireEvent("selectionchange",this,null)}},hasSelection:function(){return this.selection?!0:!1},handleMouseDown:function(n,t,i,r){r.button!==0||this.isLocked()||this.select(t,i)},select:function(n,t,i,r,u){if(this.fireEvent("beforecellselect",this,n,t)!==!1){if(this.clearSelections(),u=u||this.grid.store.getAt(n),this.selection={record:u,cell:[n,t]},!i){var f=this.grid.getView();f.onCellSelect(n,t);r!==!0&&f.focusCell(n,t)}this.fireEvent("cellselect",this,n,t);this.fireEvent("selectionchange",this,this.selection)}},isSelectable:function(n,t,i){return!i.isHidden(t)},handleKeyDown:function(n){var u,e,o;if(n.isNavKeyPress()){if(u=this.grid,e=this.selection,!e){n.stopEvent();o=u.walkCells(0,0,1,this.isSelectable,this);o&&this.select(o[0],o[1]);return}var s=this,f=function(n,t,i){return u.walkCells(n,t,i,s.isSelectable,s)},h=n.getKey(),i=e.cell[0],r=e.cell[1],t;switch(h){case n.TAB:t=n.shiftKey?f(i,r-1,-1):f(i,r+1,1);break;case n.DOWN:t=f(i+1,r,1);break;case n.UP:t=f(i-1,r,-1);break;case n.RIGHT:t=f(i,r+1,1);break;case n.LEFT:t=f(i,r-1,-1);break;case n.ENTER:if(u.isEditor&&!u.editing){u.startEditing(i,r);n.stopEvent();return}}t&&(this.select(t[0],t[1]),n.stopEvent())}},acceptsNav:function(n,t,i){return!i.isHidden(t)&&i.isCellEditable(t,n)},onEditorKey:function(n,t){var f=t.getKey(),r,u=this.grid,i=u.activeEditor;f==t.TAB?(r=t.shiftKey?u.walkCells(i.row,i.col-1,-1,this.acceptsNav,this):u.walkCells(i.row,i.col+1,1,this.acceptsNav,this),t.stopEvent()):f==t.ENTER?(i.completeEdit(),t.stopEvent()):f==t.ESC&&(t.stopEvent(),i.cancelEdit());r&&u.startEditing(r[0],r[1])}});Ext.grid.EditorGridPanel=Ext.extend(Ext.grid.GridPanel,{clicksToEdit:2,isEditor:!0,detectEdit:!1,autoEncode:!1,trackMouseOver:!1,initComponent:function(){Ext.grid.EditorGridPanel.superclass.initComponent.call(this);this.selModel||(this.selModel=new Ext.grid.CellSelectionModel);this.activeEditor=null;this.addEvents("beforeedit","afteredit","validateedit")},initEvents:function(){Ext.grid.EditorGridPanel.superclass.initEvents.call(this);this.on("bodyscroll",this.stopEditing,this);if(this.clicksToEdit==1)this.on("cellclick",this.onCellDblClick,this);else{if(this.clicksToEdit=="auto"&&this.view.mainBody)this.view.mainBody.on("mousedown",this.onAutoEditClick,this);this.on("celldblclick",this.onCellDblClick,this)}this.getGridEl().addClass("xedit-grid")},onCellDblClick:function(n,t,i){this.startEditing(t,i)},onAutoEditClick:function(n,t){var i=this.view.findRowIndex(t),r=this.view.findCellIndex(t),u;i!==!1&&r!==!1&&(this.selModel.getSelectedCell?(u=this.selModel.getSelectedCell(),u&&u.cell[0]===i&&u.cell[1]===r&&this.startEditing(i,r)):this.selModel.isSelected(i)&&this.startEditing(i,r))},onEditComplete:function(n,t,i){var u,f,r;this.editing=!1;this.activeEditor=null;n.un("specialkey",this.selModel.onEditorKey,this.selModel);u=n.record;f=this.colModel.getDataIndex(n.col);t=this.postEditValue(t,i,u,f);String(t)!==String(i)&&(r={grid:this,record:u,field:f,originalValue:i,value:t,row:n.row,column:n.col,cancel:!1},this.fireEvent("validateedit",r)===!1||r.cancel||(u.set(f,r.value),delete r.cancel,this.fireEvent("afteredit",r)));this.view.focusCell(n.row,n.col)},startEditing:function(n,t){var i;if(this.stopEditing(),this.colModel.isCellEditable(t,n)){this.view.ensureVisible(n,t,!0);var r=this.store.getAt(n),u=this.colModel.getDataIndex(t),f={grid:this,record:r,field:u,value:r.data[u],row:n,column:t,cancel:!1};this.fireEvent("beforeedit",f)===!1||f.cancel||(this.editing=!0,i=this.colModel.getCellEditor(t,n),i.rendered||i.render(this.view.getEditorParent(i)),function(){i.row=n;i.col=t;i.record=r;i.on("complete",this.onEditComplete,this,{single:!0});i.on("specialkey",this.selModel.onEditorKey,this.selModel);this.activeEditor=i;var f=this.preEditValue(r,u);i.startEdit(this.view.getCell(n,t),f)}.defer(50,this))}},preEditValue:function(n,t){return this.autoEncode?Ext.util.Format.htmlDecode(n.data[t]):n.data[t]},postEditValue:function(n){return this.autoEncode?Ext.util.Format.htmlEncode(n):n},stopEditing:function(){this.activeEditor&&this.activeEditor.completeEdit();this.activeEditor=null}});Ext.reg("editorgrid",Ext.grid.EditorGridPanel);Ext.grid.GridEditor=function(n,t){Ext.grid.GridEditor.superclass.constructor.call(this,n,t);n.monitorTab=!1};Ext.extend(Ext.grid.GridEditor,Ext.Editor,{alignment:"tl-tl",autoSize:"width",hideEl:!1,cls:"x-small-editor x-grid-editor",shim:!1,shadow:!1});Ext.grid.PropertyRecord=Ext.data.Record.create([{name:"name",type:"string"},"value"]);Ext.grid.PropertyStore=function(n,t){this.grid=n;this.store=new Ext.data.Store({recordType:Ext.grid.PropertyRecord});this.store.on("update",this.onUpdate,this);t&&this.setSource(t);Ext.grid.PropertyStore.superclass.constructor.call(this)};Ext.extend(Ext.grid.PropertyStore,Ext.util.Observable,{setSource:function(n){var i,t;this.source=n;this.store.removeAll();i=[];for(t in n)this.isEditableValue(n[t])&&i.push(new Ext.grid.PropertyRecord({name:t,value:n[t]},t));this.store.loadRecords({records:i},{},!0)},onUpdate:function(n,t,i){if(i==Ext.data.Record.EDIT){var r=t.data.value,u=t.modified.value;this.grid.fireEvent("beforepropertychange",this.source,t.id,r,u)!==!1?(this.source[t.id]=r,t.commit(),this.grid.fireEvent("propertychange",this.source,t.id,r,u)):t.reject()}},getProperty:function(n){return this.store.getAt(n)},isEditableValue:function(n){return n&&n instanceof Date?!0:typeof n=="object"||typeof n=="function"?!1:!0},setValue:function(n,t){this.source[n]=t;this.store.getById(n).set("value",t)},getSource:function(){return this.source}});Ext.grid.PropertyColumnModel=function(n,t){var i,r,u;this.grid=n;i=Ext.grid;i.PropertyColumnModel.superclass.constructor.call(this,[{header:this.nameText,width:50,sortable:!0,dataIndex:"name",id:"name"},{header:this.valueText,width:50,resizable:!1,dataIndex:"value",id:"value"}]);this.store=t;this.bselect=Ext.DomHelper.append(document.body,{tag:"select",cls:"x-grid-editor x-hide-display",children:[{tag:"option",value:"true",html:"true"},{tag:"option",value:"false",html:"false"}]});r=Ext.form;u=new r.Field({el:this.bselect,bselect:this.bselect,autoShow:!0,getValue:function(){return this.bselect.value=="true"}});this.editors={date:new i.GridEditor(new r.DateField({selectOnFocus:!0})),string:new i.GridEditor(new r.TextField({selectOnFocus:!0})),number:new i.GridEditor(new r.NumberField({selectOnFocus:!0,style:"text-align:left;"})),boolean:new i.GridEditor(u)};this.renderCellDelegate=this.renderCell.createDelegate(this);this.renderPropDelegate=this.renderProp.createDelegate(this)};Ext.extend(Ext.grid.PropertyColumnModel,Ext.grid.ColumnModel,{nameText:"Name",valueText:"Value",dateFormat:"m/j/Y",renderDate:function(n){return n.dateFormat(this.dateFormat)},renderBool:function(n){return n?"true":"false"},isCellEditable:function(n){return n==1},getRenderer:function(n){return n==1?this.renderCellDelegate:this.renderPropDelegate},renderProp:function(n){return this.getPropertyName(n)},renderCell:function(n){var t=n;return n instanceof Date?t=this.renderDate(n):typeof n=="boolean"&&(t=this.renderBool(n)),Ext.util.Format.htmlEncode(t)},getPropertyName:function(n){var t=this.grid.propertyNames;return t&&t[n]?t[n]:n},getCellEditor:function(n,t){var r=this.store.getProperty(t),u=r.data.name,i=r.data.value;return this.grid.customEditors[u]?this.grid.customEditors[u]:i instanceof Date?this.editors.date:typeof i=="number"?this.editors.number:typeof i=="boolean"?this.editors.boolean:this.editors.string}});Ext.grid.PropertyGrid=Ext.extend(Ext.grid.EditorGridPanel,{enableColumnMove:!1,stripeRows:!1,trackMouseOver:!1,clicksToEdit:1,enableHdMenu:!1,viewConfig:{forceFit:!0},initComponent:function(){var n,t;this.customEditors=this.customEditors||{};this.lastEditRow=null;n=new Ext.grid.PropertyStore(this);this.propStore=n;t=new Ext.grid.PropertyColumnModel(this,n);n.store.sort("name","ASC");this.addEvents("beforepropertychange","propertychange");this.cm=t;this.ds=n.store;Ext.grid.PropertyGrid.superclass.initComponent.call(this);this.selModel.on("beforecellselect",function(n,t,i){if(i===0)return this.startEditing.defer(200,this,[t,1]),!1},this)},onRender:function(){Ext.grid.PropertyGrid.superclass.onRender.apply(this,arguments);this.getGridEl().addClass("x-props-grid")},afterRender:function(){Ext.grid.PropertyGrid.superclass.afterRender.apply(this,arguments);this.source&&this.setSource(this.source)},setSource:function(n){this.propStore.setSource(n)},getSource:function(){return this.propStore.getSource()}});Ext.grid.RowNumberer=function(n){Ext.apply(this,n);this.rowspan&&(this.renderer=this.renderer.createDelegate(this))};Ext.grid.RowNumberer.prototype={header:"",width:23,sortable:!1,fixed:!0,dataIndex:"",id:"numberer",rowspan:undefined,renderer:function(n,t,i,r){return this.rowspan&&(t.cellAttr='rowspan="'+this.rowspan+'"'),r+1}};Ext.grid.CheckboxSelectionModel=Ext.extend(Ext.grid.RowSelectionModel,{header:'<div class="x-grid3-hd-checker">&#160;<\/div>',width:20,sortable:!1,fixed:!0,dataIndex:"",id:"checker",initEvents:function(){Ext.grid.CheckboxSelectionModel.superclass.initEvents.call(this);this.grid.on("render",function(){var n=this.grid.getView();n.mainBody.on("mousedown",this.onMouseDown,this);Ext.fly(n.innerHd).on("mousedown",this.onHdMouseDown,this)},this)},onMouseDown:function(n,t){var r,i;n.button===0&&t.className=="x-grid3-row-checker"&&(n.stopEvent(),r=n.getTarget(".x-grid3-row"),r&&(i=r.rowIndex,this.isSelected(i)?this.deselectRow(i):this.selectRow(i,!0)))},onHdMouseDown:function(n,t){if(t.className=="x-grid3-hd-checker"){n.stopEvent();var i=Ext.fly(t.parentNode),r=i.hasClass("x-grid3-hd-checker-on");r?(i.removeClass("x-grid3-hd-checker-on"),this.clearSelections()):(i.addClass("x-grid3-hd-checker-on"),this.selectAll())}},renderer:function(){return'<div class="x-grid3-row-checker">&#160;<\/div>'}});Ext.LoadMask=function(n,t){if(this.el=Ext.get(n),Ext.apply(this,t),this.store){this.store.on("beforeload",this.onBeforeLoad,this);this.store.on("load",this.onLoad,this);this.store.on("loadexception",this.onLoad,this);this.removeMask=Ext.value(this.removeMask,!1)}else{var i=this.el.getUpdater();i.showLoadIndicator=!1;i.on("beforeupdate",this.onBeforeLoad,this);i.on("update",this.onLoad,this);i.on("failure",this.onLoad,this);this.removeMask=Ext.value(this.removeMask,!0)}};Ext.LoadMask.prototype={msg:"Loading...",msgCls:"x-mask-loading",disabled:!1,disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},onLoad:function(){this.el.unmask(this.removeMask)},onBeforeLoad:function(){this.disabled||this.el.mask(this.msg,this.msgCls)},show:function(){this.onBeforeLoad()},hide:function(){this.onLoad()},destroy:function(){if(this.store)this.store.un("beforeload",this.onBeforeLoad,this),this.store.un("load",this.onLoad,this),this.store.un("loadexception",this.onLoad,this);else{var n=this.el.getUpdater();n.un("beforeupdate",this.onBeforeLoad,this);n.un("update",this.onLoad,this);n.un("failure",this.onLoad,this)}}};Ext.ProgressBar=Ext.extend(Ext.BoxComponent,{baseCls:"x-progress",waitTimer:null,initComponent:function(){Ext.ProgressBar.superclass.initComponent.call(this);this.addEvents("update")},onRender:function(n,t){var r,i,u;Ext.ProgressBar.superclass.onRender.call(this,n,t);r=new Ext.Template('<div class="{cls}-wrap">','<div class="{cls}-inner">','<div class="{cls}-bar">','<div class="{cls}-text">',"<div>&#160;<\/div>","<\/div>","<\/div>",'<div class="{cls}-text {cls}-text-back">',"<div>&#160;<\/div>","<\/div>","<\/div>","<\/div>");this.el=t?r.insertBefore(t,{cls:this.baseCls},!0):r.append(n,{cls:this.baseCls},!0);this.id&&(this.el.dom.id=this.id);i=this.el.dom.firstChild;this.progressBar=Ext.get(i.firstChild);this.textEl?(this.textEl=Ext.get(this.textEl),delete this.textTopEl):(this.textTopEl=Ext.get(this.progressBar.dom.firstChild),u=Ext.get(i.childNodes[1]),this.textTopEl.setStyle("z-index",99).addClass("x-hidden"),this.textEl=new Ext.CompositeElement([this.textTopEl.dom.firstChild,u.dom.firstChild]),this.textEl.setWidth(i.offsetWidth));this.value?this.updateProgress(this.value,this.text):this.updateText(this.text);this.setSize(this.width||"auto","auto");this.progressBar.setHeight(i.offsetHeight)},updateProgress:function(n,t){this.value=n||0;t&&this.updateText(t);var i=Math.floor(n*this.el.dom.firstChild.offsetWidth);return this.progressBar.setWidth(i),this.textTopEl&&this.textTopEl.removeClass("x-hidden").setWidth(i),this.fireEvent("update",this,n,t),this},wait:function(n){if(!this.waitTimer){var t=this;n=n||{};this.waitTimer=Ext.TaskMgr.start({run:function(t){var i=n.increment||10;this.updateProgress(((t+i)%i+1)*(100/i)*.01)},interval:n.interval||1e3,duration:n.duration,onStop:function(){n.fn&&n.fn.apply(n.scope||this);this.reset()},scope:t})}return this},isWaiting:function(){return this.waitTimer!=null},updateText:function(n){return this.text=n||"&#160;",this.textEl.update(this.text),this},setSize:function(n,t){if(Ext.ProgressBar.superclass.setSize.call(this,n,t),this.textTopEl){var i=this.el.dom.firstChild;this.textEl.setSize(i.offsetWidth,i.offsetHeight)}return this},reset:function(n){return this.updateProgress(0),this.textTopEl&&this.textTopEl.addClass("x-hidden"),this.waitTimer&&(this.waitTimer.onStop=null,Ext.TaskMgr.stop(this.waitTimer),this.waitTimer=null),n===!0&&this.hide(),this}});Ext.reg("progress",Ext.ProgressBar);Ext.debug={},function(){function t(){function t(){n.setWidth(Ext.getBody().getViewSize().width)}var r=new Ext.debug.ScriptsPanel,i=new Ext.debug.LogPanel,u=new Ext.debug.DomTree,f=new Ext.TabPanel({activeTab:0,border:!1,tabPosition:"bottom",items:[{title:"Debug Console",layout:"border",items:[i,r]},{title:"DOM Inspector",layout:"border",items:[u]}]});n=new Ext.Panel({id:"x-debug-browser",title:"Console",collapsible:!0,animCollapse:!1,style:"position:absolute;left:0;bottom:0;",height:200,logView:i,layout:"fit",tools:[{id:"close",handler:function(){n.destroy();n=null;Ext.EventManager.removeResizeListener(t)}}],items:f});n.render(document.body);n.resizer=new Ext.Resizable(n.el,{minHeight:50,handles:"n",pinned:!0,transparent:!0,resizeElement:function(){var t=this.proxy.getBox();return this.proxy.hide(),n.setHeight(t.height),t}});Ext.EventManager.onWindowResize(t);t()}var n;Ext.apply(Ext,{log:function(){n||t();n.logView.log.apply(n.logView,arguments)},logf:function(){Ext.log(String.format.apply(String,arguments))},dump:function(n){var r,i,u,t;if(typeof n=="string"||typeof n=="number"||typeof n=="undefined"||n instanceof Date)Ext.log(n);else if(n)if(typeof n!="object")Ext.log("Unknown return type");else if(n instanceof Array)Ext.log("["+n.join(",")+"]");else{r=["{\n"];for(i in n)u=typeof n[i],u!="function"&&u!="object"&&r.push(String.format("  {0}: {1},\n",i,n[i]));t=r.join("");t.length>3&&(t=t.substr(0,t.length-2));Ext.log(t+"\n}")}else Ext.log("null")},_timers:{},time:function(n){n=n||"def";Ext._timers[n]=(new Date).getTime()},timeEnd:function(n,t){var r=(new Date).getTime(),i;return n=n||"def",i=String.format("{0} ms",r-Ext._timers[n]),Ext._timers[n]=(new Date).getTime(),t!==!1&&Ext.log("Timer "+(n=="def"?i:n+": "+i)),i}})}();Ext.debug.ScriptsPanel=Ext.extend(Ext.Panel,{id:"x-debug-scripts",region:"east",minWidth:200,split:!0,width:350,border:!1,layout:"anchor",style:"border-width:0 0 0 1px;",initComponent:function(){this.scriptField=new Ext.form.TextArea({anchor:"100% -26",style:"border-width:0;"});this.trapBox=new Ext.form.Checkbox({id:"console-trap",boxLabel:"Trap Errors",checked:!0});this.toolbar=new Ext.Toolbar([{text:"Run",scope:this,handler:this.evalScript},{text:"Clear",scope:this,handler:this.clear},"->",this.trapBox," "," "]);this.items=[this.toolbar,this.scriptField];Ext.debug.ScriptsPanel.superclass.initComponent.call(this)},evalScript:function(){var t=this.scriptField.getValue(),n;if(this.trapBox.getValue())try{n=eval(t);Ext.dump(n===undefined?"(no return)":n)}catch(i){Ext.log(i.message||i.descript)}else n=eval(t),Ext.dump(n===undefined?"(no return)":n)},clear:function(){this.scriptField.setValue("");this.scriptField.focus()}});Ext.debug.LogPanel=Ext.extend(Ext.Panel,{autoScroll:!0,region:"center",border:!1,style:"border-width:0 1px 0 0",log:function(){var n=['<div style="padding:5px !important;border-bottom:1px solid #ccc;">',Ext.util.Format.htmlEncode(Array.prototype.join.call(arguments,", ")).replace(/\n/g,"<br />").replace(/\s/g,"&#160;"),"<\/div>"].join("");this.body.insertHtml("beforeend",n);this.body.scrollTo("top",1e5)},clear:function(){this.body.update("");this.body.dom.scrollTop=0}});Ext.debug.DomTree=Ext.extend(Ext.tree.TreePanel,{enableDD:!1,lines:!1,rootVisible:!1,animate:!1,hlColor:"ffff9c",autoScroll:!0,region:"center",border:!1,initComponent:function(){function e(n){var t=n.tagName;return n.id?t+="#"+n.id:n.className&&(t+="."+n.className),t}Ext.debug.DomTree.superclass.initComponent.call(this);var n=!1,t,i=/^\s*$/,r=Ext.util.Format.htmlEncode,u=Ext.util.Format.ellipsis,f=/\s?([a-z\-]*)\:([^;]*)(?:[;\s\n\r]*)/gi;this.loader=new Ext.tree.TreeLoader;this.loader.load=function(n,t){for(var o=n.htmlNode==document.body,s=n.htmlNode.childNodes,e=0,f;f=s[e];e++)o&&f.id=="x-debug-browser"||(f.nodeType==1?n.appendChild(new Ext.debug.HtmlNode(f)):f.nodeType!=3||i.test(f.nodeValue)||n.appendChild(new Ext.tree.TreeNode({text:"<em>"+u(r(String(f.nodeValue)),35)+"<\/em>",cls:"x-tree-noicon"})));t()};this.root=this.setRootNode(new Ext.tree.TreeNode("Ext"));t=this.root.appendChild(new Ext.debug.HtmlNode(document.getElementsByTagName("html")[0]))}});Ext.debug.HtmlNode=function(){function r(n){for(var t=0,i;i=n.childNodes[t];t++)if(i.nodeType==1)return!0;return!1}function u(n,r){for(var h,u,c,l=n.tagName.toLowerCase(),o="&lt;"+l,s=0,a=i.length;s<a;s++)h=i[s],u=n[h.n],u&&!e.test(u)&&(o+=" "+h.v+"=&quot;<i>"+t(u)+"<\/i>&quot;");return c=n.style?n.style.cssText:"",c&&(o+=" style=&quot;<i>"+t(c.toLowerCase())+"<\/i>&quot;"),o+(r&&n.childNodes.length>0?"&gt;<em>"+f(t(String(n.innerHTML)),35)+"<\/em>&lt;/"+l+"&gt;":r?" /&gt;":"&gt;")}var t=Ext.util.Format.htmlEncode,f=Ext.util.Format.ellipsis,e=/^\s*$/,i=[{n:"id",v:"id"},{n:"className",v:"class"},{n:"name",v:"name"},{n:"type",v:"type"},{n:"src",v:"src"},{n:"href",v:"href"}],n=function(t){var i=!r(t),f;if(this.htmlNode=t,this.tagName=t.tagName.toLowerCase(),f={text:u(t,i),leaf:i,cls:"x-tree-noicon"},n.superclass.constructor.call(this,f),this.attributes.htmlNode=t,!i){this.on("expand",this.onExpand,this);this.on("collapse",this.onCollapse,this)}};return Ext.extend(n,Ext.tree.AsyncTreeNode,{cls:"x-tree-noicon",preventHScroll:!0,refresh:function(n){var t=!r(this.htmlNode);this.setText(u(this.htmlNode,t));n&&Ext.fly(this.ui.textNode).highlight()},onExpand:function(){!this.closeNode&&this.parentNode?this.closeNode=this.parentNode.insertBefore(new Ext.tree.TreeNode({text:"&lt;/"+this.tagName+"&gt;",cls:"x-tree-noicon"}),this.nextSibling):this.closeNode&&this.closeNode.ui.show()},onCollapse:function(){this.closeNode&&this.closeNode.ui.hide()},render:function(t){n.superclass.render.call(this,t)},highlightNode:function(){},highlight:function(){},frame:function(){this.htmlNode.style.border="1px solid #0000ff"},unframe:function(){this.htmlNode.style.border=""}}),n}()