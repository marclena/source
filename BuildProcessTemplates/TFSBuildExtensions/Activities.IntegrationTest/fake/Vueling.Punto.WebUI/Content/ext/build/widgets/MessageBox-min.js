Ext.MessageBox=function(){var t,n,a,h,l,u,f,e,o,i,s,v,c="",r=function(i){t.hide();Ext.callback(n.fn,n.scope||window,[i,s.dom.value],1)},y=function(){n&&n.cls&&t.el.removeClass(n.cls);e.reset()},w=function(i,r,u){n&&n.closable!==!1&&t.hide();u&&u.stopEvent()},p=function(n){var u=0,r;if(!n)return i.ok.hide(),i.cancel.hide(),i.yes.hide(),i.no.hide(),u;t.footer.dom.style.display="";for(r in i)typeof i[r]!="function"&&(n[r]?(i[r].show(),i[r].setText(typeof n[r]=="string"?n[r]:Ext.MessageBox.buttonText[r]),u+=i[r].el.getWidth()+15):i[r].hide());return u};return{getDialog:function(s){var c,v;return t||(t=new Ext.Window({autoCreate:!0,title:s,resizable:!1,constrain:!0,constrainHeader:!0,minimizable:!1,maximizable:!1,stateful:!1,modal:!0,shim:!0,buttonAlign:"center",width:400,height:100,minHeight:80,plain:!0,footer:!0,closable:!0,close:function(){n&&n.buttons&&n.buttons.no&&!n.buttons.cancel?r("no"):r("cancel")}}),i={},c=this.buttonText,i.ok=t.addButton(c.ok,r.createCallback("ok")),i.yes=t.addButton(c.yes,r.createCallback("yes")),i.no=t.addButton(c.no,r.createCallback("no")),i.cancel=t.addButton(c.cancel,r.createCallback("cancel")),i.ok.hideMode=i.yes.hideMode=i.no.hideMode=i.cancel.hideMode="offsets",t.render(document.body),t.getEl().addClass("x-window-dlg"),a=t.mask,h=t.body.createChild({html:'<div class="ext-mb-icon"><\/div><div class="ext-mb-content"><span class="ext-mb-text"><\/span><br /><input type="text" class="ext-mb-input" /><textarea class="ext-mb-textarea"><\/textarea><\/div>'}),o=Ext.get(h.dom.firstChild),v=h.dom.childNodes[1],l=Ext.get(v.firstChild),u=Ext.get(v.childNodes[2]),u.enableDisplayMode(),u.addKeyListener([10,13],function(){t.isVisible()&&n&&n.buttons&&(n.buttons.ok?r("ok"):n.buttons.yes&&r("yes"))}),f=Ext.get(v.childNodes[3]),f.enableDisplayMode(),e=new Ext.ProgressBar({renderTo:h}),h.createChild({cls:"x-clear"})),t},updateText:function(i){var u;t.isVisible()||n.width||t.setSize(this.maxWidth,100);l.update(i||"&#160;");var r=c!=""?o.getWidth()+o.getMargins("lr"):0,a=l.getWidth()+l.getMargins("lr"),f=t.getFrameWidth("lr"),h=t.body.getFrameWidth("lr");return Ext.isIE&&r>0&&(r+=3),u=Math.max(Math.min(n.width||r+a+f+h,this.maxWidth),Math.max(n.minWidth||this.minWidth,v||0)),n.prompt===!0&&s.setWidth(u-r-f-h),(n.progress===!0||n.wait===!0)&&e.setSize(u-r-f-h),t.setSize(u,"auto").center(),this},updateProgress:function(n,t,i){return e.updateProgress(n,t),i&&this.updateText(i),this},isVisible:function(){return t&&t.isVisible()},hide:function(){return this.isVisible()&&(t.hide(),y()),this},show:function(r){var o,l,h,c;this.isVisible()&&this.hide();n=r;o=this.getDialog(n.title||"&#160;");o.setTitle(n.title||"&#160;");l=n.closable!==!1&&n.progress!==!0&&n.wait!==!0;o.tools.close.setDisplayed(l);s=u;n.prompt=n.prompt||(n.multiline?!0:!1);n.prompt?n.multiline?(u.hide(),f.show(),f.setHeight(typeof n.multiline=="number"?n.multiline:this.defaultTextHeight),s=f):(u.show(),f.hide()):(u.hide(),f.hide());s.dom.value=n.value||"";n.prompt?o.focusEl=s:(h=n.buttons,c=null,h&&h.ok?c=i.ok:h&&h.yes&&(c=i.yes),c&&(o.focusEl=c));this.setIcon(n.icon);v=p(n.buttons);e.setVisible(n.progress===!0||n.wait===!0);this.updateProgress(0,n.progressText);this.updateText(n.msg);n.cls&&o.el.addClass(n.cls);o.proxyDrag=n.proxyDrag===!0;o.modal=n.modal!==!1;o.mask=n.modal!==!1?a:!1;o.isVisible()||(document.body.appendChild(t.el.dom),o.setAnimateTarget(n.animEl),o.show(n.animEl));o.on("show",function(){l===!0?o.keyMap.enable():o.keyMap.disable()});return n.wait===!0&&e.wait(n.waitConfig),this},setIcon:function(n){return n&&n!=""?(o.removeClass("x-hidden"),o.replaceClass(c,n),c=n):(o.replaceClass(c,"x-hidden"),c=""),this},progress:function(n,t,i){return this.show({title:n,msg:t,buttons:!1,progress:!0,closable:!1,minWidth:this.minProgressWidth,progressText:i}),this},wait:function(n,t,i){return this.show({title:t,msg:n,buttons:!1,closable:!1,wait:!0,modal:!0,minWidth:this.minProgressWidth,waitConfig:i}),this},alert:function(n,t,i,r){return this.show({title:n,msg:t,buttons:this.OK,fn:i,scope:r}),this},confirm:function(n,t,i,r){return this.show({title:n,msg:t,buttons:this.YESNO,fn:i,scope:r,icon:this.QUESTION}),this},prompt:function(n,t,i,r,u){return this.show({title:n,msg:t,buttons:this.OKCANCEL,fn:i,minWidth:250,scope:r,prompt:!0,multiline:u}),this},OK:{ok:!0},CANCEL:{cancel:!0},OKCANCEL:{ok:!0,cancel:!0},YESNO:{yes:!0,no:!0},YESNOCANCEL:{yes:!0,no:!0,cancel:!0},INFO:"ext-mb-info",WARNING:"ext-mb-warning",QUESTION:"ext-mb-question",ERROR:"ext-mb-error",defaultTextHeight:75,maxWidth:600,minWidth:100,minProgressWidth:250,buttonText:{ok:"OK",cancel:"Cancel",yes:"Yes",no:"No"}}}();Ext.Msg=Ext.MessageBox