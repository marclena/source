Ext.form.BasicForm=function(n,t){Ext.apply(this,t);this.items=new Ext.util.MixedCollection(!1,function(n){return n.id||(n.id=Ext.id())});this.addEvents("beforeaction","actionfailed","actioncomplete");n&&this.initEl(n);Ext.form.BasicForm.superclass.constructor.call(this)};Ext.extend(Ext.form.BasicForm,Ext.util.Observable,{timeout:30,activeAction:null,trackResetOnLoad:!1,initEl:function(n){this.el=Ext.get(n);this.id=this.el.id||Ext.id();this.el.on("submit",this.onSubmit,this);this.el.addClass("x-form")},getEl:function(){return this.el},onSubmit:function(n){n.stopEvent()},destroy:function(){this.items.each(function(n){Ext.destroy(n)});this.el&&(this.el.removeAllListeners(),this.el.remove());this.purgeListeners()},isValid:function(){var n=!0;return this.items.each(function(t){t.validate()||(n=!1)}),n},isDirty:function(){var n=!1;return this.items.each(function(t){if(t.isDirty())return n=!0,!1}),n},doAction:function(n,t){return typeof n=="string"&&(n=new Ext.form.Action.ACTION_TYPES[n](this,t)),this.fireEvent("beforeaction",this,n)!==!1&&(this.beforeAction(n),n.run.defer(100,n)),this},submit:function(n){return this.doAction("submit",n),this},load:function(n){return this.doAction("load",n),this},updateRecord:function(n){n.beginEdit();var t=n.fields;return t.each(function(t){var i=this.findField(t.name);i&&n.set(t.name,i.getValue())},this),n.endEdit(),this},loadRecord:function(n){return this.setValues(n.data),this},beforeAction:function(n){var t=n.options;t.waitMsg&&(this.waitMsgTarget===!0?this.el.mask(t.waitMsg,"x-mask-loading"):this.waitMsgTarget?(this.waitMsgTarget=Ext.get(this.waitMsgTarget),this.waitMsgTarget.mask(t.waitMsg,"x-mask-loading")):Ext.MessageBox.wait(t.waitMsg,t.waitTitle||this.waitTitle||"Please Wait..."))},afterAction:function(n,t){this.activeAction=null;var i=n.options;i.waitMsg&&(this.waitMsgTarget===!0?this.el.unmask():this.waitMsgTarget?this.waitMsgTarget.unmask():(Ext.MessageBox.updateProgress(1),Ext.MessageBox.hide()));t?(i.reset&&this.reset(),Ext.callback(i.success,i.scope,[this,n]),this.fireEvent("actioncomplete",this,n)):(Ext.callback(i.failure,i.scope,[this,n]),this.fireEvent("actionfailed",this,n))},findField:function(n){var t=this.items.get(n);return t||this.items.each(function(i){if(i.isFormField&&(i.dataIndex==n||i.id==n||i.getName()==n))return t=i,!1}),t||null},markInvalid:function(n){var t,f,r,u,e,i;if(n instanceof Array)for(t=0,f=n.length;t<f;t++)r=n[t],u=this.findField(r.id),u&&u.markInvalid(r.msg);else for(i in n)typeof n[i]!="function"&&(e=this.findField(i))&&e.markInvalid(n[i]);return this},setValues:function(n){var i,e,f,t,r,u;if(n instanceof Array)for(i=0,e=n.length;i<e;i++)f=n[i],t=this.findField(f.id),t&&(t.setValue(f.value),this.trackResetOnLoad&&(t.originalValue=t.getValue()));else for(u in n)typeof n[u]!="function"&&(r=this.findField(u))&&(r.setValue(n[u]),this.trackResetOnLoad&&(r.originalValue=r.getValue()));return this},getValues:function(n){var t=Ext.lib.Ajax.serializeForm(this.el.dom);return n===!0?t:Ext.urlDecode(t)},clearInvalid:function(){return this.items.each(function(n){n.clearInvalid()}),this},reset:function(){return this.items.each(function(n){n.reset()}),this},add:function(){return this.items.addAll(Array.prototype.slice.call(arguments,0)),this},remove:function(n){return this.items.remove(n),this},render:function(){return this.items.each(function(n){n.isFormField&&!n.rendered&&document.getElementById(n.id)&&n.applyToMarkup(n.id)}),this},applyToFields:function(n){return this.items.each(function(t){Ext.apply(t,n)}),this},applyIfToFields:function(n){return this.items.each(function(t){Ext.applyIf(t,n)}),this}});Ext.BasicForm=Ext.form.BasicForm