Ext.Template=function(n){var i=arguments,r,t,u;if(n instanceof Array)n=n.join("");else if(i.length>1){for(r=[],t=0,u=i.length;t<u;t++)typeof i[t]=="object"?Ext.apply(this,i[t]):r[r.length]=i[t];n=r.join("")}this.html=n;this.compiled&&this.compile()};Ext.Template.prototype={applyTemplate:function(n){if(this.compiled)return this.compiled(n);var i=this.disableFormats!==!0,t=Ext.util.Format,r=this,u=function(u,f,e,o){var h,s,c;if(e&&i){if(e.substr(0,5)=="this.")return r.call(e.substr(5),n[f],n);if(o){for(h=/^\s*['"](.*)["']\s*$/,o=o.split(","),s=0,c=o.length;s<c;s++)o[s]=o[s].replace(h,"$1");o=[n[f]].concat(o)}else o=[n[f]];return t[e].apply(t,o)}return n[f]!==undefined?n[f]:""};return this.html.replace(this.re,u)},set:function(n,t){return this.html=n,this.compiled=null,t&&this.compile(),this},disableFormats:!1,re:/\{([\w-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,compile:function(){var u=Ext.util.Format,r=this.disableFormats!==!0,t=Ext.isGecko?"+":",",i=function(n,i,u,f){return u&&r?(f=f?","+f:"",u.substr(0,5)!="this."?u="fm."+u+"(":(u='this.call("'+u.substr(5)+'", ',f=", values")):(f="",u="(values['"+i+"'] == undefined ? '' : "),"'"+t+u+"values['"+i+"']"+f+")"+t+"'"},n;return Ext.isGecko?n="this.compiled = function(values){ return '"+this.html.replace(/\\/g,"\\\\").replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,i)+"';};":(n=["this.compiled = function(values){ return ['"],n.push(this.html.replace(/\\/g,"\\\\").replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,i)),n.push("'].join('');};"),n=n.join("")),eval(n),this},call:function(n,t,i){return this[n](t,i)},insertFirst:function(n,t,i){return this.doInsert("afterBegin",n,t,i)},insertBefore:function(n,t,i){return this.doInsert("beforeBegin",n,t,i)},insertAfter:function(n,t,i){return this.doInsert("afterEnd",n,t,i)},append:function(n,t,i){return this.doInsert("beforeEnd",n,t,i)},doInsert:function(n,t,i,r){t=Ext.getDom(t);var u=Ext.DomHelper.insertHtml(n,t,this.applyTemplate(i));return r?Ext.get(u,!0):u},overwrite:function(n,t,i){return n=Ext.getDom(n),n.innerHTML=this.applyTemplate(t),i?Ext.get(n.firstChild,!0):n.firstChild}};Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate;Ext.DomHelper.Template=Ext.Template;Ext.Template.from=function(n,t){return n=Ext.getDom(n),new Ext.Template(n.value||n.innerHTML,t||"")}