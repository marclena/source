Ext.form.TriggerField=Ext.extend(Ext.form.TextField,{defaultAutoCreate:{tag:"input",type:"text",size:"16",autocomplete:"off"},hideTrigger:!1,autoSize:Ext.emptyFn,monitorTab:!0,deferHeight:!0,mimicing:!1,onResize:function(n,t){Ext.form.TriggerField.superclass.onResize.call(this,n,t);typeof n=="number"&&this.el.setWidth(this.adjustWidth("input",n-this.trigger.getWidth()));this.wrap.setWidth(this.el.getWidth()+this.trigger.getWidth())},adjustSize:Ext.BoxComponent.prototype.adjustSize,getResizeEl:function(){return this.wrap},getPositionEl:function(){return this.wrap},alignErrorIcon:function(){this.errorIcon.alignTo(this.wrap,"tl-tr",[2,0])},onRender:function(n,t){Ext.form.TriggerField.superclass.onRender.call(this,n,t);this.wrap=this.el.wrap({cls:"x-form-field-wrap"});this.trigger=this.wrap.createChild(this.triggerConfig||{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-form-trigger "+this.triggerClass});this.hideTrigger&&this.trigger.setDisplayed(!1);this.initTrigger();this.width||this.wrap.setWidth(this.el.getWidth()+this.trigger.getWidth())},initTrigger:function(){this.trigger.on("click",this.onTriggerClick,this,{preventDefault:!0});this.trigger.addClassOnOver("x-form-trigger-over");this.trigger.addClassOnClick("x-form-trigger-click")},onDestroy:function(){this.trigger&&(this.trigger.removeAllListeners(),this.trigger.remove());this.wrap&&this.wrap.remove();Ext.form.TriggerField.superclass.onDestroy.call(this)},onFocus:function(){if(Ext.form.TriggerField.superclass.onFocus.call(this),!this.mimicing){this.wrap.addClass("x-trigger-wrap-focus");this.mimicing=!0;Ext.get(Ext.isIE?document.body:document).on("mousedown",this.mimicBlur,this,{delay:10});if(this.monitorTab)this.el.on("keydown",this.checkTab,this)}},checkTab:function(n){n.getKey()==n.TAB&&this.triggerBlur()},onBlur:function(){},mimicBlur:function(n){!this.wrap.contains(n.target)&&this.validateBlur(n)&&this.triggerBlur()},triggerBlur:function(){this.mimicing=!1;Ext.get(Ext.isIE?document.body:document).un("mousedown",this.mimicBlur);this.monitorTab&&this.el.un("keydown",this.checkTab,this);this.beforeBlur();this.wrap.removeClass("x-trigger-wrap-focus");Ext.form.TriggerField.superclass.onBlur.call(this)},beforeBlur:Ext.emptyFn,validateBlur:function(){return!0},onDisable:function(){Ext.form.TriggerField.superclass.onDisable.call(this);this.wrap&&this.wrap.addClass("x-item-disabled")},onEnable:function(){Ext.form.TriggerField.superclass.onEnable.call(this);this.wrap&&this.wrap.removeClass("x-item-disabled")},onShow:function(){this.wrap&&(this.wrap.dom.style.display="",this.wrap.dom.style.visibility="visible")},onHide:function(){this.wrap.dom.style.display="none"},onTriggerClick:Ext.emptyFn});Ext.form.TwinTriggerField=Ext.extend(Ext.form.TriggerField,{initComponent:function(){Ext.form.TwinTriggerField.superclass.initComponent.call(this);this.triggerConfig={tag:"span",cls:"x-form-twin-triggers",cn:[{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-form-trigger "+this.trigger1Class},{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-form-trigger "+this.trigger2Class}]}},getTrigger:function(n){return this.triggers[n]},initTrigger:function(){var t=this.trigger.select(".x-form-trigger",!0),n;this.wrap.setStyle("overflow","hidden");n=this;t.each(function(t,i,r){t.hide=function(){var t=n.wrap.getWidth();this.dom.style.display="none";n.el.setWidth(t-n.trigger.getWidth())};t.show=function(){var t=n.wrap.getWidth();this.dom.style.display="";n.el.setWidth(t-n.trigger.getWidth())};var u="Trigger"+(r+1);this["hide"+u]&&(t.dom.style.display="none");t.on("click",this["on"+u+"Click"],this,{preventDefault:!0});t.addClassOnOver("x-form-trigger-over");t.addClassOnClick("x-form-trigger-click")},this);this.triggers=t.elements},onTrigger1Click:Ext.emptyFn,onTrigger2Click:Ext.emptyFn});Ext.reg("trigger",Ext.form.TriggerField)