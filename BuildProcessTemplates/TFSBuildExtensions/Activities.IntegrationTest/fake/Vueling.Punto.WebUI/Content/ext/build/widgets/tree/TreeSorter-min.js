Ext.tree.TreeSorter=function(n,t){Ext.apply(this,t);n.on("beforechildrenrendered",this.doSort,this);n.on("append",this.updateSort,this);n.on("insert",this.updateSort,this);n.on("textchange",this.updateSortParent,this);var f=this.dir&&this.dir.toLowerCase()=="desc",i=this.property||"text",r=this.sortType,o=this.folderSort,e=this.caseSensitive===!0,u=this.leafAttr||"leaf";this.sortFn=function(n,t){if(o){if(n.attributes[u]&&!t.attributes[u])return 1;if(!n.attributes[u]&&t.attributes[u])return-1}var s=r?r(n):e?n.attributes[i]:n.attributes[i].toUpperCase(),h=r?r(t):e?t.attributes[i]:t.attributes[i].toUpperCase();return s<h?f?1:-1:s>h?f?-1:1:0}};Ext.tree.TreeSorter.prototype={doSort:function(n){n.sort(this.sortFn)},compareNodes:function(n,t){return n.text.toUpperCase()>t.text.toUpperCase()?1:-1},updateSort:function(n,t){t.childrenRendered&&this.doSort.defer(1,this,[t])},updateSortParent:function(n){var t=n.parentNode;t&&t.childrenRendered&&this.doSort.defer(1,this,[t])}}