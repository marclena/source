Ext.data.GroupingStore=Ext.extend(Ext.data.Store,{remoteGroup:!1,groupOnSort:!1,clearGrouping:function(){this.groupField=!1;this.remoteGroup?(this.baseParams&&delete this.baseParams.groupBy,this.reload()):(this.applySort(),this.fireEvent("datachanged",this))},groupBy:function(n,t){if(this.groupField!=n||t){if(this.groupField=n,this.remoteGroup&&(this.baseParams||(this.baseParams={}),this.baseParams.groupBy=n),this.groupOnSort){this.sort(n);return}if(this.remoteGroup)this.reload();else{var i=this.sortInfo||{};i.field!=n?this.applySort():this.sortData(n);this.fireEvent("datachanged",this)}}},applySort:function(){if(Ext.data.GroupingStore.superclass.applySort.call(this),!this.groupOnSort&&!this.remoteGroup){var n=this.getGroupState();n&&n!=this.sortInfo.field&&this.sortData(this.groupField)}},applyGrouping:function(n){return this.groupField!==!1?(this.groupBy(this.groupField,!0),!0):(n===!0&&this.fireEvent("datachanged",this),!1)},getGroupState:function(){return this.groupOnSort&&this.groupField!==!1?this.sortInfo?this.sortInfo.field:undefined:this.groupField}})