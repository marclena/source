Ext.menu.MenuMgr=function(){function a(){i={};t=new Ext.util.MixedCollection;Ext.getDoc().addKeyListener(27,function(){t.length>0&&r()})}function r(){if(t&&t.length>0){var n=t.clone();n.each(function(n){n.hide()})}}function e(n){t.remove(n);t.length<1&&(Ext.getDoc().un("mousedown",c),u=!1)}function o(n){var i=t.last();if(f=new Date,t.add(n),!u){Ext.getDoc().on("mousedown",c);u=!0}n.parentMenu?(n.getEl().setZIndex(parseInt(n.parentMenu.getEl().getStyle("z-index"),10)+3),n.parentMenu.activeChild=n):i&&i.isVisible()&&n.getEl().setZIndex(parseInt(i.getEl().getStyle("z-index"),10)+3)}function s(n){n.activeChild&&n.activeChild.hide();n.autoHideTimer&&(clearTimeout(n.autoHideTimer),delete n.autoHideTimer)}function h(n){var t=n.parentMenu;t||n.allowOtherMenus?t&&t.activeChild&&t.activeChild.hide():r()}function c(n){f.getElapsed()>50&&t.length>0&&!n.getTarget(".x-menu")&&r()}function l(t,i){var u,r,f;if(i)for(u=n[t.group],r=0,f=u.length;r<f;r++)u[r]!=t&&u[r].setChecked(!1)}var i,t,n={},u=!1,f=new Date;return{hideAll:function(){r()},register:function(t){i||a();i[t.id]=t;t.on("beforehide",s);t.on("hide",e);t.on("beforeshow",h);t.on("show",o);var r=t.group;if(r&&t.events.checkchange){n[r]||(n[r]=[]);n[r].push(t);t.on("checkchange",onCheck)}},get:function(n){return typeof n=="string"?i?i[n]:null:n.events?n:typeof n.length=="number"?new Ext.menu.Menu({items:n}):new Ext.menu.Menu(n)},unregister:function(t){delete i[t.id];t.un("beforehide",s);t.un("hide",e);t.un("beforeshow",h);t.un("show",o);var r=t.group;r&&t.events.checkchange&&(n[r].remove(t),t.un("checkchange",onCheck))},registerCheckable:function(t){var i=t.group;if(i){n[i]||(n[i]=[]);n[i].push(t);t.on("beforecheckchange",l)}},unregisterCheckable:function(t){var i=t.group;i&&(n[i].remove(t),t.un("beforecheckchange",l))},getCheckedItem:function(t){var r=n[t],i,u;if(r)for(i=0,u=r.length;i<u;i++)if(r[i].checked)return r[i];return null},setCheckedItem:function(t,i){var u=n[t],r,f;if(u)for(r=0,f=u.length;r<f;r++)u[r].id==i&&u[r].setChecked(!0);return null}}}()