$$=function(n){return Ext.getCmp(n).getValue()};editMember=function(n){document.location.href=params.EditUrl+n};Ext.onReady(function(){var r={FFid:undefined,Email:undefined,Name:undefined,Lastname:undefined,SecondLastname:undefined,NDoc:undefined,active:!1,update:function(){this.Email=$$("Email");this.FFid=$$("FFId");this.Name=$$("Name");this.Lastname=$$("Lastname");this.SecondLastname=$$("SecondLastname");this.NDoc=$$("NDoc");this.active=!0},updateDictionary:function(n){n.Email=this.Email;n.FFid=this.FFid;n.Name=this.Name;n.Lastname=this.Lastname;n.SecondLastname=this.SecondLastname;n.NDoc=this.NDoc;n.active=this.active},validate:function(){return $$("FFId").length==0&&$$("Email").length==0&&$$("Name").length==0&&$$("Lastname").length==0&&$$("SecondLastname").length==0&&$$("NDoc").length==0?!1:!0}},u=new Ext.FormPanel({el:"form",frame:!0,collapsible:!0,collapsed:!1,title:"Buscar Socio",bodyStyle:"padding:5px 5px 0",keys:[{key:Ext.EventObject.ENTER,fn:function(n,t){t.stopEvent();u.doSubmit()}}],items:[{layout:"column",items:[{columnWidth:.5,labelWidth:100,layout:"form",items:[{xtype:"textfield",fieldLabel:"Número&nbsp;de&nbsp;Socio",name:"FFId",id:"FFId",width:160,labelWidth:120,align:"right",tabIndex:1},{xtype:"textfield",fieldLabel:"Email",name:"Email",id:"Email",vtype:"email",width:160,tabIndex:3},{xtype:"textfield",fieldLabel:"Apellido",name:"Lastname",id:"Lastname",width:160,tabIndex:5}]},{columnWidth:.5,labelWidth:120,layout:"form",items:[{xtype:"textfield",fieldLabel:"Nº Documento",name:"NDoc",id:"NDoc",width:160,tabIndex:2},{xtype:"textfield",fieldLabel:"Nombre",name:"Name",id:"Name",width:160,tabIndex:4},{xtype:"textfield",fieldLabel:"Segundo Apellido",name:"SecondLastname",id:"SecondLastname",width:160,tabIndex:6}]}]}],buttons:[{text:"Buscar",tabIndex:6,handler:function(){u.doSubmit()}}],doSubmit:function(){return r.validate()?(r.update(),newSearchParams={start:0,limit:i},$("no-results").innerHTML=params.SearchingContent,n.load({params:newSearchParams})):Ext.Msg.alert("Error","Debe especificar al menos un parámetro de búsqueda"),!1}}),i=params.ResultsPerPage,n=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:params.UrlFetcher}),reader:new Ext.data.JsonReader({root:"data",totalProperty:"totalCount",id:"FFId",fields:["FFId","DocumentNumber","Email","Nombre","Apellido1","Apellido2"]}),baseParams:{query:"",limit:i},remoteSort:!0}),f,t;storeBeforeLoad=function(n,t){r.updateDictionary(t.params)};n.on("beforeload",storeBeforeLoad);n.on("load",function(n,i){i.length>0?($("no-results").style.display="none",t.show(),t.expand(!0)):($("no-results").innerHTML=params.NoContent,$("no-results").style.display="block",t.hide())});f=new Ext.grid.ColumnModel([{header:"",dataIndex:"Edit",renderer:function(n,t,i){return"<center><img src='"+params.UrlEditImage+"' alt='Ver Perfil' style='cursor:pointer;' onclick='editMember(\""+i.data.FFId+"\")' /><\/center>"},width:50,sortable:!1},{header:"FFId",dataIndex:"FFId",width:80,sortable:!0},{header:"Nº Documento",dataIndex:"DocumentNumber",width:80,sortable:!0},{header:"Email",dataIndex:"Email",width:120,sortable:!0},{header:"Nombre",dataIndex:"Nombre",width:120,sortable:!0},{header:"Apellido",dataIndex:"Apellido1",sortable:!0,width:120},{header:"Segundo Apelido",dataIndex:"Apellido2",width:120,sortable:!0}]);f.defaultSortable=!0;t=new Ext.grid.GridPanel({el:"grid",header:!0,loadMask:!0,title:"Resultados",height:370,store:n,cm:f,collapsible:!0,viewConfig:{forceFit:!0,scrollOffset:1},bbar:new Ext.PagingToolbar({pageSize:i,store:n,displayInfo:!0,items:["-"]})});u.render();t.render();t.hide();n.load({params:{start:0,limit:i}})})