Ext.Resizable=function(n,t){var o,s,i,h,r,l,c;for(this.el=Ext.get(n),t&&t.wrap&&(t.resizeChild=this.el,this.el=this.el.wrap(typeof t.wrap=="object"?t.wrap:{cls:"xresizable-wrap"}),this.el.id=this.el.dom.id=t.resizeChild.id+"-rzwrap",this.el.setStyle("overflow","hidden"),this.el.setPositioning(t.resizeChild.getPositioning()),t.resizeChild.clearPositioning(),t.width&&t.height||(o=t.resizeChild.getSize(),this.el.setSize(o.width,o.height)),t.pinned&&!t.adjustments&&(t.adjustments="auto")),this.proxy=this.el.createProxy({tag:"div",cls:"x-resizable-proxy",id:this.el.id+"-rzproxy"}),this.proxy.unselectable(),this.proxy.enableDisplayMode("block"),Ext.apply(this,t),this.pinned&&(this.disableTrackOver=!0,this.el.addClass("x-resizable-pinned")),s=this.el.getStyle("position"),s!="absolute"&&s!="fixed"&&this.el.setStyle("position","relative"),this.handles||(this.handles="s,e,se",this.multiDirectional&&(this.handles+=",n,w")),this.handles=="all"&&(this.handles="n s e w ne nw se sw"),i=this.handles.split(/\s*?[,;]\s*?| /),h=Ext.Resizable.positions,r=0,l=i.length;r<l;r++)i[r]&&h[i[r]]&&(c=h[i[r]],this[c]=new Ext.Resizable.Handle(this,c,this.disableTrackOver,this.transparent));if(this.corner=this.southeast,(this.handles.indexOf("n")!=-1||this.handles.indexOf("w")!=-1)&&(this.updateBox=!0),this.activeHandle=null,this.resizeChild&&(this.resizeChild=typeof this.resizeChild=="boolean"?Ext.get(this.el.dom.firstChild,!0):Ext.get(this.resizeChild,!0)),this.adjustments=="auto"){var e=this.resizeChild,u=this.west,a=this.east,f=this.north,i=this.south;e&&(u||f)&&(e.position("relative"),e.setLeft(u?u.el.getWidth():0),e.setTop(f?f.el.getHeight():0));this.adjustments=[(a?-a.el.getWidth():0)+(u?-u.el.getWidth():0),(f?-f.el.getHeight():0)+(i?-i.el.getHeight():0)-1]}this.draggable&&(this.dd=this.dynamic?this.el.initDD(null):this.el.initDDProxy(null,{dragElId:this.proxy.id}),this.dd.setHandleElId(this.resizeChild?this.resizeChild.id:this.el.id));this.addEvents("beforeresize","resize");this.width!==null&&this.height!==null?this.resizeTo(this.width,this.height):this.updateChildSize();Ext.isIE&&(this.el.dom.style.zoom=1);Ext.Resizable.superclass.constructor.call(this)};Ext.extend(Ext.Resizable,Ext.util.Observable,{resizeChild:!1,adjustments:[0,0],minWidth:5,minHeight:5,maxWidth:1e4,maxHeight:1e4,enabled:!0,animate:!1,duration:.35,dynamic:!1,handles:!1,multiDirectional:!1,disableTrackOver:!1,easing:"easeOutStrong",widthIncrement:0,heightIncrement:0,pinned:!1,width:null,height:null,preserveRatio:!1,transparent:!1,minX:0,minY:0,draggable:!1,resizeTo:function(n,t){this.el.setSize(n,t);this.updateChildSize();this.fireEvent("resize",this,n,t,null)},startSizing:function(n,t){if(this.fireEvent("beforeresize",this,n),this.enabled){if(!this.overlay){this.overlay=this.el.createProxy({tag:"div",cls:"x-resizable-overlay",html:"&#160;"},Ext.getBody());this.overlay.unselectable();this.overlay.enableDisplayMode("block");this.overlay.on("mousemove",this.onMouseMove,this);this.overlay.on("mouseup",this.onMouseUp,this)}if(this.overlay.setStyle("cursor",t.el.getStyle("cursor")),this.resizing=!0,this.startBox=this.el.getBox(),this.startPoint=n.getXY(),this.offsets=[this.startBox.x+this.startBox.width-this.startPoint[0],this.startBox.y+this.startBox.height-this.startPoint[1]],this.overlay.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0)),this.overlay.show(),this.constrainTo){var i=Ext.get(this.constrainTo);this.resizeRegion=i.getRegion().adjust(i.getFrameWidth("t"),i.getFrameWidth("l"),-i.getFrameWidth("b"),-i.getFrameWidth("r"))}this.proxy.setStyle("visibility","hidden");this.proxy.show();this.proxy.setBox(this.startBox);this.dynamic||this.proxy.setStyle("visibility","visible")}},onMouseDown:function(n,t){this.enabled&&(t.stopEvent(),this.activeHandle=n,this.startSizing(t,n))},onMouseUp:function(n){var t=this.resizeElement();this.resizing=!1;this.handleOut();this.overlay.hide();this.proxy.hide();this.fireEvent("resize",this,t.width,t.height,n)},updateChildSize:function(){var i;if(this.resizeChild){var n=this.el,r=this.resizeChild,t=this.adjustments;n.dom.offsetWidth&&(i=n.getSize(!0),r.setSize(i.width+t[0],i.height+t[1]));Ext.isIE&&setTimeout(function(){if(n.dom.offsetWidth){var i=n.getSize(!0);r.setSize(i.width+t[0],i.height+t[1])}},10)}},snap:function(n,t,i){if(!t||!n)return n;var u=n,r=n%t;return r>0&&(u=r>t/2?n+(t-r):n-r),Math.max(i,u)},resizeElement:function(){var n=this.proxy.getBox();return this.updateBox?this.el.setBox(n,!1,this.animate,this.duration,null,this.easing):this.el.setSize(n.width,n.height,this.animate,this.duration,null,this.easing),this.updateChildSize(),this.dynamic||this.proxy.hide(),n},constrain:function(n,t,i,r){return n-t<i?t=n-i:n-t>r&&(t=r-n),t},onMouseMove:function(n){var y,p,v,w;if(this.enabled)try{if(this.resizeRegion&&!this.resizeRegion.contains(n.getPoint()))return;var k=this.curSize||this.startBox,o=this.startBox.x,h=this.startBox.y,tt=o,it=h,t=k.width,i=k.height,f=t,e=i,c=this.minWidth,s=this.minHeight,a=this.maxWidth,l=this.maxHeight,g=this.widthIncrement,nt=this.heightIncrement,d=n.getXY(),r=-(this.startPoint[0]-Math.max(this.minX,d[0])),u=-(this.startPoint[1]-Math.max(this.minY,d[1])),b=this.activeHandle.position;switch(b){case"east":t+=r;t=Math.min(Math.max(c,t),a);break;case"south":i+=u;i=Math.min(Math.max(s,i),l);break;case"southeast":t+=r;i+=u;t=Math.min(Math.max(c,t),a);i=Math.min(Math.max(s,i),l);break;case"north":u=this.constrain(i,u,s,l);h+=u;i-=u;break;case"west":r=this.constrain(t,r,c,a);o+=r;t-=r;break;case"northeast":t+=r;t=Math.min(Math.max(c,t),a);u=this.constrain(i,u,s,l);h+=u;i-=u;break;case"northwest":r=this.constrain(t,r,c,a);u=this.constrain(i,u,s,l);h+=u;i-=u;o+=r;t-=r;break;case"southwest":r=this.constrain(t,r,c,a);i+=u;i=Math.min(Math.max(s,i),l);o+=r;t-=r}if(y=this.snap(t,g,c),p=this.snap(i,nt,s),y!=t||p!=i){switch(b){case"northeast":h-=p-i;break;case"north":h-=p-i;break;case"southwest":o-=y-t;break;case"west":o-=y-t;break;case"northwest":o-=y-t;h-=p-i}t=y;i=p}if(this.preserveRatio)switch(b){case"southeast":case"east":i=e*(t/f);i=Math.min(Math.max(s,i),l);t=f*(i/e);break;case"south":t=f*(i/e);t=Math.min(Math.max(c,t),a);i=e*(t/f);break;case"northeast":t=f*(i/e);t=Math.min(Math.max(c,t),a);i=e*(t/f);break;case"north":v=t;t=f*(i/e);t=Math.min(Math.max(c,t),a);i=e*(t/f);o+=(v-t)/2;break;case"southwest":i=e*(t/f);i=Math.min(Math.max(s,i),l);v=t;t=f*(i/e);o+=v-t;break;case"west":w=i;i=e*(t/f);i=Math.min(Math.max(s,i),l);h+=(w-i)/2;v=t;t=f*(i/e);o+=v-t;break;case"northwest":v=t;w=i;i=e*(t/f);i=Math.min(Math.max(s,i),l);t=f*(i/e);h+=w-i;o+=v-t}this.proxy.setBounds(o,h,t,i);this.dynamic&&this.resizeElement()}catch(n){}},handleOver:function(){this.enabled&&this.el.addClass("x-resizable-over")},handleOut:function(){this.resizing||this.el.removeClass("x-resizable-over")},getEl:function(){return this.el},getResizeChild:function(){return this.resizeChild},destroy:function(n){var t,i,r;this.proxy.remove();this.overlay&&(this.overlay.removeAllListeners(),this.overlay.remove());t=Ext.Resizable.positions;for(i in t)typeof t[i]!="function"&&this[t[i]]&&(r=this[t[i]],r.el.removeAllListeners(),r.el.remove());n&&(this.el.update(""),this.el.remove())},syncHandleHeight:function(){var n=this.el.getHeight(!0);this.west&&this.west.el.setHeight(n);this.east&&this.east.el.setHeight(n)}});Ext.Resizable.positions={n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"};Ext.Resizable.Handle=function(n,t,i,r){if(!this.tpl){var u=Ext.DomHelper.createTemplate({tag:"div",cls:"x-resizable-handle x-resizable-handle-{0}"});u.compile();Ext.Resizable.Handle.prototype.tpl=u}this.position=t;this.rz=n;this.el=this.tpl.append(n.el.dom,[this.position],!0);this.el.unselectable();r&&this.el.setOpacity(0);this.el.on("mousedown",this.onMouseDown,this);if(!i){this.el.on("mouseover",this.onMouseOver,this);this.el.on("mouseout",this.onMouseOut,this)}};Ext.Resizable.Handle.prototype={afterResize:function(){},onMouseDown:function(n){this.rz.onMouseDown(this,n)},onMouseOver:function(n){this.rz.handleOver(this,n)},onMouseOut:function(n){this.rz.handleOut(this,n)}}