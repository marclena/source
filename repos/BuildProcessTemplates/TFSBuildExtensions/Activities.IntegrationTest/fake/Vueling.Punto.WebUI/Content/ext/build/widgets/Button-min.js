Ext.Button=Ext.extend(Ext.Component,{hidden:!1,disabled:!1,pressed:!1,enableToggle:!1,menuAlign:"tl-bl?",type:"button",menuClassTarget:"tr",clickEvent:"click",handleMouseEvents:!0,tooltipType:"qtip",buttonSelector:"button:first",initComponent:function(){Ext.Button.superclass.initComponent.call(this);this.addEvents("click","toggle","mouseover","mouseout","menushow","menuhide","menutriggerover","menutriggerout");this.menu&&(this.menu=Ext.menu.MenuMgr.get(this.menu));typeof this.toggleGroup=="string"&&(this.enableToggle=!0)},onRender:function(n,t){var r,u,i;this.template||(Ext.Button.buttonTemplate||(Ext.Button.buttonTemplate=new Ext.Template('<table border="0" cellpadding="0" cellspacing="0" class="x-btn-wrap"><tbody><tr>','<td class="x-btn-left"><i>&#160;<\/i><\/td><td class="x-btn-center"><em unselectable="on"><button class="x-btn-text" type="{1}">{0}<\/button><\/em><\/td><td class="x-btn-right"><i>&#160;<\/i><\/td>',"<\/tr><\/tbody><\/table>")),this.template=Ext.Button.buttonTemplate);u=[this.text||"&#160;",this.type];r=t?this.template.insertBefore(t,u,!0):this.template.append(n,u,!0);i=r.child(this.buttonSelector);i.on("focus",this.onFocus,this);i.on("blur",this.onBlur,this);this.initButtonEl(r,i);this.menu&&this.el.child(this.menuClassTarget).addClass("x-btn-with-menu");Ext.ButtonToggleMgr.register(this)},initButtonEl:function(n,t){if(this.el=n,n.addClass("x-btn"),this.icon&&t.setStyle("background-image","url("+this.icon+")"),this.iconCls&&(t.addClass(this.iconCls),this.cls||n.addClass(this.text?"x-btn-text-icon":"x-btn-icon")),this.tabIndex!==undefined&&(t.dom.tabIndex=this.tabIndex),this.tooltip&&(typeof this.tooltip=="object"?Ext.QuickTips.register(Ext.apply({target:t.id},this.tooltip)):t.dom[this.tooltipType]=this.tooltip),this.pressed&&this.el.addClass("x-btn-pressed"),this.handleMouseEvents){n.on("mouseover",this.onMouseOver,this);n.on("mousedown",this.onMouseDown,this)}if(this.menu){this.menu.on("show",this.onMenuShow,this);this.menu.on("hide",this.onMenuHide,this)}if(this.id&&(this.el.dom.id=this.el.id=this.id),this.repeat){var i=new Ext.util.ClickRepeater(n,typeof this.repeat=="object"?this.repeat:{});i.on("click",this.onClick,this)}n.on(this.clickEvent,this.onClick,this)},afterRender:function(){Ext.Button.superclass.afterRender.call(this);Ext.isIE6?this.autoWidth.defer(1,this):this.autoWidth()},setIconClass:function(n){this.el&&this.el.child(this.buttonSelector).replaceClass(this.iconCls,n);this.iconCls=n},beforeDestroy:function(){if(this.rendered){var n=this.el.child(this.buttonSelector);n&&n.removeAllListeners()}this.menu&&Ext.destroy(this.menu)},onDestroy:function(){this.rendered&&Ext.ButtonToggleMgr.unregister(this)},autoWidth:function(){if(this.el){if(this.el.setWidth("auto"),Ext.isIE7&&Ext.isStrict){var n=this.el.child(this.buttonSelector);n&&n.getWidth()>20&&(n.clip(),n.setWidth(Ext.util.TextMetrics.measure(n,this.text).width+n.getFrameWidth("lr")))}this.minWidth&&this.el.getWidth()<this.minWidth&&this.el.setWidth(this.minWidth)}},setHandler:function(n,t){this.handler=n;this.scope=t},setText:function(n){this.text=n;this.el&&this.el.child("td.x-btn-center "+this.buttonSelector).update(n);this.autoWidth()},getText:function(){return this.text},toggle:function(n){n=n===undefined?!this.pressed:n;n!=this.pressed&&(n?(this.el.addClass("x-btn-pressed"),this.pressed=!0,this.fireEvent("toggle",this,!0)):(this.el.removeClass("x-btn-pressed"),this.pressed=!1,this.fireEvent("toggle",this,!1)),this.toggleHandler&&this.toggleHandler.call(this.scope||this,this,n))},focus:function(){this.el.child(this.buttonSelector).focus()},onDisable:function(){this.el&&(Ext.isIE6&&this.text||this.el.addClass(this.disabledClass),this.el.dom.disabled=!0);this.disabled=!0},onEnable:function(){this.el&&(Ext.isIE6&&this.text||this.el.removeClass(this.disabledClass),this.el.dom.disabled=!1);this.disabled=!1},showMenu:function(){return this.menu&&this.menu.show(this.el,this.menuAlign),this},hideMenu:function(){return this.menu&&this.menu.hide(),this},hasVisibleMenu:function(){return this.menu&&this.menu.isVisible()},onClick:function(n){(n&&n.preventDefault(),n.button==0)&&(this.disabled||(this.enableToggle&&(this.allowDepress!==!1||!this.pressed)&&this.toggle(),!this.menu||this.menu.isVisible()||this.ignoreNextClick||this.showMenu(),this.fireEvent("click",this,n),this.handler&&this.handler.call(this.scope||this,this,n)))},isMenuTriggerOver:function(n,t){return this.menu&&!t},isMenuTriggerOut:function(n,t){return this.menu&&!t},onMouseOver:function(n){if(!this.disabled){var t=n.within(this.el,!0);if(!t){this.el.addClass("x-btn-over");Ext.getDoc().on("mouseover",this.monitorMouseOver,this);this.fireEvent("mouseover",this,n)}this.isMenuTriggerOver(n,t)&&this.fireEvent("menutriggerover",this,this.menu,n)}},monitorMouseOver:function(n){if(n.target!=this.el.dom&&!n.within(this.el)){Ext.getDoc().un("mouseover",this.monitorMouseOver,this);this.onMouseOut(n)}},onMouseOut:function(n){var t=n.within(this.el)&&n.target!=this.el.dom;this.el.removeClass("x-btn-over");this.fireEvent("mouseout",this,n);this.isMenuTriggerOut(n,t)&&this.fireEvent("menutriggerout",this,this.menu,n)},onFocus:function(){this.disabled||this.el.addClass("x-btn-focus")},onBlur:function(){this.el.removeClass("x-btn-focus")},getClickEl:function(){return this.el},onMouseDown:function(n){if(!this.disabled&&n.button==0){this.getClickEl(n).addClass("x-btn-click");Ext.getDoc().on("mouseup",this.onMouseUp,this)}},onMouseUp:function(n){n.button==0&&(this.getClickEl(n,!0).removeClass("x-btn-click"),Ext.getDoc().un("mouseup",this.onMouseUp,this))},onMenuShow:function(){this.ignoreNextClick=0;this.el.addClass("x-btn-menu-active");this.fireEvent("menushow",this,this.menu)},onMenuHide:function(){this.el.removeClass("x-btn-menu-active");this.ignoreNextClick=this.restoreClick.defer(250,this);this.fireEvent("menuhide",this,this.menu)},restoreClick:function(){this.ignoreNextClick=0}});Ext.reg("button",Ext.Button);Ext.ButtonToggleMgr=function(){function t(t,i){var u,r,f;if(i)for(u=n[t.toggleGroup],r=0,f=u.length;r<f;r++)u[r]!=t&&u[r].toggle(!1)}var n={};return{register:function(i){if(i.toggleGroup){var r=n[i.toggleGroup];r||(r=n[i.toggleGroup]=[]);r.push(i);i.on("toggle",t)}},unregister:function(i){if(i.toggleGroup){var r=n[i.toggleGroup];r&&(r.remove(i),i.un("toggle",t))}}}}()