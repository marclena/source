Ext.form.Field=Ext.extend(Ext.BoxComponent,{invalidClass:"x-form-invalid",invalidText:"The value in this field is invalid",focusClass:"x-form-focus",validationEvent:"keyup",validateOnBlur:!0,validationDelay:250,defaultAutoCreate:{tag:"input",type:"text",size:"20",autocomplete:"off"},fieldClass:"x-form-field",msgTarget:"qtip",msgFx:"normal",readOnly:!1,disabled:!1,isFormField:!0,hasFocus:!1,initComponent:function(){Ext.form.Field.superclass.initComponent.call(this);this.addEvents("focus","blur","specialkey","change","invalid","valid")},getName:function(){return this.rendered&&this.el.dom.name?this.el.dom.name:this.hiddenName||""},onRender:function(n,t){var i,r;Ext.form.Field.superclass.onRender.call(this,n,t);this.el||(i=this.getAutoCreate(),i.name||(i.name=this.name||this.id),this.inputType&&(i.type=this.inputType),this.el=n.createChild(i,t));r=this.el.dom.type;r&&(r=="password"&&(r="text"),this.el.addClass("x-form-"+r));this.readOnly&&(this.el.dom.readOnly=!0);this.tabIndex!==undefined&&this.el.dom.setAttribute("tabIndex",this.tabIndex);this.el.addClass([this.fieldClass,this.cls]);this.initValue()},initValue:function(){this.value!==undefined?this.setValue(this.value):this.el.dom.value.length>0&&this.setValue(this.el.dom.value)},isDirty:function(){return this.disabled?!1:String(this.getValue())!==String(this.originalValue)},afterRender:function(){Ext.form.Field.superclass.afterRender.call(this);this.initEvents()},fireKey:function(n){n.isSpecialKey()&&this.fireEvent("specialkey",this,n)},reset:function(){this.setValue(this.originalValue);this.clearInvalid()},initEvents:function(){this.el.on(Ext.isIE?"keydown":"keypress",this.fireKey,this);this.el.on("focus",this.onFocus,this);this.el.on("blur",this.onBlur,this);this.originalValue=this.getValue()},onFocus:function(){!Ext.isOpera&&this.focusClass&&this.el.addClass(this.focusClass);this.hasFocus||(this.hasFocus=!0,this.startValue=this.getValue(),this.fireEvent("focus",this))},beforeBlur:Ext.emptyFn,onBlur:function(){this.beforeBlur();!Ext.isOpera&&this.focusClass&&this.el.removeClass(this.focusClass);this.hasFocus=!1;this.validationEvent!==!1&&this.validateOnBlur&&this.validationEvent!="blur"&&this.validate();var n=this.getValue();String(n)!==String(this.startValue)&&this.fireEvent("change",this,n,this.startValue);this.fireEvent("blur",this)},isValid:function(n){var t,i;return this.disabled?!0:(t=this.preventMark,this.preventMark=n===!0,i=this.validateValue(this.processValue(this.getRawValue())),this.preventMark=t,i)},validate:function(){return this.disabled||this.validateValue(this.processValue(this.getRawValue()))?(this.clearInvalid(),!0):!1},processValue:function(n){return n},validateValue:function(){return!0},markInvalid:function(n){var t,i;if(this.rendered&&!this.preventMark){this.el.addClass(this.invalidClass);n=n||this.invalidText;switch(this.msgTarget){case"qtip":this.el.dom.qtip=n;this.el.dom.qclass="x-form-invalid-tip";Ext.QuickTips&&Ext.QuickTips.enable();break;case"title":this.el.dom.title=n;break;case"under":this.errorEl||(t=this.el.findParent(".x-form-element",5,!0),this.errorEl=t.createChild({cls:"x-form-invalid-msg"}),this.errorEl.setWidth(t.getWidth(!0)-20));this.errorEl.update(n);Ext.form.Field.msgFx[this.msgFx].show(this.errorEl,this);break;case"side":this.errorIcon||(t=this.el.findParent(".x-form-element",5,!0),this.errorIcon=t.createChild({cls:"x-form-invalid-icon"}));this.alignErrorIcon();this.errorIcon.dom.qtip=n;this.errorIcon.dom.qclass="x-form-invalid-tip";this.errorIcon.show();this.on("resize",this.alignErrorIcon,this);break;default:i=Ext.getDom(this.msgTarget);i.innerHTML=n;i.style.display=this.msgDisplay}this.fireEvent("invalid",this,n)}},alignErrorIcon:function(){this.errorIcon.alignTo(this.el,"tl-tr",[2,0])},clearInvalid:function(){if(this.rendered&&!this.preventMark){this.el.removeClass(this.invalidClass);switch(this.msgTarget){case"qtip":this.el.dom.qtip="";break;case"title":this.el.dom.title="";break;case"under":this.errorEl&&Ext.form.Field.msgFx[this.msgFx].hide(this.errorEl,this);break;case"side":this.errorIcon&&(this.errorIcon.dom.qtip="",this.errorIcon.hide(),this.un("resize",this.alignErrorIcon,this));break;default:var n=Ext.getDom(this.msgTarget);n.innerHTML="";n.style.display="none"}this.fireEvent("valid",this)}},getRawValue:function(){var n=this.rendered?this.el.getValue():Ext.value(this.value,"");return n===this.emptyText&&(n=""),n},getValue:function(){if(!this.rendered)return this.value;var n=this.el.getValue();return(n===this.emptyText||n===undefined)&&(n=""),n},setRawValue:function(n){return this.el.dom.value=n===null||n===undefined?"":n},setValue:function(n){this.value=n;this.rendered&&(this.el.dom.value=n===null||n===undefined?"":n,this.validate())},adjustSize:function(n,t){var i=Ext.form.Field.superclass.adjustSize.call(this,n,t);return i.width=this.adjustWidth(this.el.dom.tagName,i.width),i},adjustWidth:function(n,t){if(n=n.toLowerCase(),typeof t=="number"&&!Ext.isSafari)if(Ext.isIE&&(n=="input"||n=="textarea")){if(n=="input"&&!Ext.isStrict)return t-3;if(n=="input"&&Ext.isStrict)return t-(Ext.isIE6?4:1);if(n="textarea"&&Ext.isStrict)return t-2}else if(Ext.isOpera&&Ext.isStrict){if(n=="input")return t+2;if(n="textarea")return t-2}return t}});Ext.form.Field.msgFx={normal:{show:function(n){n.setDisplayed("block")},hide:function(n){n.setDisplayed(!1).update("")}},slide:{show:function(n){n.slideIn("t",{stopFx:!0})},hide:function(n){n.slideOut("t",{stopFx:!0,useDisplay:!0})}},slideRight:{show:function(n,t){n.fixDisplay();n.alignTo(t.el,"tl-tr");n.slideIn("l",{stopFx:!0})},hide:function(n){n.slideOut("l",{stopFx:!0,useDisplay:!0})}}};Ext.reg("field",Ext.form.Field)