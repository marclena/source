function CargarGridTelerik(){$("#result").load(AJAX_GRID)}function GetFilterTelerik(){var n={};return n.PNR=$("#pnrInput").val()!=""?$("#pnrInput").val():null,n.EncryptedPNR=$("#encryptedPnrInput").val()!=""?$("#encryptedPnrInput").val():null,n.Email=$("#emailInput").val()!=""?$("#emailInput").val():null,n.CustomerNumber=$("#customerNumberInput").val()!=""?$("#customerNumberInput").val():null,n.PromotionCode=$("#promotionCodeInput").val()!=""?$("#promotionCodeInput").val():null,n.TransactionDateStart=replaceDate($("#transactionDateStartInput").val()),n.TransactionDateEnd=replaceDate($("#transactionDateEndInput").val()),n.Type=$("#typeSelect :selected").val()=="EMPTY"?null:$("#typeSelect :selected").val(),n}function Grid_onDataBinding(n){var t=GetFilterTelerik(),e=t.TransactionDateStart||"01-01-2014",f=t.TransactionDateEnd,u,r,i;f||(u=new Date(Date.now()),r=u.getDate().toString(),r.length===1&&(r="0"+r),i=(u.getMonth()+1).toString(),i.length===1&&(i="0"+i),console.log(i),f=r+"-"+i+"-"+u.getFullYear());console.log("start date: "+t.TransactionDateStart);console.log("end date: "+t.TransactionDateEnd);n.data={pnr:t.PNR,pnrEncrypted:t.EncryptedPNR,email:t.Email,customerNumber:t.CustomerNumber,type:t.Type,promotionCode:t.PromotionCode,dateStart:e,dateEnd:f}}function dblClickGrid(n){var i=n.currentTarget.innerHTML,r=i.split("<\/td>"),t=r[0].replace('<td style="display:none;">',"");t=parseInt(t);isNaN(t)||GetDetailOfTransactionById(parseInt(t))}function showDetails(n){var i;currentRow.reset();$("#details").hide();i=$(n.currentTarget);currentRow.setRow(i);var r=n.currentTarget.innerHTML,u=r.split("<\/td>"),t=u[0].replace('<td style="display:none;">',"");t=parseInt(t);isNaN(t)||GetDetailOfTransactionById(parseInt(t))}function GetDetailOfTransactionById(n){var t={id:n};$.ajax({type:"POST",url:"BuyPoints/GetDetailOfTransactionById",contentType:"application/json; charset=utf-8",data:JSON.stringify(t),dataType:"json",success:function(n){currentRow.highlight();$("#details").show();SetDetailOfTransaction(n)}})}function LoadDialogDetail(){$("#dialog-modal").dialog({height:"auto",width:"auto",resizable:!1,modal:!0})}function changeDate(n){var t=new Date(n.slice(6,10),n.slice(3,5)-1,n.slice(0,2));t.setMonth(n.slice(3,5)-2);var i=t.getDate()<10?"0"+t.getDate():t.getDate(),r=t.getMonth()<9?"0"+(t.getMonth()+1):t.getMonth()+1;return i+"/"+r+"/"+t.getFullYear()}function LoadTransactionDateStartInput(){var n=$("#transactionDateStartInput").val();$("#transactionDateStartInput").val(changeDate(n))}var CurrentRow=function(){this.row={};this.class=""},currentRow;CurrentRow.prototype.setRow=function(n){this.row=n;this.class=this.row.attr("class")};CurrentRow.prototype.highlight=function(){this.row instanceof jQuery&&(this.row.removeClass(),this.row.addClass("t-highlight"))};CurrentRow.prototype.reset=function(){this.row instanceof jQuery&&(this.row.removeClass("t-highlight"),this.row.addClass(this.class))};currentRow=new CurrentRow