(function(n){n.jgrid.extend({setColumns:function(t){return t=n.extend({top:0,left:0,width:200,height:"auto",dataheight:"auto",modal:!1,drag:!0,beforeShowForm:null,afterShowForm:null,afterSubmitForm:null,closeOnEscape:!0,ShrinkToFit:!1,jqModal:!1,saveicon:[!0,"left","ui-icon-disk"],closeicon:[!0,"left","ui-icon-close"],onClose:null,colnameview:!0,closeAfterSubmit:!0,updateAfterCheck:!1,recreateForm:!1},n.jgrid.col,t||{}),this.each(function(){var r=this,c,o,l,a;if(r.grid){var s=typeof t.beforeShowForm=="function"?!0:!1,h=typeof t.afterShowForm=="function"?!0:!1,v=typeof t.afterSubmitForm=="function"?!0:!1,f=r.p.id,u="ColTbl_"+f,e={themodal:"colmod"+f,modalhead:"colhd"+f,modalcontent:"colcnt"+f,scrollelm:u};if(t.recreateForm===!0&&n("#"+e.themodal).html()!=null&&n("#"+e.themodal).remove(),n("#"+e.themodal).html()!=null)s&&t.beforeShowForm(n("#"+u)),viewModal("#"+e.themodal,{gbox:"#gbox_"+f,jqm:t.jqModal,jqM:!1,modal:t.modal}),h&&t.afterShowForm(n("#"+u));else{for(c=isNaN(t.dataheight)?t.dataheight:t.dataheight+"px",o="<div id='"+u+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+c+";'>",o+="<table class='ColTable' cellspacing='1' cellpading='2' border='0'><tbody>",i=0;i<this.p.colNames.length;i++)r.p.colModel[i].hidedlg||(o+="<tr><td style='white-space: pre;'><input type='checkbox' style='margin-right:5px;' id='col_"+this.p.colModel[i].name+"' class='cbox' value='T' "+(this.p.colModel[i].hidden===!1?"checked":"")+"/><label for='col_"+this.p.colModel[i].name+"'>"+this.p.colNames[i]+(t.colnameview?" ("+this.p.colModel[i].name+")":"")+"<\/label><\/td><\/tr>");o+="<\/tbody><\/table><\/div>";l=t.updateAfterCheck?"":"<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+t.bSubmit+"<\/a>";a="<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+t.bCancel+"<\/a>";o+="<table border='0' class='EditTable' id='"+u+"_2'><tbody><tr style='display:block;height:3px;'><td><\/td><\/tr><tr><td class='DataTD ui-widget-content'><\/td><\/tr><tr><td class='ColButton EditButton'>"+l+"&#160;"+a+"<\/td><\/tr><\/tbody><\/table>";t.gbox="#gbox_"+f;createModal(e,o,t,"#gview_"+r.p.id,n("#gview_"+r.p.id)[0]);t.saveicon[0]==!0&&n("#dData","#"+u+"_2").addClass(t.saveicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+t.saveicon[2]+"'><\/span>");t.closeicon[0]==!0&&n("#eData","#"+u+"_2").addClass(t.closeicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+t.closeicon[2]+"'><\/span>");t.updateAfterCheck?n(":input","#"+u).click(function(){var i=this.id.substr(4);return i&&(this.checked?n(r).jqGrid("showCol",i):n(r).jqGrid("hideCol",i),t.ShrinkToFit===!0&&n(r).jqGrid("setGridWidth",r.grid.width-.001,!0)),this}):n("#dData","#"+u+"_2").click(function(){for(i=0;i<r.p.colModel.length;i++)if(!r.p.colModel[i].hidedlg){var o=r.p.colModel[i].name.replace(".","\\.");n("#col_"+o,"#"+u).attr("checked")?(n(r).jqGrid("showCol",r.p.colModel[i].name),n("#col_"+o,"#"+u).attr("defaultChecked",!0)):(n(r).jqGrid("hideCol",r.p.colModel[i].name),n("#col_"+o,"#"+u).attr("defaultChecked",""))}return t.ShrinkToFit===!0&&n(r).jqGrid("setGridWidth",r.grid.width-.001,!0),t.closeAfterSubmit&&hideModal("#"+e.themodal,{gb:"#gbox_"+f,jqm:t.jqModal,onClose:t.onClose}),v&&t.afterSubmitForm(n("#"+u)),!1});n("#eData","#"+u+"_2").click(function(){return hideModal("#"+e.themodal,{gb:"#gbox_"+f,jqm:t.jqModal,onClose:t.onClose}),!1});n("#dData, #eData","#"+u+"_2").hover(function(){n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")});s&&t.beforeShowForm(n("#"+u));viewModal("#"+e.themodal,{gbox:"#gbox_"+f,jqm:t.jqModal,jqM:!0,modal:t.modal});h&&t.afterShowForm(n("#"+u))}}})}})})(jQuery)